<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Tech on Xan&#39;s Blog</title>
    <link>https://xancoding.cn/tags/tech/</link>
    <description>Recent content in Tech on Xan&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 01 Aug 2023 18:42:11 +0800</lastBuildDate><atom:link href="https://xancoding.cn/tags/tech/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Usful Website</title>
      <link>https://xancoding.cn/posts/2023-08-01-18-42-11/</link>
      <pubDate>Tue, 01 Aug 2023 18:42:11 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2023-08-01-18-42-11/</guid>
      <description>&lt;h1 id=&#34;program&#34;&gt;Program&lt;/h1&gt;
&lt;h2 id=&#34;httpsdevdocsio&#34;&gt;&lt;a href=&#34;https://devdocs.io/&#34;&gt;https://devdocs.io/&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å„ç§æ–‡æ¡£&lt;/p&gt;
&lt;h2 id=&#34;new-bing--chatgpt--claude2&#34;&gt;New bing &amp;amp; ChatGPT &amp;amp; Claude2&lt;/h2&gt;
&lt;p&gt;å¤§é¢„è¨€æ¨¡å‹&lt;/p&gt;
&lt;h1 id=&#34;slidevhttpscnslidev&#34;&gt;&lt;a href=&#34;https://cn.sli.dev/&#34;&gt;Slidev&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;ä¸º&lt;strong&gt;å¼€å‘è€…&lt;/strong&gt;æ‰“é€ çš„&lt;strong&gt;æ¼”ç¤ºæ–‡ç¨¿&lt;/strong&gt;å·¥å…·Â &lt;/p&gt;
</description>
      <content:encoded><![CDATA[<h1 id="program">Program</h1>
<h2 id="httpsdevdocsio"><a href="https://devdocs.io/">https://devdocs.io/</a></h2>
<p>å„ç§æ–‡æ¡£</p>
<h2 id="new-bing--chatgpt--claude2">New bing &amp; ChatGPT &amp; Claude2</h2>
<p>å¤§é¢„è¨€æ¨¡å‹</p>
<h1 id="slidevhttpscnslidev"><a href="https://cn.sli.dev/">Slidev</a></h1>
<p>ä¸º<strong>å¼€å‘è€…</strong>æ‰“é€ çš„<strong>æ¼”ç¤ºæ–‡ç¨¿</strong>å·¥å…·Â </p>
]]></content:encoded>
    </item>
    
    <item>
      <title>AcademicGPT</title>
      <link>https://xancoding.cn/posts/2023-08-01-15-23-39/</link>
      <pubDate>Tue, 01 Aug 2023 15:23:40 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2023-08-01-15-23-39/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.meiguodizhi.com/&#34;&gt;ç¾å›½åœ°å€ç”Ÿæˆå™¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.krseo.com/zixun/1262.html&#34;&gt;# å¼€é€š OpenAI-ChatGPT Plus ä¼šå‘˜ç»‘å¡ä»˜è´¹æ•™ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mp.weixin.qq.com/s/ZzkhyxiH2lfOCNr_oEqY_Q&#34;&gt;# å­¦æœ¯ç§‘ç ”ä¸“ç”¨ChatGPTæ¥äº†ï¼&lt;/a&gt;i&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/binary-husky/gpt_academic&#34;&gt;GPT å­¦æœ¯ä¼˜åŒ– (GPT Academic)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id=&#34;å¦‚ä½•è¿è¡Œacademicgpt&#34;&gt;å¦‚ä½•è¿è¡ŒAcademicGPTï¼Ÿ&lt;/h1&gt;
&lt;p&gt;å…ˆä¸‹è½½ Dupayï¼Œç”³è¯·ä¸€å¼ è™šæ‹Ÿé“¶è¡Œå¡ã€‚åˆå› ä¸ºè™šæ‹Ÿé“¶è¡Œå¡éœ€è¦ä½¿ç”¨æ•°å­—è´§å¸å……å€¼ï¼Œæ‰€ä»¥è¿˜è¦ä¸‹è½½ æ¬§æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è½½å®Œæ¯•ä¸Šè¿°ä¸¤ä¸ª appåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ”¯ä»˜å®æˆ–å¾®ä¿¡è´­ä¹°æ•°å­—è´§å¸ï¼Œå†ç”¨æ•°å­—è´§å¸å……å€¼è™šæ‹Ÿé“¶è¡Œå¡ã€‚å……å€¼å®Œæ¯•åï¼Œè™šæ‹Ÿé“¶è¡Œå¡è¢«æ¿€æ´»ï¼Œå³å¯ç»‘å®š ChatGPT è´¦å·ï¼Œå°±å¯ä»¥ä½¿ç”¨ API å•¦ğŸ˜†&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°æ­¥éª¤å®Œæˆåï¼Œæˆ‘ä»¬å†æŒ‰ç…§ &lt;a href=&#34;https://github.com/binary-husky/gpt_academic#installation&#34;&gt;# Installation&lt;/a&gt; çš„æ“ä½œï¼Œä¸‹è½½é¡¹ç›®ï¼Œé…ç½® &lt;code&gt;API_KEY&lt;/code&gt;ï¼Œå®‰è£…ä¾èµ–ï¼Œå³å¯è¿è¡Œ &lt;code&gt;GPT_Academic&lt;/code&gt;&lt;/p&gt;
&lt;h1 id=&#34;å¦‚ä½•é…ç½®å¼€æœºè‡ªå¯åŠ¨&#34;&gt;å¦‚ä½•é…ç½®å¼€æœºè‡ªå¯åŠ¨ï¼Ÿ&lt;/h1&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ‰¹å¤„ç†è„šæœ¬ (start_python.bat)ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;@echo off
cd /d &amp;#34;path_to_script_directory&amp;#34;
start /min cmd /c &amp;#34;python main.py&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­ &lt;code&gt;path_to_script_directory&lt;/code&gt; å¤„å¡«å†™ä½ è¦è¿è¡Œçš„ Python ç¨‹åºæ‰€åœ¨ä½ç½®&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œå°†è¯¥æ‰¹å¤„ç†è„šæœ¬ç§»åŠ¨åˆ°å¼€æœºå¯åŠ¨æ–‡ä»¶å¤¹ï¼ŒæŒ‰ä¸‹Â &lt;code&gt;Win + R&lt;/code&gt;Â ç»„åˆé”®æ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥Â &lt;code&gt;shell:startup&lt;/code&gt;ï¼Œå³å¯æ‰“å¼€å¼€æœºå¯åŠ¨æ–‡ä»¶å¤¹ã€‚å°†æ‰¹å¤„ç†è„šæœ¬æ‹–æ”¾åˆ°æ‰“å¼€çš„æ–‡ä»¶å¤¹ä¸­å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæˆä¸Šè¿°æ“ä½œåï¼Œå³å¯å®ç°å¼€æœºè‡ªå¯åŠ¨&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŠŠ &lt;code&gt;config.py&lt;/code&gt; ä¸­çš„ &lt;code&gt;WEB_PORT&lt;/code&gt; é…ç½®æˆ &lt;code&gt;1024~65535&lt;/code&gt; ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œæ–¹ä¾¿å°†æµè§ˆå™¨ä¸­å°†å…¶æ”¶è—ä¸ºä¹¦ç­¾ï¼Œæ–¹ä¾¿è®¿é—®ã€‚&lt;/p&gt;
</description>
      <content:encoded><![CDATA[<ul>
<li><a href="https://www.meiguodizhi.com/">ç¾å›½åœ°å€ç”Ÿæˆå™¨</a></li>
<li><a href="https://www.krseo.com/zixun/1262.html"># å¼€é€š OpenAI-ChatGPT Plus ä¼šå‘˜ç»‘å¡ä»˜è´¹æ•™ç¨‹</a></li>
<li><a href="https://mp.weixin.qq.com/s/ZzkhyxiH2lfOCNr_oEqY_Q"># å­¦æœ¯ç§‘ç ”ä¸“ç”¨ChatGPTæ¥äº†ï¼</a>i</li>
<li><a href="https://github.com/binary-husky/gpt_academic">GPT å­¦æœ¯ä¼˜åŒ– (GPT Academic)</a></li>
</ul>
<hr>
<h1 id="å¦‚ä½•è¿è¡Œacademicgpt">å¦‚ä½•è¿è¡ŒAcademicGPTï¼Ÿ</h1>
<p>å…ˆä¸‹è½½ Dupayï¼Œç”³è¯·ä¸€å¼ è™šæ‹Ÿé“¶è¡Œå¡ã€‚åˆå› ä¸ºè™šæ‹Ÿé“¶è¡Œå¡éœ€è¦ä½¿ç”¨æ•°å­—è´§å¸å……å€¼ï¼Œæ‰€ä»¥è¿˜è¦ä¸‹è½½ æ¬§æ˜“ã€‚</p>
<p>ä¸‹è½½å®Œæ¯•ä¸Šè¿°ä¸¤ä¸ª appåï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ”¯ä»˜å®æˆ–å¾®ä¿¡è´­ä¹°æ•°å­—è´§å¸ï¼Œå†ç”¨æ•°å­—è´§å¸å……å€¼è™šæ‹Ÿé“¶è¡Œå¡ã€‚å……å€¼å®Œæ¯•åï¼Œè™šæ‹Ÿé“¶è¡Œå¡è¢«æ¿€æ´»ï¼Œå³å¯ç»‘å®š ChatGPT è´¦å·ï¼Œå°±å¯ä»¥ä½¿ç”¨ API å•¦ğŸ˜†</p>
<p>ä¸Šè¿°æ­¥éª¤å®Œæˆåï¼Œæˆ‘ä»¬å†æŒ‰ç…§ <a href="https://github.com/binary-husky/gpt_academic#installation"># Installation</a> çš„æ“ä½œï¼Œä¸‹è½½é¡¹ç›®ï¼Œé…ç½® <code>API_KEY</code>ï¼Œå®‰è£…ä¾èµ–ï¼Œå³å¯è¿è¡Œ <code>GPT_Academic</code></p>
<h1 id="å¦‚ä½•é…ç½®å¼€æœºè‡ªå¯åŠ¨">å¦‚ä½•é…ç½®å¼€æœºè‡ªå¯åŠ¨ï¼Ÿ</h1>
<p>åˆ›å»ºä¸€ä¸ªæ‰¹å¤„ç†è„šæœ¬ (start_python.bat)ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre tabindex="0"><code>@echo off
cd /d &#34;path_to_script_directory&#34;
start /min cmd /c &#34;python main.py&#34;
</code></pre><p>å…¶ä¸­ <code>path_to_script_directory</code> å¤„å¡«å†™ä½ è¦è¿è¡Œçš„ Python ç¨‹åºæ‰€åœ¨ä½ç½®</p>
<p>ç„¶åï¼Œå°†è¯¥æ‰¹å¤„ç†è„šæœ¬ç§»åŠ¨åˆ°å¼€æœºå¯åŠ¨æ–‡ä»¶å¤¹ï¼ŒæŒ‰ä¸‹Â <code>Win + R</code>Â ç»„åˆé”®æ‰“å¼€è¿è¡Œçª—å£ï¼Œè¾“å…¥Â <code>shell:startup</code>ï¼Œå³å¯æ‰“å¼€å¼€æœºå¯åŠ¨æ–‡ä»¶å¤¹ã€‚å°†æ‰¹å¤„ç†è„šæœ¬æ‹–æ”¾åˆ°æ‰“å¼€çš„æ–‡ä»¶å¤¹ä¸­å³å¯ã€‚</p>
<p>å®Œæˆä¸Šè¿°æ“ä½œåï¼Œå³å¯å®ç°å¼€æœºè‡ªå¯åŠ¨</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŠŠ <code>config.py</code> ä¸­çš„ <code>WEB_PORT</code> é…ç½®æˆ <code>1024~65535</code> ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œæ–¹ä¾¿å°†æµè§ˆå™¨ä¸­å°†å…¶æ”¶è—ä¸ºä¹¦ç­¾ï¼Œæ–¹ä¾¿è®¿é—®ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>C&#43;&#43; Project</title>
      <link>https://xancoding.cn/posts/2023-05-29-17-24-38/</link>
      <pubDate>Mon, 29 May 2023 17:24:38 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2023-05-29-17-24-38/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bilibili.com/video/BV1bd4y1D7on/?spm_id_from=333.788&amp;amp;vd_source=ae16ff6478eb15c1b87880540263910b&#34;&gt;# C/C++é¡¹ç›®å®æˆ˜ï¼ˆå‰ç½®çŸ¥è¯†ï¼‰&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å•ä¾‹æ¨¡å¼&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å·¥å‚æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.yuque.com/jackyao/ifeq8i/vyigt9?#%20%E3%80%8AC/C++%E5%88%B7%E9%A2%98%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E3%80%8B&#34;&gt;# C/C++åˆ·é¢˜å¸¸ç”¨æŠ€å·§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://www.bilibili.com/video/BV1XB4y1b7Fy/?spm_id_from=333.788&amp;amp;vd_source=ae16ff6478eb15c1b87880540263910b&#34;&gt;# C/C++é¡¹ç›®å®æˆ˜ï¼ˆæ•°æ®åº“ï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; &lt;a href=&#34;https://github.com/SYaoJun/CPPInterview/blob/master/Basic/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86.md&#34;&gt;# æ•°æ®åº“åŸç†&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;å¤§çº²&#34;&gt;å¤§çº²&lt;/h1&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-markdown&#34; data-lang=&#34;markdown&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;1.&lt;/span&gt; å¼€å‘ç¯å¢ƒ
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; Git     # ç‰ˆæœ¬ç®¡ç†å·¥å…·
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; Cmake   # ä»£ç æ„å»ºå·¥å…·ï¼Œç®¡ç†æºæ–‡ä»¶å’Œä¾èµ–
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; Gcc     # ç¼–è¯‘å™¨
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; Clion   # ç¼–è¾‘å™¨
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; Postman # æ¨¡æ‹Ÿå®¢æˆ·ç«¯
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; MySQL(navicat)   # åœ¨ docker Container ä¸­èµ·ä¸€ä¸ª mySQL æ•°æ®åº“ï¼Œå¹¶å¯ä»¥åœ¨ navicat ä¸­è¿›è¡Œå¯è§†åŒ–æ“ä½œ
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; Docker  # éƒ¨ç½²
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;1.&lt;/span&gt; ç›®å½•ç»“æ„
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; build   # é¡¹ç›®ç¼–è¯‘ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; debug 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; release 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; include # .h å¤´æ–‡ä»¶ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; src     # .cpp  æºæ–‡ä»¶ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; docs    # éœ€æ±‚è®¾è®¡æ–‡æ¡£
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; others
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;2.&lt;/span&gt; è®¾è®¡æ¨¡å¼
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; å•ä¾‹æ¨¡å¼
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; æ„é€ å‡½æ•°ç§æœ‰
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; å®ä¾‹åªæœ‰ä¸€ä»½
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; å·¥å‚æ¨¡å¼
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; ä¸€ä¸ªç±»åˆ«å¯¹åº”ä¸€ä¸ªå·¥å‚
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; ä¸éœ€è¦äº²è‡ªåˆ›å»ºå¯¹è±¡ï¼Œåªéœ€è¦ä»å·¥å‚ä¸­å»å–
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;3.&lt;/span&gt; æ•°æ®åº“
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; MySQL 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; å…³ç³»å‹
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; æ”¯æŒäº‹åŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; è¡Œé”
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; æ”¯æŒç§å­˜å‚¨å¼•æ“InnoDBï¼ŒMyISAMï¼ŒMemory
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;-&lt;/span&gt; B+æ ‘ç´¢å¼•
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;init-project&#34;&gt;init-project&lt;/h1&gt;
&lt;p&gt;
&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/29/64748c8482b68.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/29/64748c8482b68.png&#34; alt=&#34;3.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;build&#34;&gt;build&lt;/h2&gt;
&lt;p&gt;æ·»åŠ  &lt;code&gt;Release&lt;/code&gt; æ¨¡å—ï¼Œå¹¶å°† &lt;code&gt;Debug&lt;/code&gt; å’Œ &lt;code&gt;Release&lt;/code&gt; æ¨¡å—ç§»è‡³ &lt;code&gt;build&lt;/code&gt; ç›®å½•ä¸‹

&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/29/64748ec74bc6c.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/29/64748ec74bc6c.png&#34; alt=&#34;1.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;



&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/29/64748ec74bc31.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/29/64748ec74bc31.png&#34; alt=&#34;2.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;include&#34;&gt;include&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;User.h&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;//  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;// Created by 24398 on 2023/5/29.  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;//  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;#ifndef NEW_PROJECT_USER_H  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;#define NEW_PROJECT_USER_H  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;# include &amp;lt;string&amp;gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; User {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;private&lt;/span&gt;:  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;int&lt;/span&gt; age{};  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;std::string name{};  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;public&lt;/span&gt;:  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;std::string get_name();  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;User(std::string name_);  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;#endif &lt;/span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;//NEW_PROJECT_USER_H
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;src&#34;&gt;src&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;main.cpp&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&amp;lt;iostream&amp;gt;  &lt;/span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&amp;#34;User.h&amp;#34;  &lt;/span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;int&lt;/span&gt; main() {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;auto&lt;/span&gt; *user = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; User(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;John&amp;#34;&lt;/span&gt;);  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;std::cout &amp;lt;&amp;lt; user-&amp;gt;get_name() &amp;lt;&amp;lt; std::endl;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;User.cpp&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;//  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;// Created by 24398 on 2023/5/29.  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;//  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&amp;#34;User.h&amp;#34;  &lt;/span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;User::User(std::string name_): name(name_){};  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;std::string User::get_name() {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;name;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;cmakeliststxt&#34;&gt;CMakelists.txt&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Cmake&#34; data-lang=&#34;Cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;cmake_minimum_required&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;VERSION&lt;/span&gt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;3.25&lt;/span&gt;)  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;project&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;new_project&lt;/span&gt;)  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;# C++ 17  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;set&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;CMAKE_CXX_STANDARD&lt;/span&gt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;17&lt;/span&gt;)  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;# æ·»åŠ å¤´æ–‡ä»¶  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;include_directories&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;include&lt;/span&gt;)  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;# æ·»åŠ æºæ–‡ä»¶  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;aux_source_directory&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;./src&lt;/span&gt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;DIR_SRCS&lt;/span&gt;)  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;# æ‰€æœ‰éœ€è¦ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;add_executable&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;new_project&lt;/span&gt; ${DIR_SRCS})&lt;span style=&#34;color:#f00&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;include_directories([AFTER|BEFORE] [SYSTEM] directory1 [directory2 ...])&lt;/code&gt;&lt;br&gt;
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‘½ä»¤&lt;code&gt;include_directories(include)&lt;/code&gt;è¡¨ç¤ºä½ æƒ³å°†&lt;code&gt;include&lt;/code&gt;ç›®å½•æ·»åŠ åˆ°åŒ…å«è·¯å¾„ä¸­ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æºæ–‡ä»¶æ—¶ä¼šåœ¨&lt;code&gt;include&lt;/code&gt;ç›®å½•ä¸­æœç´¢å¤´æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;aux_source_directory(&amp;lt;dir&amp;gt; &amp;lt;variable&amp;gt;)&lt;/code&gt;&lt;br&gt;
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‘½ä»¤&lt;code&gt;aux_source_directory(src DIR_SRCS)&lt;/code&gt;è¡¨ç¤ºä½ æƒ³ä»&lt;code&gt;./src&lt;/code&gt;ç›®å½•æ”¶é›†æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬èµ‹å€¼ç»™å˜é‡&lt;code&gt;DIR_SRCS&lt;/code&gt;ã€‚&lt;/p&gt;
</description>
      <content:encoded><![CDATA[<ul>
<li><a href="https://www.bilibili.com/video/BV1bd4y1D7on/?spm_id_from=333.788&amp;vd_source=ae16ff6478eb15c1b87880540263910b"># C/C++é¡¹ç›®å®æˆ˜ï¼ˆå‰ç½®çŸ¥è¯†ï¼‰</a>
<ul>
<li><input disabled="" type="checkbox"> å•ä¾‹æ¨¡å¼</li>
<li><input disabled="" type="checkbox"> å·¥å‚æ¨¡å¼</li>
</ul>
</li>
<li><a href="https://www.yuque.com/jackyao/ifeq8i/vyigt9?#%20%E3%80%8AC/C++%E5%88%B7%E9%A2%98%E5%B8%B8%E7%94%A8%E6%8A%80%E5%B7%A7%E3%80%8B"># C/C++åˆ·é¢˜å¸¸ç”¨æŠ€å·§</a></li>
<li><input disabled="" type="checkbox"> <a href="https://www.bilibili.com/video/BV1XB4y1b7Fy/?spm_id_from=333.788&amp;vd_source=ae16ff6478eb15c1b87880540263910b"># C/C++é¡¹ç›®å®æˆ˜ï¼ˆæ•°æ®åº“ï¼‰</a></li>
<li><input disabled="" type="checkbox"> <a href="https://github.com/SYaoJun/CPPInterview/blob/master/Basic/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86.md"># æ•°æ®åº“åŸç†</a></li>
</ul>
<h1 id="å¤§çº²">å¤§çº²</h1>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">1.</span> å¼€å‘ç¯å¢ƒ
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> Git     # ç‰ˆæœ¬ç®¡ç†å·¥å…·
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> Cmake   # ä»£ç æ„å»ºå·¥å…·ï¼Œç®¡ç†æºæ–‡ä»¶å’Œä¾èµ–
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> Gcc     # ç¼–è¯‘å™¨
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> Clion   # ç¼–è¾‘å™¨
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> Postman # æ¨¡æ‹Ÿå®¢æˆ·ç«¯
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> MySQL(navicat)   # åœ¨ docker Container ä¸­èµ·ä¸€ä¸ª mySQL æ•°æ®åº“ï¼Œå¹¶å¯ä»¥åœ¨ navicat ä¸­è¿›è¡Œå¯è§†åŒ–æ“ä½œ
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> Docker  # éƒ¨ç½²
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">1.</span> ç›®å½•ç»“æ„
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> build   # é¡¹ç›®ç¼–è¯‘ç›®å½•
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> debug 
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> release 
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> include # .h å¤´æ–‡ä»¶ç›®å½•
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> src     # .cpp  æºæ–‡ä»¶ç›®å½•
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> docs    # éœ€æ±‚è®¾è®¡æ–‡æ¡£
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> others
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">2.</span> è®¾è®¡æ¨¡å¼
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> å•ä¾‹æ¨¡å¼
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> æ„é€ å‡½æ•°ç§æœ‰
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> å®ä¾‹åªæœ‰ä¸€ä»½
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> å·¥å‚æ¨¡å¼
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> ä¸€ä¸ªç±»åˆ«å¯¹åº”ä¸€ä¸ªå·¥å‚
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> ä¸éœ€è¦äº²è‡ªåˆ›å»ºå¯¹è±¡ï¼Œåªéœ€è¦ä»å·¥å‚ä¸­å»å–
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">3.</span> æ•°æ®åº“
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">-</span> MySQL 
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> å…³ç³»å‹
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> æ”¯æŒäº‹åŠ¡
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> è¡Œé”
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> æ”¯æŒç§å­˜å‚¨å¼•æ“InnoDBï¼ŒMyISAMï¼ŒMemory
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">-</span> B+æ ‘ç´¢å¼•
</span></span></code></pre></div><h1 id="init-project">init-project</h1>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/29/64748c8482b68.png">
<img src="https://bu.dusays.com/2023/05/29/64748c8482b68.png" alt="3.png"  />
</a>
</div>

</p>
<h2 id="build">build</h2>
<p>æ·»åŠ  <code>Release</code> æ¨¡å—ï¼Œå¹¶å°† <code>Debug</code> å’Œ <code>Release</code> æ¨¡å—ç§»è‡³ <code>build</code> ç›®å½•ä¸‹

<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/29/64748ec74bc6c.png">
<img src="https://bu.dusays.com/2023/05/29/64748ec74bc6c.png" alt="1.png"  />
</a>
</div>



<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/29/64748ec74bc31.png">
<img src="https://bu.dusays.com/2023/05/29/64748ec74bc31.png" alt="2.png"  />
</a>
</div>

</p>
<h2 id="include">include</h2>
<p><code>User.h</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#007f7f">//  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// Created by 24398 on 2023/5/29.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">//  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>  
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#ifndef NEW_PROJECT_USER_H  
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#define NEW_PROJECT_USER_H  
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"># include &lt;string&gt;  
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> User {  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">private</span>:  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> age{};  
</span></span><span style="display:flex;"><span>std::string name{};  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span>:  
</span></span><span style="display:flex;"><span>std::string get_name();  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>User(std::string name_);  
</span></span><span style="display:flex;"><span>};  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#endif </span><span style="color:#007f7f">//NEW_PROJECT_USER_H
</span></span></span></code></pre></div><h2 id="src">src</h2>
<p><code>main.cpp</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#include</span> <span style="color:#0f0;font-weight:bold">&lt;iostream&gt;  </span><span style="color:#0f0;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">#include</span> <span style="color:#0f0;font-weight:bold">&#34;User.h&#34;  </span><span style="color:#0f0;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span>  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> main() {  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">auto</span> *user = <span style="color:#fff;font-weight:bold">new</span> User(<span style="color:#0ff;font-weight:bold">&#34;John&#34;</span>);  
</span></span><span style="display:flex;"><span>std::cout &lt;&lt; user-&gt;get_name() &lt;&lt; std::endl;  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>User.cpp</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#007f7f">//  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">// Created by 24398 on 2023/5/29.  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f">//  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#0f0;font-weight:bold">#include</span> <span style="color:#0f0;font-weight:bold">&#34;User.h&#34;  </span><span style="color:#0f0;font-weight:bold">
</span></span></span><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold"></span>  
</span></span><span style="display:flex;"><span>User::User(std::string name_): name(name_){};  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>std::string User::get_name() {  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>-&gt;name;  
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="cmakeliststxt">CMakelists.txt</h2>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Cmake" data-lang="Cmake"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">cmake_minimum_required</span>(<span style="color:#0ff;font-weight:bold">VERSION</span> <span style="color:#0ff;font-weight:bold">3.25</span>)  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span><span style="color:#fff;font-weight:bold">project</span>(<span style="color:#0ff;font-weight:bold">new_project</span>)  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span>  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span><span style="color:#007f7f"># C++ 17  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">set</span>(<span style="color:#0ff;font-weight:bold">CMAKE_CXX_STANDARD</span> <span style="color:#0ff;font-weight:bold">17</span>)  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span><span style="color:#007f7f"># æ·»åŠ å¤´æ–‡ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">include_directories</span>(<span style="color:#0ff;font-weight:bold">include</span>)  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span>  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span><span style="color:#007f7f"># æ·»åŠ æºæ–‡ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">aux_source_directory</span>(<span style="color:#0ff;font-weight:bold">./src</span> <span style="color:#0ff;font-weight:bold">DIR_SRCS</span>)  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span>  <span style="color:#f00">
</span></span></span><span style="display:flex;"><span><span style="color:#f00"></span><span style="color:#007f7f"># æ‰€æœ‰éœ€è¦ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡ä»¶  
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">add_executable</span>(<span style="color:#0ff;font-weight:bold">new_project</span> ${DIR_SRCS})<span style="color:#f00">
</span></span></span></code></pre></div><p><code>include_directories([AFTER|BEFORE] [SYSTEM] directory1 [directory2 ...])</code><br>
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‘½ä»¤<code>include_directories(include)</code>è¡¨ç¤ºä½ æƒ³å°†<code>include</code>ç›®å½•æ·»åŠ åˆ°åŒ…å«è·¯å¾„ä¸­ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æºæ–‡ä»¶æ—¶ä¼šåœ¨<code>include</code>ç›®å½•ä¸­æœç´¢å¤´æ–‡ä»¶ã€‚</p>
<p><code>aux_source_directory(&lt;dir&gt; &lt;variable&gt;)</code><br>
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå‘½ä»¤<code>aux_source_directory(src DIR_SRCS)</code>è¡¨ç¤ºä½ æƒ³ä»<code>./src</code>ç›®å½•æ”¶é›†æ‰€æœ‰çš„æºæ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬èµ‹å€¼ç»™å˜é‡<code>DIR_SRCS</code>ã€‚</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>ICS-PA</title>
      <link>https://xancoding.cn/posts/2023-05-08-17-40-45/</link>
      <pubDate>Mon, 08 May 2023 17:40:45 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2023-05-08-17-40-45/</guid>
      <description>&lt;h1 id=&#34;pa0---ä¸–ç•Œè¯ç”Ÿçš„å‰å¤œ-å¼€å‘ç¯å¢ƒé…ç½®&#34;&gt;PA0 - ä¸–ç•Œè¯ç”Ÿçš„å‰å¤œ: å¼€å‘ç¯å¢ƒé…ç½®&lt;/h1&gt;
&lt;p&gt;åœ¨æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;apt-get install libsdl2-dev        # a library used later
apt-get install llvm llvm-dev      # llvm project, which contains libraries used later
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‘ç°ç¼ºå°‘ä¾èµ–&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼Œä»ç„¶æ²¡æœ‰æ•ˆæœ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;apt-get update
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ &lt;code&gt;RTFM&lt;/code&gt; åï¼Œå‘ç°æ˜¯é•œåƒæºçš„é—®é¢˜ï¼Œæ›´æ”¹é•œåƒæºåï¼Œå†æ¬¡è¿›è¡Œæ“ä½œï¼Œå‘ç°å¯ä»¥æˆåŠŸå®‰è£…&lt;/p&gt;
&lt;h1 id=&#34;pa1---å¼€å¤©è¾Ÿåœ°çš„ç¯‡ç« æœ€ç®€å•çš„è®¡ç®—æœº&#34;&gt;PA1 - å¼€å¤©è¾Ÿåœ°çš„ç¯‡ç« ï¼šæœ€ç®€å•çš„è®¡ç®—æœº&lt;/h1&gt;
&lt;h2 id=&#34;åœ¨å¼€å§‹æ„‰å¿«çš„paä¹‹æ—…ä¹‹å‰&#34;&gt;åœ¨å¼€å§‹æ„‰å¿«çš„PAä¹‹æ—…ä¹‹å‰&lt;/h2&gt;
&lt;p&gt;å¼€å¤´ç®€ç®€å•å•çš„è¿è¡Œä¸€ä¸ªå·²ç»å®Œæˆçš„ &lt;a href=&#34;https://github.com/NJU-ProjectN/fceux-am&#34;&gt;çº¢ç™½æœºæ¨¡æ‹Ÿå™¨é¡¹ç›®FCEUX&lt;/a&gt; ï¼Œå‰å‰ååå°±æäº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œå‡ºå¸ˆæœªæ·èº«å…ˆæ­»äº†å±äºæ˜¯ã€‚æœç„¶è¿˜æ˜¯æ²¡æœ‰ &lt;code&gt;RTFM&lt;/code&gt; çš„é”…ã€‚é—®é¢˜æ˜¯è¿™æ ·çš„ï¼šæˆ‘åœ¨ PA0 é‡Œé…ç½®çš„ç¯å¢ƒå˜é‡æ˜¯ &lt;code&gt;bash&lt;/code&gt; çš„ï¼Œè€Œä¹‹åæˆ‘åˆå°†æˆ‘çš„ &lt;code&gt;Shell&lt;/code&gt; ä» &lt;code&gt;bash&lt;/code&gt; æ›´æ¢åˆ°äº† &lt;code&gt;zsh&lt;/code&gt;ï¼Œå´æ²¡æœ‰é‡æ–°é…ç½®ç¯å¢ƒå˜é‡ã€‚è€Œ &lt;code&gt;Makefile&lt;/code&gt; ä¸­çš„ &lt;code&gt;AM_HOME&lt;/code&gt; å®é™…ä¸Šä½¿ç”¨äº† ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æˆ‘æ— æ³•å°†ç¨‹åºè·‘èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹æ³•ï¼šåœ¨ &lt;code&gt;.zshrc&lt;/code&gt; ä¸‹æ‰‹åŠ¨åŠ å…¥ç¯å¢ƒå˜é‡çš„é…ç½®&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;export NEMU_HOME=/home/xan/Desktop/ics2022/nemu                                                                                                                                     

export AM_HOME=/home/xan/Desktop/ics2022/abstract-machine
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åï¼Œåœ¨å‘½ä»¤è¡Œç•Œé¢è¿è¡Œå‘½ä»¤ &lt;code&gt;source ./.zshrc&lt;/code&gt; å³å¯&lt;/p&gt;
&lt;p&gt;æœ€åå†æ”¾ä¸€ä¸‹æˆåŠŸè¿è¡Œé©¬é‡Œå¥¥çš„ç•Œé¢ğŸ˜

&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/24/646d92399c89d.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/24/646d92399c89d.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;åœ¨é…ç½® &lt;code&gt;ccache&lt;/code&gt; çš„æ—¶å€™åˆç²—å¿ƒäº†ï¼Œ&lt;code&gt;.zshrc&lt;/code&gt; ä¸­çš„ &lt;code&gt;export PATH=&amp;quot;/usr/lib/ccache:$PATH&amp;quot;&lt;/code&gt;ï¼Œæ¥æ˜¯å†™æˆäº† &lt;code&gt;export PATH=&amp;quot;/usr/lib/cache:$PATH&lt;/code&gt;ï¼Œæ€ªä¸å¾—æ€»æ˜¯ä¸è¡Œã€‚å¥½åœ¨æŠ˜è…¾äº†ä¸€ä¸ªæ¥å°æ—¶åï¼Œç»ˆäºæˆåŠŸå‘ç°ï¼Œä¿®æ”¹åæœç„¶æˆåŠŸ

&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/24/646da78b2639c.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/24/646da78b2639c.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;rtfsc&#34;&gt;RTFSC&lt;/h2&gt;
&lt;p&gt;
&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/24/646e2c11edb4f.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/24/646e2c11edb4f.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;


åœ¨è§£å†³ä¸Šè¿°é—®é¢˜çš„æ—¶å€™ï¼Œå·äº†ä¸‹æ‡’ï¼Œç›´æ¥å»ç½‘ä¸ŠğŸ”æ€è·¯ï¼Œçœ‹åˆ«äººæ‰¾é—®é¢˜çœ‹æºç çš„è¿‡ç¨‹ï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºå¦™çš„ã€‚ä¸‹æ¬¡è¿˜å¾—æ˜¯è‡ªå·±å»è§£å†³ï¼Œè¿™æ ·æ‰ä¼šæœ‰æ›´å¤šçš„æ”¶è·ï¼Œç›¸ä¿¡è‡ªå·±èƒ½åšåˆ°çš„ğŸ’ªã€‚ä¸‹æ–‡æ˜¯å‡ºé—®é¢˜çš„åœ°æ–¹çš„ä¿®æ”¹&amp;amp;&amp;amp;è§£å†³å®Œåçš„ç•Œé¢ã€‚

&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/05/24/646e2bfe4d301.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/05/24/646e2bfe4d301.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;h2 id=&#34;åŸºç¡€è®¾æ–½&#34;&gt;åŸºç¡€è®¾æ–½&lt;/h2&gt;
&lt;p&gt;
&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/06/19/648fb9388e67c.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/06/19/648fb9388e67c.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;


å‰é¢å‡ ä¸ªè¿˜æ˜¯è®¤çœŸè‡ªå·±å®Œæˆçš„ï¼Œåé¢ç¢°åˆ°å›°éš¾åˆå¿ä¸ä½å»å‚è€ƒåˆ«äººçš„ä»£ç äº†ğŸ¤¡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®°äº 2023-06-26-00-15ï¼Œå‘ç°æ­£ç¡®çš„é£Ÿç”¨æ–¹å¼æ˜¯å…ˆçœ‹ä¹ é¢˜è¯¾è§†é¢‘ï¼Œå†åŒæ—¶å®Œæˆ ICS-PAï¼Œå…ˆæŠŠè§†é¢‘è¡¥ä¸Šï¼Œè¿‡ä¸¤å¤©å†æ¥ç»§ç»­åšğŸ¥°&lt;/li&gt;
&lt;li&gt;è®°äº 2023-06-29ï¼Œå†æ¬¡çœ‹äº†çœ‹å­¦æœ¯è¯šä¿¡ï¼Œä¸€å®šè¦è®°å¾—éµå®ˆï¼Œæ¯ä¸€æ¬¡çš„å·æ‡’éƒ½ä¼šåœ¨ä¹‹åè¿˜å›æ¥çš„ï¼Œåªæœ‰åšæŒç€è‡ªå·±å» debugï¼Œæ‰èƒ½å¾—åˆ°é”»ç‚¼ï¼Œä¸è¦å¿˜è®°è‡ªå·±ä¸ºä»€ä¹ˆè¦å»é€‰æ‹©åš ICS-PAğŸ¦¾&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¡¨è¾¾å¼æ±‚å€¼&#34;&gt;è¡¨è¾¾å¼æ±‚å€¼&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;2023-07-09-22-42ï¼Œå‰é¢å‡ å¤©é›¶é›¶æ€»æ€»çš„å»æŠŠè§†é¢‘è¯¾è¡¥äº†è¡¥ï¼Œé˜…è¯»äº†äº›è®¸å·¥å…·çš„æ‰‹å†Œï¼Œé…ç½®äº†æˆ‘çš„ &lt;code&gt;vim&lt;/code&gt;ï¼Œå­¦ä¹ æŒæ¡äº†ä¸€äº›å¥½ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å†™ä»£ç ä¹Ÿæ˜¯ä»Šå¤©æ˜¨å¤©ä¸¤å¤©ï¼Œæ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ï¼Œæ„Ÿè§‰è‡ªå·±åˆå¯ä»¥äº†ğŸ’ªæ˜å¤©ç»§ç»­å®Œå–„è¡¨è¾¾å¼ç”Ÿæˆå™¨ï¼Œç”Ÿæˆæµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨æµ‹è¯•ï¼Œå†æ ¹æ®æµ‹è¯•æ”¹ä¸€æ”¹æˆ‘çš„ä»£ç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2023/07/10/64ab70b86dd31.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2023/07/10/64ab70b86dd31.png&#34; alt=&#34;image.png&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;p&gt;å…³äºå¦‚ä½•æµ‹è¯•ä½ çš„ä»£ç è¿™ä¸€éƒ¨åˆ†ï¼Œæœ‰ä¸€äº›ç»†èŠ‚çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¦‚ä½•ä¿è¯è¡¨è¾¾å¼è¿›è¡Œæ— ç¬¦å·è¿ç®—?&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¦‚ä½•éšæœºæ’å…¥ç©ºæ ¼?&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¦‚ä½•ç”Ÿæˆé•¿è¡¨è¾¾å¼, åŒæ—¶ä¸ä¼šä½¿&lt;code&gt;buf&lt;/code&gt;æº¢å‡º?&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt; å¦‚ä½•è¿‡æ»¤æ±‚å€¼è¿‡ç¨‹ä¸­æœ‰é™¤0è¡Œä¸ºçš„è¡¨è¾¾å¼?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä¸­ï¼Œä¿è¯è¡¨è¾¾å¼è¿›è¡Œæ— ç¬¦å·è¿ç®—è¿™ä¸€éƒ¨åˆ†ï¼Œå³ä¿è¯è¿ç®—æ—¶ä¸å‡ºç°æ•´å½¢æº¢å‡ºæŒºéš¾å®ç°çš„ã€‚&lt;strong&gt;å°†è¡¨è¾¾å¼è®¡ç®—ç»“æœå‡ºç°çš„æ•´å½¢æº¢å‡ºæƒ…å†µï¼Œä»¥åŠå­è¡¨è¾¾å¼è®¡ç®—è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æº¢å‡ºæƒ…å†µç­›é€‰æ‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å…ˆæŠŠè¿™éƒ¨åˆ†æ”¾ä¸€æ”¾ï¼Œä¹‹åå†æ¥å¤„ç†å¤„ç†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2023-07-10 å¤§ä½“ä¸Šå·²ç»æ˜¯å®Œæˆäº†ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œçœ‹æ¥æˆ‘è¿˜æ˜¯å¯ä»¥åšæŒç€å†™ä¸‹å»çš„ä¹ˆhhğŸ¥° ä¸è¿‡å…ˆå»å­¦ä¸€å­¦ &lt;code&gt;pyG&lt;/code&gt;ï¼Œ&lt;code&gt;ICS-PA&lt;/code&gt; è¿‡æ®µæ—¶é—´å†åšã€‚ä¹‹å‰ä¸€ç›´æ˜¯åœ¨ &lt;code&gt;vim&lt;/code&gt; é‡Œå†™çš„ï¼Œä»Šå¤©ä¸‹åˆæŠŠ &lt;code&gt;VSCode&lt;/code&gt; çš„é…ç½®æ€»ç®—æ˜¯æå®Œäº†ï¼Œåœ¨ &lt;code&gt;VSCode&lt;/code&gt; é‡Œä¸‹è½½äº† &lt;code&gt;Vim&lt;/code&gt; æ’ä»¶ï¼Œä¸‹æ¬¡åšèµ·æ¥ä¹Ÿä¼šè½»æ¾è®¸å¤šäº†ï¼Œå°±æ˜¯æœ‰ç‚¹å¥‡æ€ªï¼Œ &lt;code&gt;engine_start()&lt;/code&gt; é‡Œé¢çš„ç¨‹åºä¸çŸ¥é“å¦‚é€šè¿‡GDBè°ƒè¯•ï¼Œç›®å‰è¿˜æ˜¯å¾—ç”¨ &lt;code&gt;make gdb&lt;/code&gt; æ¥è°ƒè¯•ã€‚æ„Ÿè§‰æœ€è¿‘å†™çš„æ¯”è¾ƒåƒåŠ›ï¼Œè¿˜æ˜¯å…ˆæ”¾æ”¾ï¼Œç­‰ä¹‹åæœ‰ç©ºäº†å†ç»§ç»­å†™å†™ã€‚ä¸‹é¢æ˜¯ &lt;code&gt;VSCode&lt;/code&gt; çš„éƒ¨åˆ†å‘½ä»¤ï¼š
&lt;ul&gt;
&lt;li&gt;F9 æ–­ç‚¹ï¼ŒF5 è°ƒè¯•&lt;/li&gt;
&lt;li&gt;Ctrl+Shift+Bï¼Œè¿è¡Œ &lt;code&gt;nemu&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
      <content:encoded><![CDATA[<h1 id="pa0---ä¸–ç•Œè¯ç”Ÿçš„å‰å¤œ-å¼€å‘ç¯å¢ƒé…ç½®">PA0 - ä¸–ç•Œè¯ç”Ÿçš„å‰å¤œ: å¼€å‘ç¯å¢ƒé…ç½®</h1>
<p>åœ¨æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼š</p>
<pre tabindex="0"><code>apt-get install libsdl2-dev        # a library used later
apt-get install llvm llvm-dev      # llvm project, which contains libraries used later
</code></pre><p>å‘ç°ç¼ºå°‘ä¾èµ–</p>
<p>æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼Œä»ç„¶æ²¡æœ‰æ•ˆæœ</p>
<pre tabindex="0"><code>apt-get update
</code></pre><p>åœ¨ <code>RTFM</code> åï¼Œå‘ç°æ˜¯é•œåƒæºçš„é—®é¢˜ï¼Œæ›´æ”¹é•œåƒæºåï¼Œå†æ¬¡è¿›è¡Œæ“ä½œï¼Œå‘ç°å¯ä»¥æˆåŠŸå®‰è£…</p>
<h1 id="pa1---å¼€å¤©è¾Ÿåœ°çš„ç¯‡ç« æœ€ç®€å•çš„è®¡ç®—æœº">PA1 - å¼€å¤©è¾Ÿåœ°çš„ç¯‡ç« ï¼šæœ€ç®€å•çš„è®¡ç®—æœº</h1>
<h2 id="åœ¨å¼€å§‹æ„‰å¿«çš„paä¹‹æ—…ä¹‹å‰">åœ¨å¼€å§‹æ„‰å¿«çš„PAä¹‹æ—…ä¹‹å‰</h2>
<p>å¼€å¤´ç®€ç®€å•å•çš„è¿è¡Œä¸€ä¸ªå·²ç»å®Œæˆçš„ <a href="https://github.com/NJU-ProjectN/fceux-am">çº¢ç™½æœºæ¨¡æ‹Ÿå™¨é¡¹ç›®FCEUX</a> ï¼Œå‰å‰ååå°±æäº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œå‡ºå¸ˆæœªæ·èº«å…ˆæ­»äº†å±äºæ˜¯ã€‚æœç„¶è¿˜æ˜¯æ²¡æœ‰ <code>RTFM</code> çš„é”…ã€‚é—®é¢˜æ˜¯è¿™æ ·çš„ï¼šæˆ‘åœ¨ PA0 é‡Œé…ç½®çš„ç¯å¢ƒå˜é‡æ˜¯ <code>bash</code> çš„ï¼Œè€Œä¹‹åæˆ‘åˆå°†æˆ‘çš„ <code>Shell</code> ä» <code>bash</code> æ›´æ¢åˆ°äº† <code>zsh</code>ï¼Œå´æ²¡æœ‰é‡æ–°é…ç½®ç¯å¢ƒå˜é‡ã€‚è€Œ <code>Makefile</code> ä¸­çš„ <code>AM_HOME</code> å®é™…ä¸Šä½¿ç”¨äº† ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æˆ‘æ— æ³•å°†ç¨‹åºè·‘èµ·æ¥ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼šåœ¨ <code>.zshrc</code> ä¸‹æ‰‹åŠ¨åŠ å…¥ç¯å¢ƒå˜é‡çš„é…ç½®</p>
<pre tabindex="0"><code>export NEMU_HOME=/home/xan/Desktop/ics2022/nemu                                                                                                                                     

export AM_HOME=/home/xan/Desktop/ics2022/abstract-machine
</code></pre><p>ç„¶åï¼Œåœ¨å‘½ä»¤è¡Œç•Œé¢è¿è¡Œå‘½ä»¤ <code>source ./.zshrc</code> å³å¯</p>
<p>æœ€åå†æ”¾ä¸€ä¸‹æˆåŠŸè¿è¡Œé©¬é‡Œå¥¥çš„ç•Œé¢ğŸ˜

<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/24/646d92399c89d.png">
<img src="https://bu.dusays.com/2023/05/24/646d92399c89d.png" alt="image.png"  />
</a>
</div>

</p>
<p>åœ¨é…ç½® <code>ccache</code> çš„æ—¶å€™åˆç²—å¿ƒäº†ï¼Œ<code>.zshrc</code> ä¸­çš„ <code>export PATH=&quot;/usr/lib/ccache:$PATH&quot;</code>ï¼Œæ¥æ˜¯å†™æˆäº† <code>export PATH=&quot;/usr/lib/cache:$PATH</code>ï¼Œæ€ªä¸å¾—æ€»æ˜¯ä¸è¡Œã€‚å¥½åœ¨æŠ˜è…¾äº†ä¸€ä¸ªæ¥å°æ—¶åï¼Œç»ˆäºæˆåŠŸå‘ç°ï¼Œä¿®æ”¹åæœç„¶æˆåŠŸ

<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/24/646da78b2639c.png">
<img src="https://bu.dusays.com/2023/05/24/646da78b2639c.png" alt="image.png"  />
</a>
</div>

</p>
<h2 id="rtfsc">RTFSC</h2>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/24/646e2c11edb4f.png">
<img src="https://bu.dusays.com/2023/05/24/646e2c11edb4f.png" alt="image.png"  />
</a>
</div>


åœ¨è§£å†³ä¸Šè¿°é—®é¢˜çš„æ—¶å€™ï¼Œå·äº†ä¸‹æ‡’ï¼Œç›´æ¥å»ç½‘ä¸ŠğŸ”æ€è·¯ï¼Œçœ‹åˆ«äººæ‰¾é—®é¢˜çœ‹æºç çš„è¿‡ç¨‹ï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºå¦™çš„ã€‚ä¸‹æ¬¡è¿˜å¾—æ˜¯è‡ªå·±å»è§£å†³ï¼Œè¿™æ ·æ‰ä¼šæœ‰æ›´å¤šçš„æ”¶è·ï¼Œç›¸ä¿¡è‡ªå·±èƒ½åšåˆ°çš„ğŸ’ªã€‚ä¸‹æ–‡æ˜¯å‡ºé—®é¢˜çš„åœ°æ–¹çš„ä¿®æ”¹&amp;&amp;è§£å†³å®Œåçš„ç•Œé¢ã€‚

<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/05/24/646e2bfe4d301.png">
<img src="https://bu.dusays.com/2023/05/24/646e2bfe4d301.png" alt="image.png"  />
</a>
</div>

</p>
<h2 id="åŸºç¡€è®¾æ–½">åŸºç¡€è®¾æ–½</h2>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/06/19/648fb9388e67c.png">
<img src="https://bu.dusays.com/2023/06/19/648fb9388e67c.png" alt="image.png"  />
</a>
</div>


å‰é¢å‡ ä¸ªè¿˜æ˜¯è®¤çœŸè‡ªå·±å®Œæˆçš„ï¼Œåé¢ç¢°åˆ°å›°éš¾åˆå¿ä¸ä½å»å‚è€ƒåˆ«äººçš„ä»£ç äº†ğŸ¤¡</p>
<ul>
<li>è®°äº 2023-06-26-00-15ï¼Œå‘ç°æ­£ç¡®çš„é£Ÿç”¨æ–¹å¼æ˜¯å…ˆçœ‹ä¹ é¢˜è¯¾è§†é¢‘ï¼Œå†åŒæ—¶å®Œæˆ ICS-PAï¼Œå…ˆæŠŠè§†é¢‘è¡¥ä¸Šï¼Œè¿‡ä¸¤å¤©å†æ¥ç»§ç»­åšğŸ¥°</li>
<li>è®°äº 2023-06-29ï¼Œå†æ¬¡çœ‹äº†çœ‹å­¦æœ¯è¯šä¿¡ï¼Œä¸€å®šè¦è®°å¾—éµå®ˆï¼Œæ¯ä¸€æ¬¡çš„å·æ‡’éƒ½ä¼šåœ¨ä¹‹åè¿˜å›æ¥çš„ï¼Œåªæœ‰åšæŒç€è‡ªå·±å» debugï¼Œæ‰èƒ½å¾—åˆ°é”»ç‚¼ï¼Œä¸è¦å¿˜è®°è‡ªå·±ä¸ºä»€ä¹ˆè¦å»é€‰æ‹©åš ICS-PAğŸ¦¾</li>
</ul>
<h2 id="è¡¨è¾¾å¼æ±‚å€¼">è¡¨è¾¾å¼æ±‚å€¼</h2>
<ul>
<li>2023-07-09-22-42ï¼Œå‰é¢å‡ å¤©é›¶é›¶æ€»æ€»çš„å»æŠŠè§†é¢‘è¯¾è¡¥äº†è¡¥ï¼Œé˜…è¯»äº†äº›è®¸å·¥å…·çš„æ‰‹å†Œï¼Œé…ç½®äº†æˆ‘çš„ <code>vim</code>ï¼Œå­¦ä¹ æŒæ¡äº†ä¸€äº›å¥½ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å†™ä»£ç ä¹Ÿæ˜¯ä»Šå¤©æ˜¨å¤©ä¸¤å¤©ï¼Œæ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ï¼Œæ„Ÿè§‰è‡ªå·±åˆå¯ä»¥äº†ğŸ’ªæ˜å¤©ç»§ç»­å®Œå–„è¡¨è¾¾å¼ç”Ÿæˆå™¨ï¼Œç”Ÿæˆæµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨æµ‹è¯•ï¼Œå†æ ¹æ®æµ‹è¯•æ”¹ä¸€æ”¹æˆ‘çš„ä»£ç </li>
</ul>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2023/07/10/64ab70b86dd31.png">
<img src="https://bu.dusays.com/2023/07/10/64ab70b86dd31.png" alt="image.png"  />
</a>
</div>

</p>
<p>å…³äºå¦‚ä½•æµ‹è¯•ä½ çš„ä»£ç è¿™ä¸€éƒ¨åˆ†ï¼Œæœ‰ä¸€äº›ç»†èŠ‚çš„é—®é¢˜ï¼š</p>
<ul>
<li><input disabled="" type="checkbox"> å¦‚ä½•ä¿è¯è¡¨è¾¾å¼è¿›è¡Œæ— ç¬¦å·è¿ç®—?</li>
<li><input checked="" disabled="" type="checkbox"> å¦‚ä½•éšæœºæ’å…¥ç©ºæ ¼?</li>
<li><input checked="" disabled="" type="checkbox"> å¦‚ä½•ç”Ÿæˆé•¿è¡¨è¾¾å¼, åŒæ—¶ä¸ä¼šä½¿<code>buf</code>æº¢å‡º?</li>
<li><input checked="" disabled="" type="checkbox"> å¦‚ä½•è¿‡æ»¤æ±‚å€¼è¿‡ç¨‹ä¸­æœ‰é™¤0è¡Œä¸ºçš„è¡¨è¾¾å¼?</li>
</ul>
<p>å…¶ä¸­ï¼Œä¿è¯è¡¨è¾¾å¼è¿›è¡Œæ— ç¬¦å·è¿ç®—è¿™ä¸€éƒ¨åˆ†ï¼Œå³ä¿è¯è¿ç®—æ—¶ä¸å‡ºç°æ•´å½¢æº¢å‡ºæŒºéš¾å®ç°çš„ã€‚<strong>å°†è¡¨è¾¾å¼è®¡ç®—ç»“æœå‡ºç°çš„æ•´å½¢æº¢å‡ºæƒ…å†µï¼Œä»¥åŠå­è¡¨è¾¾å¼è®¡ç®—è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æº¢å‡ºæƒ…å†µç­›é€‰æ‰</strong></p>
<p>æˆ‘å…ˆæŠŠè¿™éƒ¨åˆ†æ”¾ä¸€æ”¾ï¼Œä¹‹åå†æ¥å¤„ç†å¤„ç†</p>
<ul>
<li>2023-07-10 å¤§ä½“ä¸Šå·²ç»æ˜¯å®Œæˆäº†ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œçœ‹æ¥æˆ‘è¿˜æ˜¯å¯ä»¥åšæŒç€å†™ä¸‹å»çš„ä¹ˆhhğŸ¥° ä¸è¿‡å…ˆå»å­¦ä¸€å­¦ <code>pyG</code>ï¼Œ<code>ICS-PA</code> è¿‡æ®µæ—¶é—´å†åšã€‚ä¹‹å‰ä¸€ç›´æ˜¯åœ¨ <code>vim</code> é‡Œå†™çš„ï¼Œä»Šå¤©ä¸‹åˆæŠŠ <code>VSCode</code> çš„é…ç½®æ€»ç®—æ˜¯æå®Œäº†ï¼Œåœ¨ <code>VSCode</code> é‡Œä¸‹è½½äº† <code>Vim</code> æ’ä»¶ï¼Œä¸‹æ¬¡åšèµ·æ¥ä¹Ÿä¼šè½»æ¾è®¸å¤šäº†ï¼Œå°±æ˜¯æœ‰ç‚¹å¥‡æ€ªï¼Œ <code>engine_start()</code> é‡Œé¢çš„ç¨‹åºä¸çŸ¥é“å¦‚é€šè¿‡GDBè°ƒè¯•ï¼Œç›®å‰è¿˜æ˜¯å¾—ç”¨ <code>make gdb</code> æ¥è°ƒè¯•ã€‚æ„Ÿè§‰æœ€è¿‘å†™çš„æ¯”è¾ƒåƒåŠ›ï¼Œè¿˜æ˜¯å…ˆæ”¾æ”¾ï¼Œç­‰ä¹‹åæœ‰ç©ºäº†å†ç»§ç»­å†™å†™ã€‚ä¸‹é¢æ˜¯ <code>VSCode</code> çš„éƒ¨åˆ†å‘½ä»¤ï¼š
<ul>
<li>F9 æ–­ç‚¹ï¼ŒF5 è°ƒè¯•</li>
<li>Ctrl+Shift+Bï¼Œè¿è¡Œ <code>nemu</code></li>
</ul>
</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Blog</title>
      <link>https://xancoding.cn/posts/2023-04-30-09-43-31/</link>
      <pubDate>Sun, 30 Apr 2023 09:43:31 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2023-04-30-09-43-31/</guid>
      <description>&lt;h1 id=&#34;bloghttpsgithubcomxancodingxancodinggithubio&#34;&gt;&lt;a href=&#34;https://github.com/Xancoding/Xancoding.github.io&#34;&gt;Blog&lt;/a&gt;&lt;/h1&gt;
&lt;h1 id=&#34;æ­å»ºå·¥å…·&#34;&gt;æ­å»ºå·¥å…·&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Hugo &amp;amp; GitHub Pages &amp;amp; GitHub Action &amp;amp; Twikoo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Themeï¼šPaperMod&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Toolï¼šObsidian &amp;amp; Git Bash&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;å„é¡µé¢ç®€ä»‹&#34;&gt;å„é¡µé¢ç®€ä»‹&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Homeï¼šè”ç³»æ–¹å¼ &amp;amp; æ–‡ç« &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Tagsï¼šæ–‡ç« æ ‡ç­¾&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Archivesï¼šæ–‡ç« å½’æ¡£&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Aboutï¼šä½œè€…ç®€ä»‹ &amp;amp; åšå®¢ç®€ä»‹&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Searchï¼šæœç´¢æ–‡ç« &lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;è‡ªåŠ¨åŒ–æ„å»º&#34;&gt;è‡ªåŠ¨åŒ–æ„å»º&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.zhangyingwei.com/posts/2021m4d11h19m42s28/&#34;&gt;Hugo åšå®¢å†™ä½œæœ€ä½³å®è·µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.pseudoyu.com/zh/2022/05/29/deploy_your_blog_using_hugo_and_github_action/&#34;&gt;Hugo + GitHub Actionï¼Œæ­å»ºä½ çš„åšå®¢è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;è‡ªå®šä¹‰&#34;&gt;è‡ªå®šä¹‰&lt;/h1&gt;
&lt;h2 id=&#34;è‡ªå®šä¹‰-shortcodes&#34;&gt;è‡ªå®šä¹‰ shortcodes&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sulvblog.cn/posts/blog/hugo_gallery/&#34;&gt;# Hugoåšå®¢æ·»åŠ ç›¸å†ŒåŠŸèƒ½&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sulvblog.cn/posts/blog/shortcodes/&#34;&gt;# Hugoåšå®¢è‡ªå®šä¹‰shortcodes&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;bilibili-è§†é¢‘&#34;&gt;bilibili è§†é¢‘&lt;/h3&gt;
&lt;!DOCTYPE HTML&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
    &lt;style type=&#34;text/css&#34;&gt;
        .bilibili_shortcodes {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 66%;
            margin: auto;
            overflow: hidden;
            text-align: center;
        }
        .bilibili_shortcodes iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
    &lt;/style&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class=&#34;bilibili_shortcodes&#34;&gt;
    &lt;iframe
            src=&#34;https://player.bilibili.com/player.html?bvid=BV1RP4y1v7kS&amp;page=1&amp;high_quality=1&amp;danmaku=0&amp;as_wide=0&#34;
            scrolling=&#34;no&#34;
            border=&#34;0&#34;
            frameborder=&#34;no&#34;
            framespacing=&#34;0&#34;
            allowfullscreen=&#34;true&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;h3 id=&#34;ç›¸å†Œ&#34;&gt;ç›¸å†Œ&lt;/h3&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
    &lt;meta name=&#34;viewport&#34; content=&#34;user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1&#34;&gt;
    &lt;script src=&#34;https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js&#34;&gt;&lt;/script&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/css/nanogallery2.min.css&#34;&gt;
    &lt;script src=&#34;https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js&#34;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div data-nanogallery2=&#39;{
	 &#34;thumbnailDisplayTransition&#34;:          &#34;none&#34;,
     &#34;thumbnailDisplayTransitionDuration&#34;:  500,
     &#34;thumbnailDisplayInterval&#34;:            30,
     &#34;galleryDisplayTransition&#34;:            &#34;none&#34;,
     &#34;galleryDisplayTransitionDuration&#34;:    500,
     &#34;galleryDisplayMode&#34;: &#34;rows&#34;,
     &#34;thumbnailDisplayOutsideScreen&#34;: &#34;false&#34;,
     &#34;eventsDebounceDelay&#34;: 10,
     &#34;thumbnailL1BorderHorizontal&#34;: 0,
     &#34;thumbnailL1BorderVertical&#34;: 0,
     &#34;thumbnailLabel&#34;: {
        &#34;titleFontSize&#34;: &#34;0.6em&#34;
     },
     &#34;thumbnailHoverEffect2&#34;: &#34;image_scale_1.00_1.10|label_backgroundColor_rgba(0,0,0,0)_rgba(255,255,255,0)&#34;,
     &#34;galleryTheme&#34;: {
        &#34;thumbnail&#34;: {
            &#34;borderRadius&#34;: &#34;8px&#34;
        }
     },
     &#34;thumbnailToolbarImage&#34;: {
        &#34;topLeft&#34;: &#34;&#34;,
        &#34;topRight&#34;: &#34;&#34;,
        &#34;bottomLeft&#34;: &#34;&#34;,
        &#34;bottomRight&#34;: &#34;&#34;
     },
     &#34;viewerToolbar&#34;:   {
        &#34;display&#34;: true,
        &#34;standard&#34;: &#34;label&#34;
     },
     &#34;viewerTools&#34;:     {
        &#34;topLeft&#34;:    &#34;pageCounter, playPauseButton&#34;,
        &#34;topRight&#34;:   &#34;downloadButton, rotateLeft, zoomButton, fullscreenButton, closeButton&#34;
     },
     &#34;viewerGalleryTWidth&#34;: 40,
     &#34;viewerGalleryTHeight&#34;: 40
}&#39;&gt;
    
&lt;a href=&#34;https://www.sulvblog.cn/image/16_IMG_20220430_202353.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/16_IMG_20220430_202353.png&#34;&gt;é¦™å…‹æ–¯&lt;/a&gt;

&lt;a href=&#34;https://www.sulvblog.cn/image/17_IMG_20220430_202228.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/17_IMG_20220430_202228.png&#34;&gt;&lt;/a&gt;

&lt;a href=&#34;https://www.sulvblog.cn/image/19_IMG_20220430_200901.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/19_IMG_20220430_200901.png&#34;&gt;&lt;/a&gt;

&lt;a href=&#34;https://www.sulvblog.cn/image/17_IMG_20220430_202228.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/17_IMG_20220430_202228.png&#34;&gt;&lt;/a&gt;

&lt;a href=&#34;https://www.sulvblog.cn/image/19_IMG_20220430_200901.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/19_IMG_20220430_200901.png&#34;&gt;&lt;/a&gt;

&lt;a href=&#34;https://www.sulvblog.cn/image/17_IMG_20220430_202228.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/17_IMG_20220430_202228.png&#34;&gt;&lt;/a&gt;

&lt;a href=&#34;https://www.sulvblog.cn/image/19_IMG_20220430_200901.png&#34; data-ngThumb=&#34;https://www.sulvblog.cn/image/19_IMG_20220430_200901.png&#34;&gt;&lt;/a&gt;


&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

&lt;h2 id=&#34;hugo-ä¾§è¾¹ç›®å½•&#34;&gt;Hugo ä¾§è¾¹ç›®å½•&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://333rd.net/posts/tech/hugo%E4%BE%A7%E8%BE%B9%E7%9B%AE%E5%BD%95/&#34;&gt;# Hugoä¾§è¾¹ç›®å½•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sulvblog.cn/posts/blog/hugo_toc_side/&#34;&gt;# Hugoåšå®¢ç›®å½•æ”¾åœ¨ä¾§è¾¹ | PaperModä¸»é¢˜&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ›´æ”¹å­—ä½“&#34;&gt;æ›´æ”¹å­—ä½“&lt;/h2&gt;
&lt;h3 id=&#34;æ–¹æ³•1&#34;&gt;æ–¹æ³•1&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://www.sulvblog.cn/posts/blog/hugo_change_font/&#34;&gt;# Hugoåšå®¢è‡ªå®šä¹‰å­—ä½“&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ç½‘ä¸Šæ‰¾åˆ°å­—ä½“èµ„æºï¼Œå³&lt;code&gt;ttf&lt;/code&gt;ç»“å°¾çš„æ–‡ä»¶ï¼Œæ”¾åˆ°&lt;code&gt;static/fonts/&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;assets\css\extended\fonts.css&lt;/code&gt; ä¸­å¼•ç”¨å­—ä½“&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;assets\css\extended\blank.css&lt;/code&gt; ä¸­ ç”¨&lt;code&gt;font-family&lt;/code&gt;å±æ€§æŒ‡å®šä½¿ç”¨ä»€ä¹ˆå­—ä½“&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æ–¹æ³•2&#34;&gt;æ–¹æ³•2&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/627444050&#34;&gt;# Hugoä½¿ç”¨è‡ªå®šä¹‰å­—ä½“&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å°†HTMLæ’å…¥åˆ° &lt;code&gt;layouts/partials/extend_head.html&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;assets\css\extended\blank.css&lt;/code&gt; ä¸­ ç”¨&lt;code&gt;font-family&lt;/code&gt;å±æ€§æŒ‡å®šä½¿ç”¨ä»€ä¹ˆå­—ä½“&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;twikoo-è¯„è®ºåŒº&#34;&gt;Twikoo è¯„è®ºåŒº&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sulvblog.cn/posts/blog/hugo_twikoo/&#34;&gt;# Hugoåšå®¢æ·»åŠ Twikooè¯„è®º&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;latex-è¯­æ³•æ”¯æŒ&#34;&gt;LaTex è¯­æ³•æ”¯æŒ&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://shaohanyun.top/posts/env/hugo_mathjax/&#34;&gt;# Hugoåšå®¢æ·»åŠ LaTeXè¯­æ³•æ”¯æŒ&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
      <content:encoded><![CDATA[<h1 id="bloghttpsgithubcomxancodingxancodinggithubio"><a href="https://github.com/Xancoding/Xancoding.github.io">Blog</a></h1>
<h1 id="æ­å»ºå·¥å…·">æ­å»ºå·¥å…·</h1>
<ul>
<li><code>Hugo &amp; GitHub Pages &amp; GitHub Action &amp; Twikoo</code></li>
<li><code>Themeï¼šPaperMod</code></li>
<li><code>Toolï¼šObsidian &amp; Git Bash</code></li>
</ul>
<h1 id="å„é¡µé¢ç®€ä»‹">å„é¡µé¢ç®€ä»‹</h1>
<ul>
<li><code>Homeï¼šè”ç³»æ–¹å¼ &amp; æ–‡ç« </code></li>
<li><code>Tagsï¼šæ–‡ç« æ ‡ç­¾</code></li>
<li><code>Archivesï¼šæ–‡ç« å½’æ¡£</code></li>
<li><code>Aboutï¼šä½œè€…ç®€ä»‹ &amp; åšå®¢ç®€ä»‹</code></li>
<li><code>Searchï¼šæœç´¢æ–‡ç« </code></li>
</ul>
<h1 id="è‡ªåŠ¨åŒ–æ„å»º">è‡ªåŠ¨åŒ–æ„å»º</h1>
<ul>
<li><a href="https://blog.zhangyingwei.com/posts/2021m4d11h19m42s28/">Hugo åšå®¢å†™ä½œæœ€ä½³å®è·µ</a></li>
<li><a href="https://www.pseudoyu.com/zh/2022/05/29/deploy_your_blog_using_hugo_and_github_action/">Hugo + GitHub Actionï¼Œæ­å»ºä½ çš„åšå®¢è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ</a></li>
</ul>
<h1 id="è‡ªå®šä¹‰">è‡ªå®šä¹‰</h1>
<h2 id="è‡ªå®šä¹‰-shortcodes">è‡ªå®šä¹‰ shortcodes</h2>
<ol>
<li><a href="https://www.sulvblog.cn/posts/blog/hugo_gallery/"># Hugoåšå®¢æ·»åŠ ç›¸å†ŒåŠŸèƒ½</a></li>
<li><a href="https://www.sulvblog.cn/posts/blog/shortcodes/"># Hugoåšå®¢è‡ªå®šä¹‰shortcodes</a></li>
</ol>
<h3 id="bilibili-è§†é¢‘">bilibili è§†é¢‘</h3>
<!DOCTYPE HTML>
<html lang="en">
<head>
    <style type="text/css">
        .bilibili_shortcodes {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 66%;
            margin: auto;
            overflow: hidden;
            text-align: center;
        }
        .bilibili_shortcodes iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
        }
    </style>
    <title></title>
</head>
<body>
<div class="bilibili_shortcodes">
    <iframe
            src="https://player.bilibili.com/player.html?bvid=BV1RP4y1v7kS&page=1&high_quality=1&danmaku=0&as_wide=0"
            scrolling="no"
            border="0"
            frameborder="no"
            framespacing="0"
            allowfullscreen="true"
    >
    </iframe>
</div>
</body>
</html>

<h3 id="ç›¸å†Œ">ç›¸å†Œ</h3>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/css/nanogallery2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js"></script>
</head>
<body>

<div data-nanogallery2='{
	 "thumbnailDisplayTransition":          "none",
     "thumbnailDisplayTransitionDuration":  500,
     "thumbnailDisplayInterval":            30,
     "galleryDisplayTransition":            "none",
     "galleryDisplayTransitionDuration":    500,
     "galleryDisplayMode": "rows",
     "thumbnailDisplayOutsideScreen": "false",
     "eventsDebounceDelay": 10,
     "thumbnailL1BorderHorizontal": 0,
     "thumbnailL1BorderVertical": 0,
     "thumbnailLabel": {
        "titleFontSize": "0.6em"
     },
     "thumbnailHoverEffect2": "image_scale_1.00_1.10|label_backgroundColor_rgba(0,0,0,0)_rgba(255,255,255,0)",
     "galleryTheme": {
        "thumbnail": {
            "borderRadius": "8px"
        }
     },
     "thumbnailToolbarImage": {
        "topLeft": "",
        "topRight": "",
        "bottomLeft": "",
        "bottomRight": ""
     },
     "viewerToolbar":   {
        "display": true,
        "standard": "label"
     },
     "viewerTools":     {
        "topLeft":    "pageCounter, playPauseButton",
        "topRight":   "downloadButton, rotateLeft, zoomButton, fullscreenButton, closeButton"
     },
     "viewerGalleryTWidth": 40,
     "viewerGalleryTHeight": 40
}'>
    
<a href="https://www.sulvblog.cn/image/16_IMG_20220430_202353.png" data-ngThumb="https://www.sulvblog.cn/image/16_IMG_20220430_202353.png">é¦™å…‹æ–¯</a>

<a href="https://www.sulvblog.cn/image/17_IMG_20220430_202228.png" data-ngThumb="https://www.sulvblog.cn/image/17_IMG_20220430_202228.png"></a>

<a href="https://www.sulvblog.cn/image/19_IMG_20220430_200901.png" data-ngThumb="https://www.sulvblog.cn/image/19_IMG_20220430_200901.png"></a>

<a href="https://www.sulvblog.cn/image/17_IMG_20220430_202228.png" data-ngThumb="https://www.sulvblog.cn/image/17_IMG_20220430_202228.png"></a>

<a href="https://www.sulvblog.cn/image/19_IMG_20220430_200901.png" data-ngThumb="https://www.sulvblog.cn/image/19_IMG_20220430_200901.png"></a>

<a href="https://www.sulvblog.cn/image/17_IMG_20220430_202228.png" data-ngThumb="https://www.sulvblog.cn/image/17_IMG_20220430_202228.png"></a>

<a href="https://www.sulvblog.cn/image/19_IMG_20220430_200901.png" data-ngThumb="https://www.sulvblog.cn/image/19_IMG_20220430_200901.png"></a>


</div>
</body>
</html>

<h2 id="hugo-ä¾§è¾¹ç›®å½•">Hugo ä¾§è¾¹ç›®å½•</h2>
<ol>
<li><a href="https://333rd.net/posts/tech/hugo%E4%BE%A7%E8%BE%B9%E7%9B%AE%E5%BD%95/"># Hugoä¾§è¾¹ç›®å½•</a></li>
<li><a href="https://www.sulvblog.cn/posts/blog/hugo_toc_side/"># Hugoåšå®¢ç›®å½•æ”¾åœ¨ä¾§è¾¹ | PaperModä¸»é¢˜</a></li>
</ol>
<h2 id="æ›´æ”¹å­—ä½“">æ›´æ”¹å­—ä½“</h2>
<h3 id="æ–¹æ³•1">æ–¹æ³•1</h3>
<p><a href="https://www.sulvblog.cn/posts/blog/hugo_change_font/"># Hugoåšå®¢è‡ªå®šä¹‰å­—ä½“</a></p>
<ol>
<li>åœ¨ç½‘ä¸Šæ‰¾åˆ°å­—ä½“èµ„æºï¼Œå³<code>ttf</code>ç»“å°¾çš„æ–‡ä»¶ï¼Œæ”¾åˆ°<code>static/fonts/</code>æ–‡ä»¶å¤¹ä¸‹</li>
<li>åœ¨<code>assets\css\extended\fonts.css</code> ä¸­å¼•ç”¨å­—ä½“</li>
<li>åœ¨ <code>assets\css\extended\blank.css</code> ä¸­ ç”¨<code>font-family</code>å±æ€§æŒ‡å®šä½¿ç”¨ä»€ä¹ˆå­—ä½“</li>
</ol>
<h3 id="æ–¹æ³•2">æ–¹æ³•2</h3>
<p><a href="https://zhuanlan.zhihu.com/p/627444050"># Hugoä½¿ç”¨è‡ªå®šä¹‰å­—ä½“</a></p>
<ol>
<li>å°†HTMLæ’å…¥åˆ° <code>layouts/partials/extend_head.html</code></li>
<li>åœ¨ <code>assets\css\extended\blank.css</code> ä¸­ ç”¨<code>font-family</code>å±æ€§æŒ‡å®šä½¿ç”¨ä»€ä¹ˆå­—ä½“</li>
</ol>
<h2 id="twikoo-è¯„è®ºåŒº">Twikoo è¯„è®ºåŒº</h2>
<ul>
<li><a href="https://www.sulvblog.cn/posts/blog/hugo_twikoo/"># Hugoåšå®¢æ·»åŠ Twikooè¯„è®º</a></li>
</ul>
<h2 id="latex-è¯­æ³•æ”¯æŒ">LaTex è¯­æ³•æ”¯æŒ</h2>
<ol>
<li><a href="https://shaohanyun.top/posts/env/hugo_mathjax/"># Hugoåšå®¢æ·»åŠ LaTeXè¯­æ³•æ”¯æŒ</a></li>
</ol>
]]></content:encoded>
    </item>
    
    <item>
      <title>C&#43;&#43; Sort Function &amp; Priority Queue</title>
      <link>https://xancoding.cn/posts/2023-04-24-14-17-47/</link>
      <pubDate>Mon, 24 Apr 2023 14:17:47 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2023-04-24-14-17-47/</guid>
      <description>&lt;p&gt;å½“ä½¿ç”¨ &lt;code&gt;sortå‡½æ•°&lt;/code&gt; å’Œ &lt;code&gt;Priority_queueä¼˜å…ˆé˜Ÿåˆ—&lt;/code&gt; æ—¶ï¼Œ &lt;code&gt;Container&lt;/code&gt; ä¸­çš„å…ƒç´ ä¼šè¢«è‡ªåŠ¨æ’åº&lt;/p&gt;
&lt;p&gt;å½“å¾…æ’åˆ—çš„å…ƒç´ ä¸ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‡è½½è¿ç®—ç¬¦æ¥è¾¾åˆ°ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å¯¹ Object çš„è®¨è®ºéƒ½åŸºäºä¸‹è¿° &lt;code&gt;Person&lt;/code&gt; ç±»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Person {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;public&lt;/span&gt;:  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	string name;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;int&lt;/span&gt; age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	Person(string name, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;int&lt;/span&gt; age) {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;name = name;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;age = age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;sortå‡½æ•°&#34;&gt;Sortå‡½æ•°&lt;/h1&gt;
&lt;h2 id=&#34;é‡è½½è¿ç®—ç¬¦&#34;&gt;é‡è½½è¿ç®—ç¬¦&lt;/h2&gt;
&lt;p&gt;å½“ &lt;code&gt;Container&lt;/code&gt; ä¸­çš„å…ƒç´ æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;less&lt;/code&gt; æ˜¯å‡åºæ’åºï¼Œä½¿ç”¨ &lt;code&gt;greater&lt;/code&gt; æ˜¯é™åºæ’åº&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡å¯¹å…ƒç´ ä¸º Object çš„æƒ…å†µä½œè¯¦ç»†è¯´æ˜&lt;/p&gt;
&lt;h3 id=&#34;less&#34;&gt;less&lt;/h3&gt;
&lt;p&gt;sortå‡½æ•°åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨&lt;code&gt;std::less&lt;/code&gt;ä½œä¸ºæ¯”è¾ƒå‡½æ•°ç±»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sort(people.begin(), people.end());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œ&lt;code&gt;std::less&lt;/code&gt;éœ€è¦é‡è½½å°äºå·&lt;code&gt;&amp;lt;&lt;/code&gt;è¿ç®—ç¬¦ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Person {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;operator&lt;/span&gt;&amp;lt;(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; Person &amp;amp;p) &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;age &amp;lt; p.age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç»è¿‡ä¸Šè¿°çš„é‡è½½åï¼Œ&lt;code&gt;sort&lt;/code&gt; ä¼šå°†å…ƒç´ æŒ‰ &lt;code&gt;age&lt;/code&gt; å‡åºæ’åº&lt;/p&gt;
&lt;p&gt;æ‹¬å·å†…çš„ &lt;code&gt;const&lt;/code&gt; è¡¨ç¤ºå…¶ä¿®é¥°çš„å‚æ•°ä¸ºå¸¸é‡ï¼Œåœ¨å‡½æ•°å†…ä¸èƒ½ä¿®æ”¹è¯¥å‚æ•°&lt;/p&gt;
&lt;p&gt;æ‹¬å·å¤–çš„ &lt;code&gt;const&lt;/code&gt; è¡¨ç¤ºè¯¥å‡½æ•°ä¸ºå¸¸æˆå‘˜å‡½æ•°ï¼Œåœ¨å‡½æ•°å†…ä¸èƒ½éœ€ä¿®æ”¹æˆå‘˜å˜é‡&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬æŠŠå‡½æ•°ä½“å†…çš„ &lt;code&gt;&amp;lt;&lt;/code&gt; æ›¿æ¢ä¸º &lt;code&gt;&amp;gt;&lt;/code&gt;ï¼Œå…ƒç´ å°†ä¼šæŒ‰ &lt;code&gt;age&lt;/code&gt; é™åºæ’åº&lt;/p&gt;
&lt;h3 id=&#34;greater&#34;&gt;greater&lt;/h3&gt;
&lt;p&gt;è¿˜å¯ä»¥ä½¿ç”¨&lt;code&gt;std::greater&lt;/code&gt;ä½œä¸ºæ¯”è¾ƒå‡½æ•°ç±»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sort(people.begin(), people.end(), greater&amp;lt;&amp;gt;());
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆå°±éœ€è¦é‡è½½å¤§äºå·&lt;code&gt;&amp;gt;&lt;/code&gt;è¿ç®—ç¬¦ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Person {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;operator&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; Person &amp;amp;p) &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;age &amp;gt; p.age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç»è¿‡ä¸Šè¿°çš„é‡è½½åï¼Œ&lt;code&gt;sort&lt;/code&gt; ä¼šå°†å…ƒç´ æŒ‰ &lt;code&gt;age&lt;/code&gt; é™åºæ’åº&lt;/p&gt;
&lt;h2 id=&#34;è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°&#34;&gt;è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;bool&lt;/span&gt; cmp(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; Person &amp;amp;p1, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; Person &amp;amp;p2) {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; p1.age &amp;lt; p2.age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sort(people.begin(), people.end(), cmp);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç»è¿‡ä¸Šè¿°æ“ä½œåï¼Œå…ƒç´ å°†ä¼šæŒ‰ &lt;code&gt;age&lt;/code&gt; å‡åºæ’åº&lt;/p&gt;
&lt;h1 id=&#34;priority_queueå †ä¼˜å…ˆé˜Ÿåˆ—&#34;&gt;Priority_queueå †ä¼˜å…ˆé˜Ÿåˆ—&lt;/h1&gt;
&lt;p&gt;å †æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç”¨æ•°ç»„æˆ–æ ‘å®ç°ï¼Œå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€æ’åºç®—æ³•ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆpriority queueï¼‰å°±æ˜¯å †ï¼ˆheapï¼‰çš„ä¸€ç§åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;C++ä¸­çš„ä¼˜å…ˆé˜Ÿåˆ—å®ç°å°±æ˜¯å †ä¼˜å…ˆé˜Ÿåˆ—ï¼Œåº•å±‚ä½¿ç”¨å †æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;std::priority_queue&lt;/code&gt;æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œå®ƒçš„æ¨¡æ¿å‚æ•°æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;T&lt;/code&gt;ï¼šæŒ‡å®šé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Container&lt;/code&gt;ï¼šæŒ‡å®šç”¨äºå­˜å‚¨å…ƒç´ çš„å®¹å™¨ç±»å‹ï¼Œé»˜è®¤æ˜¯&lt;code&gt;std::vector&amp;lt;T&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Compare&lt;/code&gt;ï¼šæŒ‡å®šç”¨äºæ¯”è¾ƒå…ƒç´ ä¼˜å…ˆçº§çš„æ¯”è¾ƒå‡½æ•°ç±»å‹ï¼Œé»˜è®¤æ˜¯&lt;code&gt;std::less&amp;lt;T&amp;gt;&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨C++ä¸­ï¼Œä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥é€šè¿‡æŒ‡å®šæ¯”è¾ƒå‡½æ•°æ¥æ§åˆ¶æ˜¯ä½¿ç”¨å¤§æ ¹å †è¿˜æ˜¯å°æ ¹å †ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ &lt;code&gt;std::less&amp;lt;&amp;gt;&lt;/code&gt; ä½œä¸ºæ¯”è¾ƒå‡½æ•°ï¼Œåˆ™æ„å‘³ç€ä½¿ç”¨å¤§æ ¹å †ï¼Œæœ€å¤§å€¼ä¼šä¼˜å…ˆå‡ºé˜Ÿï¼Œå¤§æ ¹å †(Max Heap)æ˜¯ä¸€ç§å®Œå…¨äºŒå‰æ ‘,å®ƒæ»¡è¶³ä¸¤ä¸ªç‰¹æ€§:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼&lt;/li&gt;
&lt;li&gt;æ ¹èŠ‚ç‚¹çš„å€¼æœ€å¤§&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨ &lt;code&gt;std::greater&amp;lt;&amp;gt;&lt;/code&gt; ä½œä¸ºæ¯”è¾ƒå‡½æ•°ï¼Œåˆ™æ„å‘³ç€ä½¿ç”¨å°æ ¹å †ï¼Œæœ€å°å€¼ä¼šä¼˜å…ˆå‡ºé˜Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å¸¸ç”¨æ“ä½œ&#34;&gt;å¸¸ç”¨æ“ä½œ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pq.push(elem)&lt;/code&gt;ï¼šå…¥é˜Ÿ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pq.pop()&lt;/code&gt;ï¼šå‡ºé˜Ÿ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pq.top()&lt;/code&gt;ï¼šè¿”å›å †é¡¶å…ƒç´ &lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é‡è½½è¿ç®—ç¬¦-1&#34;&gt;é‡è½½è¿ç®—ç¬¦&lt;/h2&gt;
&lt;h3 id=&#34;less-1&#34;&gt;less&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;priority_queue&amp;lt;T&amp;gt;Â pq&lt;/code&gt;ï¼šé»˜è®¤æ„é€ å¤§æ ¹å †ï¼Œéœ€è¦é‡è½½ &lt;code&gt;&amp;lt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Person {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;operator&lt;/span&gt;&amp;lt;(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; Person &amp;amp;p) &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;age &amp;lt; p.age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¤§æ ¹å †ï¼Œæœ€å¤§å€¼ä¼šå…ˆå‡ºé˜Ÿ&lt;/p&gt;
&lt;h3 id=&#34;greater-1&#34;&gt;greater&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;priority_queue&amp;lt;T, vector&amp;lt;T&amp;gt;, greater&amp;lt;&amp;gt;&amp;gt; pq&lt;/code&gt;ï¼šæ„é€ æœ€å°å †ï¼Œéœ€è¦é‡è½½ &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Person {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;operator&lt;/span&gt;&amp;gt;(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; Person &amp;amp;p) &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; {  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;-&amp;gt;age &amp;gt; p.age;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°æ ¹å †ï¼Œæœ€å°å€¼ä¼šå…ˆå‡ºé˜Ÿ&lt;/p&gt;
</description>
      <content:encoded><![CDATA[<p>å½“ä½¿ç”¨ <code>sortå‡½æ•°</code> å’Œ <code>Priority_queueä¼˜å…ˆé˜Ÿåˆ—</code> æ—¶ï¼Œ <code>Container</code> ä¸­çš„å…ƒç´ ä¼šè¢«è‡ªåŠ¨æ’åº</p>
<p>å½“å¾…æ’åˆ—çš„å…ƒç´ ä¸ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‡è½½è¿ç®—ç¬¦æ¥è¾¾åˆ°ç›®çš„ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å¯¹ Object çš„è®¨è®ºéƒ½åŸºäºä¸‹è¿° <code>Person</code> ç±»</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {  
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span>:  
</span></span><span style="display:flex;"><span>	string name;  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">int</span> age;  
</span></span><span style="display:flex;"><span>	Person(string name, <span style="color:#fff;font-weight:bold">int</span> age) {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">this</span>-&gt;name = name;  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">this</span>-&gt;age = age;  
</span></span><span style="display:flex;"><span>	}  
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h1 id="sortå‡½æ•°">Sortå‡½æ•°</h1>
<h2 id="é‡è½½è¿ç®—ç¬¦">é‡è½½è¿ç®—ç¬¦</h2>
<p>å½“ <code>Container</code> ä¸­çš„å…ƒç´ æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œä½¿ç”¨ <code>less</code> æ˜¯å‡åºæ’åºï¼Œä½¿ç”¨ <code>greater</code> æ˜¯é™åºæ’åº</p>
<p>ä¸‹é¢ğŸ‘‡å¯¹å…ƒç´ ä¸º Object çš„æƒ…å†µä½œè¯¦ç»†è¯´æ˜</p>
<h3 id="less">less</h3>
<p>sortå‡½æ•°åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨<code>std::less</code>ä½œä¸ºæ¯”è¾ƒå‡½æ•°ç±»</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort(people.begin(), people.end());
</span></span></code></pre></div><p>è€Œ<code>std::less</code>éœ€è¦é‡è½½å°äºå·<code>&lt;</code>è¿ç®—ç¬¦ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">bool</span> <span style="color:#fff;font-weight:bold">operator</span>&lt;(<span style="color:#fff;font-weight:bold">const</span> Person &amp;p) <span style="color:#fff;font-weight:bold">const</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>-&gt;age &lt; p.age;  
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç»è¿‡ä¸Šè¿°çš„é‡è½½åï¼Œ<code>sort</code> ä¼šå°†å…ƒç´ æŒ‰ <code>age</code> å‡åºæ’åº</p>
<p>æ‹¬å·å†…çš„ <code>const</code> è¡¨ç¤ºå…¶ä¿®é¥°çš„å‚æ•°ä¸ºå¸¸é‡ï¼Œåœ¨å‡½æ•°å†…ä¸èƒ½ä¿®æ”¹è¯¥å‚æ•°</p>
<p>æ‹¬å·å¤–çš„ <code>const</code> è¡¨ç¤ºè¯¥å‡½æ•°ä¸ºå¸¸æˆå‘˜å‡½æ•°ï¼Œåœ¨å‡½æ•°å†…ä¸èƒ½éœ€ä¿®æ”¹æˆå‘˜å˜é‡</p>
<p>å¦‚æœæˆ‘ä»¬æŠŠå‡½æ•°ä½“å†…çš„ <code>&lt;</code> æ›¿æ¢ä¸º <code>&gt;</code>ï¼Œå…ƒç´ å°†ä¼šæŒ‰ <code>age</code> é™åºæ’åº</p>
<h3 id="greater">greater</h3>
<p>è¿˜å¯ä»¥ä½¿ç”¨<code>std::greater</code>ä½œä¸ºæ¯”è¾ƒå‡½æ•°ç±»</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort(people.begin(), people.end(), greater&lt;&gt;());
</span></span></code></pre></div><p>é‚£ä¹ˆå°±éœ€è¦é‡è½½å¤§äºå·<code>&gt;</code>è¿ç®—ç¬¦ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">bool</span> <span style="color:#fff;font-weight:bold">operator</span>&gt;(<span style="color:#fff;font-weight:bold">const</span> Person &amp;p) <span style="color:#fff;font-weight:bold">const</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>-&gt;age &gt; p.age;  
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç»è¿‡ä¸Šè¿°çš„é‡è½½åï¼Œ<code>sort</code> ä¼šå°†å…ƒç´ æŒ‰ <code>age</code> é™åºæ’åº</p>
<h2 id="è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°">è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</h2>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">bool</span> cmp(<span style="color:#fff;font-weight:bold">const</span> Person &amp;p1, <span style="color:#fff;font-weight:bold">const</span> Person &amp;p2) {  
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">return</span> p1.age &lt; p2.age;  
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sort(people.begin(), people.end(), cmp);
</span></span></code></pre></div><p>ç»è¿‡ä¸Šè¿°æ“ä½œåï¼Œå…ƒç´ å°†ä¼šæŒ‰ <code>age</code> å‡åºæ’åº</p>
<h1 id="priority_queueå †ä¼˜å…ˆé˜Ÿåˆ—">Priority_queueå †ä¼˜å…ˆé˜Ÿåˆ—</h1>
<p>å †æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç”¨æ•°ç»„æˆ–æ ‘å®ç°ï¼Œå¸¸ç”¨äºå®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€æ’åºç®—æ³•ç­‰ã€‚</p>
<p>ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆpriority queueï¼‰å°±æ˜¯å †ï¼ˆheapï¼‰çš„ä¸€ç§åº”ç”¨ã€‚</p>
<p>C++ä¸­çš„ä¼˜å…ˆé˜Ÿåˆ—å®ç°å°±æ˜¯å †ä¼˜å…ˆé˜Ÿåˆ—ï¼Œåº•å±‚ä½¿ç”¨å †æ¥å®ç°ã€‚</p>
<p><code>std::priority_queue</code>æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œå®ƒçš„æ¨¡æ¿å‚æ•°æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li><code>T</code>ï¼šæŒ‡å®šé˜Ÿåˆ—ä¸­å­˜å‚¨çš„å…ƒç´ ç±»å‹ã€‚</li>
<li><code>Container</code>ï¼šæŒ‡å®šç”¨äºå­˜å‚¨å…ƒç´ çš„å®¹å™¨ç±»å‹ï¼Œé»˜è®¤æ˜¯<code>std::vector&lt;T&gt;</code>ã€‚</li>
<li><code>Compare</code>ï¼šæŒ‡å®šç”¨äºæ¯”è¾ƒå…ƒç´ ä¼˜å…ˆçº§çš„æ¯”è¾ƒå‡½æ•°ç±»å‹ï¼Œé»˜è®¤æ˜¯<code>std::less&lt;T&gt;</code>ã€‚</li>
</ol>
<p>åœ¨C++ä¸­ï¼Œä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥é€šè¿‡æŒ‡å®šæ¯”è¾ƒå‡½æ•°æ¥æ§åˆ¶æ˜¯ä½¿ç”¨å¤§æ ¹å †è¿˜æ˜¯å°æ ¹å †ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>std::less&lt;&gt;</code> ä½œä¸ºæ¯”è¾ƒå‡½æ•°ï¼Œåˆ™æ„å‘³ç€ä½¿ç”¨å¤§æ ¹å †ï¼Œæœ€å¤§å€¼ä¼šä¼˜å…ˆå‡ºé˜Ÿï¼Œå¤§æ ¹å †(Max Heap)æ˜¯ä¸€ç§å®Œå…¨äºŒå‰æ ‘,å®ƒæ»¡è¶³ä¸¤ä¸ªç‰¹æ€§:</p>
<ol>
<li>ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºç­‰äºå…¶å·¦å³å­èŠ‚ç‚¹çš„å€¼</li>
<li>æ ¹èŠ‚ç‚¹çš„å€¼æœ€å¤§</li>
</ol>
<p>å¦‚æœä½¿ç”¨ <code>std::greater&lt;&gt;</code> ä½œä¸ºæ¯”è¾ƒå‡½æ•°ï¼Œåˆ™æ„å‘³ç€ä½¿ç”¨å°æ ¹å †ï¼Œæœ€å°å€¼ä¼šä¼˜å…ˆå‡ºé˜Ÿ</p>
<h2 id="å¸¸ç”¨æ“ä½œ">å¸¸ç”¨æ“ä½œ</h2>
<ul>
<li><code>pq.push(elem)</code>ï¼šå…¥é˜Ÿ</li>
<li><code>pq.pop()</code>ï¼šå‡ºé˜Ÿ</li>
<li><code>pq.top()</code>ï¼šè¿”å›å †é¡¶å…ƒç´ </li>
</ul>
<h2 id="é‡è½½è¿ç®—ç¬¦-1">é‡è½½è¿ç®—ç¬¦</h2>
<h3 id="less-1">less</h3>
<ul>
<li><code>priority_queue&lt;T&gt;Â pq</code>ï¼šé»˜è®¤æ„é€ å¤§æ ¹å †ï¼Œéœ€è¦é‡è½½ <code>&lt;</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">bool</span> <span style="color:#fff;font-weight:bold">operator</span>&lt;(<span style="color:#fff;font-weight:bold">const</span> Person &amp;p) <span style="color:#fff;font-weight:bold">const</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>-&gt;age &lt; p.age;  
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å¤§æ ¹å †ï¼Œæœ€å¤§å€¼ä¼šå…ˆå‡ºé˜Ÿ</p>
<h3 id="greater-1">greater</h3>
<ul>
<li><code>priority_queue&lt;T, vector&lt;T&gt;, greater&lt;&gt;&gt; pq</code>ï¼šæ„é€ æœ€å°å †ï¼Œéœ€è¦é‡è½½ <code>&gt;</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Person {
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#fff;font-weight:bold">bool</span> <span style="color:#fff;font-weight:bold">operator</span>&gt;(<span style="color:#fff;font-weight:bold">const</span> Person &amp;p) <span style="color:#fff;font-weight:bold">const</span> {  
</span></span><span style="display:flex;"><span>		<span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">this</span>-&gt;age &gt; p.age;  
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å°æ ¹å †ï¼Œæœ€å°å€¼ä¼šå…ˆå‡ºé˜Ÿ</p>
]]></content:encoded>
    </item>
    
    <item>
      <title>è®¡ç®—æœºç³»ç»ŸåŸºç¡€</title>
      <link>https://xancoding.cn/posts/2022-11-15-21-37-17/</link>
      <pubDate>Tue, 15 Nov 2022 21:37:17 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2022-11-15-21-37-17/</guid>
      <description>&lt;h1 id=&#34;è®¡ç®—æœºç³»ç»ŸåŸºç¡€ä¸€ç¨‹åºçš„è¡¨ç¤ºè½¬æ¢ä¸é“¾æ¥&#34;&gt;è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸€)â€”â€”ç¨‹åºçš„è¡¨ç¤ºã€è½¬æ¢ä¸é“¾æ¥&lt;/h1&gt;
&lt;h2 id=&#34;åŸç ç§»ç è¡¥ç &#34;&gt;åŸç &amp;amp;ç§»ç &amp;amp;è¡¥ç &lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åŸç 
&lt;ul&gt;
&lt;li&gt;&lt;u&gt;æœ€é«˜ä½æ”¾ç¬¦å·ä½ï¼Œ1 è¡¨ç¤ºè´Ÿ&lt;/u&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;å®šç‚¹å°æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„å°¾æ•°&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç§»ç 
&lt;ul&gt;
&lt;li&gt;&lt;u&gt;çœŸå€¼åŠ ä¸Šä¸€ä¸ªåç½®å€¼ bias&lt;/u&gt;ï¼Œ bias å¸¸ä¸º 2&lt;sup&gt;n - 1&lt;/sup&gt; or 2&lt;sup&gt;n - 1&lt;/sup&gt; - 1 (å¦‚ IEEE 754)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;å®šç‚¹æ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„é˜¶&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç§»ç çš„æœ¬æ„æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸¤ä¸ªæ•°ä½œæ¯”è¾ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¡¥ç 
&lt;ul&gt;
&lt;li&gt;å‡è®¾è¡¥ç æœ‰  n  ä½ï¼Œåˆ™ï¼š&lt;strong&gt;x&lt;sub&gt;è¡¥&lt;/sub&gt; = 2&lt;sup&gt;n&lt;/sup&gt; + x&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;u&gt;æ•°å€¼ä¸ºæ­£æ•°æ—¶ï¼Œå…¶å€¼å¤§å°å°±æ˜¯åŸç ï¼›ä¸ºè´Ÿæ—¶ï¼Œå…¶å€¼çš„å¤§å°å°±æ˜¯å„ä½å–åå†åŠ  1&lt;/u&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¡¥ç è¡¨ç¤ºå¸¦ç¬¦å·æ•´æ•°&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¡¥ç çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³è®¡ç®—æœºçš„å‡æ³•è¿ç®—é—®é¢˜&lt;/li&gt;
&lt;li&gt;æ±‚è¡¥ç çš„çœŸå€¼â€”â€”ç®€ä¾¿æ±‚æ³•
&lt;ul&gt;
&lt;li&gt;ç¬¦å·ä¸º 0 ï¼Œåˆ™ä¸ºæ­£æ•°ï¼Œæ•°å€¼éƒ¨åˆ†ç›¸åŒ&lt;/li&gt;
&lt;li&gt;ç¬¦å·ä¸º 1ï¼Œåˆ™ä¸ºè´Ÿæ•°ï¼Œæ•°å€¼å„ä½å–åï¼Œæœ«ä½åŠ  1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;u&gt;å„ä½å–åï¼Œæœ«ä½åŠ  1 ç®€ä¾¿åšæ³•ï¼šä»åå¾€å‰çœ‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ª 1 ï¼Œå°†å®ƒå‰é¢çš„æ‰€æœ‰ä½å–å&lt;/u&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æµ®ç‚¹æ•°-ieee754-æ ‡å‡†&#34;&gt;æµ®ç‚¹æ•°â€”â€” IEEE754 æ ‡å‡†&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;u&gt;æ•°ç¬¦ + é˜¶ç  + å°¾æ•°&lt;/u&gt;
&lt;ul&gt;
&lt;li&gt;Float  1 + 8 + 23
&lt;ul&gt;
&lt;li&gt;SP ï¼š (-1) &lt;sup&gt;s&lt;/sup&gt;   *   (1 + Significand)   *   2 &lt;sup&gt;(Exponent  - 127)&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Double  1 + 11 + 52
&lt;ul&gt;
&lt;li&gt;DP ï¼š (-1) &lt;sup&gt;s&lt;/sup&gt;   *   (1 + Significand)   *   2 &lt;sup&gt;(Exponent  - 1023)&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;æ•°ç¬¦  Sign bit
&lt;ul&gt;
&lt;li&gt;1 è¡¨ç¤ºè´Ÿæ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é˜¶ç   Exponent
&lt;ul&gt;
&lt;li&gt;è§„æ ¼åŒ–é˜¶ç èŒƒå›´ä¸º  0000 0001(-126) â€”â€” 1111 1110(127)   (single)&lt;/li&gt;
&lt;li&gt;bias  ä¸º  127(single)   1023(double)&lt;/li&gt;
&lt;li&gt;è§„æ ¼åŒ–é˜¶èŒƒå›´ä¸º  1â€”â€”254  (single)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¨  0  å’Œå…¨  1  ç”¨æ¥è¡¨ç¤ºç‰¹æ®Šå€¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä¸ºé¿å…æ··æ·†ï¼Œç”¨&lt;u&gt;é˜¶ç è¡¨ç¤ºé˜¶çš„ç¼–ç &lt;/u&gt;ï¼Œç”¨&lt;u&gt;é˜¶æˆ–æŒ‡æ•°è¡¨ç¤ºé˜¶ç çš„å€¼&lt;/u&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å°¾æ•°  Significand
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§„æ ¼åŒ–å°¾æ•°æœ€é«˜ä½æ€»æ˜¯  1 ï¼Œæ‰€ä»¥éšå«è¡¨ç¤ºï¼Œçœ  1  ä½ï¼Œå°æ•°ç‚¹å‰æ€»æ˜¯  1&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;ç‰¹æ®Šæ•°çš„è¡¨ç¤º (single)
&lt;ul&gt;
&lt;li&gt;0
&lt;ul&gt;
&lt;li&gt;é˜¶ç ï¼šall   zeros&lt;/li&gt;
&lt;li&gt;å°¾æ•°ï¼šall   zeros&lt;/li&gt;
&lt;li&gt;+0ï¼š0   00000000   00000000000000000000000&lt;/li&gt;
&lt;li&gt;-0ï¼š1   00000000   00000000000000000000000&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;âˆ
&lt;ul&gt;
&lt;li&gt;é˜¶ç ï¼šall   ones&lt;/li&gt;
&lt;li&gt;å°¾æ•°ï¼šall   zeros&lt;/li&gt;
&lt;li&gt;+âˆï¼š0   11111111   00000000000000000000000&lt;/li&gt;
&lt;li&gt;-âˆï¼š1   11111111   00000000000000000000000&lt;/li&gt;
&lt;li&gt;æµ®ç‚¹æ•°é™¤ä»¥  0  çš„ç»“æœæ˜¯  âˆ ï¼Œè€Œä¸æ˜¯æº¢å‡ºå¼‚å¸¸(æ•´æ•°é™¤ä»¥  0  ä¸ºå¼‚å¸¸)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;NaN   ( Not   a   Number )
&lt;ul&gt;
&lt;li&gt;é˜¶ç ï¼šall   ones&lt;/li&gt;
&lt;li&gt;å°¾æ•°ï¼šnonzeros&lt;/li&gt;
&lt;li&gt;&lt;u&gt;å¯å¸®åŠ©è°ƒè¯•ç¨‹åº&lt;/u&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éè§„æ ¼åŒ–æ•°  Denorms&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é˜¶ç ï¼šall   zeros&lt;/li&gt;
&lt;li&gt;å°¾æ•°ï¼šnonzeros&lt;/li&gt;
&lt;li&gt;ç”¨äºè¡¨ç¤º  0  ä¸è§„æ ¼åŒ–æ•°é—´çš„ Gap&lt;/li&gt;
&lt;li&gt;SP ï¼š (-1) &lt;sup&gt;s&lt;/sup&gt;   *   (0.xxxx&amp;hellip;xxx)   *   2 &lt;sup&gt;-126&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;ä¸ºäº†è®©éè§„æ ¼åŒ–å•ç²¾åº¦æµ®ç‚¹æ•°èƒ½å¤Ÿå¹³ç¼“è¿‡æ¸¡åˆ°è§„æ ¼åŒ–å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥å–  2 &lt;sup&gt;-126&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;&lt;u&gt;å½“è¾“å…¥æ•°æ®ä¸ºä¸å¯è¡¨ç¤ºæ•°æ—¶ï¼Œæœºå™¨å°†å…¶è½¬æ¢ä¸ºæœ€é‚»è¿‘çš„å¯è¡¨ç¤ºæ•°&lt;/u&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ±‰å­—å†…ç asciiç &#34;&gt;æ±‰å­—å†…ç &amp;amp;ASCIIç &lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;u&gt;ASCIIç ä¸º 7 ä½ç¼–ç &lt;/u&gt;&lt;/li&gt;
&lt;li&gt;Exï¼šæ±‰å­— &amp;quot; å¤§ &amp;quot; åœ¨ç è¡¨ä¸­ä½äºç¬¬  20  è¡Œã€ç¬¬  83  åˆ—ã€‚å› æ­¤&lt;u&gt;åŒºä½ç &lt;/u&gt;ä¸º  0010100   1010011 ï¼Œåœ¨åŒºã€ä½ç ä¸Šå„åŠ   32  å¾—åˆ°ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼ˆ&lt;u&gt;GB2312å›½æ ‡ç &lt;/u&gt;ï¼‰ï¼Œå³  00110100   01110011B   =   3473H ã€‚å‰é¢çš„  34 H  å’Œ å­—ç¬¦  4  çš„  ACSII  çš„æœ€é«˜ä½ç›¸åŒï¼Œåé¢çš„  73H  å’Œå­—ç¬¦  s  çš„  ACSII  ç ç›¸åŒã€‚ä½†æ˜¯ï¼Œå°†æ¯ä¸ªå­—èŠ‚çš„æœ€é«˜ä½å„è®¾ä¸º  1  åï¼Œå°±å¾—åˆ°å…¶&lt;u&gt;å†…ç &lt;/u&gt;ï¼š  B4F3H  ( 0110100   11110011B )ï¼Œå› è€Œä¸ä¼šå’Œ  ASCII  ç æ··æ·†&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é€»è¾‘ç”µè·¯&#34;&gt;é€»è¾‘ç”µè·¯&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¼‚æˆ–ï¼š n  ä¸ªæ•°åšå¼‚æˆ–è¿ç®—ï¼Œè‹¥æœ‰å¥‡æ•°ä¸ª  1  ï¼Œåˆ™è¾“å‡º  1&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;æ¨èé˜…è¯»&#34;&gt;æ¨èé˜…è¯»&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/118432554&#34;&gt;# åŸç ã€åç ã€è¡¥ç &lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bilibili.com/video/BV1gx411n7aG/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=ae16ff6478eb15c1b87880540263910b&#34;&gt;è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸€)â€”â€”ç¨‹åºçš„è¡¨ç¤ºã€è½¬æ¢ä¸é“¾æ¥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bilibili.com/video/BV1Xx411E7qn/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=ae16ff6478eb15c1b87880540263910b&#34;&gt;è®¡ç®—æœºç³»ç»ŸåŸºç¡€(äºŒ)â€”â€”å¼‚å¸¸ã€ä¸­æ–­å’Œè¾“å…¥/è¾“å‡º&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bilibili.com/video/BV1jE411874k/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=ae16ff6478eb15c1b87880540263910b&#34;&gt;è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸‰)â€”â€”ç¨‹åºçš„æ‰§è¡Œå’Œå­˜å‚¨è®¿é—®&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;ä»¥ &lt;code&gt;IA-32 + Linux + C + gcc&lt;/code&gt; ä¸ºå¹³å°&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bilibili.com/video/BV1iW411d7hd?p=1&amp;amp;vd_source=ae16ff6478eb15c1b87880540263910b&#34;&gt;ã€ç²¾æ ¡ä¸­è‹±å­—å¹•ã€‘2015 CMU 15-213 CSAPP æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://book.douban.com/subject/26912767/&#34;&gt;ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿï¼ˆåŸä¹¦ç¬¬3ç‰ˆï¼‰ã€‹CSAPP&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
      <content:encoded><![CDATA[<h1 id="è®¡ç®—æœºç³»ç»ŸåŸºç¡€ä¸€ç¨‹åºçš„è¡¨ç¤ºè½¬æ¢ä¸é“¾æ¥">è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸€)â€”â€”ç¨‹åºçš„è¡¨ç¤ºã€è½¬æ¢ä¸é“¾æ¥</h1>
<h2 id="åŸç ç§»ç è¡¥ç ">åŸç &amp;ç§»ç &amp;è¡¥ç </h2>
<ol>
<li>åŸç 
<ul>
<li><u>æœ€é«˜ä½æ”¾ç¬¦å·ä½ï¼Œ1 è¡¨ç¤ºè´Ÿ</u></li>
<li><code>å®šç‚¹å°æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„å°¾æ•°</code></li>
</ul>
</li>
<li>ç§»ç 
<ul>
<li><u>çœŸå€¼åŠ ä¸Šä¸€ä¸ªåç½®å€¼ bias</u>ï¼Œ bias å¸¸ä¸º 2<sup>n - 1</sup> or 2<sup>n - 1</sup> - 1 (å¦‚ IEEE 754)</li>
<li><code>å®šç‚¹æ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„é˜¶</code></li>
<li>ç§»ç çš„æœ¬æ„æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸¤ä¸ªæ•°ä½œæ¯”è¾ƒ</li>
</ul>
</li>
<li>è¡¥ç 
<ul>
<li>å‡è®¾è¡¥ç æœ‰  n  ä½ï¼Œåˆ™ï¼š<strong>x<sub>è¡¥</sub> = 2<sup>n</sup> + x</strong></li>
<li><u>æ•°å€¼ä¸ºæ­£æ•°æ—¶ï¼Œå…¶å€¼å¤§å°å°±æ˜¯åŸç ï¼›ä¸ºè´Ÿæ—¶ï¼Œå…¶å€¼çš„å¤§å°å°±æ˜¯å„ä½å–åå†åŠ  1</u></li>
<li><code>è¡¥ç è¡¨ç¤ºå¸¦ç¬¦å·æ•´æ•°</code></li>
<li>è¡¥ç çš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³è®¡ç®—æœºçš„å‡æ³•è¿ç®—é—®é¢˜</li>
<li>æ±‚è¡¥ç çš„çœŸå€¼â€”â€”ç®€ä¾¿æ±‚æ³•
<ul>
<li>ç¬¦å·ä¸º 0 ï¼Œåˆ™ä¸ºæ­£æ•°ï¼Œæ•°å€¼éƒ¨åˆ†ç›¸åŒ</li>
<li>ç¬¦å·ä¸º 1ï¼Œåˆ™ä¸ºè´Ÿæ•°ï¼Œæ•°å€¼å„ä½å–åï¼Œæœ«ä½åŠ  1</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><u>å„ä½å–åï¼Œæœ«ä½åŠ  1 ç®€ä¾¿åšæ³•ï¼šä»åå¾€å‰çœ‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ª 1 ï¼Œå°†å®ƒå‰é¢çš„æ‰€æœ‰ä½å–å</u></li>
</ul>
<h2 id="æµ®ç‚¹æ•°-ieee754-æ ‡å‡†">æµ®ç‚¹æ•°â€”â€” IEEE754 æ ‡å‡†</h2>
<ul>
<li><u>æ•°ç¬¦ + é˜¶ç  + å°¾æ•°</u>
<ul>
<li>Float  1 + 8 + 23
<ul>
<li>SP ï¼š (-1) <sup>s</sup>   *   (1 + Significand)   *   2 <sup>(Exponent  - 127)</sup></li>
</ul>
</li>
<li>Double  1 + 11 + 52
<ul>
<li>DP ï¼š (-1) <sup>s</sup>   *   (1 + Significand)   *   2 <sup>(Exponent  - 1023)</sup></li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li>æ•°ç¬¦  Sign bit
<ul>
<li>1 è¡¨ç¤ºè´Ÿæ•°</li>
</ul>
</li>
<li>é˜¶ç   Exponent
<ul>
<li>è§„æ ¼åŒ–é˜¶ç èŒƒå›´ä¸º  0000 0001(-126) â€”â€” 1111 1110(127)   (single)</li>
<li>bias  ä¸º  127(single)   1023(double)</li>
<li>è§„æ ¼åŒ–é˜¶èŒƒå›´ä¸º  1â€”â€”254  (single)</li>
<li><strong>å…¨  0  å’Œå…¨  1  ç”¨æ¥è¡¨ç¤ºç‰¹æ®Šå€¼</strong></li>
<li>ä¸ºé¿å…æ··æ·†ï¼Œç”¨<u>é˜¶ç è¡¨ç¤ºé˜¶çš„ç¼–ç </u>ï¼Œç”¨<u>é˜¶æˆ–æŒ‡æ•°è¡¨ç¤ºé˜¶ç çš„å€¼</u></li>
</ul>
</li>
<li>å°¾æ•°  Significand
<ul>
<li><strong>è§„æ ¼åŒ–å°¾æ•°æœ€é«˜ä½æ€»æ˜¯  1 ï¼Œæ‰€ä»¥éšå«è¡¨ç¤ºï¼Œçœ  1  ä½ï¼Œå°æ•°ç‚¹å‰æ€»æ˜¯  1</strong></li>
</ul>
</li>
</ol>
<ul>
<li>ç‰¹æ®Šæ•°çš„è¡¨ç¤º (single)
<ul>
<li>0
<ul>
<li>é˜¶ç ï¼šall   zeros</li>
<li>å°¾æ•°ï¼šall   zeros</li>
<li>+0ï¼š0   00000000   00000000000000000000000</li>
<li>-0ï¼š1   00000000   00000000000000000000000</li>
</ul>
</li>
<li>âˆ
<ul>
<li>é˜¶ç ï¼šall   ones</li>
<li>å°¾æ•°ï¼šall   zeros</li>
<li>+âˆï¼š0   11111111   00000000000000000000000</li>
<li>-âˆï¼š1   11111111   00000000000000000000000</li>
<li>æµ®ç‚¹æ•°é™¤ä»¥  0  çš„ç»“æœæ˜¯  âˆ ï¼Œè€Œä¸æ˜¯æº¢å‡ºå¼‚å¸¸(æ•´æ•°é™¤ä»¥  0  ä¸ºå¼‚å¸¸)</li>
</ul>
</li>
<li>NaN   ( Not   a   Number )
<ul>
<li>é˜¶ç ï¼šall   ones</li>
<li>å°¾æ•°ï¼šnonzeros</li>
<li><u>å¯å¸®åŠ©è°ƒè¯•ç¨‹åº</u></li>
</ul>
</li>
<li><strong>éè§„æ ¼åŒ–æ•°  Denorms</strong>
<ul>
<li>é˜¶ç ï¼šall   zeros</li>
<li>å°¾æ•°ï¼šnonzeros</li>
<li>ç”¨äºè¡¨ç¤º  0  ä¸è§„æ ¼åŒ–æ•°é—´çš„ Gap</li>
<li>SP ï¼š (-1) <sup>s</sup>   *   (0.xxxx&hellip;xxx)   *   2 <sup>-126</sup></li>
<li>ä¸ºäº†è®©éè§„æ ¼åŒ–å•ç²¾åº¦æµ®ç‚¹æ•°èƒ½å¤Ÿå¹³ç¼“è¿‡æ¸¡åˆ°è§„æ ¼åŒ–å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥å–  2 <sup>-126</sup></li>
<li><u>å½“è¾“å…¥æ•°æ®ä¸ºä¸å¯è¡¨ç¤ºæ•°æ—¶ï¼Œæœºå™¨å°†å…¶è½¬æ¢ä¸ºæœ€é‚»è¿‘çš„å¯è¡¨ç¤ºæ•°</u></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="æ±‰å­—å†…ç asciiç ">æ±‰å­—å†…ç &amp;ASCIIç </h2>
<ul>
<li><u>ASCIIç ä¸º 7 ä½ç¼–ç </u></li>
<li>Exï¼šæ±‰å­— &quot; å¤§ &quot; åœ¨ç è¡¨ä¸­ä½äºç¬¬  20  è¡Œã€ç¬¬  83  åˆ—ã€‚å› æ­¤<u>åŒºä½ç </u>ä¸º  0010100   1010011 ï¼Œåœ¨åŒºã€ä½ç ä¸Šå„åŠ   32  å¾—åˆ°ä¸¤ä¸ªå­—èŠ‚ç¼–ç ï¼ˆ<u>GB2312å›½æ ‡ç </u>ï¼‰ï¼Œå³  00110100   01110011B   =   3473H ã€‚å‰é¢çš„  34 H  å’Œ å­—ç¬¦  4  çš„  ACSII  çš„æœ€é«˜ä½ç›¸åŒï¼Œåé¢çš„  73H  å’Œå­—ç¬¦  s  çš„  ACSII  ç ç›¸åŒã€‚ä½†æ˜¯ï¼Œå°†æ¯ä¸ªå­—èŠ‚çš„æœ€é«˜ä½å„è®¾ä¸º  1  åï¼Œå°±å¾—åˆ°å…¶<u>å†…ç </u>ï¼š  B4F3H  ( 0110100   11110011B )ï¼Œå› è€Œä¸ä¼šå’Œ  ASCII  ç æ··æ·†</li>
</ul>
<h2 id="é€»è¾‘ç”µè·¯">é€»è¾‘ç”µè·¯</h2>
<ul>
<li>å¼‚æˆ–ï¼š n  ä¸ªæ•°åšå¼‚æˆ–è¿ç®—ï¼Œè‹¥æœ‰å¥‡æ•°ä¸ª  1  ï¼Œåˆ™è¾“å‡º  1</li>
</ul>
<h1 id="æ¨èé˜…è¯»">æ¨èé˜…è¯»</h1>
<ol>
<li><a href="https://zhuanlan.zhihu.com/p/118432554"># åŸç ã€åç ã€è¡¥ç </a></li>
</ol>
<hr>
<ul>
<li><a href="https://www.bilibili.com/video/BV1gx411n7aG/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ae16ff6478eb15c1b87880540263910b">è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸€)â€”â€”ç¨‹åºçš„è¡¨ç¤ºã€è½¬æ¢ä¸é“¾æ¥</a></li>
<li><a href="https://www.bilibili.com/video/BV1Xx411E7qn/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ae16ff6478eb15c1b87880540263910b">è®¡ç®—æœºç³»ç»ŸåŸºç¡€(äºŒ)â€”â€”å¼‚å¸¸ã€ä¸­æ–­å’Œè¾“å…¥/è¾“å‡º</a></li>
<li><a href="https://www.bilibili.com/video/BV1jE411874k/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ae16ff6478eb15c1b87880540263910b">è®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸‰)â€”â€”ç¨‹åºçš„æ‰§è¡Œå’Œå­˜å‚¨è®¿é—®</a>
<ul>
<li>ä»¥ <code>IA-32 + Linux + C + gcc</code> ä¸ºå¹³å°</li>
</ul>
</li>
<li><a href="https://www.bilibili.com/video/BV1iW411d7hd?p=1&amp;vd_source=ae16ff6478eb15c1b87880540263910b">ã€ç²¾æ ¡ä¸­è‹±å­—å¹•ã€‘2015 CMU 15-213 CSAPP æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ</a></li>
</ul>
<hr>
<ul>
<li><strong><a href="https://book.douban.com/subject/26912767/">ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿï¼ˆåŸä¹¦ç¬¬3ç‰ˆï¼‰ã€‹CSAPP</a></strong></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>AcWing Web åº”ç”¨è¯¾</title>
      <link>https://xancoding.cn/posts/2022-11-02-15-49-03/</link>
      <pubDate>Wed, 02 Nov 2022 15:49:03 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2022-11-02-15-49-03/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.colopen-blog.com/Engineer/acw_web/&#34;&gt;AcWing Web åº”ç”¨è¯¾ | Colopen&amp;rsquo;s blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/activity/content/punch_the_clock/1150/&#34;&gt;AcWing Web åº”ç”¨è¯¾&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/4078555/&#34;&gt;HTML åŸºç¡€æ ‡ç­¾&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/4194723/&#34;&gt;CSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/4719082/&#34;&gt;JavaScript&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/5501588/&#34;&gt;React&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/5639568/&#34;&gt;Vue3&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/&#34;&gt;MDNå®˜æ–¹æ–‡æ¡£&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web&#34;&gt;Web å…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Learn/HTML&#34;&gt;HTML â€”â€” æ„å»º Web&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Learn/CSS&#34;&gt;CSS â€”â€” è®¾è®¡Web&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript&#34;&gt;JavaScript â€”â€” ç”¨æˆ·ç«¯åŠ¨æ€è„šæœ¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started&#34;&gt;React å…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started&#34;&gt;Vue å…¥é—¨&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial&#34;&gt;Canvas æ•™ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://www.dute.org/weird-fonts&#34;&gt;æ€ªå¼‚è‹±æ–‡ç”Ÿæˆå™¨&lt;/a&gt; ç”Ÿæˆæ¯”è¾ƒå¥½çœ‹çš„è‹±æ–‡å­—ä½“ï¼Œæ”¯æŒå¤åˆ¶ç²˜è´´&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://colorhunt.co/&#34;&gt;Color Hunt&lt;/a&gt; è®¾è®¡å¸ˆå’Œè‰ºæœ¯å®¶çš„è°ƒè‰²æ¿&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://game-icons.net/&#34;&gt;Game-icons&lt;/a&gt; æ¸¸æˆå›¾æ ‡åœ¨çº¿å­˜å‚¨åº“&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;VSCode&lt;/code&gt; è‡ªåŠ¨ç”Ÿæˆç¼ºçœçš„ &lt;code&gt;HTML&lt;/code&gt; ä»£ç æ¡†æ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-HTML&#34; data-lang=&#34;HTML&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0f0;font-weight:bold&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;html&lt;/span&gt; &lt;span style=&#34;color:#007f7f&#34;&gt;lang&lt;/span&gt;=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;en&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;head&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Â  &amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#007f7f&#34;&gt;charset&lt;/span&gt;=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;UTF-8&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Â  &amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#007f7f&#34;&gt;http-equiv&lt;/span&gt;=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;X-UA-Compatible&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#007f7f&#34;&gt;content&lt;/span&gt;=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;IE=edge&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Â  &amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;meta&lt;/span&gt; &lt;span style=&#34;color:#007f7f&#34;&gt;name&lt;/span&gt;=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;viewport&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#007f7f&#34;&gt;content&lt;/span&gt;=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Â  &amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;title&lt;/span&gt;&amp;gt;Document&amp;lt;/&lt;span style=&#34;font-weight:bold&#34;&gt;title&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;font-weight:bold&#34;&gt;head&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;&lt;span style=&#34;font-weight:bold&#34;&gt;body&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;font-weight:bold&#34;&gt;body&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;/&lt;span style=&#34;font-weight:bold&#34;&gt;html&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è¾“å…¥&lt;code&gt;ï¼&lt;/code&gt;ï¼Œæ¥ç€è¾“å…¥ &lt;code&gt;tab&lt;/code&gt; é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆç¼ºçœçš„ &lt;code&gt;HTML&lt;/code&gt; ä»£ç æ¡†æ¶&lt;/li&gt;
&lt;li&gt;å†æŒ‰ä¸‰ä¸‹ &lt;code&gt;tab&lt;/code&gt; é”®ï¼Œå…‰æ ‡ä¼šç§»åŠ¨åˆ° &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; ä¸ &lt;code&gt;&amp;lt;/body&amp;gt;&lt;/code&gt; ä¹‹é—´çš„ç©ºè¡Œ&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;kof&#34;&gt;KOF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Xancoding/Leaning-jQuery&#34;&gt;KOF&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/video/3830/&#34;&gt;AcWing Web åº”ç”¨è¯¾ | ä¸­æœŸé¡¹ç›®â€”â€”æ‹³çš‡ï¼ˆä¸Šï¼‰ | Vedio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/video/3833/&#34;&gt;AcWing Web åº”ç”¨è¯¾ | ä¸­æœŸé¡¹ç›®â€”â€”æ‹³çš‡ï¼ˆä¸‹ï¼‰ | Vedio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;åŸºç¡€æ“ä½œ&#34;&gt;åŸºç¡€æ“ä½œ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ“ä½œå¦‚ä¸‹ï¼š
è§’è‰²ä¸€: w è·³ a å·¦ç§» d å³ç§» j æ‹³å‡» 
è§’è‰²äºŒ: â†‘ è·³ â† å·¦ç§» â†’ å³ç§» 1 æ‹³å‡»
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ–‡ä»¶ç»“æ„&#34;&gt;æ–‡ä»¶ç»“æ„&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;|-- README.md
|-- static
|   |-- css
|   |   `-- base.css
|   |-- images
|   |   |-- background
|   |   |   `-- 0.gif
|   |   `-- player
|   |       `-- kyo
|   |           |-- 0.gif
|   |           |-- 1.gif
|   |           |-- 2.gif
|   |           |-- 3.gif
|   |           |-- 4.gif
|   |           |-- 5.gif
|   |           `-- 6.gif
|   `-- js
|       |-- ac_game_object
|       |   `-- base.js
|       |-- base.js
|       |-- controller
|       |   `-- base.js
|       |-- game_map
|       |   `-- base.js
|       |-- player
|       |   |-- base.js
|       |   `-- kyo.js
|       `-- utils
|           `-- gif.js
`-- templates
    `-- index.html
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•´ä½“æ¶æ„&#34;&gt;æ•´ä½“æ¶æ„&lt;/h3&gt;
&lt;p&gt;
&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2022/11/02/63627b3105c46.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2022/11/02/63627b3105c46.png&#34; alt=&#34;KOFStructure&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;h3 id=&#34;é€»è¾‘ç»“æ„&#34;&gt;é€»è¾‘ç»“æ„&lt;/h3&gt;
&lt;center&gt; 
	&lt;img style=&#34;border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34; src=&#34;https://bu.dusays.com/2022/11/02/63627ace5a2f9.png&#34;&gt;
	&lt;br&gt;
	&lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9; 
	display: inline-block; 
	color: #999; 
	padding: 2px;&#34;&gt;Retrieved fromï¼šhttps://www.acwing.com/solution/content/139831/&lt;/div&gt; 
 &lt;/center&gt;
&lt;h3 id=&#34;html&#34;&gt;HTML&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;templates/index.html&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;

&amp;lt;html lang=&amp;#34;en&amp;#34;&amp;gt;

&amp;lt;head&amp;gt;

Â  &amp;lt;meta charset=&amp;#34;UTF-8&amp;#34;&amp;gt;

Â  &amp;lt;meta http-equiv=&amp;#34;X-UA-Compatible&amp;#34; content=&amp;#34;IE=edge&amp;#34;&amp;gt;

Â  &amp;lt;meta name=&amp;#34;viewport&amp;#34; content=&amp;#34;width=device-width, initial-scale=1.0&amp;#34;&amp;gt;

Â  &amp;lt;title&amp;gt;KOF&amp;lt;/title&amp;gt;

Â  &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;../static/css/base.css&amp;#34;&amp;gt;

Â  &amp;lt;script src=&amp;#34;https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;

&amp;lt;/head&amp;gt;

&amp;lt;body&amp;gt;

Â  &amp;lt;div id=&amp;#34;kof&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;

  

Â  &amp;lt;script type=&amp;#34;module&amp;#34;&amp;gt;

Â  Â  import {KOF} from &amp;#39;../static/js/base.js&amp;#39;;

  

Â  Â  let kof = new KOF(&amp;#39;kof&amp;#39;);

Â  &amp;lt;/script&amp;gt;

&amp;lt;/body&amp;gt;

&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;css&#34;&gt;CSS&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;css/base.css&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#kof {

Â  width: 1280px;

Â  height: 720px;

Â  background-image: url(&amp;#39;../images/background/0.gif&amp;#39;);

Â  background-size: 200% 100%;

Â  background-position: top;

Â  position: absolute;

}

  

#kof&amp;gt;.kof-head {

Â  width: 100%;

Â  height: 80px;

Â  position: absolute;

Â  top: 0;

Â  display: flex;

Â  align-items: center;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-hp-0 {

Â  height: 40px;

Â  width: calc(50% - 60px);

Â  margin-left: 20px;

Â  border: white 5px solid;

Â  box-sizing: border-box;

Â  border-right: none;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-timer {

Â  height: 60px;

Â  width: 80px;

Â  background-color: orange;

Â  border: white 5px solid;

Â  box-sizing: border-box;

Â  color: white;

Â  font-size: 30px;

Â  font-weight: 800;

Â  text-align: center;

Â  line-height: 50px;

Â  user-select: none;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-hp-1 {

Â  height: 40px;

Â  width: calc(50% - 60px);

Â  border: white 5px solid;

Â  box-sizing: border-box;

Â  border-left: none;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-hp-0&amp;gt;div {

Â  background-color: red;

Â  height: 100%;

Â  width: 100%;

Â  float: right;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-hp-1&amp;gt;div {

Â  background-color: red;

Â  height: 100%;

Â  width: 100%;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-hp-0&amp;gt;div&amp;gt;div {

Â  background-color: lightgreen;

Â  height: 100%;

Â  width: 100%;

Â  float: right;

}

  

#kof&amp;gt;.kof-head&amp;gt;.kof-head-hp-1&amp;gt;div&amp;gt;div {

Â  background-color: lightgreen;

Â  height: 100%;

Â  width: 100%;

}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;javascript&#34;&gt;JavaScript&lt;/h3&gt;
&lt;h4 id=&#34;é€»è¾‘ç»“æ„-1&#34;&gt;é€»è¾‘ç»“æ„&lt;/h4&gt;
&lt;p&gt;
&lt;div class=&#34;post-img-view&#34;&gt;
&lt;a data-fancybox=&#34;gallery&#34; href=&#34;https://bu.dusays.com/2022/11/03/63631ec3461ef.png&#34;&gt;
&lt;img src=&#34;https://bu.dusays.com/2022/11/03/63631ec3461ef.png&#34; alt=&#34;é€»è¾‘ç»“æ„&#34;  /&gt;
&lt;/a&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;h4 id=&#34;kof-1&#34;&gt;KOF&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/base.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import { GameMap } from &amp;#39;../js/game_map/base.js&amp;#39;

import { Kyo } from &amp;#39;../js/player/kyo.js&amp;#39;;

  

export class KOF {

Â  constructor(id) {

Â  Â  this.$kof = $(&amp;#39;#&amp;#39; + id);

  

Â  Â  this.game_map = new GameMap(this);

Â  Â  this.players = [

Â  Â  Â  new Kyo(this, {

Â  Â  Â  Â  id: 0,

Â  Â  Â  Â  x: 200,

Â  Â  Â  Â  y: 0,

Â  Â  Â  Â  width: 120,

Â  Â  Â  Â  height: 200,

Â  Â  Â  Â  color: &amp;#39;blue&amp;#39;

Â  Â  Â  }),

Â  Â  Â  new Kyo(this, {

Â  Â  Â  Â  id: 1,

Â  Â  Â  Â  x: 900,

Â  Â  Â  Â  y: 0,

Â  Â  Â  Â  width: 120,

Â  Â  Â  Â  height: 200,

Â  Â  Â  Â  color: &amp;#39;red&amp;#39;

Â  Â  Â  })

Â  Â  ]

Â  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;acgameobject&#34;&gt;AcGameObject&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/ac_game_object/base.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;let AC_GAME_OBJECTS = [];

  

export class AcGameObject {

Â  constructor() {

Â  Â  AC_GAME_OBJECTS.push(this);

  

Â  Â  this.timedelta = 0;

Â  Â  this.has_call_start = false;

Â  }

  

Â  start() { Â // åˆå§‹åŒ–

  
  

Â  }

  

Â  update() { Â // æ¯ä¸€å¸§æ‰§è¡Œä¸€æ¬¡

  

Â  }

  

Â  destory() { Â // åˆ é™¤å½“å‰å¯¹è±¡

Â  Â  for (let i in AC_GAME_OBJECTS) {

Â  Â  Â  if (AC_GAME_OBJECTS[i] === this) {

Â  Â  Â  Â  AC_GAME_OBJECTS.splice(i, 1);

Â  Â  Â  Â  break;

Â  Â  Â  }

Â  Â  }

Â  }

}

  

let last_timestamp; Â  // ä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°æ—¶çš„æ—¶åˆ»

  

/**

Â * @description è¯¥å‡½æ•°æ¯ä¸€å¸§æ‰§è¡Œä¸€æ¬¡

Â * @param {number} timestamp å½“å‰æ‰§è¡Œå‡½æ•°æ—¶çš„æ—¶åˆ»

Â */

  

let AC_GAME_OBJECTS_FRAME = (timestamp) =&amp;gt; {

Â  for (let obj of AC_GAME_OBJECTS) {

Â  Â  if (!obj.has_call_start) {

Â  Â  Â  obj.start();

Â  Â  Â  obj.has_call_start = true;

Â  Â  } else {

Â  Â  Â  obj.timedelta = timestamp - last_timestamp;

Â  Â  Â  obj.update();

Â  Â  }

Â  }

  

Â  last_timestamp = timestamp;

Â  requestAnimationFrame(AC_GAME_OBJECTS_FRAME);

}

  

requestAnimationFrame(AC_GAME_OBJECTS_FRAME);
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;controller&#34;&gt;Controller&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;controller&lt;/code&gt; æ§åˆ¶å™¨ï¼Œè¯»å–ç©å®¶çš„è¾“å…¥
&lt;code&gt;js/constroller/base.js&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;export class Controller { Â  // æ‰‹åŠ¨å®ç°é”®ç›˜è§¦å‘äº‹ä»¶â€”â€”å½“å‰æŒ‰ä½çš„æŒ‰é”®ï¼ˆæ•ˆæœä¸åŒäºkeydownï¼‰

Â  constructor($canvas) {

Â  Â  this.$canvas = $canvas;

Â  Â  this.pressed_keys = new Set(); Â  Â // Set å¯¹è±¡å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼

Â  Â  this.start();

Â  }

  

Â  start() {

Â  Â  let outer = this;

Â  Â  this.$canvas.keydown(function(e){ Â  // keydownï¼šæŸä¸ªé”®æ˜¯å¦è¢«æŒ‰ä½ï¼Œäº‹ä»¶ä¼šè¿ç»­è§¦å‘

Â  Â  Â  outer.pressed_keys.add(e.key);

Â  Â  });

  

Â  Â  this.$canvas.keyup(function(e){ Â  // keyupï¼šæŸä¸ªæŒ‰é”®æ˜¯å¦è¢«é‡Šæ”¾

Â  Â  Â  outer.pressed_keys.delete(e.key);

Â  Â  });

  

Â  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;gamemap&#34;&gt;GameMap&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/game_map/base.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import {AcGameObject} from &amp;#39;../ac_game_object/base.js&amp;#39;

import { Controller } from &amp;#39;../controller/base.js&amp;#39;;

  

export class GameMap extends AcGameObject {

Â  constructor(root) {

Â  Â  super();

  

Â  Â  this.root = root;

Â  Â  this.$canvas = $(&amp;#39;&amp;lt;canvas width=&amp;#34;1280&amp;#34; height=&amp;#34;720&amp;#34; tabindex=0&amp;gt;&amp;lt;/canvas&amp;gt;&amp;#39;); Â  // æ„é€ ä¸€ä¸ªjQueryå¯¹è±¡ Â å…¶ä¸­ï¼Œtabindex=&amp;#34;0&amp;#34;ä½¿&amp;lt;canvas&amp;gt;å…ƒç´ å¯ä»¥èšç„¦

Â  Â  this.ctx = this.$canvas[0].getContext(&amp;#39;2d&amp;#39;); Â // this.$canvas[0]æ˜¯&amp;lt;canvas&amp;gt;å…ƒç´ çš„DOMå¯¹è±¡ Â  this.ctxç”¨äºç”»å¸ƒçš„æ¸²æŸ“

Â  Â  this.root.$kof.append(this.$canvas);

Â  Â  this.$canvas.focus(); Â  // èšç„¦ï¼Œä½¿ä¹‹å¯ä»¥è·å–è¾“å…¥

  

Â  Â  this.controller = new Controller(this.$canvas);

  

Â  Â  // åŠ å…¥è¡€æ¡

Â  Â  this.root.$kof.append($(`

Â  Â  Â  &amp;lt;div class=&amp;#34;kof-head&amp;#34;&amp;gt;

Â  Â  Â  Â  &amp;lt;div class=&amp;#34;kof-head-hp-0&amp;#34;&amp;gt;&amp;lt;div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;

Â  Â  Â  Â  &amp;lt;div class=&amp;#34;kof-head-timer&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;

Â  Â  Â  Â  &amp;lt;div class=&amp;#34;kof-head-hp-1&amp;#34;&amp;gt;&amp;lt;div&amp;gt;&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;

Â  Â  Â  &amp;lt;/div&amp;gt;

Â  Â  `));

  

Â  Â  // åŠ å…¥è®¡æ—¶è¡¨

Â  Â  this.time_left = 60000; Â //å•ä½ï¼šæ¯«ç§’ï¼ˆå› ä¸ºå®šä¹‰çš„timedeltaå•ä½æ˜¯msï¼‰

Â  Â  this.$timer = this.root.$kof.find(&amp;#39;.kof-head-timer&amp;#39;);

Â  }

  

Â  start() {

  

Â  }

  

Â  update() {

Â  Â  this.update_time();

  

Â  Â  this.render();

Â  }

  

Â  update_time() {

Â  Â  this.time_left -= this.timedelta;

Â  Â  if (this.time_left &amp;lt; 0) { Â  // æ—¶é—´åˆ°ï¼Œæ¸¸æˆç»“æŸ

Â  Â  Â  this.time_left = 0;

  

Â  Â  Â  let [a, b] = this.root.players;

Â  Â  Â  if (a.status !== 6 &amp;amp;&amp;amp; b.status !== 6) {

Â  Â  Â  Â  a.statu = b.status = 6;

Â  Â  Â  Â  a.frame_current_cnt = b.frame_current_cnt = 0;

Â  Â  Â  Â  a.vx = b.vx = 0;

Â  Â  Â  }

Â  Â  }

Â  Â  this.$timer.text(parseInt(this.time_left / 1000));

Â  }

  

Â  render() {

Â  Â  this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);

Â  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;player&#34;&gt;Player&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/player/base.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import { AcGameObject } from &amp;#39;../ac_game_object/base.js&amp;#39;;

  

export class Player extends AcGameObject {

Â  constructor(root, info) {

Â  Â  super();

  

Â  Â  this.root = root;

Â  Â  this.id = info.id;

Â  Â  this.x = info.x;

Â  Â  this.y = info.y;

Â  Â  this.width = info.width;

Â  Â  this.height = info.height;

Â  Â  this.color = info.color;

  

Â  Â  this.direction = 1;

  

Â  Â  this.vx = 0;

Â  Â  this.vy = 0;

  

Â  Â  this.speedx = 400; Â // æ°´å¹³é€Ÿåº¦

Â  Â  this.speedy = -1000; Â // è·³è·ƒåˆå§‹é€Ÿåº¦

  

Â  Â  this.gravity = 50;

  

Â  Â  this.ctx = this.root.game_map.ctx;

Â  Â  this.pressed_keys = this.root.game_map.controller.pressed_keys;

Â  Â  this.status = 3; Â // 0ï¼šé™æ­¢ï¼Œ 1ï¼šå‘å‰ï¼Œ2ï¼šå‘åï¼Œ3ï¼šè·³è·ƒï¼Œ4ï¼šæ”»å‡»ï¼Œ5ï¼šè¢«æ”»å‡»ï¼Œ6ï¼šæ­»äº¡ Â  éšç€é¡¹ç›®çš„å®Œå–„ï¼ŒåŠ¨ä½œä¼šå˜çš„å¾ˆå¤šï¼Œè¿™æ—¶ç”¨æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ä»£æ›¿this.statusä¼šæ›´æ–¹ä¾¿

Â  Â  this.animations = new Map(); Â // å­˜å‚¨GIFåŠ¨ç”»çš„æ¯ä¸€å¸§

Â  Â  this.frame_current_cnt = 0; Â // è®°å½•å½“å‰çš„å¸§æ•°

  

Â  Â  this.hp = 100;

Â  Â  this.$hp = this.root.$kof.find(`.kof-head-hp-${this.id}&amp;gt;div`);

Â  Â  this.$hp_div = this.$hp.find(&amp;#39;div&amp;#39;);

Â  }

Â  start() {

Â  }

  

Â  update_control() {

Â  Â  let w, a, d, j;

Â  Â  if (this.id === 0) {

Â  Â  Â  w = this.pressed_keys.has(&amp;#39;w&amp;#39;);

Â  Â  Â  a = this.pressed_keys.has(&amp;#39;a&amp;#39;);

Â  Â  Â  d = this.pressed_keys.has(&amp;#39;d&amp;#39;);

Â  Â  Â  j = this.pressed_keys.has(&amp;#39;j&amp;#39;);

Â  Â  } else {

Â  Â  Â  w = this.pressed_keys.has(&amp;#39;ArrowUp&amp;#39;);

Â  Â  Â  a = this.pressed_keys.has(&amp;#39;ArrowLeft&amp;#39;);

Â  Â  Â  d = this.pressed_keys.has(&amp;#39;ArrowRight&amp;#39;);

Â  Â  Â  j = this.pressed_keys.has(&amp;#39;1&amp;#39;);

Â  Â  }

  

Â  Â  if (this.status === 0 || this.status === 1) { Â  // é™æ­¢çŠ¶æ€ || ç§»åŠ¨çŠ¶æ€

Â  Â  Â  if (j) { Â // æ”»å‡»

Â  Â  Â  Â  this.status = 4;

Â  Â  Â  Â  this.vx = 0;

Â  Â  Â  Â  this.frame_current_cnt = 0;

Â  Â  Â  } else if (w) { Â // è·³è·ƒ

Â  Â  Â  Â  if (d) { Â // å‘å³è·³

Â  Â  Â  Â  Â  this.vx = this.speedx;

Â  Â  Â  Â  } else if (a) { Â // å‘å·¦è·³

Â  Â  Â  Â  Â  this.vx = -this.speedx;

Â  Â  Â  Â  } else { Â // å‚ç›´è·³

Â  Â  Â  Â  Â  this.vx = 0;

Â  Â  Â  Â  }

Â  Â  Â  Â  this.vy = this.speedy;

Â  Â  Â  Â  this.status = 3;

Â  Â  Â  Â  this.frame_current_cnt = 0; // æ¯æ¬¡è·³è·ƒé‡æ–°è®°å½•å¸§æ•°ï¼Œç¡®ä¿è·³è·ƒåŠ¨ç”»æ­£å¸¸

  

Â  Â  Â  } else if (d) { Â // å‘å³ç§»åŠ¨

Â  Â  Â  Â  this.vx = this.speedx;

Â  Â  Â  Â  this.status = 1;

Â  Â  Â  } else if (a) { Â // å‘å·¦ç§»åŠ¨

Â  Â  Â  Â  this.vx = - this.speedx;

Â  Â  Â  Â  this.status = 1;

Â  Â  Â  } else { Â // é™æ­¢

Â  Â  Â  Â  this.vx = 0;

Â  Â  Â  }

Â  Â  }

  

Â  }

Â  update_move() {

Â  Â  this.vy += this.gravity;

  

Â  Â  this.x += this.vx * this.timedelta / 1000;

Â  Â  this.y += this.vy * this.timedelta / 1000;

  

Â  Â  // ç¡®ä¿ä¸¤ä¸ªè§’è‰²ä¸ä¼šé‡å  Â  a æ˜¯è‡ªå·±ã€b æ˜¯å¯¹æ‰‹

Â  Â  // let [a, b] = this.root.players;

Â  Â  // if (a !== this) [a,b] = [b, a];

  

Â  Â  // let r1 = {

Â  Â  // Â  x1: a.x,

Â  Â  // Â  y1: a.y,

Â  Â  // Â  x2: a.x + a.width,

Â  Â  // Â  y2: a.x + a.height,

Â  Â  // };

Â  Â  // let r2 = {

Â  Â  // Â  x1: b.x,

Â  Â  // Â  y1: b.y,

Â  Â  // Â  x2: b.x + b.width,

Â  Â  // Â  y2: b.x + b.height,

Â  Â  // };

  

Â  Â  // if (this.is_collusion(r1, r2)) {

Â  Â  // Â  b.x += this.vx * this.timedelta / 1000 / 2;

Â  Â  // Â  b.y += this.vy * this.timedelta / 1000 / 2;

Â  Â  // Â  a.x -= this.vx * this.timedelta / 1000 / 2;

Â  Â  // Â  a.y -= this.vy * this.timedelta / 1000 / 2;

  

Â  Â  // Â  if (this.status === 3) this.status = 0;

Â  Â  // }

  

Â  Â  // è½åˆ°å¹³åœ°ä¸Šåé™æ­¢

Â  Â  if (this.y &amp;gt; 450) {

Â  Â  Â  this.y = 450;

Â  Â  Â  this.vy = 0;

Â  Â  Â  if (this.status === 3) this.status = 0; Â  // å› ä¸ºä»»ä½•æ—¶åˆ»éƒ½æœ‰é‡åŠ›æ–½åŠ ï¼Œä¸åŠ è¿™ä¸€å¥ä¼šå¯¼è‡´çŠ¶æ€åªæœ‰é™æ­¢çŠ¶æ€

Â  Â  }

  

Â  Â  // ä¸èƒ½è¶…å‡ºå·¦å³è¾¹ç•Œ

Â  Â  if (this.x &amp;lt; 0) {

Â  Â  Â  this.x = 0;

Â  Â  } else if (this.x + this.width &amp;gt; this.root.game_map.$canvas.width()) {

Â  Â  Â  this.x = this.root.game_map.$canvas.width() - this.width;

Â  Â  }

  

Â  }

  

Â  update_direction() { Â // ç¡®ä¿ä¸¤ä¸ªè§’è‰²å§‹ç»ˆç›¸å¯¹

Â  Â  if (this.status === 6) return;

  

Â  Â  let players = this.root.players;

Â  Â  if (players[0] &amp;amp;&amp;amp; players[1]) {

Â  Â  Â  let me = this, you = players[1 - this.id];

Â  Â  Â  if (me.x &amp;lt; you.x) me.direction = 1;

Â  Â  Â  else me.direction = -1;

Â  Â  }

Â  }

  

Â  is_collusion(r1, r2) { Â // åˆ¤æ–­ä¸¤ä¸ªçŸ©é˜µæ˜¯å¦æœ‰äº¤é›†

Â  Â  if (Math.max(r1.x1, r2.x1) &amp;gt; Math.min(r1.x2, r2.x2))

Â  Â  Â  return false;

Â  Â  if (Math.max(r1.y1, r2.y1) &amp;gt; Math.min(r1.y2,r2.y2))

Â  Â  Â  return false;

Â  Â  return true;

Â  }

  

Â  is_attack() {

Â  Â  if (this.status === 6) return; Â // å·²ç»å€’åœ°ï¼Œæ— æ³•å†è¢«æ”»å‡»

  

Â  Â  this.status = 5;

Â  Â  this.frame_current_cnt = 0;

  

Â  Â  this.hp = Math.max(this.hp - 10, 0);

  

Â  Â  this.$hp_div.animate({ Â // è¡€æ¡å‡å°‘ï¼Œæ¸å˜

Â  Â  Â  width: this.$hp.parent().width() * this.hp / 100,

Â  Â  }, 350);

  

Â  Â  this.$hp.animate({ Â // è¡€æ¡å‡å°‘ï¼Œæ¸å˜

Â  Â  Â  width: this.$hp.parent().width() * this.hp / 100,

Â  Â  }, 600);

  

Â  Â  if (this.hp &amp;lt;= 0) {

Â  Â  Â  this.status = 6;

Â  Â  Â  this.frame_current_cnt = 0;

Â  Â  Â  this.vx = 0;

Â  Â  }

Â  }

  

Â  update_attack() { Â  // åˆ¤å®šæ˜¯å¦è¢«æ”»å‡»åˆ°

Â  Â  if (this.status === 4 &amp;amp;&amp;amp; this.frame_current_cnt === 18) { Â  // ç¬¬18å¸§æ—¶åŠ¨ç”»æŒ¥å‡ºæ‹³ï¼Œåˆ¤æ–­æ­¤æ—¶æ˜¯å¦æ‹³å¤´ä¸å¯¹æ–¹æœ‰ç¢°æ’

Â  Â  Â  let me = this, you = this.root.players[1 - this.id];

Â  Â  Â  let r1; Â // æ”»å‡»åˆ¤å®šçŸ©å½¢

Â  Â  Â  let r2; Â // æ•Œæ–¹äººç‰©çŸ©å½¢

Â  Â  Â  if (this.direction &amp;gt; 0) {

Â  Â  Â  Â  r1 = {

Â  Â  Â  Â  Â  x1: me.x + 120,

Â  Â  Â  Â  Â  y1: me.y + 40,

Â  Â  Â  Â  Â  x2: me.x + 120 + 100,

Â  Â  Â  Â  Â  y2: me.y + 40 + 20,

Â  Â  Â  Â  }

Â  Â  Â  } else {

Â  Â  Â  Â  r1 = {

Â  Â  Â  Â  Â  x1: me.x + me.width - 120 - 100,

Â  Â  Â  Â  Â  y1: me.y + 40,

Â  Â  Â  Â  Â  x2: me.x + me.width - 120 - 100 + 100,

Â  Â  Â  Â  Â  y2: me.y + 40 + 20,

Â  Â  Â  Â  }

Â  Â  Â  }

  

Â  Â  Â  r2 = {

Â  Â  Â  Â  x1: you.x,

Â  Â  Â  Â  y2: you.y,

Â  Â  Â  Â  x2: you.x + you.width,

Â  Â  Â  Â  y2: you.y + you.height

Â  Â  Â  };

  

Â  Â  Â  if (this.is_collusion(r1, r2)) {

Â  Â  Â  Â  you.is_attack();

Â  Â  Â  }

Â  Â  }

Â  }

  

Â  update() {

Â  Â  this.update_attack();

Â  Â  this.update_direction();

Â  Â  this.update_control();

Â  Â  this.update_move();

Â  Â  this.render();

Â  }

  

Â  render() {

  

Â  Â  let status = this.status;

  

Â  Â  if (this.status === 1 &amp;amp;&amp;amp; this.direction * this.vx &amp;lt; 0) status = 2; Â  Â // åé€€çŠ¶æ€

  

Â  Â  let obj = this.animations.get(status);

Â  Â  if (obj &amp;amp;&amp;amp; obj.loaded) { Â  Â // GIF å·²ç»åŠ è½½å®Œæˆ

Â  Â  Â  if (this.direction &amp;gt; 0) { Â // æ­£æ–¹å‘

Â  Â  Â  Â  let k = parseInt(this.frame_current_cnt / obj.frame_rate) % obj.frame_cnt; Â // é€šè¿‡obj.frame_rateæ§åˆ¶æ¸²æŸ“åŠ¨ç”»çš„é€Ÿç‡ï¼Œæ–¹ä¾¿æ§åˆ¶åŠ¨ç”»ï¼Œè€Œä¸åªæ˜¯å•çº¯çš„æ¯ä¸€å¸§éƒ½æ¸²æŸ“ä¸€æ¬¡

Â  Â  Â  Â  let image = obj.gif.frames[k].image;

Â  Â  Â  Â  this.ctx.drawImage(image, this.x, this.y + obj.offset_y, image.width * obj.scale, image.height * obj.scale);

Â  Â  Â  } else { Â // åæ–¹å‘ Â  é€šè¿‡è°ƒæ•´åæ ‡ç³»æ¥ç¿»è½¬æ–¹å‘

Â  Â  Â  Â  this.ctx.save();

Â  Â  Â  Â  this.ctx.scale(-1, 1);

Â  Â  Â  Â  this.ctx.translate(-this.root.game_map.$canvas.width(), 0);

  

Â  Â  Â  Â  let k = parseInt(this.frame_current_cnt / obj.frame_rate) % obj.frame_cnt;

Â  Â  Â  Â  let image = obj.gif.frames[k].image;

Â  Â  Â  Â  this.ctx.drawImage(image, this.root.game_map.$canvas.width() - this.width - this.x, this.y + obj.offset_y, image.width * obj.scale, image.height * obj.scale); Â // ä¸åŒäºæ­£æ–¹å‘æ—¶çš„æ¸²æŸ“ï¼Œå› ä¸ºæ­¤æ—¶åæ ‡ç³»æ”¹å˜ï¼Œéœ€è¦åœ¨å¯¹ç§°çš„ä½ç½®æ¸²æŸ“

  

Â  Â  Â  Â  this.ctx.restore();

Â  Â  Â  }

Â  Â  }

  

Â  Â  if (status === 4 || status === 5 || status === 6) { Â // ç¡®ä¿ä¸ä¼šä¸€ç›´å¾ªç¯GIF

Â  Â  Â  if (this.frame_current_cnt === obj.frame_rate * (obj.frame_cnt - 1)) { Â // ç¡®ä¿æ­¤æ—¶å·²ç»æ’­æ”¾å®Œä¸€æ¬¡GIFåŠ¨ç”»

Â  Â  Â  Â  if (status === 6) { Â  // æ­»äº¡å€’åœ°ä¸èµ·ï¼Œè¿™é‡Œçš„ -- å’Œ ä¸‹é¢çš„ ++ ç›¸æŠµæ¶ˆï¼Œä½¿ä¹‹åœ¨æœ€åä¸€å¸§ä¸å†å˜åŒ–

Â  Â  Â  Â  Â  this.frame_current_cnt--;

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  this.status = 0;

Â  Â  Â  Â  }

Â  Â  Â  }

Â  Â  }

  

Â  Â  this.frame_current_cnt++;

Â  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;js/player/kyo.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import { Player } from &amp;#34;../player/base.js&amp;#34;;

import {GIF} from &amp;#39;../utils/gif.js&amp;#39;

  

export class Kyo extends Player {

Â  constructor(root, info) {

Â  Â  super(root, info);

  

Â  Â  this.init_animations(); Â  // åˆå§‹åŒ–åŠ¨ç”»

Â  }

  

Â  init_animations() {

Â  Â  let outer = this;

Â  Â  let offsets = [0, -22, -22, -150, 0, 0, 0]; Â  // åç§»é‡ ä¸åŒçš„åŠ¨ç”»é«˜åº¦ä¸åŒï¼Œå› æ­¤éœ€è¦å€ŸåŠ©ç«–ç›´æ–¹å‘ä¸Šçš„åç§»é‡å°†ä»–ä»¬è°ƒæ•´è‡³åŒä¸€æ°´å¹³é¢

Â  Â  for (let i = 0; i &amp;lt; 7; ++ i) { Â // 7ä¸ªåŠ¨ä½œ

Â  Â  Â  let gif = GIF();

Â  Â  Â  gif.load(`/static/images/player/kyo/${i}.gif`);

Â  Â  Â  this.animations.set(i, { Â // åŠ¨ç”»

Â  Â  Â  Â  gif: gif,

Â  Â  Â  Â  frame_cnt: 0, Â // GIFå¸§æ•°

Â  Â  Â  Â  frame_rate: 5, Â // æ¯5å¸§è¿‡æ¸¡ä¸€æ¬¡

Â  Â  Â  Â  offset_y: offsets[i], Â // yæ–¹å‘åç§»é‡

Â  Â  Â  Â  loaded: false, Â // æ˜¯å¦åŠ è½½å®Œæˆ

Â  Â  Â  Â  scale: 2, Â // æ”¾å¤§2å€

Â  Â  Â  });

  

Â  Â  Â  gif.onload = function() { Â  // åŠ è½½å®Œæˆ

Â  Â  Â  Â  let obj = outer.animations.get(i);

Â  Â  Â  Â  obj.frame_cnt = gif.frames.length;

Â  Â  Â  Â  obj.loaded = true;

  

Â  Â  Â  Â  if (i === 3) { Â // è°ƒæ•´è·³è·ƒæ—¶GIFæ’­æ”¾é€Ÿç‡

Â  Â  Â  Â  Â  obj.frame_rate = 4;

Â  Â  Â  Â  }

Â  Â  Â  }

Â  Â  }

Â  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;gif&#34;&gt;GIF&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://stackoverflow.com/questions/48234696/how-to-put-a-gif-with-canvas/48348567#48348567&#34;&gt;Loading and playing GIF image to canvas&lt;/a&gt;    æŠŠç©å®¶çš„&lt;code&gt;GIF&lt;/code&gt;åŠ¨ç”»æ¸²æŸ“åœ¨&lt;code&gt;canvas&lt;/code&gt;ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;code&gt;js/utils/gif.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;const GIF = function () {

Â  // **NOT** for commercial use.

Â  var timerID; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // timer handle for set time out usage

Â  var st; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // holds the stream object when loading.

Â  var interlaceOffsets = [0, 4, 2, 1]; // used in de-interlacing.

Â  var interlaceSteps = [8, 8, 4, 2];

Â  var interlacedBufSize; Â // this holds a buffer to de interlace. Created on the first frame and when size changed

Â  var deinterlaceBuf;

Â  var pixelBufSize; Â  Â // this holds a buffer for pixels. Created on the first frame and when size changed

Â  var pixelBuf;

Â  const GIF_FILE = { // gif file data headers

Â  Â  GCExt: 0xF9,

Â  Â  COMMENT: 0xFE,

Â  Â  APPExt: 0xFF,

Â  Â  UNKNOWN: 0x01, // not sure what this is but need to skip it in parser

Â  Â  IMAGE: 0x2C,

Â  Â  EOF: 59, Â  // This is entered as decimal

Â  Â  EXT: 0x21,

Â  };

Â  // simple buffered stream used to read from the file

Â  var Stream = function (data) {

Â  Â  Â  this.data = new Uint8ClampedArray(data);

Â  Â  Â  this.pos = 0;

Â  Â  Â  var len = this.data.length;

Â  Â  Â  this.getString = function (count) { // returns a string from current pos of len count

Â  Â  Â  Â  Â  var s = &amp;#34;&amp;#34;;

Â  Â  Â  Â  Â  while (count--) { s += String.fromCharCode(this.data[this.pos++]) }

Â  Â  Â  Â  Â  return s;

Â  Â  Â  };

Â  Â  Â  this.readSubBlocks = function () { // reads a set of blocks as a string

Â  Â  Â  Â  Â  var size, count, data = &amp;#34;&amp;#34;;

Â  Â  Â  Â  Â  do {

Â  Â  Â  Â  Â  Â  Â  count = size = this.data[this.pos++];

Â  Â  Â  Â  Â  Â  Â  while (count--) { data += String.fromCharCode(this.data[this.pos++]) }

Â  Â  Â  Â  Â  } while (size !== 0 &amp;amp;&amp;amp; this.pos &amp;lt; len);

Â  Â  Â  Â  Â  return data;

Â  Â  Â  }

Â  Â  Â  this.readSubBlocksB = function () { // reads a set of blocks as binary

Â  Â  Â  Â  Â  var size, count, data = [];

Â  Â  Â  Â  Â  do {

Â  Â  Â  Â  Â  Â  Â  count = size = this.data[this.pos++];

Â  Â  Â  Â  Â  Â  Â  while (count--) { data.push(this.data[this.pos++]); }

Â  Â  Â  Â  Â  } while (size !== 0 &amp;amp;&amp;amp; this.pos &amp;lt; len);

Â  Â  Â  Â  Â  return data;

Â  Â  Â  }

Â  };

Â  // LZW decoder uncompressed each frames pixels

Â  // this needs to be optimised.

Â  // minSize is the min dictionary as powers of two

Â  // size and data is the compressed pixels

Â  function lzwDecode(minSize, data) {

Â  Â  Â  var i, pixelPos, pos, clear, eod, size, done, dic, code, last, d, len;

Â  Â  Â  pos = pixelPos = 0;

Â  Â  Â  dic = [];

Â  Â  Â  clear = 1 &amp;lt;&amp;lt; minSize;

Â  Â  Â  eod = clear + 1;

Â  Â  Â  size = minSize + 1;

Â  Â  Â  done = false;

Â  Â  Â  while (!done) { // JavaScript optimisers like a clear exit though I never use &amp;#39;done&amp;#39; apart from fooling the optimiser

Â  Â  Â  Â  Â  last = code;

Â  Â  Â  Â  Â  code = 0;

Â  Â  Â  Â  Â  for (i = 0; i &amp;lt; size; i++) {

Â  Â  Â  Â  Â  Â  Â  if (data[pos &amp;gt;&amp;gt; 3] &amp;amp; (1 &amp;lt;&amp;lt; (pos &amp;amp; 7))) { code |= 1 &amp;lt;&amp;lt; i }

Â  Â  Â  Â  Â  Â  Â  pos++;

Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (code === clear) { // clear and reset the dictionary

Â  Â  Â  Â  Â  Â  Â  dic = [];

Â  Â  Â  Â  Â  Â  Â  size = minSize + 1;

Â  Â  Â  Â  Â  Â  Â  for (i = 0; i &amp;lt; clear; i++) { dic[i] = [i] }

Â  Â  Â  Â  Â  Â  Â  dic[clear] = [];

Â  Â  Â  Â  Â  Â  Â  dic[eod] = null;

Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  if (code === eod) { done = true; return }

Â  Â  Â  Â  Â  Â  Â  if (code &amp;gt;= dic.length) { dic.push(dic[last].concat(dic[last][0])) }

Â  Â  Â  Â  Â  Â  Â  else if (last !== clear) { dic.push(dic[last].concat(dic[code][0])) }

Â  Â  Â  Â  Â  Â  Â  d = dic[code];

Â  Â  Â  Â  Â  Â  Â  len = d.length;

Â  Â  Â  Â  Â  Â  Â  for (i = 0; i &amp;lt; len; i++) { pixelBuf[pixelPos++] = d[i] }

Â  Â  Â  Â  Â  Â  Â  if (dic.length === (1 &amp;lt;&amp;lt; size) &amp;amp;&amp;amp; size &amp;lt; 12) { size++ }

Â  Â  Â  Â  Â  }

Â  Â  Â  }

Â  };

Â  function parseColourTable(count) { // get a colour table of length count Â Each entry is 3 bytes, for RGB.

Â  Â  Â  var colours = [];

Â  Â  Â  for (var i = 0; i &amp;lt; count; i++) { colours.push([st.data[st.pos++], st.data[st.pos++], st.data[st.pos++]]) }

Â  Â  Â  return colours;

Â  }

Â  function parse() { Â  Â  Â  Â // read the header. This is the starting point of the decode and async calls parseBlock

Â  Â  Â  var bitField;

Â  Â  Â  st.pos += 6;

Â  Â  Â  gif.width = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  gif.height = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  bitField = st.data[st.pos++];

Â  Â  Â  gif.colorRes = (bitField &amp;amp; 0b1110000) &amp;gt;&amp;gt; 4;

Â  Â  Â  gif.globalColourCount = 1 &amp;lt;&amp;lt; ((bitField &amp;amp; 0b111) + 1);

Â  Â  Â  gif.bgColourIndex = st.data[st.pos++];

Â  Â  Â  st.pos++; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // ignoring pixel aspect ratio. if not 0, aspectRatio = (pixelAspectRatio + 15) / 64

Â  Â  Â  if (bitField &amp;amp; 0b10000000) { gif.globalColourTable = parseColourTable(gif.globalColourCount) } // global colour flag

Â  Â  Â  setTimeout(parseBlock, 0);

Â  }

Â  function parseAppExt() { // get application specific data. Netscape added iterations and terminator. Ignoring that

Â  Â  Â  st.pos += 1;

Â  Â  Â  if (&amp;#39;NETSCAPE&amp;#39; === st.getString(8)) { st.pos += 8 } Â // ignoring this data. iterations (word) and terminator (byte)

Â  Â  Â  else {

Â  Â  Â  Â  Â  st.pos += 3; Â  Â  Â  Â  Â  Â // 3 bytes of string usually &amp;#34;2.0&amp;#34; when identifier is NETSCAPE

Â  Â  Â  Â  Â  st.readSubBlocks(); Â  Â  // unknown app extension

Â  Â  Â  }

Â  };

Â  function parseGCExt() { // get GC data

Â  Â  Â  var bitField;

Â  Â  Â  st.pos++;

Â  Â  Â  bitField = st.data[st.pos++];

Â  Â  Â  gif.disposalMethod = (bitField &amp;amp; 0b11100) &amp;gt;&amp;gt; 2;

Â  Â  Â  gif.transparencyGiven = bitField &amp;amp; 0b1 ? true : false; // ignoring bit two that is marked as Â userInput???

Â  Â  Â  gif.delayTime = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  gif.transparencyIndex = st.data[st.pos++];

Â  Â  Â  st.pos++;

Â  };

Â  function parseImg() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // decodes image data to create the indexed pixel image

Â  Â  Â  var deinterlace, frame, bitField;

Â  Â  Â  deinterlace = function (width) { Â  Â  Â  Â  Â  Â  Â  Â  Â  // de interlace pixel data if needed

Â  Â  Â  Â  Â  var lines, fromLine, pass, toline;

Â  Â  Â  Â  Â  lines = pixelBufSize / width;

Â  Â  Â  Â  Â  fromLine = 0;

Â  Â  Â  Â  Â  if (interlacedBufSize !== pixelBufSize) { Â  Â  Â // create the buffer if size changed or undefined.

Â  Â  Â  Â  Â  Â  Â  deinterlaceBuf = new Uint8Array(pixelBufSize);

Â  Â  Â  Â  Â  Â  Â  interlacedBufSize = pixelBufSize;

Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  for (pass = 0; pass &amp;lt; 4; pass++) {

Â  Â  Â  Â  Â  Â  Â  for (toLine = interlaceOffsets[pass]; toLine &amp;lt; lines; toLine += interlaceSteps[pass]) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  deinterlaceBuf.set(pixelBuf.subarray(fromLine, fromLine + width), toLine * width);

Â  Â  Â  Â  Â  Â  Â  Â  Â  fromLine += width;

Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  }

Â  Â  Â  };

Â  Â  Â  frame = {}

Â  Â  Â  gif.frames.push(frame);

Â  Â  Â  frame.disposalMethod = gif.disposalMethod;

Â  Â  Â  frame.time = gif.length;

Â  Â  Â  frame.delay = gif.delayTime * 10;

Â  Â  Â  gif.length += frame.delay;

Â  Â  Â  if (gif.transparencyGiven) { frame.transparencyIndex = gif.transparencyIndex }

Â  Â  Â  else { frame.transparencyIndex = undefined }

Â  Â  Â  frame.leftPos = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  frame.topPos = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  frame.width = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  frame.height = (st.data[st.pos++]) + ((st.data[st.pos++]) &amp;lt;&amp;lt; 8);

Â  Â  Â  bitField = st.data[st.pos++];

Â  Â  Â  frame.localColourTableFlag = bitField &amp;amp; 0b10000000 ? true : false;

Â  Â  Â  if (frame.localColourTableFlag) { frame.localColourTable = parseColourTable(1 &amp;lt;&amp;lt; ((bitField &amp;amp; 0b111) + 1)) }

Â  Â  Â  if (pixelBufSize !== frame.width * frame.height) { // create a pixel buffer if not yet created or if current frame size is different from previous

Â  Â  Â  Â  Â  pixelBuf = new Uint8Array(frame.width * frame.height);

Â  Â  Â  Â  Â  pixelBufSize = frame.width * frame.height;

Â  Â  Â  }

Â  Â  Â  lzwDecode(st.data[st.pos++], st.readSubBlocksB()); // decode the pixels

Â  Â  Â  if (bitField &amp;amp; 0b1000000) { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // de interlace if needed

Â  Â  Â  Â  Â  frame.interlaced = true;

Â  Â  Â  Â  Â  deinterlace(frame.width);

Â  Â  Â  } else { frame.interlaced = false }

Â  Â  Â  processFrame(frame); Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // convert to canvas image

Â  };

Â  function processFrame(frame) { // creates a RGBA canvas image from the indexed pixel data.

Â  Â  Â  var ct, cData, dat, pixCount, ind, useT, i, pixel, pDat, col, frame, ti;

Â  Â  Â  frame.image = document.createElement(&amp;#39;canvas&amp;#39;);

Â  Â  Â  frame.image.width = gif.width;

Â  Â  Â  frame.image.height = gif.height;

Â  Â  Â  frame.image.ctx = frame.image.getContext(&amp;#34;2d&amp;#34;);

Â  Â  Â  ct = frame.localColourTableFlag ? frame.localColourTable : gif.globalColourTable;

Â  Â  Â  if (gif.lastFrame === null) { gif.lastFrame = frame }

Â  Â  Â  useT = (gif.lastFrame.disposalMethod === 2 || gif.lastFrame.disposalMethod === 3) ? true : false;

Â  Â  Â  if (!useT) { frame.image.ctx.drawImage(gif.lastFrame.image, 0, 0, gif.width, gif.height) }

Â  Â  Â  cData = frame.image.ctx.getImageData(frame.leftPos, frame.topPos, frame.width, frame.height);

Â  Â  Â  ti = frame.transparencyIndex;

Â  Â  Â  dat = cData.data;

Â  Â  Â  if (frame.interlaced) { pDat = deinterlaceBuf }

Â  Â  Â  else { pDat = pixelBuf }

Â  Â  Â  pixCount = pDat.length;

Â  Â  Â  ind = 0;

Â  Â  Â  for (i = 0; i &amp;lt; pixCount; i++) {

Â  Â  Â  Â  Â  pixel = pDat[i];

Â  Â  Â  Â  Â  col = ct[pixel];

Â  Â  Â  Â  Â  if (ti !== pixel) {

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = col[0];

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = col[1];

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = col[2];

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = 255; Â  Â  Â // Opaque.

Â  Â  Â  Â  Â  } else

Â  Â  Â  Â  Â  Â  Â  if (useT) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  dat[ind + 3] = 0; // Transparent.

Â  Â  Â  Â  Â  Â  Â  Â  Â  ind += 4;

Â  Â  Â  Â  Â  Â  Â  } else { ind += 4 }

Â  Â  Â  }

Â  Â  Â  frame.image.ctx.putImageData(cData, frame.leftPos, frame.topPos);

Â  Â  Â  gif.lastFrame = frame;

Â  Â  Â  if (!gif.waitTillDone &amp;amp;&amp;amp; typeof gif.onload === &amp;#34;function&amp;#34;) { doOnloadEvent() }// if !waitTillDone the call onload now after first frame is loaded

Â  };

Â  // **NOT** for commercial use.

Â  function finnished() { // called when the load has completed

Â  Â  Â  gif.loading = false;

Â  Â  Â  gif.frameCount = gif.frames.length;

Â  Â  Â  gif.lastFrame = null;

Â  Â  Â  st = undefined;

Â  Â  Â  gif.complete = true;

Â  Â  Â  gif.disposalMethod = undefined;

Â  Â  Â  gif.transparencyGiven = undefined;

Â  Â  Â  gif.delayTime = undefined;

Â  Â  Â  gif.transparencyIndex = undefined;

Â  Â  Â  gif.waitTillDone = undefined;

Â  Â  Â  pixelBuf = undefined; // dereference pixel buffer

Â  Â  Â  deinterlaceBuf = undefined; // dereference interlace buff (may or may not be used);

Â  Â  Â  pixelBufSize = undefined;

Â  Â  Â  deinterlaceBuf = undefined;

Â  Â  Â  gif.currentFrame = 0;

Â  Â  Â  if (gif.frames.length &amp;gt; 0) { gif.image = gif.frames[0].image }

Â  Â  Â  doOnloadEvent();

Â  Â  Â  if (typeof gif.onloadall === &amp;#34;function&amp;#34;) {

Â  Â  Â  Â  Â  (gif.onloadall.bind(gif))({ type: &amp;#39;loadall&amp;#39;, path: [gif] });

Â  Â  Â  }

Â  Â  Â  if (gif.playOnLoad) { gif.play() }

Â  }

Â  function canceled() { // called if the load has been cancelled

Â  Â  Â  finnished();

Â  Â  Â  if (typeof gif.cancelCallback === &amp;#34;function&amp;#34;) { (gif.cancelCallback.bind(gif))({ type: &amp;#39;canceled&amp;#39;, path: [gif] }) }

Â  }

Â  function parseExt() { Â  Â  Â  Â  Â  Â  Â // parse extended blocks

Â  Â  Â  const blockID = st.data[st.pos++];

Â  Â  Â  if (blockID === GIF_FILE.GCExt) { parseGCExt() }

Â  Â  Â  else if (blockID === GIF_FILE.COMMENT) { gif.comment += st.readSubBlocks() }

Â  Â  Â  else if (blockID === GIF_FILE.APPExt) { parseAppExt() }

Â  Â  Â  else {

Â  Â  Â  Â  Â  if (blockID === GIF_FILE.UNKNOWN) { st.pos += 13; } // skip unknow block

Â  Â  Â  Â  Â  st.readSubBlocks();

Â  Â  Â  }

  

Â  }

Â  function parseBlock() { // parsing the blocks

Â  Â  Â  if (gif.cancel !== undefined &amp;amp;&amp;amp; gif.cancel === true) { canceled(); return }

  

Â  Â  Â  const blockId = st.data[st.pos++];

Â  Â  Â  if (blockId === GIF_FILE.IMAGE) { // image block

Â  Â  Â  Â  Â  parseImg();

Â  Â  Â  Â  Â  if (gif.firstFrameOnly) { finnished(); return }

Â  Â  Â  } else if (blockId === GIF_FILE.EOF) { finnished(); return }

Â  Â  Â  else { parseExt() }

Â  Â  Â  if (typeof gif.onprogress === &amp;#34;function&amp;#34;) {

Â  Â  Â  Â  Â  gif.onprogress({ bytesRead: st.pos, totalBytes: st.data.length, frame: gif.frames.length });

Â  Â  Â  }

Â  Â  Â  setTimeout(parseBlock, 0); // parsing frame async so processes can get some time in.

Â  };

Â  function cancelLoad(callback) { // cancels the loading. This will cancel the load before the next frame is decoded

Â  Â  Â  if (gif.complete) { return false }

Â  Â  Â  gif.cancelCallback = callback;

Â  Â  Â  gif.cancel = true;

Â  Â  Â  return true;

Â  }

Â  function error(type) {

Â  Â  Â  if (typeof gif.onerror === &amp;#34;function&amp;#34;) { (gif.onerror.bind(this))({ type: type, path: [this] }) }

Â  Â  Â  gif.onload = gif.onerror = undefined;

Â  Â  Â  gif.loading = false;

Â  }

Â  function doOnloadEvent() { // fire onload event if set

Â  Â  Â  gif.currentFrame = 0;

Â  Â  Â  gif.nextFrameAt = gif.lastFrameAt = new Date().valueOf(); // just sets the time now

Â  Â  Â  if (typeof gif.onload === &amp;#34;function&amp;#34;) { (gif.onload.bind(gif))({ type: &amp;#39;load&amp;#39;, path: [gif] }) }

Â  Â  Â  gif.onerror = gif.onload = undefined;

Â  }

Â  function dataLoaded(data) { // Data loaded create stream and parse

Â  Â  Â  st = new Stream(data);

Â  Â  Â  parse();

Â  }

Â  function loadGif(filename) { // starts the load

Â  Â  Â  var ajax = new XMLHttpRequest();

Â  Â  Â  ajax.responseType = &amp;#34;arraybuffer&amp;#34;;

Â  Â  Â  ajax.onload = function (e) {

Â  Â  Â  Â  Â  if (e.target.status === 404) { error(&amp;#34;File not found&amp;#34;) }

Â  Â  Â  Â  Â  else if (e.target.status &amp;gt;= 200 &amp;amp;&amp;amp; e.target.status &amp;lt; 300) { dataLoaded(ajax.response) }

Â  Â  Â  Â  Â  else { error(&amp;#34;Loading error : &amp;#34; + e.target.status) }

Â  Â  Â  };

Â  Â  Â  ajax.open(&amp;#39;GET&amp;#39;, filename, true);

Â  Â  Â  ajax.send();

Â  Â  Â  ajax.onerror = function (e) { error(&amp;#34;File error&amp;#34;) };

Â  Â  Â  this.src = filename;

Â  Â  Â  this.loading = true;

Â  }

Â  function play() { // starts play if paused

Â  Â  Â  if (!gif.playing) {

Â  Â  Â  Â  Â  gif.paused = false;

Â  Â  Â  Â  Â  gif.playing = true;

Â  Â  Â  Â  Â  playing();

Â  Â  Â  }

Â  }

Â  function pause() { // stops play

Â  Â  Â  gif.paused = true;

Â  Â  Â  gif.playing = false;

Â  Â  Â  clearTimeout(timerID);

Â  }

Â  function togglePlay() {

Â  Â  Â  if (gif.paused || !gif.playing) { gif.play() }

Â  Â  Â  else { gif.pause() }

Â  }

Â  function seekFrame(frame) { // seeks to frame number.

Â  Â  Â  clearTimeout(timerID);

Â  Â  Â  gif.currentFrame = frame % gif.frames.length;

Â  Â  Â  if (gif.playing) { playing() }

Â  Â  Â  else { gif.image = gif.frames[gif.currentFrame].image }

Â  }

Â  function seek(time) { // time in Seconds Â // seek to frame that would be displayed at time

Â  Â  Â  clearTimeout(timerID);

Â  Â  Â  if (time &amp;lt; 0) { time = 0 }

Â  Â  Â  time *= 1000; // in ms

Â  Â  Â  time %= gif.length;

Â  Â  Â  var frame = 0;

Â  Â  Â  while (time &amp;gt; gif.frames[frame].time + gif.frames[frame].delay &amp;amp;&amp;amp; frame &amp;lt; gif.frames.length) { frame += 1 }

Â  Â  Â  gif.currentFrame = frame;

Â  Â  Â  if (gif.playing) { playing() }

Â  Â  Â  else { gif.image = gif.frames[gif.currentFrame].image }

Â  }

Â  function playing() {

Â  Â  Â  var delay;

Â  Â  Â  var frame;

Â  Â  Â  if (gif.playSpeed === 0) {

Â  Â  Â  Â  Â  gif.pause();

Â  Â  Â  Â  Â  return;

Â  Â  Â  } else {

Â  Â  Â  Â  Â  if (gif.playSpeed &amp;lt; 0) {

Â  Â  Â  Â  Â  Â  Â  gif.currentFrame -= 1;

Â  Â  Â  Â  Â  Â  Â  if (gif.currentFrame &amp;lt; 0) { gif.currentFrame = gif.frames.length - 1 }

Â  Â  Â  Â  Â  Â  Â  frame = gif.currentFrame;

Â  Â  Â  Â  Â  Â  Â  frame -= 1;

Â  Â  Â  Â  Â  Â  Â  if (frame &amp;lt; 0) { frame = gif.frames.length - 1 }

Â  Â  Â  Â  Â  Â  Â  delay = -gif.frames[frame].delay * 1 / gif.playSpeed;

Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  gif.currentFrame += 1;

Â  Â  Â  Â  Â  Â  Â  gif.currentFrame %= gif.frames.length;

Â  Â  Â  Â  Â  Â  Â  delay = gif.frames[gif.currentFrame].delay * 1 / gif.playSpeed;

Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  gif.image = gif.frames[gif.currentFrame].image;

Â  Â  Â  Â  Â  timerID = setTimeout(playing, delay);

Â  Â  Â  }

Â  }

Â  var gif = { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // the gif image object

Â  Â  Â  onload: null, Â  Â  Â  // fire on load. Use waitTillDone = true to have load fire at end or false to fire on first frame

Â  Â  Â  onerror: null, Â  Â  Â  // fires on error

Â  Â  Â  onprogress: null, Â  Â  Â  // fires a load progress event

Â  Â  Â  onloadall: null, Â  Â  Â  // event fires when all frames have loaded and gif is ready

Â  Â  Â  paused: false, Â  Â  Â // true if paused

Â  Â  Â  playing: false, Â  Â  Â // true if playing

Â  Â  Â  waitTillDone: true, Â  Â  Â  // If true onload will fire when all frames loaded, if false, onload will fire when first frame has loaded

Â  Â  Â  loading: false, Â  Â  Â // true if still loading

Â  Â  Â  firstFrameOnly: false, Â  Â  Â // if true only load the first frame

Â  Â  Â  width: null, Â  Â  Â  // width in pixels

Â  Â  Â  height: null, Â  Â  Â  // height in pixels

Â  Â  Â  frames: [], Â  Â  Â  Â  // array of frames

Â  Â  Â  comment: &amp;#34;&amp;#34;, Â  Â  Â  Â  // comments if found in file. Note I remember that some gifs have comments per frame if so this will be all comment concatenated

Â  Â  Â  length: 0, Â  Â  Â  Â  Â // gif length in ms (1/1000 second)

Â  Â  Â  currentFrame: 0, Â  Â  Â  Â  Â // current frame.

Â  Â  Â  frameCount: 0, Â  Â  Â  Â  Â // number of frames

Â  Â  Â  playSpeed: 1, Â  Â  Â  Â  Â // play speed 1 normal, 2 twice 0.5 half, -1 reverse etc...

Â  Â  Â  lastFrame: null, Â  Â  Â  // temp hold last frame loaded so you can display the gif as it loads

Â  Â  Â  image: null, Â  Â  Â  // the current image at the currentFrame

Â  Â  Â  playOnLoad: true, Â  Â  Â  // if true starts playback when loaded

Â  Â  Â  // functions

Â  Â  Â  load: loadGif, Â  Â // call this to load a file

Â  Â  Â  cancel: cancelLoad, // call to stop loading

Â  Â  Â  play: play, Â  Â  Â  // call to start play

Â  Â  Â  pause: pause, Â  Â  Â // call to pause

Â  Â  Â  seek: seek, Â  Â  Â  // call to seek to time

Â  Â  Â  seekFrame: seekFrame, Â // call to seek to frame

Â  Â  Â  togglePlay: togglePlay, // call to toggle play and pause state

Â  };

Â  return gif;

}

  

export {

Â  GIF

}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;çŠ¶æ€æœº&#34;&gt;çŠ¶æ€æœº&lt;/h4&gt;
&lt;center&gt; 
	&lt;img style=&#34;border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);&#34; src=&#34;https://bu.dusays.com/2022/11/03/6363d89220c15.png&#34;&gt;
	&lt;br&gt;
	&lt;div style=&#34;color:orange; border-bottom: 1px solid #d9d9d9; 
	display: inline-block; 
	color: #999; 
	padding: 2px;&#34;&gt;0ï¼šé™æ­¢    1ï¼šç§»åŠ¨     3ï¼šè·³è·ƒ    4ï¼šæ”»å‡»&lt;/div&gt; 
 &lt;/center&gt;
&lt;h2 id=&#34;myspace&#34;&gt;MySpace&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Xancoding/Learning-Vue&#34;&gt;MySpace&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/video/3867/&#34;&gt;AcWing Web åº”ç”¨è¯¾ | Vue3â€”â€”ç½‘ç«™æ•´ä½“å¸ƒå±€ã€ç”¨æˆ·åŠ¨æ€é¡µé¢ | Vedio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/video/3875/&#34;&gt;AcWing Web åº”ç”¨è¯¾ | Vue3â€”â€”ç”¨æˆ·åˆ—è¡¨ã€ç™»å½•ã€æ³¨å†Œé¡µé¢ | Vedio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
</description>
      <content:encoded><![CDATA[<ul>
<li><a href="https://www.colopen-blog.com/Engineer/acw_web/">AcWing Web åº”ç”¨è¯¾ | Colopen&rsquo;s blog</a></li>
<li><a href="https://www.acwing.com/activity/content/punch_the_clock/1150/">AcWing Web åº”ç”¨è¯¾</a>
<ul>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/4078555/">HTML åŸºç¡€æ ‡ç­¾</a></li>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/4194723/">CSS</a></li>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/4719082/">JavaScript</a></li>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/5501588/">React</a></li>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/5639568/">Vue3</a></li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/zh-CN/">MDNå®˜æ–¹æ–‡æ¡£</a>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web">Web å…¥é—¨</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML">HTML â€”â€” æ„å»º Web</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS">CSS â€”â€” è®¾è®¡Web</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript">JavaScript â€”â€” ç”¨æˆ·ç«¯åŠ¨æ€è„šæœ¬</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">React å…¥é—¨</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Vue å…¥é—¨</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial">Canvas æ•™ç¨‹</a></li>
</ul>
</li>
</ul>
<hr>
<ol>
<li><a href="https://www.dute.org/weird-fonts">æ€ªå¼‚è‹±æ–‡ç”Ÿæˆå™¨</a> ç”Ÿæˆæ¯”è¾ƒå¥½çœ‹çš„è‹±æ–‡å­—ä½“ï¼Œæ”¯æŒå¤åˆ¶ç²˜è´´</li>
<li><a href="https://colorhunt.co/">Color Hunt</a> è®¾è®¡å¸ˆå’Œè‰ºæœ¯å®¶çš„è°ƒè‰²æ¿</li>
<li><a href="https://game-icons.net/">Game-icons</a> æ¸¸æˆå›¾æ ‡åœ¨çº¿å­˜å‚¨åº“</li>
</ol>
<hr>
<ul>
<li><code>VSCode</code> è‡ªåŠ¨ç”Ÿæˆç¼ºçœçš„ <code>HTML</code> ä»£ç æ¡†æ¶</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-HTML" data-lang="HTML"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">html</span> <span style="color:#007f7f">lang</span>=<span style="color:#0ff;font-weight:bold">&#34;en&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Â  &lt;<span style="font-weight:bold">meta</span> <span style="color:#007f7f">charset</span>=<span style="color:#0ff;font-weight:bold">&#34;UTF-8&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Â  &lt;<span style="font-weight:bold">meta</span> <span style="color:#007f7f">http-equiv</span>=<span style="color:#0ff;font-weight:bold">&#34;X-UA-Compatible&#34;</span> <span style="color:#007f7f">content</span>=<span style="color:#0ff;font-weight:bold">&#34;IE=edge&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Â  &lt;<span style="font-weight:bold">meta</span> <span style="color:#007f7f">name</span>=<span style="color:#0ff;font-weight:bold">&#34;viewport&#34;</span> <span style="color:#007f7f">content</span>=<span style="color:#0ff;font-weight:bold">&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Â  &lt;<span style="font-weight:bold">title</span>&gt;Document&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">head</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">body</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">html</span>&gt;
</span></span></code></pre></div><ol>
<li>è¾“å…¥<code>ï¼</code>ï¼Œæ¥ç€è¾“å…¥ <code>tab</code> é”®ï¼Œè‡ªåŠ¨ç”Ÿæˆç¼ºçœçš„ <code>HTML</code> ä»£ç æ¡†æ¶</li>
<li>å†æŒ‰ä¸‰ä¸‹ <code>tab</code> é”®ï¼Œå…‰æ ‡ä¼šç§»åŠ¨åˆ° <code>&lt;body&gt;</code> ä¸ <code>&lt;/body&gt;</code> ä¹‹é—´çš„ç©ºè¡Œ</li>
</ol>
<hr>
<h2 id="kof">KOF</h2>
<ul>
<li><a href="https://github.com/Xancoding/Leaning-jQuery">KOF</a></li>
<li><a href="https://www.acwing.com/video/3830/">AcWing Web åº”ç”¨è¯¾ | ä¸­æœŸé¡¹ç›®â€”â€”æ‹³çš‡ï¼ˆä¸Šï¼‰ | Vedio</a></li>
<li><a href="https://www.acwing.com/video/3833/">AcWing Web åº”ç”¨è¯¾ | ä¸­æœŸé¡¹ç›®â€”â€”æ‹³çš‡ï¼ˆä¸‹ï¼‰ | Vedio</a></li>
</ul>
<hr>
<h3 id="åŸºç¡€æ“ä½œ">åŸºç¡€æ“ä½œ</h3>
<pre tabindex="0"><code>æ“ä½œå¦‚ä¸‹ï¼š
è§’è‰²ä¸€: w è·³ a å·¦ç§» d å³ç§» j æ‹³å‡» 
è§’è‰²äºŒ: â†‘ è·³ â† å·¦ç§» â†’ å³ç§» 1 æ‹³å‡»
</code></pre><h3 id="æ–‡ä»¶ç»“æ„">æ–‡ä»¶ç»“æ„</h3>
<pre tabindex="0"><code>|-- README.md
|-- static
|   |-- css
|   |   `-- base.css
|   |-- images
|   |   |-- background
|   |   |   `-- 0.gif
|   |   `-- player
|   |       `-- kyo
|   |           |-- 0.gif
|   |           |-- 1.gif
|   |           |-- 2.gif
|   |           |-- 3.gif
|   |           |-- 4.gif
|   |           |-- 5.gif
|   |           `-- 6.gif
|   `-- js
|       |-- ac_game_object
|       |   `-- base.js
|       |-- base.js
|       |-- controller
|       |   `-- base.js
|       |-- game_map
|       |   `-- base.js
|       |-- player
|       |   |-- base.js
|       |   `-- kyo.js
|       `-- utils
|           `-- gif.js
`-- templates
    `-- index.html
</code></pre><h3 id="æ•´ä½“æ¶æ„">æ•´ä½“æ¶æ„</h3>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2022/11/02/63627b3105c46.png">
<img src="https://bu.dusays.com/2022/11/02/63627b3105c46.png" alt="KOFStructure"  />
</a>
</div>

</p>
<h3 id="é€»è¾‘ç»“æ„">é€»è¾‘ç»“æ„</h3>
<center> 
	<img style="border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="https://bu.dusays.com/2022/11/02/63627ace5a2f9.png">
	<br>
	<div style="color:orange; border-bottom: 1px solid #d9d9d9; 
	display: inline-block; 
	color: #999; 
	padding: 2px;">Retrieved fromï¼šhttps://www.acwing.com/solution/content/139831/</div> 
 </center>
<h3 id="html">HTML</h3>
<p><code>templates/index.html</code></p>
<pre tabindex="0"><code>&lt;!DOCTYPE html&gt;

&lt;html lang=&#34;en&#34;&gt;

&lt;head&gt;

Â  &lt;meta charset=&#34;UTF-8&#34;&gt;

Â  &lt;meta http-equiv=&#34;X-UA-Compatible&#34; content=&#34;IE=edge&#34;&gt;

Â  &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;

Â  &lt;title&gt;KOF&lt;/title&gt;

Â  &lt;link rel=&#34;stylesheet&#34; href=&#34;../static/css/base.css&#34;&gt;

Â  &lt;script src=&#34;https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js&#34;&gt;&lt;/script&gt;

&lt;/head&gt;

&lt;body&gt;

Â  &lt;div id=&#34;kof&#34;&gt;&lt;/div&gt;

  

Â  &lt;script type=&#34;module&#34;&gt;

Â  Â  import {KOF} from &#39;../static/js/base.js&#39;;

  

Â  Â  let kof = new KOF(&#39;kof&#39;);

Â  &lt;/script&gt;

&lt;/body&gt;

&lt;/html&gt;
</code></pre><h3 id="css">CSS</h3>
<p><code>css/base.css</code></p>
<pre tabindex="0"><code>#kof {

Â  width: 1280px;

Â  height: 720px;

Â  background-image: url(&#39;../images/background/0.gif&#39;);

Â  background-size: 200% 100%;

Â  background-position: top;

Â  position: absolute;

}

  

#kof&gt;.kof-head {

Â  width: 100%;

Â  height: 80px;

Â  position: absolute;

Â  top: 0;

Â  display: flex;

Â  align-items: center;

}

  

#kof&gt;.kof-head&gt;.kof-head-hp-0 {

Â  height: 40px;

Â  width: calc(50% - 60px);

Â  margin-left: 20px;

Â  border: white 5px solid;

Â  box-sizing: border-box;

Â  border-right: none;

}

  

#kof&gt;.kof-head&gt;.kof-head-timer {

Â  height: 60px;

Â  width: 80px;

Â  background-color: orange;

Â  border: white 5px solid;

Â  box-sizing: border-box;

Â  color: white;

Â  font-size: 30px;

Â  font-weight: 800;

Â  text-align: center;

Â  line-height: 50px;

Â  user-select: none;

}

  

#kof&gt;.kof-head&gt;.kof-head-hp-1 {

Â  height: 40px;

Â  width: calc(50% - 60px);

Â  border: white 5px solid;

Â  box-sizing: border-box;

Â  border-left: none;

}

  

#kof&gt;.kof-head&gt;.kof-head-hp-0&gt;div {

Â  background-color: red;

Â  height: 100%;

Â  width: 100%;

Â  float: right;

}

  

#kof&gt;.kof-head&gt;.kof-head-hp-1&gt;div {

Â  background-color: red;

Â  height: 100%;

Â  width: 100%;

}

  

#kof&gt;.kof-head&gt;.kof-head-hp-0&gt;div&gt;div {

Â  background-color: lightgreen;

Â  height: 100%;

Â  width: 100%;

Â  float: right;

}

  

#kof&gt;.kof-head&gt;.kof-head-hp-1&gt;div&gt;div {

Â  background-color: lightgreen;

Â  height: 100%;

Â  width: 100%;

}
</code></pre><h3 id="javascript">JavaScript</h3>
<h4 id="é€»è¾‘ç»“æ„-1">é€»è¾‘ç»“æ„</h4>
<p>
<div class="post-img-view">
<a data-fancybox="gallery" href="https://bu.dusays.com/2022/11/03/63631ec3461ef.png">
<img src="https://bu.dusays.com/2022/11/03/63631ec3461ef.png" alt="é€»è¾‘ç»“æ„"  />
</a>
</div>

</p>
<h4 id="kof-1">KOF</h4>
<p><code>js/base.js</code></p>
<pre tabindex="0"><code>import { GameMap } from &#39;../js/game_map/base.js&#39;

import { Kyo } from &#39;../js/player/kyo.js&#39;;

  

export class KOF {

Â  constructor(id) {

Â  Â  this.$kof = $(&#39;#&#39; + id);

  

Â  Â  this.game_map = new GameMap(this);

Â  Â  this.players = [

Â  Â  Â  new Kyo(this, {

Â  Â  Â  Â  id: 0,

Â  Â  Â  Â  x: 200,

Â  Â  Â  Â  y: 0,

Â  Â  Â  Â  width: 120,

Â  Â  Â  Â  height: 200,

Â  Â  Â  Â  color: &#39;blue&#39;

Â  Â  Â  }),

Â  Â  Â  new Kyo(this, {

Â  Â  Â  Â  id: 1,

Â  Â  Â  Â  x: 900,

Â  Â  Â  Â  y: 0,

Â  Â  Â  Â  width: 120,

Â  Â  Â  Â  height: 200,

Â  Â  Â  Â  color: &#39;red&#39;

Â  Â  Â  })

Â  Â  ]

Â  }

}
</code></pre><h4 id="acgameobject">AcGameObject</h4>
<p><code>js/ac_game_object/base.js</code></p>
<pre tabindex="0"><code>let AC_GAME_OBJECTS = [];

  

export class AcGameObject {

Â  constructor() {

Â  Â  AC_GAME_OBJECTS.push(this);

  

Â  Â  this.timedelta = 0;

Â  Â  this.has_call_start = false;

Â  }

  

Â  start() { Â // åˆå§‹åŒ–

  
  

Â  }

  

Â  update() { Â // æ¯ä¸€å¸§æ‰§è¡Œä¸€æ¬¡

  

Â  }

  

Â  destory() { Â // åˆ é™¤å½“å‰å¯¹è±¡

Â  Â  for (let i in AC_GAME_OBJECTS) {

Â  Â  Â  if (AC_GAME_OBJECTS[i] === this) {

Â  Â  Â  Â  AC_GAME_OBJECTS.splice(i, 1);

Â  Â  Â  Â  break;

Â  Â  Â  }

Â  Â  }

Â  }

}

  

let last_timestamp; Â  // ä¸Šä¸€æ¬¡æ‰§è¡Œå‡½æ•°æ—¶çš„æ—¶åˆ»

  

/**

Â * @description è¯¥å‡½æ•°æ¯ä¸€å¸§æ‰§è¡Œä¸€æ¬¡

Â * @param {number} timestamp å½“å‰æ‰§è¡Œå‡½æ•°æ—¶çš„æ—¶åˆ»

Â */

  

let AC_GAME_OBJECTS_FRAME = (timestamp) =&gt; {

Â  for (let obj of AC_GAME_OBJECTS) {

Â  Â  if (!obj.has_call_start) {

Â  Â  Â  obj.start();

Â  Â  Â  obj.has_call_start = true;

Â  Â  } else {

Â  Â  Â  obj.timedelta = timestamp - last_timestamp;

Â  Â  Â  obj.update();

Â  Â  }

Â  }

  

Â  last_timestamp = timestamp;

Â  requestAnimationFrame(AC_GAME_OBJECTS_FRAME);

}

  

requestAnimationFrame(AC_GAME_OBJECTS_FRAME);
</code></pre><h4 id="controller">Controller</h4>
<ul>
<li><code>controller</code> æ§åˆ¶å™¨ï¼Œè¯»å–ç©å®¶çš„è¾“å…¥
<code>js/constroller/base.js</code></li>
</ul>
<pre tabindex="0"><code>export class Controller { Â  // æ‰‹åŠ¨å®ç°é”®ç›˜è§¦å‘äº‹ä»¶â€”â€”å½“å‰æŒ‰ä½çš„æŒ‰é”®ï¼ˆæ•ˆæœä¸åŒäºkeydownï¼‰

Â  constructor($canvas) {

Â  Â  this.$canvas = $canvas;

Â  Â  this.pressed_keys = new Set(); Â  Â // Set å¯¹è±¡å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼

Â  Â  this.start();

Â  }

  

Â  start() {

Â  Â  let outer = this;

Â  Â  this.$canvas.keydown(function(e){ Â  // keydownï¼šæŸä¸ªé”®æ˜¯å¦è¢«æŒ‰ä½ï¼Œäº‹ä»¶ä¼šè¿ç»­è§¦å‘

Â  Â  Â  outer.pressed_keys.add(e.key);

Â  Â  });

  

Â  Â  this.$canvas.keyup(function(e){ Â  // keyupï¼šæŸä¸ªæŒ‰é”®æ˜¯å¦è¢«é‡Šæ”¾

Â  Â  Â  outer.pressed_keys.delete(e.key);

Â  Â  });

  

Â  }

}
</code></pre><h4 id="gamemap">GameMap</h4>
<p><code>js/game_map/base.js</code></p>
<pre tabindex="0"><code>import {AcGameObject} from &#39;../ac_game_object/base.js&#39;

import { Controller } from &#39;../controller/base.js&#39;;

  

export class GameMap extends AcGameObject {

Â  constructor(root) {

Â  Â  super();

  

Â  Â  this.root = root;

Â  Â  this.$canvas = $(&#39;&lt;canvas width=&#34;1280&#34; height=&#34;720&#34; tabindex=0&gt;&lt;/canvas&gt;&#39;); Â  // æ„é€ ä¸€ä¸ªjQueryå¯¹è±¡ Â å…¶ä¸­ï¼Œtabindex=&#34;0&#34;ä½¿&lt;canvas&gt;å…ƒç´ å¯ä»¥èšç„¦

Â  Â  this.ctx = this.$canvas[0].getContext(&#39;2d&#39;); Â // this.$canvas[0]æ˜¯&lt;canvas&gt;å…ƒç´ çš„DOMå¯¹è±¡ Â  this.ctxç”¨äºç”»å¸ƒçš„æ¸²æŸ“

Â  Â  this.root.$kof.append(this.$canvas);

Â  Â  this.$canvas.focus(); Â  // èšç„¦ï¼Œä½¿ä¹‹å¯ä»¥è·å–è¾“å…¥

  

Â  Â  this.controller = new Controller(this.$canvas);

  

Â  Â  // åŠ å…¥è¡€æ¡

Â  Â  this.root.$kof.append($(`

Â  Â  Â  &lt;div class=&#34;kof-head&#34;&gt;

Â  Â  Â  Â  &lt;div class=&#34;kof-head-hp-0&#34;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;

Â  Â  Â  Â  &lt;div class=&#34;kof-head-timer&#34;&gt;&lt;/div&gt;

Â  Â  Â  Â  &lt;div class=&#34;kof-head-hp-1&#34;&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;

Â  Â  Â  &lt;/div&gt;

Â  Â  `));

  

Â  Â  // åŠ å…¥è®¡æ—¶è¡¨

Â  Â  this.time_left = 60000; Â //å•ä½ï¼šæ¯«ç§’ï¼ˆå› ä¸ºå®šä¹‰çš„timedeltaå•ä½æ˜¯msï¼‰

Â  Â  this.$timer = this.root.$kof.find(&#39;.kof-head-timer&#39;);

Â  }

  

Â  start() {

  

Â  }

  

Â  update() {

Â  Â  this.update_time();

  

Â  Â  this.render();

Â  }

  

Â  update_time() {

Â  Â  this.time_left -= this.timedelta;

Â  Â  if (this.time_left &lt; 0) { Â  // æ—¶é—´åˆ°ï¼Œæ¸¸æˆç»“æŸ

Â  Â  Â  this.time_left = 0;

  

Â  Â  Â  let [a, b] = this.root.players;

Â  Â  Â  if (a.status !== 6 &amp;&amp; b.status !== 6) {

Â  Â  Â  Â  a.statu = b.status = 6;

Â  Â  Â  Â  a.frame_current_cnt = b.frame_current_cnt = 0;

Â  Â  Â  Â  a.vx = b.vx = 0;

Â  Â  Â  }

Â  Â  }

Â  Â  this.$timer.text(parseInt(this.time_left / 1000));

Â  }

  

Â  render() {

Â  Â  this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);

Â  }

}
</code></pre><h4 id="player">Player</h4>
<p><code>js/player/base.js</code></p>
<pre tabindex="0"><code>import { AcGameObject } from &#39;../ac_game_object/base.js&#39;;

  

export class Player extends AcGameObject {

Â  constructor(root, info) {

Â  Â  super();

  

Â  Â  this.root = root;

Â  Â  this.id = info.id;

Â  Â  this.x = info.x;

Â  Â  this.y = info.y;

Â  Â  this.width = info.width;

Â  Â  this.height = info.height;

Â  Â  this.color = info.color;

  

Â  Â  this.direction = 1;

  

Â  Â  this.vx = 0;

Â  Â  this.vy = 0;

  

Â  Â  this.speedx = 400; Â // æ°´å¹³é€Ÿåº¦

Â  Â  this.speedy = -1000; Â // è·³è·ƒåˆå§‹é€Ÿåº¦

  

Â  Â  this.gravity = 50;

  

Â  Â  this.ctx = this.root.game_map.ctx;

Â  Â  this.pressed_keys = this.root.game_map.controller.pressed_keys;

Â  Â  this.status = 3; Â // 0ï¼šé™æ­¢ï¼Œ 1ï¼šå‘å‰ï¼Œ2ï¼šå‘åï¼Œ3ï¼šè·³è·ƒï¼Œ4ï¼šæ”»å‡»ï¼Œ5ï¼šè¢«æ”»å‡»ï¼Œ6ï¼šæ­»äº¡ Â  éšç€é¡¹ç›®çš„å®Œå–„ï¼ŒåŠ¨ä½œä¼šå˜çš„å¾ˆå¤šï¼Œè¿™æ—¶ç”¨æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ä»£æ›¿this.statusä¼šæ›´æ–¹ä¾¿

Â  Â  this.animations = new Map(); Â // å­˜å‚¨GIFåŠ¨ç”»çš„æ¯ä¸€å¸§

Â  Â  this.frame_current_cnt = 0; Â // è®°å½•å½“å‰çš„å¸§æ•°

  

Â  Â  this.hp = 100;

Â  Â  this.$hp = this.root.$kof.find(`.kof-head-hp-${this.id}&gt;div`);

Â  Â  this.$hp_div = this.$hp.find(&#39;div&#39;);

Â  }

Â  start() {

Â  }

  

Â  update_control() {

Â  Â  let w, a, d, j;

Â  Â  if (this.id === 0) {

Â  Â  Â  w = this.pressed_keys.has(&#39;w&#39;);

Â  Â  Â  a = this.pressed_keys.has(&#39;a&#39;);

Â  Â  Â  d = this.pressed_keys.has(&#39;d&#39;);

Â  Â  Â  j = this.pressed_keys.has(&#39;j&#39;);

Â  Â  } else {

Â  Â  Â  w = this.pressed_keys.has(&#39;ArrowUp&#39;);

Â  Â  Â  a = this.pressed_keys.has(&#39;ArrowLeft&#39;);

Â  Â  Â  d = this.pressed_keys.has(&#39;ArrowRight&#39;);

Â  Â  Â  j = this.pressed_keys.has(&#39;1&#39;);

Â  Â  }

  

Â  Â  if (this.status === 0 || this.status === 1) { Â  // é™æ­¢çŠ¶æ€ || ç§»åŠ¨çŠ¶æ€

Â  Â  Â  if (j) { Â // æ”»å‡»

Â  Â  Â  Â  this.status = 4;

Â  Â  Â  Â  this.vx = 0;

Â  Â  Â  Â  this.frame_current_cnt = 0;

Â  Â  Â  } else if (w) { Â // è·³è·ƒ

Â  Â  Â  Â  if (d) { Â // å‘å³è·³

Â  Â  Â  Â  Â  this.vx = this.speedx;

Â  Â  Â  Â  } else if (a) { Â // å‘å·¦è·³

Â  Â  Â  Â  Â  this.vx = -this.speedx;

Â  Â  Â  Â  } else { Â // å‚ç›´è·³

Â  Â  Â  Â  Â  this.vx = 0;

Â  Â  Â  Â  }

Â  Â  Â  Â  this.vy = this.speedy;

Â  Â  Â  Â  this.status = 3;

Â  Â  Â  Â  this.frame_current_cnt = 0; // æ¯æ¬¡è·³è·ƒé‡æ–°è®°å½•å¸§æ•°ï¼Œç¡®ä¿è·³è·ƒåŠ¨ç”»æ­£å¸¸

  

Â  Â  Â  } else if (d) { Â // å‘å³ç§»åŠ¨

Â  Â  Â  Â  this.vx = this.speedx;

Â  Â  Â  Â  this.status = 1;

Â  Â  Â  } else if (a) { Â // å‘å·¦ç§»åŠ¨

Â  Â  Â  Â  this.vx = - this.speedx;

Â  Â  Â  Â  this.status = 1;

Â  Â  Â  } else { Â // é™æ­¢

Â  Â  Â  Â  this.vx = 0;

Â  Â  Â  }

Â  Â  }

  

Â  }

Â  update_move() {

Â  Â  this.vy += this.gravity;

  

Â  Â  this.x += this.vx * this.timedelta / 1000;

Â  Â  this.y += this.vy * this.timedelta / 1000;

  

Â  Â  // ç¡®ä¿ä¸¤ä¸ªè§’è‰²ä¸ä¼šé‡å  Â  a æ˜¯è‡ªå·±ã€b æ˜¯å¯¹æ‰‹

Â  Â  // let [a, b] = this.root.players;

Â  Â  // if (a !== this) [a,b] = [b, a];

  

Â  Â  // let r1 = {

Â  Â  // Â  x1: a.x,

Â  Â  // Â  y1: a.y,

Â  Â  // Â  x2: a.x + a.width,

Â  Â  // Â  y2: a.x + a.height,

Â  Â  // };

Â  Â  // let r2 = {

Â  Â  // Â  x1: b.x,

Â  Â  // Â  y1: b.y,

Â  Â  // Â  x2: b.x + b.width,

Â  Â  // Â  y2: b.x + b.height,

Â  Â  // };

  

Â  Â  // if (this.is_collusion(r1, r2)) {

Â  Â  // Â  b.x += this.vx * this.timedelta / 1000 / 2;

Â  Â  // Â  b.y += this.vy * this.timedelta / 1000 / 2;

Â  Â  // Â  a.x -= this.vx * this.timedelta / 1000 / 2;

Â  Â  // Â  a.y -= this.vy * this.timedelta / 1000 / 2;

  

Â  Â  // Â  if (this.status === 3) this.status = 0;

Â  Â  // }

  

Â  Â  // è½åˆ°å¹³åœ°ä¸Šåé™æ­¢

Â  Â  if (this.y &gt; 450) {

Â  Â  Â  this.y = 450;

Â  Â  Â  this.vy = 0;

Â  Â  Â  if (this.status === 3) this.status = 0; Â  // å› ä¸ºä»»ä½•æ—¶åˆ»éƒ½æœ‰é‡åŠ›æ–½åŠ ï¼Œä¸åŠ è¿™ä¸€å¥ä¼šå¯¼è‡´çŠ¶æ€åªæœ‰é™æ­¢çŠ¶æ€

Â  Â  }

  

Â  Â  // ä¸èƒ½è¶…å‡ºå·¦å³è¾¹ç•Œ

Â  Â  if (this.x &lt; 0) {

Â  Â  Â  this.x = 0;

Â  Â  } else if (this.x + this.width &gt; this.root.game_map.$canvas.width()) {

Â  Â  Â  this.x = this.root.game_map.$canvas.width() - this.width;

Â  Â  }

  

Â  }

  

Â  update_direction() { Â // ç¡®ä¿ä¸¤ä¸ªè§’è‰²å§‹ç»ˆç›¸å¯¹

Â  Â  if (this.status === 6) return;

  

Â  Â  let players = this.root.players;

Â  Â  if (players[0] &amp;&amp; players[1]) {

Â  Â  Â  let me = this, you = players[1 - this.id];

Â  Â  Â  if (me.x &lt; you.x) me.direction = 1;

Â  Â  Â  else me.direction = -1;

Â  Â  }

Â  }

  

Â  is_collusion(r1, r2) { Â // åˆ¤æ–­ä¸¤ä¸ªçŸ©é˜µæ˜¯å¦æœ‰äº¤é›†

Â  Â  if (Math.max(r1.x1, r2.x1) &gt; Math.min(r1.x2, r2.x2))

Â  Â  Â  return false;

Â  Â  if (Math.max(r1.y1, r2.y1) &gt; Math.min(r1.y2,r2.y2))

Â  Â  Â  return false;

Â  Â  return true;

Â  }

  

Â  is_attack() {

Â  Â  if (this.status === 6) return; Â // å·²ç»å€’åœ°ï¼Œæ— æ³•å†è¢«æ”»å‡»

  

Â  Â  this.status = 5;

Â  Â  this.frame_current_cnt = 0;

  

Â  Â  this.hp = Math.max(this.hp - 10, 0);

  

Â  Â  this.$hp_div.animate({ Â // è¡€æ¡å‡å°‘ï¼Œæ¸å˜

Â  Â  Â  width: this.$hp.parent().width() * this.hp / 100,

Â  Â  }, 350);

  

Â  Â  this.$hp.animate({ Â // è¡€æ¡å‡å°‘ï¼Œæ¸å˜

Â  Â  Â  width: this.$hp.parent().width() * this.hp / 100,

Â  Â  }, 600);

  

Â  Â  if (this.hp &lt;= 0) {

Â  Â  Â  this.status = 6;

Â  Â  Â  this.frame_current_cnt = 0;

Â  Â  Â  this.vx = 0;

Â  Â  }

Â  }

  

Â  update_attack() { Â  // åˆ¤å®šæ˜¯å¦è¢«æ”»å‡»åˆ°

Â  Â  if (this.status === 4 &amp;&amp; this.frame_current_cnt === 18) { Â  // ç¬¬18å¸§æ—¶åŠ¨ç”»æŒ¥å‡ºæ‹³ï¼Œåˆ¤æ–­æ­¤æ—¶æ˜¯å¦æ‹³å¤´ä¸å¯¹æ–¹æœ‰ç¢°æ’

Â  Â  Â  let me = this, you = this.root.players[1 - this.id];

Â  Â  Â  let r1; Â // æ”»å‡»åˆ¤å®šçŸ©å½¢

Â  Â  Â  let r2; Â // æ•Œæ–¹äººç‰©çŸ©å½¢

Â  Â  Â  if (this.direction &gt; 0) {

Â  Â  Â  Â  r1 = {

Â  Â  Â  Â  Â  x1: me.x + 120,

Â  Â  Â  Â  Â  y1: me.y + 40,

Â  Â  Â  Â  Â  x2: me.x + 120 + 100,

Â  Â  Â  Â  Â  y2: me.y + 40 + 20,

Â  Â  Â  Â  }

Â  Â  Â  } else {

Â  Â  Â  Â  r1 = {

Â  Â  Â  Â  Â  x1: me.x + me.width - 120 - 100,

Â  Â  Â  Â  Â  y1: me.y + 40,

Â  Â  Â  Â  Â  x2: me.x + me.width - 120 - 100 + 100,

Â  Â  Â  Â  Â  y2: me.y + 40 + 20,

Â  Â  Â  Â  }

Â  Â  Â  }

  

Â  Â  Â  r2 = {

Â  Â  Â  Â  x1: you.x,

Â  Â  Â  Â  y2: you.y,

Â  Â  Â  Â  x2: you.x + you.width,

Â  Â  Â  Â  y2: you.y + you.height

Â  Â  Â  };

  

Â  Â  Â  if (this.is_collusion(r1, r2)) {

Â  Â  Â  Â  you.is_attack();

Â  Â  Â  }

Â  Â  }

Â  }

  

Â  update() {

Â  Â  this.update_attack();

Â  Â  this.update_direction();

Â  Â  this.update_control();

Â  Â  this.update_move();

Â  Â  this.render();

Â  }

  

Â  render() {

  

Â  Â  let status = this.status;

  

Â  Â  if (this.status === 1 &amp;&amp; this.direction * this.vx &lt; 0) status = 2; Â  Â // åé€€çŠ¶æ€

  

Â  Â  let obj = this.animations.get(status);

Â  Â  if (obj &amp;&amp; obj.loaded) { Â  Â // GIF å·²ç»åŠ è½½å®Œæˆ

Â  Â  Â  if (this.direction &gt; 0) { Â // æ­£æ–¹å‘

Â  Â  Â  Â  let k = parseInt(this.frame_current_cnt / obj.frame_rate) % obj.frame_cnt; Â // é€šè¿‡obj.frame_rateæ§åˆ¶æ¸²æŸ“åŠ¨ç”»çš„é€Ÿç‡ï¼Œæ–¹ä¾¿æ§åˆ¶åŠ¨ç”»ï¼Œè€Œä¸åªæ˜¯å•çº¯çš„æ¯ä¸€å¸§éƒ½æ¸²æŸ“ä¸€æ¬¡

Â  Â  Â  Â  let image = obj.gif.frames[k].image;

Â  Â  Â  Â  this.ctx.drawImage(image, this.x, this.y + obj.offset_y, image.width * obj.scale, image.height * obj.scale);

Â  Â  Â  } else { Â // åæ–¹å‘ Â  é€šè¿‡è°ƒæ•´åæ ‡ç³»æ¥ç¿»è½¬æ–¹å‘

Â  Â  Â  Â  this.ctx.save();

Â  Â  Â  Â  this.ctx.scale(-1, 1);

Â  Â  Â  Â  this.ctx.translate(-this.root.game_map.$canvas.width(), 0);

  

Â  Â  Â  Â  let k = parseInt(this.frame_current_cnt / obj.frame_rate) % obj.frame_cnt;

Â  Â  Â  Â  let image = obj.gif.frames[k].image;

Â  Â  Â  Â  this.ctx.drawImage(image, this.root.game_map.$canvas.width() - this.width - this.x, this.y + obj.offset_y, image.width * obj.scale, image.height * obj.scale); Â // ä¸åŒäºæ­£æ–¹å‘æ—¶çš„æ¸²æŸ“ï¼Œå› ä¸ºæ­¤æ—¶åæ ‡ç³»æ”¹å˜ï¼Œéœ€è¦åœ¨å¯¹ç§°çš„ä½ç½®æ¸²æŸ“

  

Â  Â  Â  Â  this.ctx.restore();

Â  Â  Â  }

Â  Â  }

  

Â  Â  if (status === 4 || status === 5 || status === 6) { Â // ç¡®ä¿ä¸ä¼šä¸€ç›´å¾ªç¯GIF

Â  Â  Â  if (this.frame_current_cnt === obj.frame_rate * (obj.frame_cnt - 1)) { Â // ç¡®ä¿æ­¤æ—¶å·²ç»æ’­æ”¾å®Œä¸€æ¬¡GIFåŠ¨ç”»

Â  Â  Â  Â  if (status === 6) { Â  // æ­»äº¡å€’åœ°ä¸èµ·ï¼Œè¿™é‡Œçš„ -- å’Œ ä¸‹é¢çš„ ++ ç›¸æŠµæ¶ˆï¼Œä½¿ä¹‹åœ¨æœ€åä¸€å¸§ä¸å†å˜åŒ–

Â  Â  Â  Â  Â  this.frame_current_cnt--;

Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  this.status = 0;

Â  Â  Â  Â  }

Â  Â  Â  }

Â  Â  }

  

Â  Â  this.frame_current_cnt++;

Â  }

}
</code></pre><p><code>js/player/kyo.js</code></p>
<pre tabindex="0"><code>import { Player } from &#34;../player/base.js&#34;;

import {GIF} from &#39;../utils/gif.js&#39;

  

export class Kyo extends Player {

Â  constructor(root, info) {

Â  Â  super(root, info);

  

Â  Â  this.init_animations(); Â  // åˆå§‹åŒ–åŠ¨ç”»

Â  }

  

Â  init_animations() {

Â  Â  let outer = this;

Â  Â  let offsets = [0, -22, -22, -150, 0, 0, 0]; Â  // åç§»é‡ ä¸åŒçš„åŠ¨ç”»é«˜åº¦ä¸åŒï¼Œå› æ­¤éœ€è¦å€ŸåŠ©ç«–ç›´æ–¹å‘ä¸Šçš„åç§»é‡å°†ä»–ä»¬è°ƒæ•´è‡³åŒä¸€æ°´å¹³é¢

Â  Â  for (let i = 0; i &lt; 7; ++ i) { Â // 7ä¸ªåŠ¨ä½œ

Â  Â  Â  let gif = GIF();

Â  Â  Â  gif.load(`/static/images/player/kyo/${i}.gif`);

Â  Â  Â  this.animations.set(i, { Â // åŠ¨ç”»

Â  Â  Â  Â  gif: gif,

Â  Â  Â  Â  frame_cnt: 0, Â // GIFå¸§æ•°

Â  Â  Â  Â  frame_rate: 5, Â // æ¯5å¸§è¿‡æ¸¡ä¸€æ¬¡

Â  Â  Â  Â  offset_y: offsets[i], Â // yæ–¹å‘åç§»é‡

Â  Â  Â  Â  loaded: false, Â // æ˜¯å¦åŠ è½½å®Œæˆ

Â  Â  Â  Â  scale: 2, Â // æ”¾å¤§2å€

Â  Â  Â  });

  

Â  Â  Â  gif.onload = function() { Â  // åŠ è½½å®Œæˆ

Â  Â  Â  Â  let obj = outer.animations.get(i);

Â  Â  Â  Â  obj.frame_cnt = gif.frames.length;

Â  Â  Â  Â  obj.loaded = true;

  

Â  Â  Â  Â  if (i === 3) { Â // è°ƒæ•´è·³è·ƒæ—¶GIFæ’­æ”¾é€Ÿç‡

Â  Â  Â  Â  Â  obj.frame_rate = 4;

Â  Â  Â  Â  }

Â  Â  Â  }

Â  Â  }

Â  }

}
</code></pre><h4 id="gif">GIF</h4>
<ul>
<li><a href="https://stackoverflow.com/questions/48234696/how-to-put-a-gif-with-canvas/48348567#48348567">Loading and playing GIF image to canvas</a>    æŠŠç©å®¶çš„<code>GIF</code>åŠ¨ç”»æ¸²æŸ“åœ¨<code>canvas</code>ä¸Š</li>
</ul>
<hr>
<p><code>js/utils/gif.js</code></p>
<pre tabindex="0"><code>const GIF = function () {

Â  // **NOT** for commercial use.

Â  var timerID; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // timer handle for set time out usage

Â  var st; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // holds the stream object when loading.

Â  var interlaceOffsets = [0, 4, 2, 1]; // used in de-interlacing.

Â  var interlaceSteps = [8, 8, 4, 2];

Â  var interlacedBufSize; Â // this holds a buffer to de interlace. Created on the first frame and when size changed

Â  var deinterlaceBuf;

Â  var pixelBufSize; Â  Â // this holds a buffer for pixels. Created on the first frame and when size changed

Â  var pixelBuf;

Â  const GIF_FILE = { // gif file data headers

Â  Â  GCExt: 0xF9,

Â  Â  COMMENT: 0xFE,

Â  Â  APPExt: 0xFF,

Â  Â  UNKNOWN: 0x01, // not sure what this is but need to skip it in parser

Â  Â  IMAGE: 0x2C,

Â  Â  EOF: 59, Â  // This is entered as decimal

Â  Â  EXT: 0x21,

Â  };

Â  // simple buffered stream used to read from the file

Â  var Stream = function (data) {

Â  Â  Â  this.data = new Uint8ClampedArray(data);

Â  Â  Â  this.pos = 0;

Â  Â  Â  var len = this.data.length;

Â  Â  Â  this.getString = function (count) { // returns a string from current pos of len count

Â  Â  Â  Â  Â  var s = &#34;&#34;;

Â  Â  Â  Â  Â  while (count--) { s += String.fromCharCode(this.data[this.pos++]) }

Â  Â  Â  Â  Â  return s;

Â  Â  Â  };

Â  Â  Â  this.readSubBlocks = function () { // reads a set of blocks as a string

Â  Â  Â  Â  Â  var size, count, data = &#34;&#34;;

Â  Â  Â  Â  Â  do {

Â  Â  Â  Â  Â  Â  Â  count = size = this.data[this.pos++];

Â  Â  Â  Â  Â  Â  Â  while (count--) { data += String.fromCharCode(this.data[this.pos++]) }

Â  Â  Â  Â  Â  } while (size !== 0 &amp;&amp; this.pos &lt; len);

Â  Â  Â  Â  Â  return data;

Â  Â  Â  }

Â  Â  Â  this.readSubBlocksB = function () { // reads a set of blocks as binary

Â  Â  Â  Â  Â  var size, count, data = [];

Â  Â  Â  Â  Â  do {

Â  Â  Â  Â  Â  Â  Â  count = size = this.data[this.pos++];

Â  Â  Â  Â  Â  Â  Â  while (count--) { data.push(this.data[this.pos++]); }

Â  Â  Â  Â  Â  } while (size !== 0 &amp;&amp; this.pos &lt; len);

Â  Â  Â  Â  Â  return data;

Â  Â  Â  }

Â  };

Â  // LZW decoder uncompressed each frames pixels

Â  // this needs to be optimised.

Â  // minSize is the min dictionary as powers of two

Â  // size and data is the compressed pixels

Â  function lzwDecode(minSize, data) {

Â  Â  Â  var i, pixelPos, pos, clear, eod, size, done, dic, code, last, d, len;

Â  Â  Â  pos = pixelPos = 0;

Â  Â  Â  dic = [];

Â  Â  Â  clear = 1 &lt;&lt; minSize;

Â  Â  Â  eod = clear + 1;

Â  Â  Â  size = minSize + 1;

Â  Â  Â  done = false;

Â  Â  Â  while (!done) { // JavaScript optimisers like a clear exit though I never use &#39;done&#39; apart from fooling the optimiser

Â  Â  Â  Â  Â  last = code;

Â  Â  Â  Â  Â  code = 0;

Â  Â  Â  Â  Â  for (i = 0; i &lt; size; i++) {

Â  Â  Â  Â  Â  Â  Â  if (data[pos &gt;&gt; 3] &amp; (1 &lt;&lt; (pos &amp; 7))) { code |= 1 &lt;&lt; i }

Â  Â  Â  Â  Â  Â  Â  pos++;

Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  if (code === clear) { // clear and reset the dictionary

Â  Â  Â  Â  Â  Â  Â  dic = [];

Â  Â  Â  Â  Â  Â  Â  size = minSize + 1;

Â  Â  Â  Â  Â  Â  Â  for (i = 0; i &lt; clear; i++) { dic[i] = [i] }

Â  Â  Â  Â  Â  Â  Â  dic[clear] = [];

Â  Â  Â  Â  Â  Â  Â  dic[eod] = null;

Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  if (code === eod) { done = true; return }

Â  Â  Â  Â  Â  Â  Â  if (code &gt;= dic.length) { dic.push(dic[last].concat(dic[last][0])) }

Â  Â  Â  Â  Â  Â  Â  else if (last !== clear) { dic.push(dic[last].concat(dic[code][0])) }

Â  Â  Â  Â  Â  Â  Â  d = dic[code];

Â  Â  Â  Â  Â  Â  Â  len = d.length;

Â  Â  Â  Â  Â  Â  Â  for (i = 0; i &lt; len; i++) { pixelBuf[pixelPos++] = d[i] }

Â  Â  Â  Â  Â  Â  Â  if (dic.length === (1 &lt;&lt; size) &amp;&amp; size &lt; 12) { size++ }

Â  Â  Â  Â  Â  }

Â  Â  Â  }

Â  };

Â  function parseColourTable(count) { // get a colour table of length count Â Each entry is 3 bytes, for RGB.

Â  Â  Â  var colours = [];

Â  Â  Â  for (var i = 0; i &lt; count; i++) { colours.push([st.data[st.pos++], st.data[st.pos++], st.data[st.pos++]]) }

Â  Â  Â  return colours;

Â  }

Â  function parse() { Â  Â  Â  Â // read the header. This is the starting point of the decode and async calls parseBlock

Â  Â  Â  var bitField;

Â  Â  Â  st.pos += 6;

Â  Â  Â  gif.width = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  gif.height = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  bitField = st.data[st.pos++];

Â  Â  Â  gif.colorRes = (bitField &amp; 0b1110000) &gt;&gt; 4;

Â  Â  Â  gif.globalColourCount = 1 &lt;&lt; ((bitField &amp; 0b111) + 1);

Â  Â  Â  gif.bgColourIndex = st.data[st.pos++];

Â  Â  Â  st.pos++; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // ignoring pixel aspect ratio. if not 0, aspectRatio = (pixelAspectRatio + 15) / 64

Â  Â  Â  if (bitField &amp; 0b10000000) { gif.globalColourTable = parseColourTable(gif.globalColourCount) } // global colour flag

Â  Â  Â  setTimeout(parseBlock, 0);

Â  }

Â  function parseAppExt() { // get application specific data. Netscape added iterations and terminator. Ignoring that

Â  Â  Â  st.pos += 1;

Â  Â  Â  if (&#39;NETSCAPE&#39; === st.getString(8)) { st.pos += 8 } Â // ignoring this data. iterations (word) and terminator (byte)

Â  Â  Â  else {

Â  Â  Â  Â  Â  st.pos += 3; Â  Â  Â  Â  Â  Â // 3 bytes of string usually &#34;2.0&#34; when identifier is NETSCAPE

Â  Â  Â  Â  Â  st.readSubBlocks(); Â  Â  // unknown app extension

Â  Â  Â  }

Â  };

Â  function parseGCExt() { // get GC data

Â  Â  Â  var bitField;

Â  Â  Â  st.pos++;

Â  Â  Â  bitField = st.data[st.pos++];

Â  Â  Â  gif.disposalMethod = (bitField &amp; 0b11100) &gt;&gt; 2;

Â  Â  Â  gif.transparencyGiven = bitField &amp; 0b1 ? true : false; // ignoring bit two that is marked as Â userInput???

Â  Â  Â  gif.delayTime = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  gif.transparencyIndex = st.data[st.pos++];

Â  Â  Â  st.pos++;

Â  };

Â  function parseImg() { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // decodes image data to create the indexed pixel image

Â  Â  Â  var deinterlace, frame, bitField;

Â  Â  Â  deinterlace = function (width) { Â  Â  Â  Â  Â  Â  Â  Â  Â  // de interlace pixel data if needed

Â  Â  Â  Â  Â  var lines, fromLine, pass, toline;

Â  Â  Â  Â  Â  lines = pixelBufSize / width;

Â  Â  Â  Â  Â  fromLine = 0;

Â  Â  Â  Â  Â  if (interlacedBufSize !== pixelBufSize) { Â  Â  Â // create the buffer if size changed or undefined.

Â  Â  Â  Â  Â  Â  Â  deinterlaceBuf = new Uint8Array(pixelBufSize);

Â  Â  Â  Â  Â  Â  Â  interlacedBufSize = pixelBufSize;

Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  for (pass = 0; pass &lt; 4; pass++) {

Â  Â  Â  Â  Â  Â  Â  for (toLine = interlaceOffsets[pass]; toLine &lt; lines; toLine += interlaceSteps[pass]) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  deinterlaceBuf.set(pixelBuf.subarray(fromLine, fromLine + width), toLine * width);

Â  Â  Â  Â  Â  Â  Â  Â  Â  fromLine += width;

Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  }

Â  Â  Â  };

Â  Â  Â  frame = {}

Â  Â  Â  gif.frames.push(frame);

Â  Â  Â  frame.disposalMethod = gif.disposalMethod;

Â  Â  Â  frame.time = gif.length;

Â  Â  Â  frame.delay = gif.delayTime * 10;

Â  Â  Â  gif.length += frame.delay;

Â  Â  Â  if (gif.transparencyGiven) { frame.transparencyIndex = gif.transparencyIndex }

Â  Â  Â  else { frame.transparencyIndex = undefined }

Â  Â  Â  frame.leftPos = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  frame.topPos = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  frame.width = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  frame.height = (st.data[st.pos++]) + ((st.data[st.pos++]) &lt;&lt; 8);

Â  Â  Â  bitField = st.data[st.pos++];

Â  Â  Â  frame.localColourTableFlag = bitField &amp; 0b10000000 ? true : false;

Â  Â  Â  if (frame.localColourTableFlag) { frame.localColourTable = parseColourTable(1 &lt;&lt; ((bitField &amp; 0b111) + 1)) }

Â  Â  Â  if (pixelBufSize !== frame.width * frame.height) { // create a pixel buffer if not yet created or if current frame size is different from previous

Â  Â  Â  Â  Â  pixelBuf = new Uint8Array(frame.width * frame.height);

Â  Â  Â  Â  Â  pixelBufSize = frame.width * frame.height;

Â  Â  Â  }

Â  Â  Â  lzwDecode(st.data[st.pos++], st.readSubBlocksB()); // decode the pixels

Â  Â  Â  if (bitField &amp; 0b1000000) { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // de interlace if needed

Â  Â  Â  Â  Â  frame.interlaced = true;

Â  Â  Â  Â  Â  deinterlace(frame.width);

Â  Â  Â  } else { frame.interlaced = false }

Â  Â  Â  processFrame(frame); Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // convert to canvas image

Â  };

Â  function processFrame(frame) { // creates a RGBA canvas image from the indexed pixel data.

Â  Â  Â  var ct, cData, dat, pixCount, ind, useT, i, pixel, pDat, col, frame, ti;

Â  Â  Â  frame.image = document.createElement(&#39;canvas&#39;);

Â  Â  Â  frame.image.width = gif.width;

Â  Â  Â  frame.image.height = gif.height;

Â  Â  Â  frame.image.ctx = frame.image.getContext(&#34;2d&#34;);

Â  Â  Â  ct = frame.localColourTableFlag ? frame.localColourTable : gif.globalColourTable;

Â  Â  Â  if (gif.lastFrame === null) { gif.lastFrame = frame }

Â  Â  Â  useT = (gif.lastFrame.disposalMethod === 2 || gif.lastFrame.disposalMethod === 3) ? true : false;

Â  Â  Â  if (!useT) { frame.image.ctx.drawImage(gif.lastFrame.image, 0, 0, gif.width, gif.height) }

Â  Â  Â  cData = frame.image.ctx.getImageData(frame.leftPos, frame.topPos, frame.width, frame.height);

Â  Â  Â  ti = frame.transparencyIndex;

Â  Â  Â  dat = cData.data;

Â  Â  Â  if (frame.interlaced) { pDat = deinterlaceBuf }

Â  Â  Â  else { pDat = pixelBuf }

Â  Â  Â  pixCount = pDat.length;

Â  Â  Â  ind = 0;

Â  Â  Â  for (i = 0; i &lt; pixCount; i++) {

Â  Â  Â  Â  Â  pixel = pDat[i];

Â  Â  Â  Â  Â  col = ct[pixel];

Â  Â  Â  Â  Â  if (ti !== pixel) {

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = col[0];

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = col[1];

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = col[2];

Â  Â  Â  Â  Â  Â  Â  dat[ind++] = 255; Â  Â  Â // Opaque.

Â  Â  Â  Â  Â  } else

Â  Â  Â  Â  Â  Â  Â  if (useT) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  dat[ind + 3] = 0; // Transparent.

Â  Â  Â  Â  Â  Â  Â  Â  Â  ind += 4;

Â  Â  Â  Â  Â  Â  Â  } else { ind += 4 }

Â  Â  Â  }

Â  Â  Â  frame.image.ctx.putImageData(cData, frame.leftPos, frame.topPos);

Â  Â  Â  gif.lastFrame = frame;

Â  Â  Â  if (!gif.waitTillDone &amp;&amp; typeof gif.onload === &#34;function&#34;) { doOnloadEvent() }// if !waitTillDone the call onload now after first frame is loaded

Â  };

Â  // **NOT** for commercial use.

Â  function finnished() { // called when the load has completed

Â  Â  Â  gif.loading = false;

Â  Â  Â  gif.frameCount = gif.frames.length;

Â  Â  Â  gif.lastFrame = null;

Â  Â  Â  st = undefined;

Â  Â  Â  gif.complete = true;

Â  Â  Â  gif.disposalMethod = undefined;

Â  Â  Â  gif.transparencyGiven = undefined;

Â  Â  Â  gif.delayTime = undefined;

Â  Â  Â  gif.transparencyIndex = undefined;

Â  Â  Â  gif.waitTillDone = undefined;

Â  Â  Â  pixelBuf = undefined; // dereference pixel buffer

Â  Â  Â  deinterlaceBuf = undefined; // dereference interlace buff (may or may not be used);

Â  Â  Â  pixelBufSize = undefined;

Â  Â  Â  deinterlaceBuf = undefined;

Â  Â  Â  gif.currentFrame = 0;

Â  Â  Â  if (gif.frames.length &gt; 0) { gif.image = gif.frames[0].image }

Â  Â  Â  doOnloadEvent();

Â  Â  Â  if (typeof gif.onloadall === &#34;function&#34;) {

Â  Â  Â  Â  Â  (gif.onloadall.bind(gif))({ type: &#39;loadall&#39;, path: [gif] });

Â  Â  Â  }

Â  Â  Â  if (gif.playOnLoad) { gif.play() }

Â  }

Â  function canceled() { // called if the load has been cancelled

Â  Â  Â  finnished();

Â  Â  Â  if (typeof gif.cancelCallback === &#34;function&#34;) { (gif.cancelCallback.bind(gif))({ type: &#39;canceled&#39;, path: [gif] }) }

Â  }

Â  function parseExt() { Â  Â  Â  Â  Â  Â  Â // parse extended blocks

Â  Â  Â  const blockID = st.data[st.pos++];

Â  Â  Â  if (blockID === GIF_FILE.GCExt) { parseGCExt() }

Â  Â  Â  else if (blockID === GIF_FILE.COMMENT) { gif.comment += st.readSubBlocks() }

Â  Â  Â  else if (blockID === GIF_FILE.APPExt) { parseAppExt() }

Â  Â  Â  else {

Â  Â  Â  Â  Â  if (blockID === GIF_FILE.UNKNOWN) { st.pos += 13; } // skip unknow block

Â  Â  Â  Â  Â  st.readSubBlocks();

Â  Â  Â  }

  

Â  }

Â  function parseBlock() { // parsing the blocks

Â  Â  Â  if (gif.cancel !== undefined &amp;&amp; gif.cancel === true) { canceled(); return }

  

Â  Â  Â  const blockId = st.data[st.pos++];

Â  Â  Â  if (blockId === GIF_FILE.IMAGE) { // image block

Â  Â  Â  Â  Â  parseImg();

Â  Â  Â  Â  Â  if (gif.firstFrameOnly) { finnished(); return }

Â  Â  Â  } else if (blockId === GIF_FILE.EOF) { finnished(); return }

Â  Â  Â  else { parseExt() }

Â  Â  Â  if (typeof gif.onprogress === &#34;function&#34;) {

Â  Â  Â  Â  Â  gif.onprogress({ bytesRead: st.pos, totalBytes: st.data.length, frame: gif.frames.length });

Â  Â  Â  }

Â  Â  Â  setTimeout(parseBlock, 0); // parsing frame async so processes can get some time in.

Â  };

Â  function cancelLoad(callback) { // cancels the loading. This will cancel the load before the next frame is decoded

Â  Â  Â  if (gif.complete) { return false }

Â  Â  Â  gif.cancelCallback = callback;

Â  Â  Â  gif.cancel = true;

Â  Â  Â  return true;

Â  }

Â  function error(type) {

Â  Â  Â  if (typeof gif.onerror === &#34;function&#34;) { (gif.onerror.bind(this))({ type: type, path: [this] }) }

Â  Â  Â  gif.onload = gif.onerror = undefined;

Â  Â  Â  gif.loading = false;

Â  }

Â  function doOnloadEvent() { // fire onload event if set

Â  Â  Â  gif.currentFrame = 0;

Â  Â  Â  gif.nextFrameAt = gif.lastFrameAt = new Date().valueOf(); // just sets the time now

Â  Â  Â  if (typeof gif.onload === &#34;function&#34;) { (gif.onload.bind(gif))({ type: &#39;load&#39;, path: [gif] }) }

Â  Â  Â  gif.onerror = gif.onload = undefined;

Â  }

Â  function dataLoaded(data) { // Data loaded create stream and parse

Â  Â  Â  st = new Stream(data);

Â  Â  Â  parse();

Â  }

Â  function loadGif(filename) { // starts the load

Â  Â  Â  var ajax = new XMLHttpRequest();

Â  Â  Â  ajax.responseType = &#34;arraybuffer&#34;;

Â  Â  Â  ajax.onload = function (e) {

Â  Â  Â  Â  Â  if (e.target.status === 404) { error(&#34;File not found&#34;) }

Â  Â  Â  Â  Â  else if (e.target.status &gt;= 200 &amp;&amp; e.target.status &lt; 300) { dataLoaded(ajax.response) }

Â  Â  Â  Â  Â  else { error(&#34;Loading error : &#34; + e.target.status) }

Â  Â  Â  };

Â  Â  Â  ajax.open(&#39;GET&#39;, filename, true);

Â  Â  Â  ajax.send();

Â  Â  Â  ajax.onerror = function (e) { error(&#34;File error&#34;) };

Â  Â  Â  this.src = filename;

Â  Â  Â  this.loading = true;

Â  }

Â  function play() { // starts play if paused

Â  Â  Â  if (!gif.playing) {

Â  Â  Â  Â  Â  gif.paused = false;

Â  Â  Â  Â  Â  gif.playing = true;

Â  Â  Â  Â  Â  playing();

Â  Â  Â  }

Â  }

Â  function pause() { // stops play

Â  Â  Â  gif.paused = true;

Â  Â  Â  gif.playing = false;

Â  Â  Â  clearTimeout(timerID);

Â  }

Â  function togglePlay() {

Â  Â  Â  if (gif.paused || !gif.playing) { gif.play() }

Â  Â  Â  else { gif.pause() }

Â  }

Â  function seekFrame(frame) { // seeks to frame number.

Â  Â  Â  clearTimeout(timerID);

Â  Â  Â  gif.currentFrame = frame % gif.frames.length;

Â  Â  Â  if (gif.playing) { playing() }

Â  Â  Â  else { gif.image = gif.frames[gif.currentFrame].image }

Â  }

Â  function seek(time) { // time in Seconds Â // seek to frame that would be displayed at time

Â  Â  Â  clearTimeout(timerID);

Â  Â  Â  if (time &lt; 0) { time = 0 }

Â  Â  Â  time *= 1000; // in ms

Â  Â  Â  time %= gif.length;

Â  Â  Â  var frame = 0;

Â  Â  Â  while (time &gt; gif.frames[frame].time + gif.frames[frame].delay &amp;&amp; frame &lt; gif.frames.length) { frame += 1 }

Â  Â  Â  gif.currentFrame = frame;

Â  Â  Â  if (gif.playing) { playing() }

Â  Â  Â  else { gif.image = gif.frames[gif.currentFrame].image }

Â  }

Â  function playing() {

Â  Â  Â  var delay;

Â  Â  Â  var frame;

Â  Â  Â  if (gif.playSpeed === 0) {

Â  Â  Â  Â  Â  gif.pause();

Â  Â  Â  Â  Â  return;

Â  Â  Â  } else {

Â  Â  Â  Â  Â  if (gif.playSpeed &lt; 0) {

Â  Â  Â  Â  Â  Â  Â  gif.currentFrame -= 1;

Â  Â  Â  Â  Â  Â  Â  if (gif.currentFrame &lt; 0) { gif.currentFrame = gif.frames.length - 1 }

Â  Â  Â  Â  Â  Â  Â  frame = gif.currentFrame;

Â  Â  Â  Â  Â  Â  Â  frame -= 1;

Â  Â  Â  Â  Â  Â  Â  if (frame &lt; 0) { frame = gif.frames.length - 1 }

Â  Â  Â  Â  Â  Â  Â  delay = -gif.frames[frame].delay * 1 / gif.playSpeed;

Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  gif.currentFrame += 1;

Â  Â  Â  Â  Â  Â  Â  gif.currentFrame %= gif.frames.length;

Â  Â  Â  Â  Â  Â  Â  delay = gif.frames[gif.currentFrame].delay * 1 / gif.playSpeed;

Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  gif.image = gif.frames[gif.currentFrame].image;

Â  Â  Â  Â  Â  timerID = setTimeout(playing, delay);

Â  Â  Â  }

Â  }

Â  var gif = { Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â // the gif image object

Â  Â  Â  onload: null, Â  Â  Â  // fire on load. Use waitTillDone = true to have load fire at end or false to fire on first frame

Â  Â  Â  onerror: null, Â  Â  Â  // fires on error

Â  Â  Â  onprogress: null, Â  Â  Â  // fires a load progress event

Â  Â  Â  onloadall: null, Â  Â  Â  // event fires when all frames have loaded and gif is ready

Â  Â  Â  paused: false, Â  Â  Â // true if paused

Â  Â  Â  playing: false, Â  Â  Â // true if playing

Â  Â  Â  waitTillDone: true, Â  Â  Â  // If true onload will fire when all frames loaded, if false, onload will fire when first frame has loaded

Â  Â  Â  loading: false, Â  Â  Â // true if still loading

Â  Â  Â  firstFrameOnly: false, Â  Â  Â // if true only load the first frame

Â  Â  Â  width: null, Â  Â  Â  // width in pixels

Â  Â  Â  height: null, Â  Â  Â  // height in pixels

Â  Â  Â  frames: [], Â  Â  Â  Â  // array of frames

Â  Â  Â  comment: &#34;&#34;, Â  Â  Â  Â  // comments if found in file. Note I remember that some gifs have comments per frame if so this will be all comment concatenated

Â  Â  Â  length: 0, Â  Â  Â  Â  Â // gif length in ms (1/1000 second)

Â  Â  Â  currentFrame: 0, Â  Â  Â  Â  Â // current frame.

Â  Â  Â  frameCount: 0, Â  Â  Â  Â  Â // number of frames

Â  Â  Â  playSpeed: 1, Â  Â  Â  Â  Â // play speed 1 normal, 2 twice 0.5 half, -1 reverse etc...

Â  Â  Â  lastFrame: null, Â  Â  Â  // temp hold last frame loaded so you can display the gif as it loads

Â  Â  Â  image: null, Â  Â  Â  // the current image at the currentFrame

Â  Â  Â  playOnLoad: true, Â  Â  Â  // if true starts playback when loaded

Â  Â  Â  // functions

Â  Â  Â  load: loadGif, Â  Â // call this to load a file

Â  Â  Â  cancel: cancelLoad, // call to stop loading

Â  Â  Â  play: play, Â  Â  Â  // call to start play

Â  Â  Â  pause: pause, Â  Â  Â // call to pause

Â  Â  Â  seek: seek, Â  Â  Â  // call to seek to time

Â  Â  Â  seekFrame: seekFrame, Â // call to seek to frame

Â  Â  Â  togglePlay: togglePlay, // call to toggle play and pause state

Â  };

Â  return gif;

}

  

export {

Â  GIF

}
</code></pre><h4 id="çŠ¶æ€æœº">çŠ¶æ€æœº</h4>
<center> 
	<img style="border-radius: 0.3125em; box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" src="https://bu.dusays.com/2022/11/03/6363d89220c15.png">
	<br>
	<div style="color:orange; border-bottom: 1px solid #d9d9d9; 
	display: inline-block; 
	color: #999; 
	padding: 2px;">0ï¼šé™æ­¢    1ï¼šç§»åŠ¨     3ï¼šè·³è·ƒ    4ï¼šæ”»å‡»</div> 
 </center>
<h2 id="myspace">MySpace</h2>
<ul>
<li><a href="https://github.com/Xancoding/Learning-Vue">MySpace</a></li>
<li><a href="https://www.acwing.com/video/3867/">AcWing Web åº”ç”¨è¯¾ | Vue3â€”â€”ç½‘ç«™æ•´ä½“å¸ƒå±€ã€ç”¨æˆ·åŠ¨æ€é¡µé¢ | Vedio</a></li>
<li><a href="https://www.acwing.com/video/3875/">AcWing Web åº”ç”¨è¯¾ | Vue3â€”â€”ç”¨æˆ·åˆ—è¡¨ã€ç™»å½•ã€æ³¨å†Œé¡µé¢ | Vedio</a></li>
</ul>
<hr>
]]></content:encoded>
    </item>
    
    <item>
      <title>WarOfWarlock--AcWing Django æ¡†æ¶è¯¾</title>
      <link>https://xancoding.cn/posts/2022-10-29-18-23-59/</link>
      <pubDate>Sat, 29 Oct 2022 18:23:59 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2022-10-29-18-23-59/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.colopen-blog.com/Engineer/acw_django/&#34;&gt;AcWing Django æ¡†æ¶è¯¾ | Colopen&amp;rsquo;s blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/activity/content/punch_the_clock/72/&#34;&gt;AcWing Django æ¡†æ¶è¯¾&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;warofwarlockhttpsgithubcomxancodingwarofwarlock&#34;&gt;&lt;a href=&#34;https://github.com/Xancoding/WarOfWarlock&#34;&gt;WarOfWarlock&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&#34;æ­å»ºå·¥å…·&#34;&gt;æ­å»ºå·¥å…·&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;HTML &amp;amp; CSS &amp;amp; JavaScript &amp;amp; Django&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.colopen-blog.com/Engineer/acw_django/&#34;&gt;AcWing Django æ¡†æ¶è¯¾ | Colopen&amp;rsquo;s blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/activity/content/punch_the_clock/72/&#34;&gt;AcWing Djangoæ¡†æ¶è¯¾&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;django-é¡¹ç›®åˆ›å»º&#34;&gt;Django é¡¹ç›®åˆ›å»º&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/72577/&#34;&gt;2.1ä¸Šè¯¾ç¬”è®° | æ &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/73097/&#34;&gt;2.1ä¸Šè¯¾ç¬”è®° | Andrew1729&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å¯åŠ¨åˆå§‹é¡¹ç›®&#34;&gt;å¯åŠ¨åˆå§‹é¡¹ç›®&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;django-admin startproject acapp&lt;/code&gt;ï¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºåä¸º&lt;code&gt;acapp&lt;/code&gt;çš„&lt;code&gt;django&lt;/code&gt;é¡¹ç›®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;python3 manage.py runserver 0.0.0.0:8000&lt;/code&gt;ï¼šå¯åŠ¨é¡¹ç›®
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€&lt;code&gt;settings.py&lt;/code&gt;ï¼Œæ‰¾åˆ°&lt;code&gt;ALLOWED_HOSTS=[]&lt;/code&gt;ï¼Œä¿®æ”¹æˆ&lt;code&gt;ALLOWED_HOSTS=[&amp;quot;è‡ªå·±çš„æœåŠ¡å™¨çš„å…¬ç½‘IP&amp;quot;]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡&lt;code&gt;è‡ªå·±çš„æœåŠ¡å™¨å…¬ç½‘IP:8000&lt;/code&gt; æ‰“å¼€Djangoé¡µé¢&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;åˆ›å»ºç®¡ç†å‘˜ç™»å½•é¡µé¢&#34;&gt;åˆ›å»ºç®¡ç†å‘˜ç™»å½•é¡µé¢&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ä¸€çº§&lt;code&gt;acapp&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹ï¼Œ&lt;code&gt;python3 manage.py startapp XXX&lt;/code&gt;ï¼Œ&lt;code&gt;XXX&lt;/code&gt;æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„appåï¼Œè¿™é‡Œç”¨&lt;code&gt;game&lt;/code&gt;ç¤ºä¾‹ï¼Œè¿™æ—¶å€™ä¼šå¤šä¸€ä¸ªæ–‡ä»¶å¤¹&lt;code&gt;game&lt;/code&gt;ï¼Œæ ‘å½¢ç»“æ„å¦‚å›¾ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;|-- game
|   |-- __init__.py
|   |-- admin.py          # ç®¡ç†å‘˜é¡µé¢
|   |-- apps.py           # ç”¨çš„ä¸å¤š
|   |-- migrations        # å­˜å‚¨æ•°æ®åº“
|   |   `-- __init__.py
|   |-- models.py         # å®šä¹‰ç½‘ç«™é‡Œçš„æ•°æ®åº“è¡¨
|   |-- tests.py
|   `-- views.py          # è§†å›¾ï¼Œå³å‡½æ•°
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;&lt;code&gt;python3 manage.py migrate&lt;/code&gt;ï¼šå°†æ‰€æœ‰ä¿®æ”¹æ›´æ–°è¿›æ•°æ®åº“&lt;/li&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª &lt;strong&gt;ç®¡ç†å‘˜ç”¨æˆ·&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ python3 manage.py createsuperuser
&amp;gt; Username (leave blank to use &amp;#39;acs&amp;#39;): admin
&amp;gt; Email address: 
&amp;gt; Password: 123456
&amp;gt; Password (again): 123456
&amp;gt; Superuser created successfully.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶ååˆ©ç”¨è¯¥ &lt;strong&gt;ç®¡ç†å‘˜ç”¨æˆ·&lt;/strong&gt; ç™»å½• &lt;code&gt;admin&lt;/code&gt; é¡µé¢ï¼Œå³å¯æˆåŠŸç™»é™†&lt;/p&gt;
&lt;h2 id=&#34;åˆ›å»ºç”¨æˆ·ç™»å½•é¡µé¢&#34;&gt;åˆ›å»ºç”¨æˆ·ç™»å½•é¡µé¢&lt;/h2&gt;
&lt;h3 id=&#34;game-ä¸‹çš„å„ä¸ªæ–‡ä»¶ä½œç”¨&#34;&gt;&lt;code&gt;game&lt;/code&gt; ä¸‹çš„å„ä¸ªæ–‡ä»¶ä½œç”¨&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;templates&lt;/code&gt;ç›®å½•ï¼šç®¡ç† &lt;code&gt;html&lt;/code&gt;  æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;urls&lt;/code&gt;ç›®å½•ï¼šç®¡ç†è·¯ç”±ï¼Œå³é“¾æ¥ä¸å‡½æ•°çš„å¯¹åº”å…³ç³» (æ¥æ”¶é“¾æ¥ï¼Œè°ƒç”¨ç›¸å¯¹åº”çš„å‡½æ•°)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;views&lt;/code&gt;ç›®å½•ï¼šç®¡ç† &lt;code&gt;http&lt;/code&gt; å‡½æ•°ï¼ˆæ¥æ”¶æµè§ˆå™¨è¯·æ±‚ï¼Œè¿”å›å­—ç¬¦ä¸²è‡³æµè§ˆå™¨ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;models&lt;/code&gt;ç›®å½•ï¼šç®¡ç†æ•°æ®åº“æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;static&lt;/code&gt;ç›®å½•ï¼šç®¡ç†é™æ€æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;consumers&lt;/code&gt;ç›®å½•ï¼šç®¡ç†&lt;code&gt;websocket&lt;/code&gt;å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å®ç°ä¸€ä¸ªè·¯ç”±é‡å®šå‘&#34;&gt;å®ç°ä¸€ä¸ªè·¯ç”±é‡å®šå‘&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;url&lt;/code&gt; è¾“å…¥ç½‘å€ -&amp;gt; &lt;code&gt;acapp.urls&lt;/code&gt; -&amp;gt; &lt;code&gt;game.urls&lt;/code&gt; -&amp;gt; &lt;code&gt;game.views.index&lt;/code&gt; -&amp;gt; å±•ç¤ºé¡µé¢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;game.views&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™å…¶ä¸­ï¼Œ&lt;code&gt;HttpResponse()&lt;/code&gt;å†…éƒ¨ä½¿ç”¨&lt;code&gt;html&lt;/code&gt;çš„è¯­æ³•ï¼Œè¿”å›çš„å“åº”å°±ç›´æ¥ç”¨è¿™ä¸ªå­—ç¬¦ä¸²ä½œä¸ºé¡µé¢ï¼Œè½¬æ¢æˆ&lt;code&gt;html&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.http import HttpResponse

def index(request):
    line1 = &amp;#39;&amp;lt;h1 style=&amp;#34;text-align: center&amp;#34;&amp;gt; ç¬¬ä¸€ä¸ªç½‘é¡µ &amp;lt;/h1&amp;gt;&amp;#39;
    return HttpResponse(line1)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;game.urls&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™å…¶ä¸­ï¼Œ&lt;code&gt;path(&#39;PATH&#39;, function, name)&lt;/code&gt;çš„å«ä¹‰æ˜¯ï¼Œåœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯&lt;code&gt;ç½‘ç«™/game/PATH&lt;/code&gt;ï¼Œå°±ä¼šè°ƒç”¨&lt;code&gt;function&lt;/code&gt;ï¼Œåå­—ä¸º&lt;code&gt;name&lt;/code&gt;ï¼Œè¿™æ˜¯åœ¨&lt;code&gt;/game/&lt;/code&gt;ç›®å½•ä¸‹çš„è°ƒç”¨ï¼Œæ‰€ä»¥è¿™ä¸ª&lt;code&gt;PATH&lt;/code&gt;æ˜¯åœ¨&lt;code&gt;/game/&lt;/code&gt;çš„åŸºç¡€ä¸Šçš„&lt;strong&gt;ç›¸å¯¹è·¯å¾„&lt;/strong&gt;ï¼Œæ‰€ä»¥ä»–çš„&lt;strong&gt;ç»å¯¹è·¯å¾„&lt;/strong&gt;æ˜¯&lt;code&gt;ç½‘ç«™/game/PATH&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.urls import path
from game.views import index

urlpatterns = [ 
    path(&amp;#34;&amp;#34;, index, name=&amp;#34;index&amp;#34;),
]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;acapp.urls&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™å…¶ä¸­ï¼Œ&lt;code&gt;path(&#39;PATH&#39;, include(&#39;game.urls&#39;))&lt;/code&gt;çš„å«ä¹‰æ˜¯ï¼šåœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯&lt;code&gt;ç½‘ç«™/PATH&lt;/code&gt;ï¼Œå°±ä¼šèµ°åˆ°&lt;code&gt;/game/urls&lt;/code&gt;ï¼Œå¹¶æ ¹æ®&lt;code&gt;/game/urls.py&lt;/code&gt;æ¥è·‘è·¯ç”±ï¼Œå°±æ˜¯è¯´ï¼Œç”¨æˆ·åœ¨è®¿é—®&lt;code&gt;ç½‘ç«™/&lt;/code&gt;çš„æ—¶å€™ï¼Œç”±äºæ­¤æ—¶è°ƒç”¨çš„å‡½æ•°æ˜¯&lt;code&gt;include(&#39;game.urls&#39;)&lt;/code&gt;ï¼Œæ‰€ä»¥è®¿é—®&lt;code&gt;ç½‘ç«™/&lt;/code&gt;ç›¸å½“äºæ ¹æ®&lt;code&gt;game/urls&lt;/code&gt;è®¿é—®&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.contrib import admin
from django.urls import path, include

urlpatterns = [ 
    path(&amp;#39;&amp;#39;, include(&amp;#39;game.urls&amp;#39;)),
    path(&amp;#39;admin/&amp;#39;, admin.site.urls),
] 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åç›´æ¥æ‰“å¼€ &lt;code&gt;ip:socket&lt;/code&gt; å¯ä»¥ç›´æ¥æ˜¾ç¤º &lt;code&gt;index&lt;/code&gt; è¿”å›çš„ç½‘é¡µ&lt;/p&gt;
&lt;h1 id=&#34;åˆ›å»ºèœå•ç•Œé¢&#34;&gt;åˆ›å»ºèœå•ç•Œé¢&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/3199626/&#34;&gt;3. åˆ›å»ºèœå•ç•Œé¢ | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/73121/&#34;&gt;3.1 ä¸Šè¯¾ç¬”è®° | å¤§å®¶å¥½ä»Šå¤©æ˜¯&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/73707/&#34;&gt;3.1 ä¸Šè¯¾ç¬”è®° | æ &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ„å»ºé¡¹ç›®æ¡†æ¶&#34;&gt;æ„å»ºé¡¹ç›®æ¡†æ¶&lt;/h2&gt;
&lt;h3 id=&#34;é¡¹ç›®ç³»ç»Ÿè®¾è®¡&#34;&gt;é¡¹ç›®ç³»ç»Ÿè®¾è®¡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;menu&lt;/code&gt;ï¼šèœå•é¡µé¢&lt;/li&gt;
&lt;li&gt;&lt;code&gt;playground&lt;/code&gt;ï¼šæ¸¸æˆç•Œé¢&lt;/li&gt;
&lt;li&gt;&lt;code&gt;settings&lt;/code&gt;ï¼šè®¾ç½®ç•Œé¢&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é¡¹ç›®æ–‡ä»¶ç»“æ„&#34;&gt;é¡¹ç›®æ–‡ä»¶ç»“æ„&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;.
|-- README.md
|-- acapp
|   |-- __init__.py    # æ–‡ä»¶å¤¹åœ¨åŠ ä¸ŠÂ __init__.pyÂ æ–‡ä»¶åï¼Œpython ä¾¿å¯ä»¥é€šè¿‡ import æ¥å¼•ç”¨è¯¥æ–‡ä»¶å¤¹
|   |-- asgi.py
|   |-- settings.py
|   |-- urls.py
|   `-- wsgi.py
|-- db.sqlite3
|-- game
|   |-- __init__.py
|   |-- admin.py
|   |-- apps.py
|   |-- migrations
|   |   `-- __init__.py
|   |-- models
|   |   `-- __init__.py
|   |-- static
|   |   |-- css
|   |   |   `-- game.css    # ä¸€èˆ¬ä¸€ä¸ªå·¥ç¨‹ï¼Œåªæœ‰ä¸€ä¸ª css æ–‡ä»¶å°±è¶³å¤Ÿäº†
|   |   |-- image
|   |   |   `-- menu
|   |   |       `-- background.gif
|   |   `-- js
|   |       |-- dist
|   |       |   `-- game.js
|   |       `-- src
|   |           `-- zbase.js    # æ€»çš„ js æ–‡ä»¶ï¼Œå‘½åä»¥ z å¼€å¤´ä¼šè‡ªåŠ¨åœ¨å­—å…¸åºæœ€å
|   |-- templates
|   |   `-- multiends
|   |       `-- web.html
|   |-- tests.py
|   |-- urls
|   |   |-- __init__.py
|   |   |-- index.py
|   |   |-- menu
|   |   |   |-- __init__.py
|   |   |   `-- index.py
|   |   |-- playground
|   |   |   |-- __init__.py
|   |   |   `-- index.py
|   |   `-- settings
|   |       |-- __init__.py
|   |       `-- index.py
|   `-- views
|       |-- __init__.py
|       |-- index.py
|       |-- menu
|       |   `-- __init__.py
|       |-- playground
|       |   `-- __init__.py
|       `-- settings
|           `-- __init__.py
|-- manage.py
`-- scripts
    `-- compress_game_js.sh
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;js-æ–‡ä»¶ç®¡ç†&#34;&gt;&lt;code&gt;js&lt;/code&gt; æ–‡ä»¶ç®¡ç†&lt;/h4&gt;
&lt;p&gt;ä¸€èˆ¬ä¸€ä¸ªå·¥ç¨‹ä¼šæœ‰å¾ˆå¤šä¸ª &lt;code&gt;.js&lt;/code&gt; æºæ–‡ä»¶ï¼Œä¸ºäº†åŠ å¿«ç½‘ç»œçš„ä¼ è¾“ï¼Œä¹Ÿä¸ºäº†æ¯æ¬¡å†™æ–°çš„ &lt;code&gt;.js&lt;/code&gt; æ–‡ä»¶ä¸ç”¨æ¯ä¸ª &lt;code&gt;html&lt;/code&gt; éƒ½é¢å¤–å¼•å…¥ä¸€æ¬¡&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ç”¨ä¸€ä¸ª &lt;code&gt;src&lt;/code&gt; æºæ–‡ä»¶å¤¹æ¥å­˜å‚¨æ‰€æœ‰çš„ &lt;code&gt;.js&lt;/code&gt; æºæ–‡ä»¶&lt;/p&gt;
&lt;p&gt;ç„¶åç”¨ &lt;code&gt;dist&lt;/code&gt; æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç”± &lt;code&gt;src&lt;/code&gt; ä¸‹æ‰€æœ‰æºæ–‡ä»¶æ•´åˆç”Ÿæˆçš„ä¸€ä¸ªç›®æ ‡ &lt;code&gt;.js&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;è¿™æ ·æ—¢å®ç°äº†å¿«é€Ÿä¼ è¾“çš„å¥½å¤„ï¼Œä¹Ÿæ–¹ä¾¿äº†åç»­ç¼–å†™ &lt;code&gt;html&lt;/code&gt; æ–‡ä»¶æ—¶ï¼Œå¼•å…¥ &lt;code&gt;.js&lt;/code&gt; çš„ä¾¿åˆ©&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªè„šæœ¬å®ç°ä¸Šè¿° &lt;strong&gt;æ•´åˆ&lt;/strong&gt; çš„åŠŸèƒ½
&lt;code&gt;~/acapp/scripts/compress_game_js.sh&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#! /bin/bash

JS_PATH=/home/acs/acapp/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find $JS_PATH_SRC -type f -name &amp;#39;*.js&amp;#39; | sort | xargs cat &amp;gt; ${JS_PATH_DIST}game.js
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;html-æ–‡ä»¶ç®¡ç†&#34;&gt;&lt;code&gt;html&lt;/code&gt; æ–‡ä»¶ç®¡ç†&lt;/h4&gt;
&lt;p&gt;åœ¨ &lt;code&gt;templates&lt;/code&gt; æ–‡ä»¶å¤¹ä¸‹åˆ›å»º &lt;code&gt;menu&lt;/code&gt;ã€&lt;code&gt;playground&lt;/code&gt;ã€&lt;code&gt;settings&lt;/code&gt;ã€&lt;code&gt;multiends&lt;/code&gt; å››ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨ä¸‰ä¸ªæ¨¡å—å’Œç»ˆç«¯çš„ &lt;code&gt;html&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;code&gt;multiends&lt;/code&gt; ä¸‹åˆ›å»º &lt;code&gt;web.html&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{% load static %}
&amp;lt;!-- Django ä¸­å¼•å…¥å…¨å±€settingé‡Œçš„å˜é‡ static çš„è¯­æ³•--&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;https://cdn.acwing.com/static/jquery-ui-dist/jquery-ui.min.css&amp;#34;&amp;gt;
    &amp;lt;script src=&amp;#34;https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
    &amp;lt;!-- ä¸Šè¿°ä¸¤å¥å¼•å…¥ jQuery åº“ --&amp;gt;
    &amp;lt;!-- ä½¿ç”¨å¼•å…¥çš„å˜é‡ static çš„è¯­æ³•å¦‚ä¸‹ --&amp;gt;
    &amp;lt;link rel=&amp;#34;stylesheet&amp;#34; href=&amp;#34;{% static &amp;#39;css/game.css&amp;#39; %}&amp;#34;&amp;gt;
    &amp;lt;script src=&amp;#34;{% static &amp;#39;js/dist/game.js&amp;#39; %}&amp;#34;&amp;gt;&amp;lt;/script&amp;gt;
    &amp;lt;!-- åˆ†åˆ«å¼•å…¥ css æ–‡ä»¶å’Œæ€»çš„ js æ–‡ä»¶ --&amp;gt;
&amp;lt;/head&amp;gt;

&amp;lt;body style=&amp;#34;margin: 0&amp;#34;&amp;gt;
    &amp;lt;div id=&amp;#34;ac_game_12345678&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;
    &amp;lt;script&amp;gt;
        $(document).ready(function(){
            let ac_game = new AcGame(&amp;#34;ac_game_12345678&amp;#34;)
        })
    &amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;views-è§†å›¾ç®¡ç†&#34;&gt;&lt;code&gt;views&lt;/code&gt; è§†å›¾ç®¡ç†&lt;/h4&gt;
&lt;p&gt;åœ¨ &lt;code&gt;views&lt;/code&gt; æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸‰ä¸ªæ¨¡å—çš„è§†å›¾æ–‡ä»¶å¤¹&lt;/p&gt;
&lt;p&gt;å†™ä¸€ä¸ª &lt;code&gt;index.py&lt;/code&gt; æ–‡ä»¶ï¼Œç›®çš„æ˜¯åœ¨ &lt;code&gt;web&lt;/code&gt; ç«¯è¢«è®¿é—®æ—¶ï¼Œè¿”å›ä¸Šé¢å†™çš„ &lt;code&gt;web.html&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.shortcuts import render

def index(request):
  return render(request, &amp;#34;multiends/web.html&amp;#34;)
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;urls-è·¯ç”±ç®¡ç†&#34;&gt;&lt;code&gt;urls&lt;/code&gt; è·¯ç”±ç®¡ç†&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;                                     /-- &amp;#34;&amp;#34; -- index
                                    / -- &amp;#34;menu/&amp;#34; -- menu.index
             / &amp;#34;&amp;#34; --&amp;gt; &amp;#34;game.url&amp;#34; --&amp;gt; 
            /                       \ -- &amp;#34;playground/&amp;#34; -- playground.index
id:scoket -&amp;gt;                         \-- &amp;#34;settings/&amp;#34; -- settings.index
            \
             \ &amp;#34;/admin&amp;#34; -- åˆ°è¾¾ç®¡ç†å‘˜é¡µé¢
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;~/acapp/acapp/urls.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.contrib import admin
from django.urls import path, include

urlpatterns = [
  path(&amp;#39;&amp;#39;, include(&amp;#39;game.urls.index&amp;#39;)),
  path(&amp;#39;admin/&amp;#39;, admin.site.urls),
]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;~/acapp/game/urls/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.urls import path, include
from game.views.index import index

urlpatterns = [ 
    path(&amp;#34;&amp;#34;, index, name=&amp;#34;index&amp;#34;),
    path(&amp;#34;menu/&amp;#34;, include(&amp;#34;game.urls.menu.index&amp;#34;)),
    path(&amp;#34;playground/&amp;#34;, include(&amp;#34;game.urls.playground.index&amp;#34;)),
    path(&amp;#34;settings/&amp;#34;, include(&amp;#34;game.urls.settings.index&amp;#34;))
]
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;ç½‘é¡µæ¸²æŸ“æµç¨‹&#34;&gt;ç½‘é¡µæ¸²æŸ“æµç¨‹&lt;/h4&gt;
&lt;p&gt;æ ¹æ®ç”¨æˆ·çš„é“¾æ¥ï¼Œé¦–å…ˆè¿›å…¥&lt;code&gt;acapp/urls.py&lt;/code&gt;ï¼Œæ ¹æ®&lt;code&gt;path&lt;/code&gt;å†è¿›å…¥&lt;code&gt;game/urls/index.py&lt;/code&gt;ï¼Œå†æ ¹æ®&lt;code&gt;path&lt;/code&gt;è¿›å…¥ä¸‹ä¸€å±‚&lt;code&gt;url&lt;/code&gt;æˆ–è°ƒç”¨ç›¸å¯¹åº”çš„&lt;code&gt;views&lt;/code&gt;ä¸­çš„&lt;code&gt;index.py&lt;/code&gt;å‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶å‚æ•°ï¼Œåœ¨ç½‘é¡µç«¯æ¸²æŸ“&lt;code&gt;templates/multiends&lt;/code&gt;ä¸‹çš„&lt;code&gt;web.html&lt;/code&gt;ï¼Œ&lt;code&gt;html&lt;/code&gt;ä¸­æœ‰&lt;code&gt;JS&lt;/code&gt;æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šæœ¬é¡¹ç›®ä¸ºå‰åç«¯åˆ†ç¦»ï¼Œå³é€šè¿‡&lt;code&gt;JS&lt;/code&gt;åœ¨&lt;code&gt;client&lt;/code&gt;ä¸­æ¸²æŸ“é¡¹ç›®(åŠ¨æ€ç”Ÿæˆé¡µé¢)ï¼Œè€Œä¸æ˜¯åœ¨&lt;code&gt;server&lt;/code&gt;æ¸²æŸ“é¡¹ç›®&lt;/p&gt;
&lt;h3 id=&#34;ä¿®æ”¹å…¨å±€é…ç½®&#34;&gt;ä¿®æ”¹å…¨å±€é…ç½®&lt;/h3&gt;
&lt;h4 id=&#34;è®¾ç½®æ—¶åŒº&#34;&gt;è®¾ç½®æ—¶åŒº&lt;/h4&gt;
&lt;p&gt;ä¿®æ”¹é¡¹ç›®çš„ &lt;strong&gt;UTC&lt;/strong&gt; æ—¶é—´ä¸º &lt;strong&gt;CN&lt;/strong&gt; æ—¶é—´&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ vim /acapp/settings.py

******
TIME_ZONE = &amp;#39;Asia/Shanghai&amp;#39; # åŸæ¥é»˜è®¤æ˜¯ UTC
******
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;æ·»åŠ é…ç½®æ–‡ä»¶&#34;&gt;æ·»åŠ é…ç½®æ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;å°†æ–°åˆ›å»ºçš„ &lt;code&gt;game&lt;/code&gt; ä¸‹çš„ &lt;code&gt;apps.py&lt;/code&gt; ä¸­çš„ &lt;code&gt;GameConfig&lt;/code&gt; åŠ åˆ° &lt;code&gt;settings.py&lt;/code&gt; ä¸‹&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ vim /acapp/settings.py

******
INSTALLED_APPS = [
  &amp;#39;game.apps.GameConfig&amp;#39;,
  ......
]
******
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å£°æ˜å°†é™æ€æ–‡ä»¶è·¯å¾„ &lt;code&gt;STATIC_ROOT&lt;/code&gt; å’Œ &lt;code&gt;MEDIA_ROOT&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ vim /acapp/settings.py

******
import os

......

STATIC_ROOT = os.path.join(BASE_DIR, &amp;#39;static&amp;#39;)
STATIC_URL = &amp;#39;/static/&amp;#39;

MEDIA_ROOT = os.path.join(BASE_DIR, &amp;#39;media&amp;#39;)
MEDIA_URL = &amp;#39;/media/&amp;#39;
******
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;åˆ›å»ºèœå•-menu-ç•Œé¢&#34;&gt;åˆ›å»ºèœå• &lt;code&gt;menu&lt;/code&gt; ç•Œé¢&lt;/h2&gt;
&lt;h3 id=&#34;æ­å»ºèœå•-menu-ç•Œé¢çš„æ¡†æ¶&#34;&gt;æ­å»ºèœå• &lt;code&gt;menu&lt;/code&gt; ç•Œé¢çš„æ¡†æ¶&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬é‡‡ç”¨çš„ &lt;strong&gt;å‰åç«¯åˆ†ç¦»å¼&lt;/strong&gt; å¼€å‘ï¼Œæ‰€æœ‰çš„ &lt;strong&gt;html&lt;/strong&gt; æ¸²æŸ“éƒ½è¦æ±‚åœ¨å‰ç«¯å®Œæˆ&lt;/p&gt;
&lt;p&gt;å¼€å‘æµç¨‹å°±æ˜¯ï¼Œå…ˆåœ¨ &lt;strong&gt;html&lt;/strong&gt; é‡Œåˆ›å»ºå¥½ä¸€ä¸ªæœ‰ &lt;strong&gt;id&lt;/strong&gt; çš„ &lt;strong&gt;div&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååˆ©ç”¨ &lt;strong&gt;js&lt;/strong&gt; æ–‡ä»¶ï¼Œæ•è·åˆ°è¯¥ &lt;strong&gt;div&lt;/strong&gt;ï¼Œå¹¶è¿›è¡Œ &lt;strong&gt;æ¸²æŸ“&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/templates/multiends/web.html&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
    &amp;lt;div id=&amp;#34;ac_game_12345678&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;
    &amp;lt;script&amp;gt;
        $(document).ready(function(){
            let ac_game = new AcGame(&amp;#34;ac_game_12345678&amp;#34;)
        })
    &amp;lt;/script&amp;gt;
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;js/src/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGame {
    constructor(id) {
        this.id = id; 
        this.$ac_game = $(&amp;#39;#&amp;#39; + id);
        this.menu = new AcGameMenu(this);
    }   
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;js/src/menu/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGameMenu {
    constructor(root) {
        this.root = root;
        this.$menu = $(` 
&amp;lt;div class=&amp;#34;ac-game-menu&amp;#34;&amp;gt;
&amp;lt;/div&amp;gt;
`);
        this.root.$ac_game.append(this.$menu); 
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;css/game.css&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;.ac-game-menu {
    width: 100%;
    height: 100%;
    background-image: url(&amp;#39;/static/image/menu/background.gif&amp;#39;);
    background-size: 100% 100%;
    user-select: none;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;strong&gt;ä»£ç é€»è¾‘&lt;/strong&gt; å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;html&lt;/code&gt; é¡µé¢æ‰§è¡Œåˆ° &lt;code&gt;js&lt;/code&gt; ä»£ç ï¼Œåˆ©ç”¨ &lt;code&gt;AcGameç±»&lt;/code&gt; åˆ›å»ºå¯¹è±¡ &lt;code&gt;ac_game&lt;/code&gt; åŒæ—¶ä¼ é€’å‚æ•° &lt;code&gt;div&lt;/code&gt; çš„ &lt;code&gt;id&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AcGame&lt;/code&gt; å¼€å§‹æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ•è· &lt;code&gt;html&lt;/code&gt; æ ‡ç­¾ï¼Œå¹¶åˆ©ç”¨ &lt;code&gt;AcGameMenuç±»&lt;/code&gt; åˆ›å»ºå¯¹è±¡ &lt;code&gt;menu&lt;/code&gt;ï¼Œå¹¶å°†æ•´ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ä¸‹ä¼ &lt;/li&gt;
&lt;li&gt;&lt;code&gt;AcGameMenu&lt;/code&gt; å¼€å§‹æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œç„¶ååˆ›å»º &lt;code&gt;html&lt;/code&gt; ä»£ç ï¼ŒåŠ åˆ°æ•è·åˆ°çš„ &lt;code&gt;html&lt;/code&gt; ä»£ç ä¸‹&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆæˆåŠŸæ¸²æŸ“å‡ºèƒŒæ™¯å›¾ç‰‡&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è®¾ç½®èœå•-menu-é¡µé¢çš„å†…å®¹&#34;&gt;è®¾ç½®èœå• &lt;code&gt;menu&lt;/code&gt; é¡µé¢çš„å†…å®¹&lt;/h3&gt;
&lt;p&gt;ä¸»è¦å†…å®¹å°±æ˜¯åœ¨ä¸»é¡µé¢ä¸­ï¼Œæ˜¾ç¤ºï¼šå•äººæ¨¡å¼ã€å¤šäººæ¨¡å¼ã€è®¾ç½®ï¼Œä¸‰ä¸ªæŒ‰é’®çš„é€‰é¡¹
&lt;code&gt;js/src/menu/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGameMenu {
    constructor(root) {
        this.root = root;
        this.$menu = $(`
&amp;lt;div class=&amp;#34;ac-game-menu&amp;#34;&amp;gt;
    &amp;lt;div class=&amp;#34;ac-game-menu-field&amp;#34;&amp;gt;
        &amp;lt;div class=&amp;#34;ac-game-menu-field-item ac-game-menu-field-item-single-mode&amp;#34;&amp;gt;
            å•äººæ¨¡å¼
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&amp;#34;ac-game-menu-field-item ac-game-menu-field-item-multi-mode&amp;#34;&amp;gt;
            å¤šäººæ¨¡å¼
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&amp;#34;ac-game-menu-field-item ac-game-menu-field-item-settings-mode&amp;#34;&amp;gt;
            è®¾ç½®
        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
`);
        this.root.$ac_game.append(this.$menu);
        this.$single_mode = this.$menu.find(&amp;#39;.ac-game-menu-field-item-single-mode&amp;#39;);
        this.$multi_mode = this.$menu.find(&amp;#39;.ac-game-menu-field-item-multi-mode&amp;#39;);
        this.$settings_mode = this.$menu.find(&amp;#39;.ac-game-menu-field-item-settings-mode&amp;#39;);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;css/game.css&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;.ac-game-menu {
    width: 100%;
    height: 100%;
    background-image: url(&amp;#39;/static/image/menu/background.gif&amp;#39;);
    background-size: 100% 100%;
    user-select: none;
}
.ac-game-menu-field {
    width: 20vw;
    position: relative;
    top: 40vh;
    left: 19vh;
}
.ac-game-menu-field-item {
    height: 7vh;
    width: 18vw;
    color: white;
    font-size: 6vh;
    font-style: italic;
    padding: 2vh;
    margin: 1vh 0;
    cursor: pointer;
    text-align: center;
    background-color: rgba(39, 21, 28, 0.6);
    border-radius: 10px;
    letter-spacing: 0.5vw;
}
.ac-game-menu-field-item:hover {
    transform: scale(1.2);
    transition: 100ms;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ·»åŠ -å•äººæ¨¡å¼-ç›‘å¬å‡½æ•°--æ‰“å¼€æ¸¸æˆç•Œé¢-åŠŸèƒ½&#34;&gt;æ·»åŠ  &amp;lsquo;å•äººæ¨¡å¼&amp;rsquo; ç›‘å¬å‡½æ•° â€”â€” æ‰“å¼€æ¸¸æˆç•Œé¢ åŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œè¦å®ç°çš„ &lt;strong&gt;é€»è¾‘&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç‚¹å‡» &amp;lsquo;å•äººæ¨¡å¼&amp;rsquo; æŒ‰é’®è§¦å‘ &lt;code&gt;click&lt;/code&gt; äº‹ä»¶ï¼Œéšå³è§¦å‘ç›‘å¬å‡½æ•°ï¼Œå¼€å§‹æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;å…³é—­ &lt;code&gt;menu&lt;/code&gt; é¡µé¢&lt;/li&gt;
&lt;li&gt;æ‰“å¼€ &lt;code&gt;playground&lt;/code&gt; é¡µé¢&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬å…ˆç®€æ˜“çš„å®ç°ä¸€ä¸ª &lt;code&gt;playground&lt;/code&gt; é¡µé¢ï¼Œæ–¹ä¾¿è°ƒè¯•è¯¥åŠŸèƒ½
&lt;code&gt;js/src/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    constructor(root) {
        this.root = root;
        this.$playground = $(`&amp;lt;div&amp;gt;æ¸¸æˆç•Œé¢&amp;lt;/div&amp;gt;`);

        this.hide();
        this.root.$ac_game.append(this.$playground);

        this.start();
    }
    start() {

    }
    show() {    //æ‰“å¼€ playground ç•Œé¢
        this.$playground.show();
    }
    hide() {    //å…³é—­ playground ç•Œé¢
        this.$playground.hide();
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨å®ç°ç›‘å¬å‡½æ•°åŠŸèƒ½ä¹‹å‰ï¼Œå…ˆåœ¨ &lt;code&gt;/src/zbase.js&lt;/code&gt; å³ä¸» &lt;code&gt;js&lt;/code&gt; æ–‡ä»¶ä¸‹ï¼Œåˆ©ç”¨ &lt;code&gt;AcGamePlayground&lt;/code&gt; ç±»åˆ›å»ºå¥½ &lt;code&gt;playground&lt;/code&gt; å¯¹è±¡&lt;/p&gt;
&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨å‰ç«¯ï¼Œæ¸²æŸ“å‡ºä¸¤ä¸ªç•Œé¢äº†ï¼Œåˆ†åˆ«æ˜¯ï¼š&lt;code&gt;menu&lt;/code&gt; å’Œ &lt;code&gt;playground&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGame {
    constructor(id) {
        this.id = id;
        this.$ac_game = $(&amp;#39;#&amp;#39; + id);
        this.menu = new AcGameMenu(this);
        // æŠŠ playground å¯¹è±¡ä¹Ÿå»ºå¥½ï¼Œè¿™æ ·æˆ‘ä»¬å°±åŒæ—¶æœ‰ä¸¤ä¸ªç•Œé¢äº†
        this.playground = new AcGamePlayground(this);

        this.start();
    }                    
    start() {

    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å¼€å§‹å®ç° &lt;code&gt;ac-game-menu-field-item-single-mode&lt;/code&gt; æ ‡ç­¾çš„ &lt;code&gt;click&lt;/code&gt; äº‹ä»¶çš„ç›‘å¬å‡½æ•°&lt;/p&gt;
&lt;p&gt;å…¶åŠŸèƒ½ä¹‹å‰è®²è¿‡äº†ï¼Œå°±æ˜¯å…³é—­ &lt;code&gt;menu&lt;/code&gt; é¡µé¢ï¼Œæ‰“å¼€ &lt;code&gt;playground&lt;/code&gt; é¡µé¢&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/menu/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGameMenu {
    constructor(root) {
        this.root = root;
        this.$menu = $(`
&amp;lt;div class=&amp;#34;ac-game-menu&amp;#34;&amp;gt;
    &amp;lt;div class=&amp;#34;ac-game-menu-field&amp;#34;&amp;gt;
        &amp;lt;div class=&amp;#34;ac-game-menu-field-item ac-game-menu-field-item-single-mode&amp;#34;&amp;gt;
            å•äººæ¨¡å¼
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&amp;#34;ac-game-menu-field-item ac-game-menu-field-item-multi-mode&amp;#34;&amp;gt;
            å¤šäººæ¨¡å¼
        &amp;lt;/div&amp;gt;
        &amp;lt;div class=&amp;#34;ac-game-menu-field-item ac-game-menu-field-item-settings-mode&amp;#34;&amp;gt;
            è®¾ç½®
        &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
`);
        this.root.$ac_game.append(this.$menu);
        this.$single_mode = this.$menu.find(&amp;#39;.ac-game-menu-field-item-single-mode&amp;#39;);
        this.$multi_mode = this.$menu.find(&amp;#39;.ac-game-menu-field-item-multi-mode&amp;#39;);
        this.$settings_mode = this.$menu.find(&amp;#39;.ac-game-menu-field-item-settings-mode&amp;#39;);

        this.start();
    }
    start() {
        this.add_listening_events();
    }
    add_listening_events() {
        let outer = this;
        this.$single_mode.click(function(){
            outer.hide();   // å…³é—­ä¸»é¡µé¢
            outer.root.playground.show();   // æ‰“å¼€æ¸¸æˆç•Œé¢
        });
    }

    show() {    //æ˜¾ç¤ºmenuç•Œé¢
        this.$menu.show();
    }
    hide() {    //éšè—menuç•Œé¢
        this.$menu.hide();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;åˆ›å»ºæ¸¸æˆç•Œé¢&#34;&gt;åˆ›å»ºæ¸¸æˆç•Œé¢&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/79181/&#34;&gt;4.1 ä¸Šè¯¾ç¬”è®° | Andrew1729&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è‹¥ä¿®æ”¹&lt;code&gt;staticæ–‡ä»¶å¤¹&lt;/code&gt;ä¸‹çš„ç›¸å…³æ–‡ä»¶ï¼Œéœ€åœ¨&lt;code&gt;~/acapp&lt;/code&gt;ä¸‹æ‰§è¡Œ&lt;code&gt;./scripts/compress_game_js.sh&lt;/code&gt;æ¥æ‰“åŒ…æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å‰ç«¯çš„æ¨¡å—åŒ–å¼•å…¥&#34;&gt;å‰ç«¯çš„æ¨¡å—åŒ–å¼•å…¥&lt;/h2&gt;
&lt;p&gt;ç”±äºåœ¨ &lt;code&gt;html&lt;/code&gt; ä»£ç éƒ¨åˆ†ï¼Œæ˜¯å°†æ•´ä¸ª &lt;code&gt;game.js&lt;/code&gt; æ–‡ä»¶å¼•å…¥&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¼šå¯¼è‡´åœ¨ &lt;code&gt;game.js&lt;/code&gt; ä¸­å®šä¹‰çš„å˜é‡ï¼Œä¼šå˜æˆæ•´ä¸ªç½‘é¡µçš„ &lt;strong&gt;å…¨å±€å˜é‡&lt;/strong&gt;ï¼ˆä¹‹åå¯èƒ½ä¼šå¼•èµ·å˜é‡é‡åçš„è¯¸å¤šé—®é¢˜ï¼‰&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ &lt;strong&gt;æ¨¡å—åŒ–å¼•å…¥&lt;/strong&gt; çš„åŠŸèƒ½ï¼Œè®©ç½‘é¡µåªå¼•å…¥åœ¨ &lt;code&gt;html&lt;/code&gt; ä¸­éœ€è¦çš„éƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ &lt;code&gt;web.html&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;!-- é¦–å…ˆï¼Œå…ˆåˆ æ‰ä¸Šé¢æ•´ä¸ªå¼•å…¥ game.js çš„éƒ¨åˆ† --&amp;gt;
&amp;lt;!-- ç„¶åï¼Œä¸‹æ–¹åˆ›å»ºå¯¹è±¡çš„éƒ¨åˆ†ï¼Œå…ˆä½¿ç”¨æ¨¡å—åŒ–å¼•å…¥ --&amp;gt;
......
    &amp;lt;script type=&amp;#34;module&amp;#34;&amp;gt;
        import {AcGame} from &amp;#34;{% static &amp;#39;js/dist/game.js&amp;#39; %}&amp;#34;
        $(document).ready(function(){
            let ac_game = new AcGame(&amp;#34;ac_game_12345678&amp;#34;)
        })
    &amp;lt;/script&amp;gt;
......
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ­¤å¤–ï¼Œè¿˜æœ‰ä¿®æ”¹å¼•å…¥çš„ç±»ï¼Œåœ¨å‰é¢åŠ ä¸Š &lt;code&gt;export&lt;/code&gt;ï¼Œå¦‚ä¸‹ä¿®æ”¹ &lt;code&gt;js/src/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;export class AcGame {
    ......
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·ï¼Œåœ¨å…¨å±€ä¸­ï¼Œåªä¼šå‡ºç°å¼•å…¥çš„æ¨¡å—ï¼Œå…¶ä»–çš„ &lt;code&gt;.js&lt;/code&gt; ä»£ç ä¸ä¼šå‡ºç°åœ¨å…¨å±€ä¸­&lt;/p&gt;
&lt;h2 id=&#34;æ„å»ºæ¸¸æˆç•Œé¢æ¡†æ¶&#34;&gt;æ„å»ºæ¸¸æˆç•Œé¢æ¡†æ¶&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;static/js/src/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;......
    this.$playground = $(`&amp;lt;div class=&amp;#34;ac-game-playground&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;`);
......
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;game.css&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;......
.ac-game-playground {
    height: 100%;
    width: 100%;
    user-select: none;  // ç¦ç”¨å³é”®å¼¹èœå•
} 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å®ç°æ¸¸æˆå¼•æ“æ¡†æ¶&#34;&gt;å®ç°æ¸¸æˆå¼•æ“æ¡†æ¶&lt;/h2&gt;
&lt;p&gt;æ¸¸æˆä¸­ï¼Œç‰©ä½“åœ¨ç§»åŠ¨ï¼Œå…¶å®ç°åŸç†æ˜¯ï¼šæ¯ä¸€ä¸ªåŠ¨ä½œéƒ½ä¼šæ¸²æŸ“å¤šå¼ å›¾ç‰‡å‡ºæ¥ï¼Œç„¶åå›¾ç‰‡å¿«é€Ÿçš„åˆ‡æ¢ï¼Œä»è€Œå®ç°åŠ¨çš„è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œéœ€è¦å…ˆå®ç°ä¸€ä¸ªæ¸¸æˆå¼•æ“çš„åŸºç±» &lt;code&gt;AcGameObject&lt;/code&gt; ï¼Œä½¿å¾—æ¯å¸§èƒ½æ¸²æŸ“ä¸€å¼ å›¾ç‰‡å‡ºæ¥&lt;/p&gt;
&lt;p&gt;è¯¥åŸºç±»éœ€è¦å…·å¤‡çš„åŠŸèƒ½æœ‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;start()&lt;/code&gt; åœ¨æ¸¸æˆå¼€å§‹çš„ç¬¬ä¸€å¸§æ—¶éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä¸€èˆ¬æ˜¯åˆ›å»ºå¯¹è±¡ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;update()&lt;/code&gt; åœ¨æ¸¸æˆå¼€å§‹åçš„æ¯ä¸€å¸§å‡ä¼šæ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä¸€èˆ¬æ˜¯æ¸²æŸ“å½“å‰å¯¹è±¡çš„å„ç§çŠ¶æ€ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;on_destroy()&lt;/code&gt; åˆ æ‰è¯¥ç‰©ä½“å‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä¸€èˆ¬æ˜¯åˆ æ‰åŠ¨ç”»ï¼Œæˆ–è€…ç»™å¯¹æ‰‹åŠ åˆ†ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;destroy()&lt;/code&gt; åˆ æ‰è¯¥ç‰©ä½“&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ ¹æ®ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºæœ¬æ­å»ºå‡ºæ¥ä¸€ä¸ªæ¸¸æˆå¼•æ“çš„åŸºç±»äº†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
&lt;code&gt;/static/js/playground/ac_game_object/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; AC_GAME_OBJECTS = [];   &lt;span style=&#34;color:#007f7f&#34;&gt;// ç”¨äºè®°å½•å½“å‰ç”»å¸ƒä¸­ï¼Œéœ€è¦æ¸²æŸ“çš„å¯¹è±¡æœ‰å“ªäº›
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        AC_GAME_OBJECTS.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);  &lt;span style=&#34;color:#007f7f&#34;&gt;// å°†å½“å‰æ–°å»ºçš„å¯¹è±¡ï¼ŒåŠ å…¥åˆ°å…¨å±€çš„ç”»å¸ƒä¸­å»ï¼Œå‚ä¸æ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.has_called_start = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ˜¯å¦æ‰§è¡Œè¿‡ start å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;             &lt;span style=&#34;color:#007f7f&#34;&gt;// å½“å‰å¸§è·ç¦»ä¸Šä¸€å¸§çš„æ—¶é—´é—´éš”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// è¯¥æ•°æ®è®°å½•æ˜¯ä¸ºäº†åç»­è®¡ç®—é€Ÿåº¦ç­‰å‚æ•°çš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {   &lt;span style=&#34;color:#007f7f&#34;&gt;// åªä¼šåœ¨ç¬¬ä¸€å¸§æ‰§è¡Œä¸€æ¬¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ¯ä¸€å¸§å‡ä¼šæ‰§è¡Œä¸€æ¬¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    on_destroy() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// åœ¨è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    destroy() { &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆ æ‰è¯¥ç‰©ä½“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.on_destroy();  &lt;span style=&#34;color:#007f7f&#34;&gt;//åˆ æ‰è¯¥ç‰©ä½“å‰ï¼Œæ‰§è¡Œåˆ å‰çš„æ“ä½œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// åœ¨å…¨å±€æ¸²æŸ“ç‰©ä½“ä¸­ï¼Œæ‰¾åˆ°è¯¥ç‰©ä½“ï¼Œå¹¶å°†å…¶åˆ æ‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; AC_GAME_OBJECTS.length; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (AC_GAME_OBJECTS[i] === &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;) {  &lt;span style=&#34;color:#007f7f&#34;&gt;// ä¸‰ç­‰å·ï¼Œåœ¨jsé‡Œé¢å¤–åŠ äº†ä¸€å±‚ç±»å‹ç›¸ç­‰çº¦æŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;                AC_GAME_OBJECTS.splice(i, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; last_timestamp;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; AC_GAME_ANIMATION = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(timestamp) {  &lt;span style=&#34;color:#007f7f&#34;&gt;// å›è°ƒå‡½æ•°ï¼Œå®ç°ï¼šæ¯ä¸€å¸§é‡ç»˜æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€é
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; AC_GAME_OBJECTS.length; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; obj = AC_GAME_OBJECTS[i];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (!obj.has_called_start) { &lt;span style=&#34;color:#007f7f&#34;&gt;// å¦‚æœè¿˜æœªæ‰§è¡Œåˆå§‹å¸§åŠ¨ä½œï¼Œå°±å…ˆæ‰§è¡Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            obj.start();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            obj.has_called_start = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰§è¡Œè¿‡åˆå§‹å¸§ï¼Œå°±æ‰§è¡Œæ¯ä¸€å¸§çš„ä»»åŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            obj.timedelta = timestamp - last_timestamp;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            obj.update();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    last_timestamp = timestamp; &lt;span style=&#34;color:#007f7f&#34;&gt;// æ›´æ–°æœ€åä¸€æ¬¡æ—¶é—´æˆ³
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    requestAnimationFrame(AC_GAME_ANIMATION);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;requestAnimationFrame(AC_GAME_ANIMATION);   &lt;span style=&#34;color:#007f7f&#34;&gt;// JSçš„APIï¼Œå¯ä»¥è°ƒç”¨1å¸§é‡Œé¢çš„å‡½æ•°ã€‚(æœ‰äº›æµè§ˆå™¨çš„ä¸€ç§’å¸§æ•°ä¸ä¸€å®šç›¸ç­‰)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ¥ä¸‹æ¥æ‰€æœ‰çš„ä¸€åˆ‡æ¸¸æˆï¼Œéƒ½æ˜¯åŸºäºè¿™ä¸ªå¼•æ“çš„åŸºç±»å®Œæˆçš„&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å®ç°æ¸¸æˆåœ°å›¾åŠŸèƒ½&#34;&gt;å®ç°æ¸¸æˆåœ°å›¾åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;ç›®æ ‡ï¼šå®ç°ä¸€ä¸ªæ¯ä¸€ç§’éƒ½åœ¨æ¸²æŸ“çš„çº¯é»‘èƒŒæ™¯&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç°é˜¶æ®µè¦å®ç°çš„åœ°å›¾è¾ƒä¸ºç®€å•ï¼Œä½†ä¸ºäº†åæœŸçš„æ‹“å±•æ€§ï¼Œæ•…è¿˜æ˜¯è€ƒè™‘æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ¥å®Œæˆ&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨ &lt;code&gt;js&lt;/code&gt; ä¸­ï¼Œå·²ç»å°è£…å¥½äº†ä¸€ä¸ª &lt;code&gt;canvas&lt;/code&gt; çš„ &lt;code&gt;api&lt;/code&gt; æ¥å¸®åŠ©å®ç°èƒŒæ™¯ç”»å¸ƒï¼Œç›´æ¥è°ƒç”¨å³å¯&lt;/p&gt;
&lt;p&gt;å…ˆé“ºå¼€ç”»å¸ƒï¼Œç„¶åè®¾ç½®ä¸ºé»‘è‰²&lt;/p&gt;
&lt;p&gt;&lt;code&gt;static/js/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGamePlayground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ......
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// $(&amp;#39;.playground&amp;#39;)å¯¹è±¡å·²ç»åœ¨ css æ–‡ä»¶é‡Œæ¸²æŸ“å‡ºé«˜å®½äº†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// ç°åœ¨æŠŠä»–çš„é«˜å®½å­˜ä¸‹æ¥ï¼Œå¾€ä¸‹ä¼ é€’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.width();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.height();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.game_map = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; GameMap(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ......
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .....
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;static/js/playground/game-map/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; GameMap &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {    &lt;span style=&#34;color:#007f7f&#34;&gt;// ç»§æ‰¿è‡ªæ¸¸æˆå¼•æ“åŸºç±»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    constructor(playground) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;super&lt;/span&gt;();    &lt;span style=&#34;color:#007f7f&#34;&gt;// è‡ªå‡½æ•°åŠŸèƒ½ï¼šè°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground = playground;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$canvas = $(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;`&amp;lt;canvas&amp;gt;&amp;lt;/canvas&amp;gt;`&lt;/span&gt;); &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆ›å»ºä¸€ä¸ªcanvasçš„jQueryå¯¹è±¡ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å®ç°çš„ç”»å¸ƒ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$canvas[&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;].getContext(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;2d&amp;#39;&lt;/span&gt;); &lt;span style=&#34;color:#007f7f&#34;&gt;// jQueryå¯¹è±¡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯htmlå¯¹è±¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// è®¾ç½®ç”»å¸ƒçš„å®½é«˜
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.width = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.height = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.$playground.append(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$canvas);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ¸¸æˆåœ°å›¾æ¯å¸§éƒ½è¦æ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;rgba(0, 0, 0, 0.2)&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillRect(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.width, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.height);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å®ç°ç©å®¶æ˜¾ç¤ºåŠŸèƒ½&#34;&gt;å®ç°ç©å®¶æ˜¾ç¤ºåŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;æ¯›å¯ç‰ˆç©å®¶æ˜¾ç¤ºï¼Œæ¯ä¸ªç©å®¶å®šä¹‰æˆä¸€ä¸ªåœ†ï¼Œç„¶åæ¸²æŸ“åœ¨å‰ç«¯&lt;/p&gt;
&lt;p&gt;éœ€è¦å¯¹äºç©å®¶ç±»å®šä¹‰å¤šä¸ªå‚æ•°ï¼Œä»¥æ–¹ä¾¿æ—¥åæ‹“å±•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;x&lt;/code&gt; å½“å‰ä½ç½®çš„æ¨ªåæ ‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;y&lt;/code&gt; å½“å‰ä½ç½®çš„çºµåæ ‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;radius&lt;/code&gt; å½“å‰çš„åŠå¾„&lt;/li&gt;
&lt;li&gt;&lt;code&gt;speed&lt;/code&gt; å½“å‰çš„é€Ÿåº¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;is_me&lt;/code&gt; è¯¥å¯¹è±¡æ˜¯å¦æ˜¯å½“å‰ç©å®¶æ“æ§çš„å¯¹è±¡ï¼ˆä¸€æ˜¯åŒºåˆ«äº botï¼ŒäºŒæ˜¯åŒºåˆ«äº æ—¥åè”æœºçš„å…¶ä»–ç©å®¶ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;static/js/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGamePlayground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ......
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players = [];  &lt;span style=&#34;color:#007f7f&#34;&gt;// å­˜æ”¾å½“å‰æ¸¸æˆä¸­çš„æ‰€æœ‰ç©å®¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// å°†ç©å®¶åŠ å…¥æ¸¸æˆä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;white&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;true&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ......
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    .....
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;static/js/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Player &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(playground, x, y, radius, color, speed, is_me) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;super&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// æŠŠä¿¡æ¯éƒ½å­˜ä¸‹æ¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground = playground;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.ctx;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x = x;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y = y;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color = color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed = speed;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius = radius;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me = is_me;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// ç”¨äºæµ®ç‚¹æ•°è¿ç®—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ¸²æŸ“ä¸€ä¸ªåœ†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fill();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    on_destroy() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å®ç°ç©å®¶ç§»åŠ¨åŠŸèƒ½&#34;&gt;å®ç°ç©å®¶ç§»åŠ¨åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;ç§»åŠ¨çš„å®ç°é€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯è®©æ¯å¸§æ¸²æŸ“çš„åœ†çš„ä½ç½®å‘ç”Ÿç§»åŠ¨å³å¯&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°ç®€å•é€»è¾‘çš„å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Player &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(....)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x += x;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y += y;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå‘é¼ æ ‡ç‚¹å‡»ä½ç½®ç§»åŠ¨çš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;è¿™å°±éœ€è¦è®¾ç½®ä¸€ä¸ª &lt;code&gt;click&lt;/code&gt; äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œåˆ†åˆ«ä¼ é€’ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¼ æ ‡ç‚¹å‡»äº‹ä»¶&lt;/li&gt;
&lt;li&gt;é¼ æ ‡ç‚¹å‡»ä½ç½®çš„æ¨ªåæ ‡&lt;/li&gt;
&lt;li&gt;é¼ æ ‡ç‚¹å‡»ä½ç½®çš„çºµåæ ‡&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç„¶åå¼€å§‹è®©åœ†çš„ä½ç½®é€æ­¥å‘é¼ æ ‡ç‚¹å‡»ä½ç½®è¿›è¡Œç§»åŠ¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {   &lt;span style=&#34;color:#007f7f&#34;&gt;// å¯¹äºç”¨æˆ·ç©å®¶ï¼ŒåŠ ä¸Šç›‘å¬å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.add_listening_events();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// æŠŠé¼ æ ‡å³é”®è°ƒå‡ºèœå•æ çš„åŠŸèƒ½å…³æ‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.$canvas.on(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;contextmenu&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// æŠŠå³é”®æ§åˆ¶ç§»åŠ¨åŠŸèƒ½åŠ ä¸Š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.$canvas.mousedown(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// å·¦é”®:1 ä¸­é”®:2 å³é”®:3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.move_to(e.clientX, e.clientY);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬æ¥å®ç°ç§»åŠ¨åŠŸèƒ½çš„å‡½æ•° &lt;code&gt;move_to(tx, ty)&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;constructor(...){
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;    &lt;span style=&#34;color:#007f7f&#34;&gt;// xæ–¹å‘ä¸Šçš„ç§»åŠ¨é€Ÿåº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;    &lt;span style=&#34;color:#007f7f&#34;&gt;// yæ–¹å‘ä¸Šçš„ç§»åŠ¨é€Ÿåº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;   &lt;span style=&#34;color:#007f7f&#34;&gt;// å‰©ä½™ç§»åŠ¨è·ç¦»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;get_dist (x1, y1, x2, y2) { &lt;span style=&#34;color:#007f7f&#34;&gt;// æ±‚ä¸¤ç‚¹çš„æ¬§å‡ é‡Œå¾—è·ç¦»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; dx = x2 - x1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; dy = y2 - y1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sqrt(dx * dx + dy * dy);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;move_to(tx, ty) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// è®¡ç®—ç§»åŠ¨è·ç¦»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.get_dist(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, tx, ty);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// è®¡ç®—ç§»åŠ¨è§’åº¦ï¼Œapiæ¥å£ï¼šatan2(dy, dx)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; angle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.atan2(ty - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, tx - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// ä½ç§» 1 ä¸ªå•ä½é•¿åº¦ï¼ˆå‘ç€çŸ¢é‡æ–¹å‘ç§»åŠ¨åˆ°å•ä½åœ†ä¸Šï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.cos(angle);  &lt;span style=&#34;color:#007f7f&#34;&gt;// æç›´äº’åŒ–
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sin(angle);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// æµ®ç‚¹æ•°ç²¾åº¦è¿ç®—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// è®¡ç®—å•ä½å¸§é‡Œçš„ç§»åŠ¨è·ç¦»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; moved = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.min(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx * moved;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy * moved;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// è¿˜è¦å‡æ‰ç§»åŠ¨çš„è·ç¦»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length -= moved;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å®ç°äº†ç©å®¶çš„ç§»åŠ¨åŠŸèƒ½äº†ï¼Œå¯ä»¥ç™»å½• &lt;code&gt;id:socket&lt;/code&gt; è°ƒè¯•è¯¥åŠŸèƒ½&lt;/p&gt;
&lt;h2 id=&#34;å®ç°ç«çƒæŠ€èƒ½çš„åŠŸèƒ½&#34;&gt;å®ç°ç«çƒæŠ€èƒ½çš„åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;ç«çƒå¯¹è±¡çš„å»ºç«‹ä¸ç©å®¶åŸºæœ¬ä¸€è‡´ï¼Œç›´æ¥ç…§æ¬ï¼Œåœ¨ä»ç»†èŠ‚ä¸Šæ”¹æ”¹å³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/skill/fireball/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; FireBall &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(playground, player, x, y, radius, vx, vy, color, speed, move_length, damage) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;super&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground = playground;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.ctx;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.player = player;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x = x;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y = y;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = vx;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = vy;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius = radius;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color = color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed = speed;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length = move.length;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage = damage;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.destroy();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; moved = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.min(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx * moved;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy * moved;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length -= moved;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt; * Pi, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fill();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨ç©å®¶èº«ä¸Šå®ç°å‘ç«çƒçš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;åŸºæœ¬å®ç°é€»è¾‘ï¼šå½“å‰é€‰ä¸­äº†ç«çƒæŠ€èƒ½ï¼Œé¼ æ ‡å·¦é”®ç‚¹å‡»ä¸€å¤„ï¼Œå‘è¯¥å¤„å‘å°„ä¸€ä¸ªç«çƒ&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œä¸ºäº†çŸ¥é“ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†æŠ€èƒ½ï¼Œéœ€è¦åŠ ä¸€ä¸ªé”®ç›˜è§¦å‘äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œç„¶ååŠ ä¸€ä¸ªé¼ æ ‡å·¦é”®è§¦å‘äº‹ä»¶ç›‘å¬å‡½æ•°&lt;/p&gt;
&lt;p&gt;ç„¶åå‘å°„ä¸€ä¸ªç«çƒå³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;constructor(...) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.cur_skill = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;null&lt;/span&gt;;  &lt;span style=&#34;color:#007f7f&#34;&gt;// è®°å½•å½“å‰é€‰æ‹©çš„æŠ€èƒ½
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.$canvas.mousedown(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// å·¦é”®:1 ä¸­é”®:2 å³é”®:3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.move_to(e.clientX, e.clientY);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;) {     &lt;span style=&#34;color:#007f7f&#34;&gt;// é¼ æ ‡å·¦é”®äº‹ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (outer.cur_skill === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;fireball&amp;#34;&lt;/span&gt;) {   &lt;span style=&#34;color:#007f7f&#34;&gt;// å½“å‰å·²ç»é€‰ä¸­ç«çƒæŠ€èƒ½
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;                outer.shoot_fireball(e.clientX, e.clientY);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        outer.cur_skill = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;null&lt;/span&gt;; &lt;span style=&#34;color:#007f7f&#34;&gt;// æ¸…ç©ºå½“å‰æŠ€èƒ½
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    $(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;window&lt;/span&gt;).keydown(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;81&lt;/span&gt;) {       &lt;span style=&#34;color:#007f7f&#34;&gt;// é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            outer.cur_skill = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;fireball&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;shoot_fireball(tx, ty) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// ç¡®å®šç«çƒçš„å‚æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; x = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, y = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y; &lt;span style=&#34;color:#007f7f&#34;&gt;// ç«çƒå‘å°„ç‚¹å°±æ˜¯å½“å‰ç©å®¶çš„ä½ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; radius = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.01&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; angle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.atan2(ty - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, tx - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.cos(angle), vy = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sin(angle);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; color = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;orange&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; speed = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; move_length = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; damage = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.01&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; FireBall(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, x, y, radius, vx, vy, color, speed, move_length, damage);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±æˆåŠŸå®ç°äº†ç©å®¶å‘å°„ç«çƒçš„åŠŸèƒ½äº†&lt;/p&gt;
&lt;h2 id=&#34;å®ç°å•äººæ¨¡å¼ä¸‹çš„äººæœºåŠŸèƒ½&#34;&gt;å®ç°å•äººæ¨¡å¼ä¸‹çš„äººæœºåŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;å…ˆåˆ›å»ºå¥½ 5 ä¸ªäººæœº
&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;//åˆ›å»ºå¥½ 5 ä¸ªäººæœº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (len i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·åˆ›å»ºå‡ºæ¥çš„ 5 ä¸ªäººæœºæ˜¯ä¸ä¼šè¡ŒåŠ¨çš„&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å†™ä¸€ä¸ªç®€æ˜“çš„ AI ç¨‹åºï¼Œè®©ä»–ä»¬ä¹Ÿä¼šç§»åŠ¨&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå®ç°çš„é€»è¾‘æ˜¯ï¼šæ¯æ¬¡éšæœºä¸€ä¸ªç›®çš„åœ°ï¼Œå‘ç›®çš„åœ°ç§»åŠ¨ï¼Œç„¶åå†éšæœºä¸€ä¸ªç›®çš„åœ°ï¼Œå¾ªç¯ä¸‹å»&lt;/p&gt;
&lt;p&gt;æ ¹æ®è¯¥é€»è¾‘ï¼Œä¿®æ”¹ä¸¤ä¸ªå‡½æ•°å³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {   &lt;span style=&#34;color:#007f7f&#34;&gt;// å¯¹äºç”¨æˆ·ç©å®¶ï¼ŒåŠ ä¸Šç›‘å¬å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.add_listening_events();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; tx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; ty = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_to(tx, ty);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (!&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {   &lt;span style=&#34;color:#007f7f&#34;&gt;// å¦‚æœæ˜¯äººæœºï¼Œåœä¸‹æ¥æ—¶å†éšæœºä¸€ä¸ªæ–¹å‘å‰è¿›
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; tx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; ty = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_to(tx, ty);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;on_destroy() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players.length; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players[i] === &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players.splice(i, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å®ç°æŠ€èƒ½å‘½ä¸­æ•ˆæœç¢°æ’æ£€æµ‹åŠŸèƒ½&#34;&gt;å®ç°æŠ€èƒ½å‘½ä¸­æ•ˆæœï¼ˆç¢°æ’æ£€æµ‹åŠŸèƒ½ï¼‰&lt;/h2&gt;
&lt;p&gt;å®ç°é€»è¾‘ï¼šæ£€æµ‹ä¸¤ä¸ªåœ†çš„ä¸­å¿ƒè·ç¦»æ˜¯å¦å°äºä¸¤ä¸ªåœ†çš„åŠå¾„ä¹‹å’Œ&lt;/p&gt;
&lt;p&gt;å°äºç­‰äºæ—¶ï¼Œä»£è¡¨å‘ç”Ÿç¢°æ’ï¼Œå¼€å§‹æ‰§è¡Œå‘½ä¸­æ•ˆæœï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¢«å‡»ä¸­ç”¨æˆ·æ‰è¡€&lt;/li&gt;
&lt;li&gt;è¢«å‡»ä¸­ç”¨æˆ·æ”¶åˆ°å‘åå‡»é€€æ•ˆæœ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¢°æ’æ£€æµ‹å†™åœ¨ç«çƒç±»é‡Œï¼Œå‡»é€€æ•ˆæœå†™åœ¨ç©å®¶ç±»é‡Œ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fireball/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (...) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// ç¢°æ’æ£€æµ‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players.length; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; player = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players[i];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.player !== player &amp;amp;&amp;amp; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_collision(player)) {  &lt;span style=&#34;color:#007f7f&#34;&gt;// ç¢°æ’å‘ç”Ÿä¸€å®šæ˜¯åœ¨éæ–½æ³•è€…èº«ä¸Š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.attack(player);    &lt;span style=&#34;color:#007f7f&#34;&gt;// ç«çƒå‘½ä¸­ï¼Œç›®æ ‡ç©å®¶æ‰§è¡Œå‡»é€€æ•ˆæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;get_dist(x1, y1, x2, y2) {  &lt;span style=&#34;color:#007f7f&#34;&gt;// è·å¾—ä¸¤ç‚¹çš„æ¬§å‡ é‡Œå¾—è·ç¦»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; dx = x2 - x1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; dy = y2 - y1;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sqrt(dx * dx + dy * dy);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;is_collision(player) {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ£€æµ‹ä¸¤ä¸ªåœ†çš„ä¸­å¿ƒè·ç¦»æ˜¯å¦å°äºä¸¤ä¸ªåœ†çš„åŠå¾„ä¹‹å’Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; distance = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.get_dist(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, player.x, player.y);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (distance &amp;lt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius + player.radius))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;attack(player) {    &lt;span style=&#34;color:#007f7f&#34;&gt;// ç«çƒå‘½ä¸­ï¼Œç›®æ ‡ç©å®¶æ‰§è¡Œå‡»é€€æ•ˆæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; angle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.atan2(player.y - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, player.x - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x);   &lt;span style=&#34;color:#007f7f&#34;&gt;// è®¡ç®—è§’åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    player.is_attacked(angle, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage); &lt;span style=&#34;color:#007f7f&#34;&gt;// ç«çƒå‘½ä¸­ï¼Œç›®æ ‡ç©å®¶æ‰§è¡Œå‡»é€€æ•ˆæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.destroy(); &lt;span style=&#34;color:#007f7f&#34;&gt;// ç«çƒå‘½ä¸­åï¼Œè‡ªç„¶æ¶ˆå¤±
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;è¢«å‡»é€€çš„æ—¶å€™ï¼ŒåŸæ¥çš„ç§»åŠ¨é€Ÿåº¦åº”è¯¥ç½®ä¸º 0ï¼Œå½“å‰çš„ç§»åŠ¨åº”è¯¥è½¬ä¸ºå‘è¢«å‡»ä¸­æ–¹å‘ä¸Šçš„ç§»åŠ¨&lt;/strong&gt;
&lt;code&gt;player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;is_attacked(angle, damage) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius -= damage;  &lt;span style=&#34;color:#007f7f&#34;&gt;// å—ä¼¤ï¼ŒåŠå¾„å‡å°‘
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;10&lt;/span&gt;) { &lt;span style=&#34;color:#007f7f&#34;&gt;// å½“åŠå¾„å°äº10åƒç´ æ—¶ï¼Œä»£è¡¨æ­»äº¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.destroy();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// å¼€å§‹æ‰§è¡Œå‡»é€€æ•ˆæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.cos(angle);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_vy = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sin(angle);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_speed = damage * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed *= &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;;  &lt;span style=&#34;color:#007f7f&#34;&gt;// è¢«å‡»ä¸­ä»¥åç§»åŠ¨é€Ÿåº¦å‡åŠ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_speed &amp;gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {   &lt;span style=&#34;color:#007f7f&#34;&gt;// å½“å‰ä»å¤„äºå‡»é€€æ•ˆæœä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_vx * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_speed * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_vy * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_speed * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_speed *= &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.friction; &lt;span style=&#34;color:#007f7f&#34;&gt;// å‡»é€€é€Ÿåº¦ä¹˜ä»¥æ‘©æ“¦ç³»æ•°ï¼Œå·²è¾¾åˆ°å‰Šå‡çš„ç›®çš„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è¢«å‡»ä¸­ä»¥åçš„ç²’å­æ•ˆæœç‰¹æ•ˆ&#34;&gt;è¢«å‡»ä¸­ä»¥åçš„ç²’å­æ•ˆæœç‰¹æ•ˆ&lt;/h2&gt;
&lt;p&gt;å®ç°é€»è¾‘ï¼šè¢«å‡»ä¸­ä»¥åï¼Œåœ¨ç©å®¶é™„è¿‘éšæœºç”Ÿæˆä¸€äº›ç²’å­å°çƒ&lt;/p&gt;
&lt;p&gt;å› æ­¤æˆ‘ä»¬è¦å…ˆå®ç° ç²’å­å°çƒ å¯¹è±¡&lt;/p&gt;
&lt;p&gt;&lt;code&gt;static/js/src/playground/particle/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Particle &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(playground, x, y, radius, vx, vy, color, speed) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;super&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground = playground;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.ctx;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x = x;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y = y;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius = radius;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx = vx;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy = vy;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color = color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed = speed;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.friction = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.9&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.destroy;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vx * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.vy * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed *= &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.friction;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fill();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬åœ¨è¢«å‡»é€€åŠŸèƒ½æ¨¡å—ï¼Œå®ç°ç”Ÿæˆç²’å­å°çƒçš„æ•ˆæœ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç²’å­å°çƒé‡Šæ”¾å¼§åº¦ä¸º $[0,2Ï€)$ çš„éšæœºæ•°
&lt;ul&gt;
&lt;li&gt;ç²’å­å°çƒçš„ x, y åˆ†é‡æ¯”ç‡æ ¹æ®å¼§åº¦æ¥è®¾å®š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç²’å­å°çƒçš„èµ·å§‹åæ ‡åº”ä¸ç©å®¶çš„åæ ‡ç›¸åŒ&lt;/li&gt;
&lt;li&gt;ç²’å­å°çƒçš„é¢œè‰²ä¸ç©å®¶é¢œè‰²ç›¸åŒ&lt;/li&gt;
&lt;li&gt;ç²’å­å°çƒçš„é€Ÿåº¦ä¸ºç©å®¶ç§»åŠ¨é€Ÿåº¦çš„ $10$ å€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;is_attacked(angle, damage) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// ç²’å­å°çƒæ•ˆæœ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;10&lt;/span&gt; + &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; x = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, y = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; radius = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; angle = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.cos(angle), vy = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sin(angle);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; color = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; speed = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.speed * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;10&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Particle(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground, x, y, radius, vx, vy, color, speed);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä¸€äº›å°ä¼˜åŒ–&#34;&gt;ä¸€äº›å°ä¼˜åŒ–&lt;/h2&gt;
&lt;h3 id=&#34;äººæœºéšæœºé¢œè‰²&#34;&gt;äººæœºéšæœºé¢œè‰²&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ......
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆ›å»ºå¥½ 5 ä¸ªäººæœº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.get_random_color(), &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ......
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;get_random_color() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; colors = [&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;pink&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;grey&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;green&amp;#34;&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; colors[&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.floor(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;)];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;äººæœºaiéšæœºæ”»å‡»æ“ä½œ&#34;&gt;äººæœºAIéšæœºæ”»å‡»æ“ä½œ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;constructor (...) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.spent_time = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;    &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆå§‹äººæœºå†·å´æ”»å‡»æ—¶é—´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.spent_time += &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.timedelta / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1000&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (!&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me &amp;amp;&amp;amp; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.spent_time &amp;gt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;4&lt;/span&gt; &amp;amp;&amp;amp; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;180&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; player = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players[&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.floor(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.players.length)];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.shoot_fireball(player.x, player.y);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;éƒ¨ç½²nginxä¸å¯¹æ¥acappà®&#34;&gt;éƒ¨ç½²nginxä¸å¯¹æ¥acappà®&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/3257028/&#34;&gt;5. éƒ¨ç½²nginxä¸å¯¹æ¥acapp | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/79244/&#34;&gt;5.1 ä¸Šè¯¾ç¬”è®° | Andrew1729&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/78903/&#34;&gt;5.1. ä¸Šè¯¾ç¬”è®° | èŠèŠ±&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/364622127&#34;&gt;Ngnix ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/36187963b553&#34;&gt;nginx å’Œuwsgiçš„åŒºåˆ«ä¸ä½œç”¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;nginxæ˜¯ä»€ä¹ˆ&#34;&gt;Nginxæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Nginxæ˜¯ä¸€æ¬¾è‡ªç”±çš„ã€å¼€æºçš„ã€é«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nginxå¯ä»¥ä½œä¸ºä¸€ä¸ªHTTPæœåŠ¡å™¨è¿›è¡Œç½‘ç«™çš„å‘å¸ƒå¤„ç†ï¼Œå¦å¤–Nginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†è¿›è¡Œè´Ÿè½½å‡è¡¡çš„å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nginxä¸­HttpUwsgiModuleçš„ä½œç”¨æ˜¯ä¸uWSGIæœåŠ¡å™¨è¿›è¡Œäº¤æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;uwsgiæ˜¯ä»€ä¹ˆ&#34;&gt;uWSGIæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;uWSGIæ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„HTTPæœåŠ¡å™¨ï¼Œå®ç°äº†WSGIã€uwsgiã€httpç­‰åè®®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ƒè¦åšçš„å°±æ˜¯æŠŠHTTPåè®®è½¬åŒ–æˆè¯­è¨€æ”¯æŒçš„ç½‘ç»œåè®®ã€‚æ¯”å¦‚æŠŠHTTPåè®®è½¬åŒ–æˆWSGIåè®®ï¼Œè®©Pythonå¯ä»¥ç›´æ¥ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;WSGIåè®®æ˜¯Python è¯­è¨€å®šä¹‰çš„ Web æœåŠ¡å™¨å’Œ Web åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä¹‹é—´çš„ä¸€ç§ç®€å•è€Œé€šç”¨çš„æ¥å£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®€å•æ¥è¯´uWSGIå°±æ˜¯ç”¨æ¥æ²Ÿé€šnginxå’Œdjangoçš„ä¸€åº§æ¡¥æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;nginxuwsgidiango-å·¥ä½œæµç¨‹&#34;&gt;Nginx+uWSGI+Diango å·¥ä½œæµç¨‹&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;nginx&lt;/code&gt; æ˜¯å¯¹å¤–çš„æœåŠ¡æ¥å£ï¼Œå¤–éƒ¨æµè§ˆå™¨é€šè¿‡&lt;code&gt;url&lt;/code&gt;è®¿é—®&lt;code&gt;nginx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;nginx&lt;/code&gt; æ¥æ”¶åˆ°æµè§ˆå™¨å‘é€è¿‡æ¥çš„&lt;code&gt;http&lt;/code&gt;è¯·æ±‚ï¼Œå°†åŒ…è¿›è¡Œè§£æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ†æ&lt;code&gt;url&lt;/code&gt;ï¼Œå¦‚æœæ˜¯é™æ€æ–‡ä»¶è¯·æ±‚å°±ç›´æ¥è®¿é—®ç”¨æˆ·ç»™&lt;code&gt;nginx&lt;/code&gt;é…ç½®çš„é™æ€æ–‡ä»¶ç›®å½•ï¼Œç›´æ¥è¿”å›ç”¨æˆ·è¯·æ±‚çš„é™æ€æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœä¸æ˜¯é™æ€æ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¯·æ±‚ï¼Œé‚£ä¹ˆ&lt;code&gt;nginx&lt;/code&gt;å°±å°†è¯·æ±‚è½¬å‘ç»™&lt;code&gt;uwsgi&lt;/code&gt;ï¼Œ&lt;code&gt;uwsgi&lt;/code&gt; æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åå°†åŒ…è¿›è¡Œå¤„ç†ï¼Œå¤„ç†æˆ&lt;code&gt;wsgi&lt;/code&gt;å¯ä»¥æ¥å—çš„æ ¼å¼ï¼Œå¹¶å‘ç»™&lt;code&gt;wsgi&lt;/code&gt;ï¼Œ&lt;code&gt;wsgi&lt;/code&gt; æ ¹æ®è¯·æ±‚è°ƒç”¨åº”ç”¨ç¨‹åºçš„æŸä¸ªæ–‡ä»¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„æŸä¸ªå‡½æ•°ï¼Œæœ€åå¤„ç†å®Œå°†è¿”å›å€¼å†æ¬¡äº¤ç»™&lt;code&gt;wsgi&lt;/code&gt;ï¼Œ&lt;code&gt;wsgi&lt;/code&gt;å°†è¿”å›å€¼è¿›è¡Œæ‰“åŒ…ï¼Œæ‰“åŒ…æˆ&lt;code&gt;uwsgi&lt;/code&gt;èƒ½å¤Ÿæ¥æ”¶çš„æ ¼å¼ï¼Œ&lt;code&gt;uwsgi&lt;/code&gt;æ¥æ”¶&lt;code&gt;wsgi&lt;/code&gt; å‘é€çš„è¯·æ±‚ï¼Œå¹¶è½¬å‘ç»™&lt;code&gt;nginx&lt;/code&gt;, &lt;code&gt;nginx&lt;/code&gt;æœ€ç»ˆå°†è¿”å›å€¼è¿”å›ç»™æµè§ˆå™¨&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;uwsgiæœåŠ¡çš„å¼€å¯å…³é—­&#34;&gt;uwsgiæœåŠ¡çš„å¼€å¯&amp;amp;&amp;amp;å…³é—­&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨&lt;code&gt;~/acapp&lt;/code&gt;å¯åŠ¨uwsgiæœåŠ¡ï¼š&lt;strong&gt;&lt;code&gt;uwsgi --ini scripts/uwsgi.ini&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å…³é—­uwsgiæœåŠ¡ï¼š&lt;code&gt;sudo pkillÂ -f uwsgiÂ -9&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é’ˆå¯¹-acapp-çš„ä¼˜åŒ–&#34;&gt;é’ˆå¯¹ acapp çš„ä¼˜åŒ–&lt;/h2&gt;
&lt;h3 id=&#34;æ‰“åŒ…è„šæœ¬ä¼˜åŒ–&#34;&gt;æ‰“åŒ…è„šæœ¬ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;ç”±äºç°åœ¨ &lt;strong&gt;å‘å¸ƒç‰ˆæœ¬çš„è„šæœ¬æ–‡ä»¶&lt;/strong&gt; ç”¨çš„æ˜¯æ‰“åŒ…åœ¨æ ¹ç›®å½•é‡Œçš„ &lt;strong&gt;static&lt;/strong&gt; æ–‡ä»¶å¤¹&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡ä¿®æ”¹å¥½ &lt;strong&gt;static&lt;/strong&gt; æ–‡ä»¶å¤¹åï¼Œä¸ä»…éœ€è¦å¯¹ &lt;strong&gt;js&lt;/strong&gt; æ–‡ä»¶æ‰“åŒ…ï¼Œè¿˜éœ€è¦å¯¹ &lt;strong&gt;static&lt;/strong&gt; æ–‡ä»¶å¤¹æ‰“åŒ…&lt;/p&gt;
&lt;p&gt;ä¸æ”¾æŠŠ &amp;ldquo;å°†staticæ–‡ä»¶å¤¹æ‰“åŒ…&amp;rdquo; çš„ &lt;strong&gt;shell&lt;/strong&gt; ä»£ç ä¸€èµ·åŠ å…¥ &lt;strong&gt;js&lt;/strong&gt; æ‰“åŒ…è„šæœ¬ä¸­ï¼Œä»è€Œå®ç°ä¸€é”®æ‰“åŒ…&lt;/p&gt;
&lt;p&gt;&lt;code&gt;scripts/compress_game_js.sh&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#! /bin/bash

JS_PATH=/home/acs/acapp/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find $JS_PATH_SRC -type f -name &amp;#39;*.js&amp;#39; | sort | xargs cat &amp;gt; ${JS_PATH_DIST}game.js

echo &amp;#34;yes&amp;#34; | python3 manage.py collectstatic
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;é¼ æ ‡ç‚¹å‡»äº‹ä»¶çš„ç›¸å¯¹åç§»&#34;&gt;é¼ æ ‡ç‚¹å‡»äº‹ä»¶çš„ç›¸å¯¹åç§»&lt;/h3&gt;
&lt;p&gt;ç”±äºå†™æ¸¸æˆç•Œé¢çš„æ—¶å€™ï¼Œç©å®¶ç§»åŠ¨æ˜¯æŒ‰ç…§é¼ æ ‡ç›¸å¯¹äºå½“å‰æ•´ä¸ªæµè§ˆå™¨å–çš„ä½ç½®å‚æ•° &lt;code&gt;e.clientX&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è€Œ &lt;code&gt;acapp&lt;/code&gt; é‡Œï¼Œæ¯ä¸ªåº”ç”¨æ˜¯ä¸€ä¸ªå°çª—å£ï¼Œé¼ æ ‡ç‚¹å‡»ä½ç½®çš„å‚æ•°åº”å½“æ˜¯ &lt;strong&gt;ç›¸å¯¹äºæ•´ä¸ªæ¸¸æˆçª—å£çš„ä½ç½®å‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ä¼šå¯¼è‡´å‡ºç°ï¼Œç‚¹å‡»çš„ä½ç½®ä¸ç§»åŠ¨çš„ä½ç½®ä¸åŒï¼Œè¿™é‡Œéœ€è¦åšå‡ºå°ä¼˜åŒ–&lt;/p&gt;
&lt;p&gt;ä¼˜åŒ–çš„é€»è¾‘ :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;$clientXâˆ’çª—å£å·¦ä¾§åˆ°æµè§ˆå™¨å·¦ä¾§çš„è·ç¦»=ç©å®¶çš„ç›®æ ‡X$&lt;/li&gt;
&lt;li&gt;$clientYâˆ’çª—å£ä¸Šä¾§åˆ°æµè§ˆå™¨ä¸Šä¾§çš„è·ç¦»=ç©å®¶çš„ç›®æ ‡Y$
è¿™å°±è¦ç”¨åˆ°ä¸€ä¸ª &lt;code&gt;js&lt;/code&gt; çš„ &lt;code&gt;API&lt;/code&gt; äº† : &lt;code&gt;getBoundingClientRect()&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject = object.getBoundingClientRect();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject.top : å…ƒç´ ä¸Šè¾¹åˆ°è§†çª—ä¸Šè¾¹çš„è·ç¦»;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject.right : å…ƒç´ å³è¾¹åˆ°è§†çª—å·¦è¾¹çš„è·ç¦»;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject.bottom : å…ƒç´ ä¸‹è¾¹åˆ°è§†çª—ä¸Šè¾¹çš„è·ç¦»;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject.left : å…ƒç´ å·¦è¾¹åˆ°è§†çª—å·¦è¾¹çš„è·ç¦»;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject.width : æ˜¯å…ƒç´ è‡ªèº«çš„å®½
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rectObject.height : æ˜¯å…ƒç´ è‡ªèº«çš„é«˜
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.$canvas.mousedown(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆ›å»º rect å¯¹è±¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;const&lt;/span&gt; rect = outer.ctx.canvas.getBoundingClientRect();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#007f7f&#34;&gt;// è°ƒæ•´åç§»é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            outer.move_to(e.clientX - rect.left, e.clientY - rect.top);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (outer.cur_skill === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;fireball&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#007f7f&#34;&gt;// è°ƒæ•´åç§»é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;                outer.shoot_fireball(e.clientX - rect.left, e.clientY - rect.top);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å°†èœå•ç•Œé¢é‡æ–°è®¾ä¸ºä¸»ç•Œé¢&#34;&gt;å°†èœå•ç•Œé¢é‡æ–°è®¾ä¸ºä¸»ç•Œé¢&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;js/zbase.js&lt;/code&gt; çš„æ³¨é‡Šå–æ¶ˆï¼Œä½¿ä¹‹åˆ›å»ºå‡º &lt;strong&gt;menu&lt;/strong&gt; å¯¹è±¡&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/playground/zbase.js&lt;/code&gt; çš„æ³¨é‡Šå–æ¶ˆï¼Œå¹¶è®¾ç½®é€»è¾‘ï¼Œè®© &lt;strong&gt;playground&lt;/strong&gt; æ‰“å¼€åï¼Œæ‰è¿›è¡Œæ¸¸æˆç•Œé¢åˆå§‹åŒ–&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGamePlayground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root = root;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground = $(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;`&amp;lt;div class=&amp;#34;ac-game-playground&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;`&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.hide();    &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆå§‹æ—¶éšè—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// æ¸¸æˆç•Œé¢ç”Ÿæˆä»£ç åœ¨ä¸‹é¢å±•ç¤º playground æ—¶æ‰§è¡Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.start();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show() {    &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€ playground ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.show();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// å¼€å§‹ç”Ÿæˆæ¸¸æˆç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root.$ac_game.append(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.width();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.height();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.game_map = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; GameMap(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players = [];  &lt;span style=&#34;color:#007f7f&#34;&gt;// å­˜æ”¾å½“å‰æ¸¸æˆä¸­çš„æ‰€æœ‰ç©å®¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// å°†ç©å®¶åŠ å…¥æ¸¸æˆä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;white&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;true&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#007f7f&#34;&gt;// åˆ›å»ºå¥½ 5 ä¸ªäººæœº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.get_random_color(), &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è°ƒæ•´-css-æ–‡ä»¶é€‚åº”çª—å£&#34;&gt;è°ƒæ•´ css æ–‡ä»¶ï¼Œé€‚åº”çª—å£&lt;/h3&gt;
&lt;p&gt;åœ¨è®¾ç½® &lt;code&gt;web&lt;/code&gt; ç½‘é¡µçš„æ—¶å€™ï¼Œæœ‰äº›è®¾ç½®äº†ç»å¯¹å€¼ï¼Œå¯èƒ½å¯¹äºçª—å£åŒ–çš„ &lt;code&gt;acapp&lt;/code&gt; æ˜¾ç¤ºæ•ˆæœå·®&lt;/p&gt;
&lt;p&gt;å°†ä»–ä»¬ä¿®æ”¹æˆç›¸å¯¹æ•°å€¼&lt;/p&gt;
&lt;p&gt;&lt;code&gt;game.css&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-menu-field {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    top: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;40&lt;/span&gt;%;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    left: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;20&lt;/span&gt;%;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-menu-field-item {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    height: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;6&lt;/span&gt;vh;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    font-size: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;4&lt;/span&gt;vh;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h1 id=&#34;åˆ›å»ºè´¦å·ç³»ç»Ÿ&#34;&gt;åˆ›å»ºè´¦å·ç³»ç»Ÿ&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/3294700/&#34;&gt;6. åˆ›å»ºè´¦å·ç³»ç»Ÿ | è®²ä¹‰&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ç”¨æˆ·åå¯†ç ç™»å½•&#34;&gt;ç”¨æˆ·åå¯†ç ç™»å½•&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/blog/content/12373/&#34;&gt;6.1 ç”¨æˆ·åå¯†ç ç™»å½• | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/79314/&#34;&gt;6.1 ä¸Šè¯¾ç¬”è®° | Andrew1729&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/75831/&#34;&gt;6.1 ä¸Šè¯¾ç¬”è®° | åƒé¥±å–è¶³ä¸å­¦ä¹ &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;å®¢æˆ·ç«¯è¯·æ±‚ä¸djangoå“åº”æµç¨‹&#34;&gt;å®¢æˆ·ç«¯è¯·æ±‚ä¸Djangoå“åº”æµç¨‹&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·åœ¨å®¢æˆ·ç«¯é€šè¿‡&lt;code&gt;$.ajax&lt;/code&gt;å‘é€è¯·æ±‚ï¼Œæ ¹æ®&lt;code&gt;urls&lt;/code&gt;è·¯ç”±åˆ°å¯¹åº”çš„&lt;code&gt;views&lt;/code&gt;ä¸­çš„å‡½æ•°ï¼Œå¤„ç†&lt;code&gt;request&lt;/code&gt;åè¿”å›&lt;code&gt;JsonResponse&lt;/code&gt; è‡³å®¢æˆ·ç«¯&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;å‰æœŸå‡†å¤‡å·¥ä½œ&#34;&gt;å‰æœŸå‡†å¤‡å·¥ä½œ&lt;/h3&gt;
&lt;p&gt;åšå¼€å‘ï¼Œå…ˆå¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå¦‚æœä¸å¼€å¯ï¼ŒæœåŠ¡å™¨ä¸€æ—¦è¿è¡Œé”™è¯¯ï¼Œå°±åªè¿”å› &lt;code&gt;Error&lt;/code&gt; æŠ¥é”™
&lt;code&gt;settings.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;DEBUG = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸è¿‡ &lt;code&gt;django&lt;/code&gt; è‡ªå¸¦çš„ &lt;code&gt;User&lt;/code&gt; è¡¨å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±é¢å¤–å»ºè¡¨&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºç”¨æˆ·è¡¨&#34;&gt;åˆ›å»ºç”¨æˆ·è¡¨&lt;/h3&gt;
&lt;p&gt;æ‰€æœ‰çš„æ•°æ®è¡¨éƒ½å­˜åœ¨ &lt;code&gt;models&lt;/code&gt; é‡Œ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ &lt;code&gt;models&lt;/code&gt; é‡Œåˆ›å»ºä¸€ä¸ª &lt;code&gt;player&lt;/code&gt; æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰çš„ &lt;code&gt;player&lt;/code&gt; ç›¸å…³çš„è¡¨&lt;/p&gt;
&lt;p&gt;ç„¶åå¯¹æ–‡ä»¶å¤¹åˆå§‹åŒ– &lt;code&gt;__init__.py&lt;/code&gt;ï¼Œæ¥ç€æ‰©å……æˆä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„æ•°æ®è¡¨&lt;/p&gt;
&lt;p&gt;&lt;code&gt;game/models/player/player.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.db &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; models
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.contrib.auth.models &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; User
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Player(models.Model): &lt;span style=&#34;color:#007f7f&#34;&gt;# Player ç±»ç»§æ‰¿è‡ª Model ç±»&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user = models.OneToOneField(User, on_delete=models.CASCADE)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;# è¯´æ˜Playeræ˜¯ä»Userè¡¨æ‰©å……è¿‡æ¥çš„ï¼Œæ¯ä¸€ä¸ªplayeréƒ½ä¸ä¸€ä¸ªuseræ˜¯ä¸€ä¸€å¯¹åº”å…³è”å…³ç³»&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;# åä¸€ä¸ªå‚æ•°æ˜¯æŒ‡ï¼Œå½“userè¢«åˆ é™¤åï¼Œå¯¹åº”çš„playerä¹Ÿè¦è¢«åˆ é™¤&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;# ï¼ˆæ„Ÿè§‰å°±æ˜¯å¤–é”®çš„æ„æ€ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    photo = models.URLField(max_length=&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;256&lt;/span&gt;, blank=&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;True&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;# ç”¨äºå­˜å‚¨ç”¨æˆ·çš„å¤´åƒçš„url&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;# æŒ‡å®šæ¯ä¸ªplayeræ•°æ®å±•ç¤ºåœ¨å‰å°çš„æ•°æ®&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; __str__(self):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;str&lt;/span&gt;(self.user)    &lt;span style=&#34;color:#007f7f&#34;&gt;# å±•ç¤ºç”¨æˆ·çš„ç”¨æˆ·å&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°†å®šä¹‰çš„è¡¨ï¼Œæ³¨å†Œåˆ°åå° &lt;code&gt;admin&lt;/code&gt; é¡µé¢ä¸­&lt;/p&gt;
&lt;p&gt;&lt;code&gt;game/admin.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.models.player.player &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; Player
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;admin.site.register(Player)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå°†åˆ›å»ºçš„æ•°æ®è¡¨æ›´æ–°åˆ° &lt;code&gt;django&lt;/code&gt; çš„æ•°æ®åº“ä¸­å»&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;$&lt;/span&gt; python3 manage.py makemigrations
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Migrations &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;game&amp;#39;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;   game/migrations/&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0001&lt;/span&gt;_initial.py
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;     - Create model Player
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;$&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;$&lt;/span&gt; python3 manage.py migrate
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Operations to perform:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;   Apply &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;all&lt;/span&gt; migrations: admin, auth, contenttypes, game, sessions
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Running migrations:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;   Applying game&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;.0001&lt;/span&gt;_initial... OK
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åé‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œå°±å¯ä»¥åœ¨ç®¡ç†å‘˜é¡µé¢çœ‹åˆ°æ–°å»ºçš„æ•°æ®åº“äº†&lt;/p&gt;
&lt;h3 id=&#34;å®ç°å®¢æˆ·ç«¯çš„ç±»å‹åˆ¤åˆ«acapp-or-web&#34;&gt;å®ç°å®¢æˆ·ç«¯çš„ç±»å‹åˆ¤åˆ«ï¼ˆACAPP or WEBï¼‰&lt;/h3&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬å®ç°çš„é¡¹ç›®æ˜¯å‰åç«¯åˆ†ç¦»ç±»å‹ï¼Œå› æ­¤å¯¹äºä¸åŒçš„å®¢æˆ·ç«¯ï¼Œå‰ç«¯è¦æ§åˆ¶ç”Ÿæˆä¸åŒçš„é¡µé¢&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¢å¼ºæ‰©å±•æ€§ï¼Œæ•…è¿™é‡Œè¦å®ç°å®¢æˆ·ç«¯ç±»å‹çš„åˆ¤åˆ«&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;yæ€»&lt;/strong&gt; å·²ç»æå‰å†™å¥½äº† &lt;strong&gt;ACAPP&lt;/strong&gt; çš„æ¥å£ï¼Œå¦‚æœç”¨æˆ·ç”¨çš„æ˜¯ &lt;strong&gt;ACAPP&lt;/strong&gt; è®¿é—®ï¼Œåˆ™åœ¨æ–°å»ºå¯¹è±¡ &lt;strong&gt;ac_game&lt;/strong&gt; æ—¶ï¼Œä¼šé¢å¤–ä¼ é€’ä¸€ä¸ªå‚æ•°&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åªéœ€æŒ‰ç…§è¿™ä¸ªæ¥å£å»å®Œæˆæ‰©å……å³å¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¹‹åå†™å°ç¨‹åºä¹‹ç±»çš„åŒç†ï¼Œé¢å¤–ä¼ ä¸€ä¸ªæ¥å£&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;js/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGame {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(id, AcWingOS) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.id = id;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$ac_game = $(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;#&amp;#39;&lt;/span&gt; + id);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.AcWingOS = AcWingOS;   &lt;span style=&#34;color:#007f7f&#34;&gt;//å¦‚æœæ˜¯acappç«¯ï¼Œè¯¥å˜é‡å°±ä¼šå¸¦ç€ä¸€ç³»åˆ—yæ€»æä¾›çš„æ¥å£
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.menu = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; AcGameMenu(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; AcGamePlayground(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.start();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ„å»ºç™»å½•åŠŸèƒ½æ¡†æ¶&#34;&gt;æ„å»ºç™»å½•åŠŸèƒ½æ¡†æ¶&lt;/h3&gt;
&lt;p&gt;åŸºæœ¬é€»è¾‘ : ç”¨æˆ·è®¿é—®é¡µé¢ -&amp;gt; è¿›å…¥ç™»å½•é¡µé¢ -&amp;gt; æäº¤ç™»å½•ä¿¡æ¯ -&amp;gt; æ ¸å¯¹ç™»å½•ä¿¡æ¯ -&amp;gt; è¿”å›ç™»é™†ç»“æœå’Œå…¶ä»–ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;æ¯å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°±éœ€è¦å®ç°ä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;views&lt;/code&gt; : å®ç°å…·ä½“çš„è°ƒç”¨æ•°æ®åº“çš„é€»è¾‘&lt;/li&gt;
&lt;li&gt;&lt;code&gt;urls&lt;/code&gt; : å®ç°ä¸€ä¸ªè·¯ç”±&lt;/li&gt;
&lt;li&gt;&lt;code&gt;js&lt;/code&gt; : å‰ç«¯å®ç°GETä¸Šè¿°æ¥å£çš„è¿‡ç¨‹&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ¬²å®ç°æµç¨‹ :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·è®¿é—®ç½‘ç«™ï¼Œé€šè¿‡å…ˆå‰å®Œæˆçš„è·¯ç”±ï¼Œè®¿é—®åˆ° &lt;code&gt;web.html &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;web.html&lt;/code&gt; ä¸­çš„ &lt;code&gt;js&lt;/code&gt; éƒ¨åˆ†åˆ›å»ºäº†ä¸€ä¸ª &lt;code&gt;AcGame&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AcGame&lt;/code&gt; å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆäº† &lt;code&gt;Settings&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Settings&lt;/code&gt; å¯¹è±¡åˆ›å»ºå®Œæˆåï¼Œè°ƒç”¨ &lt;code&gt;Settings.start()&lt;/code&gt; å‡½æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Settings.start()&lt;/code&gt; å‡½æ•°è°ƒç”¨äº† &lt;code&gt;Settings.getinfo()&lt;/code&gt; å‡½æ•°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Settings.getinfo()&lt;/code&gt; å‡½æ•°ä¸­æ‰§è¡Œäº† &lt;code&gt;ajax&lt;/code&gt; å‘ &lt;code&gt;getinfo&lt;/code&gt; æ¥å£å‘èµ·ä¸€ä¸ªå«å‚æ•° &lt;code&gt;platform&lt;/code&gt; çš„ &lt;code&gt;GET&lt;/code&gt; è¯·æ±‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ &lt;code&gt;urls&lt;/code&gt; è·¯ç”±çš„å®ç°ï¼Œæœ€ç»ˆå®šä½åˆ° &lt;code&gt;views/settings/getinfo.py&lt;/code&gt; æ–‡ä»¶çš„ &lt;code&gt;getinfo(request)&lt;/code&gt; å‡½æ•°&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¼ é€’è¿‡æ¥çš„ &lt;code&gt;platform&lt;/code&gt; å‡½æ•°ï¼Œå®ç°ä¸åŒçš„ &lt;code&gt;JsonResponse&lt;/code&gt; è¿”å›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Settings.getinfo()&lt;/code&gt; æ¥å—åˆ°äº† &lt;code&gt;response&lt;/code&gt; å®Œæˆä¸Šè¿°åŸºæœ¬é€»è¾‘&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;views&#34;&gt;views&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;views/settings/getinfo.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.http &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; JsonResponse
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.models.player.player &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; Player
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; getinfo_acapp(request):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    player = Player.objects.all()[&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;]    &lt;span style=&#34;color:#007f7f&#34;&gt;# å–å‡ºæ•°æ®åº“ä¸­ç¬¬ä¸€ä¸ªç”¨æˆ·(è°ƒè¯•è¯¥åŠŸèƒ½)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;: player.user.username,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;photo&amp;#39;&lt;/span&gt;: player.photo,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; getinfo_web(request):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    player = Player.objects.all()[&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;]    &lt;span style=&#34;color:#007f7f&#34;&gt;# å–å‡ºæ•°æ®åº“ä¸­ç¬¬ä¸€ä¸ªç”¨æˆ·(è°ƒè¯•è¯¥åŠŸèƒ½)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;: player.user.username,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;photo&amp;#39;&lt;/span&gt;: player.photo,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; getinfo(request):   &lt;span style=&#34;color:#007f7f&#34;&gt;# å¤„ç†è¯·æ±‚&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    platform = request.GET.get(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;platform&amp;#39;&lt;/span&gt;)  &lt;span style=&#34;color:#007f7f&#34;&gt;# æ ¹æ®è¯·æ±‚çš„å¹³å°ä¸åŒï¼Œè¿›è¡Œä¸åŒè¿”å›å¤„ç†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; platform == &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;ACAPP&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; getinfo_acapp(request)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;elif&lt;/span&gt; platform == &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;WEB&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; getinfo_web(request)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;urls&#34;&gt;urls&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;urls/settings/index.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.urls &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; path
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.views.settings.getinfo &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; getinfo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;urlpatterns = [
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    path(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;getinfo/&amp;#34;&lt;/span&gt;, getinfo, name=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;settings_getinfo&amp;#34;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è·¯ç”±å»ºç«‹å¥½ä»¥åï¼Œè®¿é—® &lt;code&gt;xxxx/settings/getinfo&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ° &lt;code&gt;getinfo.py&lt;/code&gt; è¿”å›çš„ &lt;code&gt;JSON&lt;/code&gt; ç±»å‹çš„ &lt;code&gt;JSONResponse&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&#34;js&#34;&gt;js&lt;/h4&gt;
&lt;p&gt;ç½‘é¡µåˆšè®¿é—®æ—¶ï¼Œåº”å…ˆå°† &lt;code&gt;menu&lt;/code&gt; å…³é—­ï¼Œç„¶åæ‰“å¼€ç™»å½•ç•Œé¢ï¼Œéšæ„å…ˆä¿®æ”¹ä¸€ä¸ªè®© &lt;code&gt;menu&lt;/code&gt; åˆå§‹å…³é—­&lt;/p&gt;
&lt;p&gt;&lt;code&gt;static/js/src/menu/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGameMenu {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$menu.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;static/js/src/settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Settings {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root = root;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.platform = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;WEB&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root.AcWingOS) &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.platform = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;ACAPP&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.start();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.getinfo();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    register() {    &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€æ³¨å†Œç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    login() {       &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€ç™»å½•ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    getinfo() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        $.ajax({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            url: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;https://app1117.acapp.acwing.com.cn/settings/getinfo/&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            type: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            data: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                platform: outer.platform,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            success: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(resp) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                console.log(resp);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (resp.result === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;) {    &lt;span style=&#34;color:#007f7f&#34;&gt;// ç™»å½•æˆåŠŸï¼Œå…³é—­ç™»å½•ç•Œé¢ï¼Œæ‰“å¼€ä¸»èœå•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;                    outer.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    outer.root.menu.show();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    outer.login();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    hide() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åä¸è¦å¿˜è®°åœ¨ &lt;code&gt;æ ¹js&lt;/code&gt; ä¸‹åˆ›å»ºå¯¹è±¡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGame {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(id, AcWingOS) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.settings = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Settings(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·åŸºæœ¬æ¡†æ¶å°±å®Œæˆäº†&lt;/p&gt;
&lt;h4 id=&#34;å®Œå–„-http-è¯·æ±‚çš„å‡½æ•°&#34;&gt;å®Œå–„ HTTP è¯·æ±‚çš„å‡½æ•°&lt;/h4&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œè¿”å›ä¿¡æ¯ &amp;ldquo;not login&amp;rdquo;&lt;/p&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·ç™»å½•ï¼Œè¿”å›ä¿¡æ¯ &amp;ldquo;success&amp;rdquo; ä»¥åŠç”¨æˆ·åå’Œå¤´åƒ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;views/setting/getinfo.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-py&#34; data-lang=&#34;py&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; getinfo_web(request):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user = request.user
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; not user.is_authenticated:   &lt;span style=&#34;color:#007f7f&#34;&gt;# æœªç™»å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;not login&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt;:                           &lt;span style=&#34;color:#007f7f&#34;&gt;# å·²ç™»å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        player = Player.objects.get(user=user)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;: player.user.username,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;photo&amp;#39;&lt;/span&gt;: player.photo,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„å‰åå°æ˜¯ä¸€ä¸ªç™»å½•ç³»ç»Ÿï¼Œå› æ­¤è¦å…ˆé€€æ‰åå°ï¼Œå†æµ‹è¯•&lt;/p&gt;
&lt;h3 id=&#34;å°†ç”¨æˆ·å¤´åƒæ¸²æŸ“åˆ°ç©å®¶ä¸Š&#34;&gt;å°†ç”¨æˆ·å¤´åƒæ¸²æŸ“åˆ°ç©å®¶ä¸Š&lt;/h3&gt;
&lt;p&gt;å°†è¿”å›çš„ &lt;code&gt;JsonResponse&lt;/code&gt; å­˜åˆ° &lt;code&gt;Settings&lt;/code&gt; ç±»çš„å˜é‡ä¸­
&lt;code&gt;settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Settings {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.username = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.photo = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    getinfo() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        $.ajax({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            success: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(resp) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (resp.result === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    outer.username = resp.username;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    outer.photo = resp.photo;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ..
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨ &lt;code&gt;Player&lt;/code&gt; é‡ŒæŠŠç”¨æˆ·çš„å¤´åƒæ¸²æŸ“åˆ°å¯¹åº”çš„ç©å®¶ä¸Š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Player {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(...) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.img = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Image();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.img.src = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.root.settings.photo;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.save();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.stroke();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.clip();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.drawImage(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.img, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                               &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.restore();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fill();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°ç™»å½•ç•Œé¢çš„å‰ç«¯&#34;&gt;å®ç°ç™»å½•ç•Œé¢çš„å‰ç«¯&lt;/h3&gt;
&lt;p&gt;å…ˆå®Œæˆç™»å½•ç•Œé¢æ˜¾ç¤ºçš„é€»è¾‘&lt;/p&gt;
&lt;p&gt;&lt;code&gt;settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Settings {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    register() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€æ³¨å†Œç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.show();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    login() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€ç™»å½•ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.show();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    hide() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings.show();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å®ç°å‰ç«¯çš„åŸºç¡€æ¡†æ¶&#34;&gt;å®ç°å‰ç«¯çš„åŸºç¡€æ¡†æ¶&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Settings {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings = $(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;`
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;lt;div class=&amp;#34;ac-game-settings&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;    &amp;lt;div class=&amp;#34;ac-game-settings-login&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-title&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            ç™»å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-username&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;input type=&amp;#34;text&amp;#34; placeholder=&amp;#34;ç”¨æˆ·å&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-password&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;input type=&amp;#34;password&amp;#34; placeholder=&amp;#34;å¯†ç &amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-submit&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;button&amp;gt;ç™»å½•&amp;lt;/button&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-error-message&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-option&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            æ³¨å†Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;br&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-acwing&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;img width=&amp;#34;30&amp;#34; src=&amp;#34;https://app165.acapp.acwing.com.cn/static/image/settings/acwing_logo.png&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;br&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                AcWingä¸€é”®ç™»å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;    &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;    &amp;lt;div class=&amp;#34;ac-game-settings-register&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-title&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            æ³¨å†Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-username&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;input type=&amp;#34;text&amp;#34; placeholder=&amp;#34;ç”¨æˆ·å&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-password ac-game-settings-password-first&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;input type=&amp;#34;password&amp;#34; placeholder=&amp;#34;å¯†ç &amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-password ac-game-settings-password-second&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;input type=&amp;#34;password&amp;#34; placeholder=&amp;#34;ç¡®è®¤å¯†ç &amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-submit&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div class=&amp;#34;ac-game-settings-item&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                &amp;lt;button&amp;gt;æ³¨å†Œ&amp;lt;/button&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-error-message&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-option&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            ç™»å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;br&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;div class=&amp;#34;ac-game-settings-acwing&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;img width=&amp;#34;30&amp;#34; src=&amp;#34;https://app165.acapp.acwing.com.cn/static/image/settings/acwing_logo.png&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;br&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;                AcWingä¸€é”®ç™»å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;            &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;        &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;    &amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;lt;/div&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;`&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-login&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_username = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-username input&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_password = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-password input&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_submit = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-submit button&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_error_message = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-error-message&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_register = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-option&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-register&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_username = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-username input&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_password = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-password-first input&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_password_confirm = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-password-second input&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_submit = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-submit button&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_error_message = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-error-message&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_login = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.find(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;.ac-game-settings-option&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root.$ac_game.append(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯¹åº”çš„ &lt;code&gt;css&lt;/code&gt; æ–‡ä»¶éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;css/game.css&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;width&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;background-image&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;url&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;/static/image/menu/background.gif&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;background-size&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;user-select&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;none&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-login {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;41&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;width&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;20&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vw&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;position&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;relative&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;transform&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;translate&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;background-color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;rgba&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.7&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;border-radius&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;px&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-title {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;white&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;font-size&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;text-align&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;center&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;padding-top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;margin-bottom&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-username {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;block&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;7&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-password {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;block&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;7&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-submit {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;block&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;7&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-acwing {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;block&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;7&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-item {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;width&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;100&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-item &amp;gt; &lt;span style=&#34;font-weight:bold&#34;&gt;input&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;width&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;90&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;line-height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;position&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;relative&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;transform&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;translate&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-item &amp;gt; &lt;span style=&#34;font-weight:bold&#34;&gt;button&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;white&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;width&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;90&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;line-height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;position&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;relative&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;transform&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;translate&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;background-color&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;#4CAF50&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;border-radius&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;px&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-error-message {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;red&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;font-size&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.8&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;inline&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;float&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;padding-left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vw&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-option {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;white&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;font-size&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;inline&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;float&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;right&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;padding-right&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vw&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;cursor&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;pointer&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-acwing &amp;gt; &lt;span style=&#34;font-weight:bold&#34;&gt;img&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;position&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;relative&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;transform&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;translate&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;cursor&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;pointer&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;block&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-acwing &amp;gt; &lt;span style=&#34;font-weight:bold&#34;&gt;div&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;white&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;font-size&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1.5&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;text-align&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;center&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;display&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;block&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-settings-register {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;height&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;49&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vh&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;width&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;20&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;vw&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;position&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;relative&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;transform&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;translate&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;background-color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;rgba&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.7&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;border-radius&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;px&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;å®ç°ç™»å½•æ³¨å†Œçš„ç›¸äº’åˆ‡æ¢&#34;&gt;å®ç°ç™»å½•/æ³¨å†Œçš„ç›¸äº’åˆ‡æ¢&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Settings {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.getinfo();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.add_listening_events();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.add_listening_events_login();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.add_listening_events_register();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    add_listening_events_login() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_register.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.register();   &lt;span style=&#34;color:#007f7f&#34;&gt;// è·³åˆ°æ³¨å†Œç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    add_listening_events_register() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_login.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.login();      &lt;span style=&#34;color:#007f7f&#34;&gt;// è·³åˆ°ç™»å½•ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°ç™»å½•åŠŸèƒ½&#34;&gt;å®ç°ç™»å½•åŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;views/settings/login.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.http &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; JsonResponse
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.contrib.auth &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; authenticate, login
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; signin(request):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    data = request.GET
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    username = data.get(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;username&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    password = data.get(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;password&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user = authenticate(username=username, password=password)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; not user:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    login(request, user)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;urls/settings/index.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.urls &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; path
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.views.settings.getinfo &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; getinfo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.views.settings.login &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; signin
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;urlpatterns = [
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    path(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;getinfo/&amp;#34;&lt;/span&gt;, getinfo, name=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;settings_getinfo&amp;#34;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    path(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;login/&amp;#34;&lt;/span&gt;, signin, name=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;settings_login&amp;#34;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Settings{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    add_listening_events_login() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_submit.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.login_on_remote();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    login_on_remote() {     &lt;span style=&#34;color:#007f7f&#34;&gt;// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šç™»å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; username = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_username.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; password = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_password.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_error_message.empty();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        $.ajax({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            url: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;https://app1117.acapp.acwing.com.cn/settings/login/&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            type: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            data: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                username: username,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                password: password,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            success: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(resp) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                console.log(resp);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (resp.result === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    location.reload();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    outer.$login_error_message.html(resp.result);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°ç™»å‡ºåŠŸèƒ½&#34;&gt;å®ç°ç™»å‡ºåŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;views/settings/logout.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.http &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; JsonResponse
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.contrib.auth &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; logout
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; signout(request):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user = request.user
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; not user.is_authenticated:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    logout(request)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;urls/settings/index.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.views.settings.logout &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; signout
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;urlpatterns = [
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    path(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;logout/&amp;#34;&lt;/span&gt;, signout, name=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;settings_logout&amp;#34;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;login_on_remote() {     &lt;span style=&#34;color:#007f7f&#34;&gt;// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šç™»å½•
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; username = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_username.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; password = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_password.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$login_error_message.empty();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    $.ajax({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        url: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;https://app1117.acapp.acwing.com.cn/settings/login/&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        type: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        data: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            username: username,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            password: password,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        success: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(resp) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            console.log(resp);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (resp.result === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                location.reload();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                outer.$login_error_message.html(resp.result);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†é¡ºä¾¿å°† &lt;code&gt;menu&lt;/code&gt; èœå•é¡µé¢é‡Œçš„ &lt;code&gt;è®¾ç½®&lt;/code&gt; æŒ‰é’®ä¹Ÿç»‘å®šä¸Šç™»å‡ºåŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;code&gt;menu/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$settings_mode.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        outer.root.settings.logout_on_remote();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°æ³¨å†ŒåŠŸèƒ½&#34;&gt;å®ç°æ³¨å†ŒåŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;views/settings/register.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.http &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; JsonResponse
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.contrib.auth &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; login
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; django.contrib.auth.models &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; User
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.models.player.player &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; Player
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;def&lt;/span&gt; register(request):
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    data = request.GET
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    username = data.get(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;username&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;).strip()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    password = data.get(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;password&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;).strip()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    password_confirm = data.get(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;password_confirm&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;).strip()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; not username or not password:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; password != password_confirm:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;ä¸¤ä¸ªå¯†ç ä¸ä¸€è‡´&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; User.objects.filter(username=username).exists():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;ç”¨æˆ·åå·²å­˜åœ¨&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user = User(username=username)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user.set_password(password)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    user.save()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Player.objects.create(user=user, photo=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;https://cdn.acwing.com/media/user/profile/photo/42832_lg_f999efc3c8.png&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    login(request, user)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; JsonResponse({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;result&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;urls/settings/index.py&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;from&lt;/span&gt; game.views.settings.register &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;import&lt;/span&gt; register
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;urlpatterns = [
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    path(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;register/&amp;#34;&lt;/span&gt;, register, name=&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;settings_register&amp;#34;&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;settings/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;add_listening_events_register() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_submit.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        outer.register_on_remote();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;register_on_remote() {  &lt;span style=&#34;color:#007f7f&#34;&gt;// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ³¨å†Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; username = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_username.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; password = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_password.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; password_confirm = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_password_confirm.val();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$register_error_message.empty();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    $.ajax({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        url: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;https://app1117.acapp.acwing.com.cn/settings/register/&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        type: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        data: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            username: username,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            password: password,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            password_confirm: password_confirm,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        success: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(resp) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            console.log(resp);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (resp.result === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;success&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                location.reload();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                outer.$register_error_message.html(resp.result);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    })
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;redisà®&#34;&gt;Redisà®&lt;/h2&gt;
&lt;h3 id=&#34;redisæ˜¯ä»€ä¹ˆ&#34;&gt;Redisæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Redis&lt;/code&gt; æ˜¯ä¸€æ¬¾å†…å­˜é«˜é€Ÿç¼“å­˜æ•°æ®åº“&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨redis&#34;&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Redis?&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬ç›®å‰ç”¨çš„æ˜¯&lt;code&gt;Django&lt;/code&gt;è‡ªå¸¦çš„æ•°æ®åº“&lt;code&gt;Sqlite&lt;/code&gt;ã€‚&lt;code&gt;Django&lt;/code&gt;æ˜¯å¾ˆå®¹æ˜“å°†æ•°æ®åº“è¿ç§»åˆ°&lt;code&gt;mySQL&lt;/code&gt;çš„ã€‚ä½†æ˜¯å­˜å‚¨æ•ˆç‡ä¸å¦‚&lt;code&gt;redis&lt;/code&gt;ï¼Œå› ä¸º&lt;code&gt;redis&lt;/code&gt;æ˜¯å†…å­˜æ•°æ®åº“ï¼Œæ‰€ä»¥è°ƒç”¨ä¸œè¥¿éƒ½éå¸¸å¿«ï¼Œå­˜çš„æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„&lt;code&gt;&amp;lt;key, value&amp;gt;&lt;/code&gt;ï¼Œè€Œä¸”æ˜¯å•çº¿ç¨‹çš„&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;åœ¨djangoä¸­é›†æˆredis&#34;&gt;åœ¨Djangoä¸­é›†æˆRedis&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… &lt;code&gt;django_redis&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;pip install django_redis
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;é…ç½® &lt;code&gt;settings.py&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;CACHES = { 
    &amp;#39;default&amp;#39;: {
        &amp;#39;BACKEND&amp;#39;: &amp;#39;django_redis.cache.RedisCache&amp;#39;,
        &amp;#39;LOCATION&amp;#39;: &amp;#39;redis://127.0.0.1:6379/1&amp;#39;,
        &amp;#34;OPTIONS&amp;#34;: {
            &amp;#34;CLIENT_CLASS&amp;#34;: &amp;#34;django_redis.client.DefaultClient&amp;#34;,
        },  
    },  
}
USER_AGENTS_CACHE = &amp;#39;default&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;å¯åŠ¨ &lt;code&gt;redis-server&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo redis-server /etc/redis/redis.conf
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åœ¨-django-åå°é‡Œæ“çºµ-redis&#34;&gt;åœ¨ Django åå°é‡Œæ“çºµ Redis&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ python3 manage.py shell&amp;#39;

In [1]: from django.core.cache import cache # å¼•å…¥redis

In [2]: cache.keys(&amp;#39;*&amp;#39;)                     # æŸ¥è¯¢redisé‡Œæ‰€æœ‰çš„å…³é”®å­—
Out[2]: []

In [3]: cache.set(&amp;#39;yxc&amp;#39;, 1, 5)              # æ’å…¥ä¸€ä¸ªkey-valï¼Œå­˜åœ¨ 5 s
Out[3]: True

In [4]: cache.keys(&amp;#39;*&amp;#39;)                     # æŸ¥è¯¢redisé‡Œæ‰€æœ‰çš„å…³é”®å­—
Out[4]: [&amp;#39;yxc&amp;#39;]

In [5]: cache.set(&amp;#39;yxc&amp;#39;, 2, None)           # æ’å…¥ä¸€ä¸ªkey-valï¼Œä¸ä¼šè¿‡æœŸ
Out[5]: True

In [6]: cache.set(&amp;#39;abc&amp;#39;, 3, None)
Out[6]: True

In [7]: cache.keys(&amp;#39;y*&amp;#39;)
Out[7]: [&amp;#39;yxc&amp;#39;]

In [8]: cache.has_key(&amp;#39;abc&amp;#39;)
Out[8]: True

In [9]: cache.has_key(&amp;#39;abcd&amp;#39;)
Out[9]: False

In [10]: cache.get(&amp;#39;yxc&amp;#39;)
Out[10]: 2

In [11]: cache.delete(&amp;#39;yxc&amp;#39;)
Out[11]: True

In [12]: cache.keys(&amp;#39;*&amp;#39;)
Out[12]: [&amp;#39;abc&amp;#39;]

In [13]:
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;webç«¯acwingä¸€é”®ç™»å½•à®&#34;&gt;Webç«¯AcWingä¸€é”®ç™»å½•à®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/blog/content/12466/&#34;&gt;6.2 Webç«¯AcWingä¸€é”®ç™»å½• | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/79354/&#34;&gt;6.2 ä¸Šè¯¾ç¬”è®° | Andrew1729&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/video/3565/&#34;&gt;6.2 Webç«¯AcWingä¸€é”®ç™»å½• | Vedio&lt;/a&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Oauth2ä¸€é”®æˆæƒç™»å½•çš„åŸºæœ¬åŸç†&lt;/strong&gt;ï¼š$17m30sâ€”â€”29m15sâ€”â€”32m51s$&lt;/li&gt;
&lt;li&gt;æ•°æ®è¡¨æ·»åŠ &lt;code&gt;openid&lt;/code&gt;ä¿¡æ¯ï¼š$33m20sâ€”â€”34m47s$&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Oauth2ä¸€é”®æˆæƒç™»å½•çš„ä»£ç å®ç°&lt;/strong&gt;ï¼š$35m20sâ€”â€”1h25sâ€”â€”1h27m20s$&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·ç‚¹å‡»&lt;code&gt;AcWingä¸€é”®ç™»å½•&lt;/code&gt;ï¼Œé€šè¿‡&lt;code&gt;urls &amp;amp; views&lt;/code&gt;è°ƒç”¨&lt;code&gt;apply_code&lt;/code&gt;å‡½æ•°ï¼Œå°†&lt;code&gt;state&lt;/code&gt;æ”¾åˆ°&lt;code&gt;redis&lt;/code&gt;ä¸­ï¼Œå°†&lt;code&gt;appid &amp;amp; redirect_uri &amp;amp; scope &amp;amp; state&lt;/code&gt; ä¼ å…¥&lt;code&gt;apply_code_url&lt;/code&gt;é“¾æ¥ï¼Œè¿”å›å¹¶é‡å®šå‘è‡³&lt;code&gt;apply_code_url&lt;/code&gt;å‘ç”¨æˆ·è¯¢é—®æ˜¯å¦æˆæƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·ç‚¹å‡»&lt;code&gt;åŒæ„&lt;/code&gt;åï¼Œé‡å®šå‘è‡³&lt;code&gt;redirect_uri&lt;/code&gt;é“¾æ¥ï¼Œè¿”å›å‚æ•°ä¸º&lt;code&gt;code&lt;/code&gt;å’Œ&lt;code&gt;state&lt;/code&gt;ï¼Œé€šè¿‡&lt;code&gt;urls &amp;amp; views&lt;/code&gt;è°ƒç”¨&lt;code&gt;receive_code&lt;/code&gt;å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è‹¥éªŒè¯&lt;code&gt;state&lt;/code&gt;å¤±è´¥ï¼Œç›´æ¥é‡å®šå‘è‡³åˆå§‹ç•Œé¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è‹¥éªŒè¯&lt;code&gt;state&lt;/code&gt;æˆåŠŸï¼Œå°†&lt;code&gt;appid &amp;amp; code &amp;amp; secret&lt;/code&gt;å‘é€è‡³&lt;code&gt;AcWingæœåŠ¡å™¨&lt;/code&gt;ï¼Œç”³è¯·æˆæƒä»¤ç‰Œ&lt;code&gt;access_token&lt;/code&gt;å’Œç”¨æˆ·çš„&lt;code&gt;openid&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è‹¥ç”³è¯·ä»¤ç‰ŒæˆåŠŸï¼Œå°†&lt;code&gt;access_token &amp;amp; openid&lt;/code&gt;å‘é€è‡³&lt;code&gt;AcWingæœåŠ¡å™¨&lt;/code&gt;ï¼Œå¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ›å»ºå¹¶ç™»å½•ç”¨æˆ·ï¼Œæœ€åé‡å®šå‘è‡³åˆå§‹ç•Œé¢&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;acappç«¯acwingä¸€é”®ç™»å½•à®&#34;&gt;AcAppç«¯AcWingä¸€é”®ç™»å½•à®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/blog/content/12467/&#34;&gt;6.3 AcAppç«¯AcWingä¸€é”®ç™»å½• | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/79365/&#34;&gt;6.3 ä¸Šè¯¾ç¬”è®° | Andrew1729&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/video/3566/&#34;&gt;6.3 Acappç«¯AcWingä¸€é”®ç™»å½• | Vedio&lt;/a&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Oauth2ä¸€é”®æˆæƒç™»å½•çš„åŸºæœ¬åŸç†&lt;/strong&gt;ï¼š$10mâ€”â€”12m20sâ€”â€”16m35sâ€”â€”18m$&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Oauth2ä¸€é”®æˆæƒç™»å½•çš„ä»£ç å®ç°&lt;/strong&gt;ï¼š$19m25sâ€”â€”21mâ€”â€”23m25sâ€”â€”34m29sâ€”â€”42m10s$&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id=&#34;å®ç°è”æœºå¯¹æˆ˜à®&#34;&gt;å®ç°è”æœºå¯¹æˆ˜à®&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/3357332/&#34;&gt;7. å®ç°è”æœºå¯¹æˆ˜ | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/89506/&#34;&gt;7.1 ä¸Šè¯¾ç¬”è®° | å¤§èœç‹—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/88801/&#34;&gt;7.2 ä¸Šè¯¾ç¬”è®° | èŠèŠ±&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ç»Ÿä¸€é•¿åº¦å•ä½&#34;&gt;ç»Ÿä¸€é•¿åº¦å•ä½&lt;/h2&gt;
&lt;p&gt;ç”±äºè”æœºå¯¹æˆ˜çš„æ—¶å€™ï¼Œæ¯ä¸ªç”¨æˆ·çš„å®¢æˆ·ç«¯é•¿å®½ä¸ä¸€æ ·&lt;/p&gt;
&lt;p&gt;åœ¨ä¹‹å‰å®Œæˆçš„æ¸¸æˆç•Œé¢é‡Œï¼Œæˆ‘ä»¬ä¼šæ ¹æ®å½“å‰å®¢æˆ·ç«¯çš„å¤§å°ï¼Œè¿›è¡Œæ¸²æŸ“&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯åœ¨è”æœºå¯¹æˆ˜çš„æ—¶å€™ï¼Œåº”å½“è®©æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ä¿æŒåŒæ­¥æ‰å¯ä»¥&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰ï¼Œå°±å¼•å…¥äº† &lt;strong&gt;ç»Ÿä¸€é•¿åº¦å•ä½&lt;/strong&gt; çš„ç›®æ ‡&lt;/p&gt;
&lt;h3 id=&#34;åœ°å›¾æ¸²æŸ“&#34;&gt;åœ°å›¾æ¸²æŸ“&lt;/h3&gt;
&lt;h4 id=&#34;åœ°å›¾-169-ç­‰æ¯”ä¾‹ç¼©æ”¾&#34;&gt;åœ°å›¾ 16:9 ç­‰æ¯”ä¾‹ç¼©æ”¾&lt;/h4&gt;
&lt;p&gt;å®ç°é€»è¾‘ï¼šæ ¹æ®å½“å‰ç”¨æˆ·çš„å®¢æˆ·ç«¯å¤§å°ï¼Œç»Ÿä¸€æ¸²æŸ“æˆ &lt;strong&gt;16:9&lt;/strong&gt; çš„æ¸¸æˆç•Œé¢ï¼Œä¸”éšç€ç”¨æˆ·è°ƒæ•´çª—å£å¤§å°ï¼Œä¹ŸåŠ¨æ€è°ƒæ•´&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGamePlayground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(root) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root.$ac_game.append(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground);&lt;span style=&#34;color:#007f7f&#34;&gt;// æœªæ¥å¯èƒ½ä¼šå¤šæ¬¡ show å› æ­¤æŠŠåˆ›å»ºåœºæ™¯æŒªåˆ°è¿™é‡Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        $(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;window&lt;/span&gt;).resize(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.resize();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    resize() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.width();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.height();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; unit = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.min(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;16&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;9&lt;/span&gt;);  &lt;span style=&#34;color:#007f7f&#34;&gt;// ä»¥æœ€å°çš„ä½œä¸ºåŸºå‡†ï¼Œæ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width = unit * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;16&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height = unit * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;9&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.resize();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.scale = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.height;   &lt;span style=&#34;color:#007f7f&#34;&gt;// resizeæ—¶ï¼Œå…¶ä»–å…ƒç´ çš„æ¸²æŸ“å¤§å°éƒ½ä»¥å½“å‰æ¸²æŸ“çš„é«˜åº¦ä¸ºåŸºå‡†ï¼Œå­˜ä¸º scale å˜é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.game_map) &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.game_map.resize();  &lt;span style=&#34;color:#007f7f&#34;&gt;//å¦‚æœæ­¤æ—¶åœ°å›¾å·²åˆ›å»ºï¼Œåˆ™resizeä¸€ä¸‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show() {    &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€ playground ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$playground.show();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.resize();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;js/src/playground/game_map/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; GameMap &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    resize() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.width = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.height = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;åœ°å›¾å±…ä¸­&#34;&gt;åœ°å›¾å±…ä¸­&lt;/h4&gt;
&lt;p&gt;ç›´æ¥æŠŠ &lt;code&gt;canvas&lt;/code&gt; å…ƒç´ ï¼Œç”¨ç›¸å¯¹ä½ç½®å±…ä¸­å³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;css/game.css&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-playground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f00&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;background-color&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;grey&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.ac-game-playground &amp;gt; &lt;span style=&#34;font-weight:bold&#34;&gt;canvas&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;position&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;relative&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;top&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;left&lt;/span&gt;: &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;transform&lt;/span&gt;: &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;translate&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;-50&lt;/span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;%&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;è§£å†³åœ°å›¾-resize-æ—¶ä¼šå‡ºç°æ¸å˜æˆé»‘è‰²çš„æƒ…å†µ&#34;&gt;è§£å†³åœ°å›¾ resize æ—¶ï¼Œä¼šå‡ºç°æ¸å˜æˆé»‘è‰²çš„æƒ…å†µ&lt;/h4&gt;
&lt;p&gt;åŸç”±æ˜¯å› ä¸ºæˆ‘ä»¬çš„å®ç°é€»è¾‘æ˜¯ï¼šæ¯å¸§ä¼šæ¸²æŸ“ä¸€å±‚åŠé€æ˜çš„é»‘è‰²èƒŒæ™¯&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±é€ å°±äº†ä¸€å¼€å§‹ä¼šå‡ºç°ç°å±çš„æƒ…å†µï¼Œè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œç›´æ¥ resize å®Œï¼Œå¼ºåˆ¶æ¶‚ä¸€å±‚ä¸é€æ˜çš„é»‘è‰²å³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/game_map/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; GameMap &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    resize() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.width = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.height = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;rgba(0, 0, 0, 1)&amp;#34;&lt;/span&gt;;    &lt;span style=&#34;color:#007f7f&#34;&gt;// resize å®Œï¼Œæ¶‚ä¸€å±‚ä¸é€æ˜çš„å³å¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillRect(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.width, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.canvas.height);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å…ƒç´ æ¸²æŸ“&#34;&gt;å…ƒç´ æ¸²æŸ“&lt;/h3&gt;
&lt;p&gt;åœ°å›¾éšç€å°ºå¯¸ç­‰æ¯”ä¾‹æ”¾å¤§ç¼©å°çš„åŒæ—¶ï¼Œåœ°å›¾å†…çš„å…¶ä»–å…ƒç´ ä¹Ÿåº”ä¸èƒŒæ™¯ä¸€åŒç­‰æ¯”ä¾‹æ”¾å¤§ç¼©å°&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€æŠŠå…ƒç´ å…¨éƒ¨è®¾ä¸ºç›¸å¯¹å¤§å°å³å¯ï¼Œç”¨æˆ‘ä»¬å…ˆå‰è®¾ç½®çš„ playground.scale å€¼å³å¯&lt;/p&gt;
&lt;h4 id=&#34;ç©å®¶-player&#34;&gt;ç©å®¶ Player&lt;/h4&gt;
&lt;p&gt;åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè½¬ä¸ºä¼ é€’ &lt;strong&gt;scale&lt;/strong&gt; çš„æ¯”ä¾‹å€¼&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGamePlayground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show() {    &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€ playground ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;white&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;true&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.get_random_color(), &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Player {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    start() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; tx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; ty = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.game_map.$canvas.mousedown(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;3&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                outer.move_to((e.clientX - rect.left) / outer.playground.scale, (e.clientY - rect.top) / outer.playground.scale);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (e.which === &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (outer.cur_skill === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;fireball&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    outer.shoot_fireball((e.clientX - rect.left) / outer.playground.scale, (e.clientY - rect.top) / outer.playground.scale);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    shoot_fireball(tx, ty) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; x = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x, y = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; radius = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.01&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; angle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.atan2(ty - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y, tx - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; vx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.cos(angle), vy = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.sin(angle);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; color = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;orange&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; speed = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; move_length = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; damage = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.01&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; FireBall(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, x, y, radius, vx, vy, color, speed, move_length, damage);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.update_move();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.render();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    update_move() { &lt;span style=&#34;color:#007f7f&#34;&gt;// æ›´æ–°ç©å®¶ç§»åŠ¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (!&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me &amp;amp;&amp;amp; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.spent_time &amp;gt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;4&lt;/span&gt; &amp;amp;&amp;amp; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;180&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.damage_speed &amp;gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.move_length &amp;lt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.eps) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (!&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; tx = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.width / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; ty = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.height / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; scale = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.is_me) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.drawImage(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.img, (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius) * scale, (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y - &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius) * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * scale);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç«çƒ-fireball&#34;&gt;ç«çƒ Fireball&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/skill/fireball/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Fireball {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; scale = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fill();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ç²’å­-particle&#34;&gt;ç²’å­ Particle&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/particle/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Particle {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    render() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; scale = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.playground.scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.beginPath();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.arc(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.x * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.y * scale, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.radius * scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; * &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.PI, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;false&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fillStyle = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.color;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ctx.fill();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å¢åŠ è”æœºå¯¹æˆ˜æ¨¡å¼&#34;&gt;å¢åŠ â€œè”æœºå¯¹æˆ˜â€æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†åŒºåˆ†ï¼šç”¨æˆ·è‡ªå·±ï¼Œæœºå™¨äººï¼Œè”æœºç©å®¶&lt;/p&gt;
&lt;p&gt;éœ€è¦æŠŠ &lt;code&gt;is_me&lt;/code&gt; æ”¹æˆå­—ç¬¦ä¸²ï¼Œç”¨ä»¥è¡¨ç¤ºä¸åŒ &lt;strong&gt;Player&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;menu/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGameMenu{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    add_listening_events() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$single_mode.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;(){
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.root.playground.show(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;single mode&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.$multi_mode.click(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.hide();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            outer.root.playground.show(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;multi mode&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Playground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show(mode) {    &lt;span style=&#34;color:#007f7f&#34;&gt;// æ‰“å¼€ playground ç•Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;white&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;me&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root.settings.username, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.root.settings.photo)));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (mode === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;single mode&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;5&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players.push(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Player(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.width / &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;2&lt;/span&gt; / &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.scale, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.5&lt;/span&gt;, &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.05&lt;/span&gt;, &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.get_random_color(), &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0.15&lt;/span&gt;, &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;robot&amp;#34;&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (mode === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;multi mode&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Player &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;extends&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor(playground, x, y, radius, color, speed, character, username, photo) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.character = character;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.username = username;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.photo = photo;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.character !== &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;robot&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.img = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; Image();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.img.src = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.photo;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#007f7f&#34;&gt;// åŒç†ï¼Œæ ¹æ®å¯¹åº”çš„é€»è¾‘ï¼Œä¿®æ”¹åé¢æ‰€æœ‰çš„ is_me ä¸º character
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;django_channels&#34;&gt;Django_channels&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/bcefda55bce4&#34;&gt;è°ˆè°ˆWebsocket &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cnblogs.com/dreamroute/p/6247726.html&#34;&gt;HTTP/TCP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&#34;django_channelsæ˜¯ä»€ä¹ˆ&#34;&gt;Django_channelsæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Django_Channels æ˜¯ä¸€ä¸ªä¸ºDjango æä¾›å¼‚æ­¥æ‰©å±•çš„åº“ï¼Œé€šå¸¸ä¸»è¦ç”¨æ¥æä¾›WebSocket æ”¯æŒå’Œåå°ä»»åŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;WSS&lt;/code&gt; æ˜¯ &lt;code&gt;Web Socket&lt;/code&gt; åè®®çš„å®‰å…¨æ¨¡å¼ï¼Œæ”¯æŒ &lt;code&gt;C/S&lt;/code&gt; ä¸‹çš„åŒå‘é€šä¿¡ï¼ˆHTTPåè®®åªæ”¯æŒå•å‘é€šä¿¡ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;é…ç½®django_channels&#34;&gt;é…ç½®Django_channels&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… &lt;code&gt;channels_redis&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;pip install channels_redis
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;é…ç½® &lt;code&gt;acapp/asgi.py&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import os

from channels.auth import AuthMiddlewareStack
from channels.routing import ProtocolTypeRouter, URLRouter
from django.core.asgi import get_asgi_application
from game.routing import websocket_urlpatterns

os.environ.setdefault(&amp;#39;DJANGO_SETTINGS_MODULE&amp;#39;, &amp;#39;acapp.settings&amp;#39;)

application = ProtocolTypeRouter({
    &amp;#34;http&amp;#34;: get_asgi_application(),
    &amp;#34;websocket&amp;#34;: AuthMiddlewareStack(URLRouter(websocket_urlpatterns))
})
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;é…ç½® &lt;code&gt;acapp/settings.py&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨ &lt;code&gt;INSTALLED_APPS&lt;/code&gt; ä¸­æ·»åŠ  &lt;code&gt;channels&lt;/code&gt; ï¼Œæ·»åŠ åå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;INSTALLED_APPS = [ 
    &amp;#39;channels&amp;#39;,
    &amp;#39;game.apps.GameConfig&amp;#39;,
    &amp;#39;django.contrib.admin&amp;#39;,
    &amp;#39;django.contrib.auth&amp;#39;,
    &amp;#39;django.contrib.contenttypes&amp;#39;,
    &amp;#39;django.contrib.sessions&amp;#39;,
    &amp;#39;django.contrib.messages&amp;#39;,
    &amp;#39;django.contrib.staticfiles&amp;#39;,
]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶ååœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ASGI_APPLICATION = &amp;#39;acapp.asgi.application&amp;#39;
CHANNEL_LAYERS = {
    &amp;#34;default&amp;#34;: {
        &amp;#34;BACKEND&amp;#34;: &amp;#34;channels_redis.core.RedisChannelLayer&amp;#34;,
        &amp;#34;CONFIG&amp;#34;: {
            &amp;#34;hosts&amp;#34;: [(&amp;#34;127.0.0.1&amp;#34;, 6379)],
        },
    },
}
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;é…ç½® &lt;code&gt;game/routing.py&lt;/code&gt;
è¿™ä¸€éƒ¨åˆ†çš„ä½œç”¨ç›¸å½“äº &lt;code&gt;http&lt;/code&gt; çš„ &lt;code&gt;urls&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.urls import path

websocket_urlpatterns = [
]
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;ç¼–å†™ &lt;code&gt;game/consumers&lt;/code&gt;
è¿™ä¸€éƒ¨åˆ†çš„ä½œç”¨ç›¸å½“äº &lt;code&gt;http&lt;/code&gt; çš„ &lt;code&gt;views&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å‚è€ƒç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from channels.generic.websocket import AsyncWebsocketConsumer
import json

class MultiPlayer(AsyncWebsocketConsumer):
    async def connect(self):
        await self.accept()
        print(&amp;#39;accept&amp;#39;)

        self.room_name = &amp;#34;room&amp;#34;
        await self.channel_layer.group_add(self.room_name, self.channel_name)

    async def disconnect(self, close_code):
        print(&amp;#39;disconnect&amp;#39;)
        await self.channel_layer.group_discard(self.room_name, self.channel_name);


    async def receive(self, text_data):
        data = json.loads(text_data)
        print(data)
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;å¯åŠ¨ &lt;code&gt;django_channels&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨ &lt;code&gt;~/acapp&lt;/code&gt; ç›®å½•ä¸‹æ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;daphne -b 0.0.0.0 -p 5015 acapp.asgi:application
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;å»ºç«‹ &lt;strong&gt;WSS&lt;/strong&gt; è¿æ¥&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;game/routing.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.urls import path
from game.consumers.multiplayer.index import MultiPlayer

websocket_urlpatterns = [
    path(&amp;#34;wss/multiplayer/&amp;#34;, MultiPlayer.as_asgi(), name=&amp;#34;wss_multiplayer&amp;#34;),
]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    ...
    show(mode) {    // æ‰“å¼€ playground ç•Œé¢
        ...
        if (mode === &amp;#34;single mode&amp;#34;) {
            ...
        } else if (mode === &amp;#34;multi mode&amp;#34;) {
            this.mps = new MultiPlayerSocket(this);
            this.mps.ws.onopen = function() {
                outer.mps.send_create_player();
            };
        }

    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    constructor(playground) {
        this.playground = playground;
        this.ws = new WebSocket(&amp;#34;wss://app1117.acapp.acwing.com.cn/wss/multiplayer/&amp;#34;);
        this.start();
    }
    start() {
    }
    send_create_player() {
        this.ws.send(JSON.stringify({
            &amp;#39;message&amp;#39;: &amp;#39;hello acapp server&amp;#39;,
        }));
    }
    receive_create_player() {
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ç¼–å†™åŒæ­¥å‡½æ•°&#34;&gt;ç¼–å†™åŒæ­¥å‡½æ•°&lt;/h2&gt;
&lt;p&gt;ä¸€å…±éœ€è¦å®Œæˆå››ä¸ªé€šä¿¡ï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆé€šä¿¡çš„é€»è¾‘åŸºæœ¬éƒ½æ˜¯å…ˆåœ¨æœ¬åœ°å®Œæˆï¼Œç„¶åå°†ç»“æœè¿”å›ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å†åˆ†å‘ç»™å…¶ä»–å®¢æˆ·ç«¯ï¼Œè¾¾æˆåŒæ­¥ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;create-player&lt;/strong&gt; : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œåˆ›å»ºä¸€ä¸ªæ–°åŠ å…¥çš„ç©å®¶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;move-to&lt;/strong&gt; : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œå°†ä¸€ä¸ªè§’è‰²ç§»åŠ¨åˆ°ä¸€ä¸ªä½ç½®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;shoot-fireball&lt;/strong&gt; : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œè®©ä¸€ä¸ªè§’è‰²å‘å°„ä¸€ä¸ªç«çƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;attack&lt;/strong&gt; : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œè®©ä¸€ä¸ªè§’è‰²è¢«æ”»å‡»&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸€åœºæ¸¸æˆé‡Œï¼Œæ‰€æœ‰çš„å…ƒç´ ï¼ˆç©å®¶ï¼Œç«çƒç­‰ï¼‰éƒ½éœ€è¦å”¯ä¸€çš„æ ‡è¯†ï¼Œæ¥æ–¹ä¾¿åŒæ­¥&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹ä¸€ä¸‹æ¸¸æˆå¼•æ“ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ éƒ½åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„å”¯ä¸€æ ‡è¯†&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/ac-game-object/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGameObject {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    constructor() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.uuid = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.create_uuid();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    create_uuid() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; res = &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; i = &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;8&lt;/span&gt;; i ++ ) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; x = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;parseInt&lt;/span&gt;(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.floor(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;Math&lt;/span&gt;.random() * &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;10&lt;/span&gt;));   &lt;span style=&#34;color:#007f7f&#34;&gt;// [0, 10)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#007f7f&#34;&gt;&lt;/span&gt;            res += x;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; res;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; AcGamePlayground {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    show(mode) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (mode === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;single mode&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        } &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;if&lt;/span&gt; (mode === &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;multi mode&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.mps = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;new&lt;/span&gt; MultiPlayerSocket(&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.mps.uuid = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.players[&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;].uuid;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.mps.ws.onopen = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;function&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                outer.mps.send_create_player();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; MultiPlayerSocket {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    send_create_player() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;let&lt;/span&gt; outer = &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;this&lt;/span&gt;.ws.send(JSON.stringify({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;event&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;create_player&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;uuid&amp;#39;&lt;/span&gt;: outer.uuid,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ç€ï¼Œåˆ©ç”¨é€šä¿¡çš„æ–¹å¼ï¼Œä½¿å¾—æ¯ä¸ªçª—å£å†…ï¼Œé€»è¾‘ä¸Šç›¸åŒçš„å…ƒç´ ï¼Œå…¶ &lt;code&gt;uid&lt;/code&gt; ä¹Ÿç›¸åŒå³å¯&lt;/p&gt;
&lt;p&gt;åŸåˆ™æ˜¯ï¼šå“ªä¸ªçª—å£åˆ›å»ºçš„å…ƒç´ ï¼Œå°±ç”¨ä»–åˆ›å»ºæ—¶çš„ &lt;code&gt;uid&lt;/code&gt; ä½œä¸ºæ•´ä¸ªé¡¹ç›®è¿è¡Œæ—¶çš„ &lt;code&gt;uid&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬æ‰“ç®—ç”¨ &lt;strong&gt;redis&lt;/strong&gt; æ¥å®ç°å­˜å‚¨æ¯ä¸ªæ¸¸æˆæˆ¿é—´ï¼Œä»¥åŠå…ƒç´ ï¼Œå¹¶åˆå§‹é»˜è®¤è®¾å®šæ¯ä¸ªæˆ¿é—´ä¸Šé™ 3 äºº&lt;/p&gt;
&lt;h3 id=&#34;create-player&#34;&gt;create-player&lt;/h3&gt;
&lt;h4 id=&#34;å‰ç«¯&#34;&gt;å‰ç«¯&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;game/static/js/src/playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    constructor(playground) {
        this.playground = playground;

        this.ws = new WebSocket(&amp;#34;wss://app1117.acapp.acwing.com.cn/wss/multiplayer/&amp;#34;);

        this.start();
    }
    start() {
        this.receive();
    }
    receive() {
        let outer = this;
        this.ws.onmessage = function(e) {
            let data = JSON.parse(e.data);
            let uuid = data.uuid;
            if (uuid === outer.uuid) return false;

            let event = data.event;
            if (event === &amp;#34;create_player&amp;#34;) {
                outer.receive_create_player(uuid, data.username, data.photo);
            }
        };
    }
    send_create_player(username, photo) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &amp;#39;event&amp;#39;: &amp;#39;create_player&amp;#39;,
            &amp;#39;uuid&amp;#39;: outer.uuid,
            &amp;#39;username&amp;#39;: username,
            &amp;#39;photo&amp;#39;: photo,
        }));
    }
    receive_create_player(uuid, username, photo) {
        let player = new Player(
            this.playground,
            this.playground.width / 2 / this.playground.scale,
            0.5,
            0.05,
            &amp;#34;white&amp;#34;,
            0.15,
            &amp;#34;enemy&amp;#34;,
            username,
            photo,
        );
        player.uuid = uuid;
        this.playground.players.push(player);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åç«¯&#34;&gt;åç«¯&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;settings.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
ROOM_CAPACITY = 3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from channels.generic.websocket import AsyncWebsocketConsumer
import json
from django.conf import settings
from django.core.cache import cache

class MultiPlayer(AsyncWebsocketConsumer):
    async def connect(self):
        self.room_name = None
        for i in range(1000):   # ä¸Šé™ 1k ä¸ªæˆ¿é—´
            name = &amp;#34;room-%d&amp;#34; % (i)
            # å½“å‰æˆ¿é—´ä¸ºç©ºï¼Œæˆ–æˆ¿é—´å†…ç©å®¶äººæ•°ä¸åˆ° ROOM_CAPACITY
            if not cache.has_key(name) or len(cache.get(name)) &amp;lt; settings.ROOM_CAPACITY:
                self.room_name = name
                break
        if not self.room_name:
            return

        await self.accept()

        if not cache.has_key(self.room_name):   # å¦‚æœæˆ¿é—´ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºæˆ¿é—´
            cache.set(self.room_name, [], 3600) # æœ‰æ•ˆæœŸ 1 å°æ—¶

        for player in cache.get(self.room_name):    # å¯¹è¯¥æˆ¿é—´å·²å­˜åœ¨çš„ç”¨æˆ·ï¼Œåˆ›å»ºåˆ°æ–°åŠ å…¥çš„ç”¨æˆ·çš„æ¸¸æˆç•Œé¢ä¸­
            await self.send(text_data=json.dumps({
                &amp;#39;event&amp;#39;: &amp;#34;create_player&amp;#34;,
                &amp;#39;uuid&amp;#39;: player[&amp;#39;uuid&amp;#39;],
                &amp;#39;username&amp;#39;: player[&amp;#39;username&amp;#39;],
                &amp;#39;photo&amp;#39;: player[&amp;#39;photo&amp;#39;],
            }))
        await self.channel_layer.group_add(self.room_name, self.channel_name)

    async def disconnect(self, close_code):
        print(&amp;#39;disconnect&amp;#39;)
        await self.channel_layer.group_discard(self.room_name, self.channel_name);

    async def create_player(self, data):
        players = cache.get(self.room_name)
        players.append({
            &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
            &amp;#39;username&amp;#39;: data[&amp;#39;username&amp;#39;],
            &amp;#39;photo&amp;#39;: data[&amp;#39;photo&amp;#39;],
        })
        cache.set(self.room_name, players, 3600) # æ›´æ–°æˆ¿é—´å­˜åœ¨æ—¶é—´ä¸º 1 å°æ—¶ï¼ˆæœ€åä¸€æ¬¡åŠ å…¥ä¸€åç©å®¶æ—¶ï¼‰
        # ç¾¤å‘æ¶ˆæ¯æ›´æ–°
        await self.channel_layer.group_send(
            self.room_name,
            {
                &amp;#39;type&amp;#39;: &amp;#34;group_create_player&amp;#34;,  # ç¾¤å‘è¯¥æ¶ˆæ¯åï¼Œä½œä¸ºå®¢æˆ·ç«¯æ¥å—è€…ï¼Œæ‰€æ¥å—ç”¨çš„å‡½æ•°å
                &amp;#39;event&amp;#39;: &amp;#34;create_player&amp;#34;,
                &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
                &amp;#39;username&amp;#39;: data[&amp;#39;username&amp;#39;],
                &amp;#39;photo&amp;#39;: data[&amp;#39;photo&amp;#39;],
            }
        )
    async def group_create_player(self, data):
        await self.send(text_data=json.dumps(data))

    async def receive(self, text_data):
        data = json.loads(text_data)
        event = data[&amp;#39;event&amp;#39;]
        if event == &amp;#34;create_player&amp;#34;:
            await self.create_player(data)
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;redis-è°ƒè¯•è¯­å¥&#34;&gt;redis è°ƒè¯•è¯­å¥&lt;/h4&gt;
&lt;p&gt;æ‰“å¼€ shell äº¤äº’&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;python3 manage.py shell
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åç”¨ py3 äº¤äº’è¿›è¡Œ cache è°ƒè¯•&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from django.core.cache import cache

def clear():
    for key in cache.keys(&amp;#39;*&amp;#39;):
        cache.delete(key)

cache.keys(&amp;#39;*&amp;#39;) # æŸ¥è¯¢å½“å‰ redis ä¸­æ‰€æœ‰ key

cache.get(&amp;#39;room-1&amp;#39;) # æŸ¥è¯¢å½“å‰ redis ä¸­ key ä¸º room-1 çš„å€¼
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¾¿å¯ä»¥åœ¨ä¸åŒçš„çª—å£æ¸²æŸ“åŒä¸€æ‰¹ç©å®¶äº†&lt;/p&gt;
&lt;h3 id=&#34;move-to&#34;&gt;move-to&lt;/h3&gt;
&lt;h4 id=&#34;å‰ç«¯-1&#34;&gt;å‰ç«¯&lt;/h4&gt;
&lt;p&gt;å®¢æˆ·ç«¯çš„é€šä¿¡çš„å‘å‡ºå’Œæ¥å—å‡½æ•°&lt;/p&gt;
&lt;p&gt;&lt;code&gt;game/static/js/src/playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    ...
    receive() {
        let outer = this;
        this.ws.onmessage = function(e) {
            ...
            else if (event === &amp;#34;move_to&amp;#34;) {
                outer.receive_move_to(uuid, data.tx, data.ty);
            }
        };
    }
    send_move_to(tx, ty) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &amp;#39;event&amp;#39;: &amp;#39;move_to&amp;#39;,
            &amp;#39;uuid&amp;#39;: outer.uuid,
            &amp;#39;tx&amp;#39;: tx,
            &amp;#39;ty&amp;#39;: ty,
        }));
    }
    get_player(uuid) {
        let players = this.playground.players;
        for (let i = 0; i &amp;lt; players.length; i ++ ) {
            let player = players[i];
            if (player.uuid === uuid) {
                return player;
            }
        }
        return null;
    }
    receive_move_to(uuid, tx, ty) {
        let player = this.get_player(uuid);
        if (player) {
            player.move_to(tx, ty);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ºäº†è®©æ¸¸æˆç•Œé¢ä¸­å¯¹äºè¦ç§»åŠ¨çš„å…ƒç´ åšå‡ºç§»åŠ¨åŠ¨ä½œï¼Œéœ€è¦å¯¹ &lt;code&gt;move_to&lt;/code&gt; å‡½æ•°åšå‡ºä¸€äº›ä¿®æ”¹&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦æ ‡è¯†å‡ºå½“å‰ä¸ºå¤šäººæ¨¡å¼ï¼Œç„¶åæ¨¡å¼ä¸ºå¤šäººæ¨¡å¼æ—¶ï¼Œæ¯æ¬¡ç§»åŠ¨éƒ½ä¼šè§¦å‘ä¸€æ¬¡é€šä¿¡&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    ...
    show(mode) {
        ...
        this.mode = mode;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    ...
    add_listening_events() {
      ...
       this.playground.game_map.$canvas.mousedown(function(e) {
           ...
           if (e.which === 3) {
               let tx = (e.clientX - rect.left) / outer.playground.scale;
               let ty = (e.clientY - rect.top) / outer.playground.scale;
               outer.move_to(tx, ty);
               if (outer.playground.mode === &amp;#34;multi mode&amp;#34;) {
                   outer.playground.mps.send_move_to(tx, ty);
               }
           }
           ...
   }
   ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åç«¯-1&#34;&gt;åç«¯&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;async def move_to(self, data):
    await self.channel_layer.group_send(
        self.room_name,
        {
            &amp;#39;type&amp;#39;: &amp;#34;group_send_event&amp;#34;,
            &amp;#39;event&amp;#39;: &amp;#34;move_to&amp;#34;,
            &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
            &amp;#39;tx&amp;#39;: data[&amp;#39;tx&amp;#39;],
            &amp;#39;ty&amp;#39;: data[&amp;#39;ty&amp;#39;],
        }
    )

async def group_send_event(self, data):
    await self.send(text_data=json.dumps(data))

async def receive(self, text_data):
    data = json.loads(text_data)
    event = data[&amp;#39;event&amp;#39;]
    if event == &amp;#34;create_player&amp;#34;:
        await self.create_player(data)
    elif event == &amp;#34;move_to&amp;#34;:
        await self.move_to(data)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;shoot-fireball&#34;&gt;shoot-fireball&lt;/h3&gt;
&lt;h4 id=&#34;å‰ç«¯-2&#34;&gt;å‰ç«¯&lt;/h4&gt;
&lt;p&gt;ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜ä¸€ä¸ªç©å®¶å‘å°„çš„æ‰€æœ‰ç«çƒï¼Œä»¥ä¾¿äºå­å¼¹æ¶ˆå¤±æ—¶ï¼Œå°†ä»–ä»¬æ‰¾å‡ºå¹¶å¯¹åº”åˆ æ‰&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    constructor(playground, x, y, radius, color, speed, character, username, photo) {
        ...
        this.fireballs = [];    // å­˜è¯¥ç”¨æˆ·å‘å°„çš„æ‰€æœ‰ç«çƒ
    }
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            ...
            else if (e.which === 1) {
                let tx = (e.clientX - rect.left) / outer.playground.scale;
                let ty = (e.clientY - rect.top) / outer.playground.scale;
                if (outer.cur_skill === &amp;#34;fireball&amp;#34;) {
                    let fireball = outer.shoot_fireball(tx, ty);
                    if (outer.playground.mode === &amp;#34;multi mode&amp;#34;) {
                        outer.playground.mps.send_shoot_fireball(tx, ty, fireball.uuid);
                    }
                }
            }
            ...
        });
        $(window).keydown(function(e) {
            if (e.which === 81) {           // é”®ç›˜æŒ‰ä¸‹qäº‹ä»¶
                outer.cur_skill = &amp;#34;fireball&amp;#34;;
                return false;
            }
        });
    }
    ...
    shoot_fireball(tx, ty) {
        ...

        let fireball = new FireBall(this.playground, this, x, y, radius, vx, vy, color, speed, move_length, damage);
        this.fireballs.push(fireball);
        return fireball;
    }
    destroy_fireball(uuid) {
        for (let i = 0; i &amp;lt; this.fireballs.length; i ++ ) {
            let fireball = this.fireballs[i];
            if (fireball.uuid == uuid) {
                fireball.destroy();
                break;
            }
        }
    }
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/skill/fireball/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class FireBall extends AcGameObject {
    ...
    on_destory() {
        let fireballs = this.player.fireballs;
        for (let i = 0; i &amp;lt; fireballs.length; i ++ ) {
            if (fireballs[i] === this) {
                fireballs.splice(i, 1);
                break;
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;game/static/js/src/playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    ...
    send_shoot_fireball(tx, ty, ball_uuid) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &amp;#39;event&amp;#39;: &amp;#39;move_to&amp;#39;,
            &amp;#39;uuid&amp;#39;: outer.uuid,
            &amp;#39;tx&amp;#39;: tx,
            &amp;#39;ty&amp;#39;: ty,
            &amp;#39;ball_uuid&amp;#39;: ball_uuid;
        }));
    }
    receive_shoot_fireball(uuid, tx, ty, ball_uuid) {
        let player = this.get_player(uuid);
        if (player) {
            let fireball = player.shoot_fireball(tx, ty);
            fireball.uuid = ball_uuid;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åç«¯-2&#34;&gt;åç«¯&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def shoot_fireball(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &amp;#39;type&amp;#39;: &amp;#34;group_send_event&amp;#34;,
                &amp;#39;event&amp;#39;: &amp;#34;shoot_fireball&amp;#34;,
                &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
                &amp;#39;tx&amp;#39;: data[&amp;#39;tx&amp;#39;],
                &amp;#39;ty&amp;#39;: data[&amp;#39;ty&amp;#39;],
                &amp;#39;ball_uuid&amp;#39;: data[&amp;#39;ball_uuid&amp;#39;],
            }
        )
    async def receive(self, text_data):
        ...
        elif event == &amp;#34;shoot_fireball&amp;#34;:
            await self.shoot_fireball(data)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;attack&#34;&gt;attack&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†åªè®©ä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œæ”»å‡»å‘½ä¸­çš„åˆ¤æ–­ï¼Œå› æ­¤åªæœ‰å‘å‡ºæ–¹çš„ç«çƒæ‰åšç¢°æ’æ£€æµ‹&lt;/p&gt;
&lt;p&gt;å…¶ä»–å®¢æˆ·ç«¯å¯¹äºè¯¥ç«çƒåªæœ‰åŠ¨ç”»æ•ˆæœ&lt;/p&gt;
&lt;p&gt;åˆç”±äºç¢°æ’æ£€æµ‹æ˜¯åœ¨ä¸€å°å®¢æˆ·ç«¯ä¸Šè¿›è¡Œçš„ï¼Œå› æ­¤å¤šç«¯ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨åŒæ­¥ä¸Šçš„å»¶è¿Ÿ&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤çš„è§£å†³æ–¹æ³•æ˜¯ï¼šç¢°æ’æ£€æµ‹æˆåŠŸæ—¶ï¼Œå¼ºåˆ¶æŠŠè¢«å‡»ä¸­ç©å®¶ç§»åŠ¨åˆ°å‘èµ·æ–¹å®¢æˆ·ç«¯ä¸­çš„ä½ç½®ï¼Œä»¥é¿å…å‡»ä¸­å»¶è¿Ÿä¸Šå‘ç”Ÿçš„äº‹æƒ…&lt;/p&gt;
&lt;h4 id=&#34;å‰ç«¯-3&#34;&gt;å‰ç«¯&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;playground/skill/fireball/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class FireBall extends AcGameObject {
    update() {
        if (this.move_length &amp;lt; this.eps) {
            this.destroy();
            return false;
        }
        this.update_move();

        if (this.player.character !== &amp;#34;enemy&amp;#34;) {
            this.update_attack();
        }
        this.render();
    }
    attack(player) {
        ...
        if (this.playground.mode === &amp;#34;multi mode&amp;#34;) {
            this.playground.mps.send_attack(player.uuid, player.x, player.y, angle, this.damage, this.uuid);
        }
        ...
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    ...
    receive_attack(x, y, angle, damage, ball_uuid, attacker) {
        attacker.destroy_fireball(ball_uuid);
        this.x = x;
        this.y = y;
        this.is_attacked(angle, damage);
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;game/static/js/src/playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    ...
    send_attack(attackee_uuid, x, y, angle, damage, ball_uuid) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &amp;#39;event&amp;#39;: &amp;#34;attack&amp;#34;,
            &amp;#39;uuid&amp;#39;: outer.uuid,
            &amp;#39;attackee_uuid&amp;#39;: attackee_uuid,
            &amp;#39;x&amp;#39;: x,
            &amp;#39;y&amp;#39;: y,
            &amp;#39;angle&amp;#39;: angle,
            &amp;#39;damage&amp;#39;: damage,
            &amp;#39;ball_uuid&amp;#39;: ball_uuid,
        }));
    }
    receive_attack(uuid, attackee_uuid, x, y, angle, damage, ball_uuid) {
        let attacker = this.get_player(uuid);
        let attackee = this.get_player(attackee_uuid);
        if (attacker &amp;amp;&amp;amp; attackee) {
            attackee.receive_attack(x, y, angle, damage, ball_uuid, attacker);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;åç«¯-3&#34;&gt;åç«¯&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def attack(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &amp;#39;type&amp;#39;: &amp;#34;group_send_event&amp;#34;,
                &amp;#39;event&amp;#39;: &amp;#34;attack&amp;#34;,
                &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
                &amp;#39;x&amp;#39;: data[&amp;#39;x&amp;#39;],
                &amp;#39;y&amp;#39;: data[&amp;#39;y&amp;#39;],
                &amp;#39;angle&amp;#39;: data[&amp;#39;angle&amp;#39;],
                &amp;#39;damage&amp;#39;: data[&amp;#39;damage&amp;#39;],
                &amp;#39;ball_uuid&amp;#39;: data[&amp;#39;ball_uuid&amp;#39;],
            }
        )
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ¸¸æˆçš„å°ä¼˜åŒ–&#34;&gt;æ¸¸æˆçš„å°ä¼˜åŒ–&lt;/h2&gt;
&lt;h3 id=&#34;å¤šäººæ¨¡å¼ä¸‹æ¸¸æˆæ²¡æœ‰å¼€å§‹å‰ç©å®¶ä¸å¯ä»¥ç§»åŠ¨&#34;&gt;å¤šäººæ¨¡å¼ä¸‹æ¸¸æˆæ²¡æœ‰å¼€å§‹å‰ï¼Œç©å®¶ä¸å¯ä»¥ç§»åŠ¨&lt;/h3&gt;
&lt;p&gt;ä¸ºæ­¤æˆ‘ä»¬å…ˆå¼•å…¥ä¸€ä¸ªçŠ¶æ€æœºï¼š&lt;code&gt;&#39;waiting&#39; -&amp;gt; &#39;fighting&#39; -&amp;gt; &#39;over&#39;&lt;/code&gt; æ¥æ ‡è¯†å½“å‰æ¸¸æˆè¿›è¡Œçš„çŠ¶æ€&lt;/p&gt;
&lt;p&gt;ç„¶åç”¨ä¸€ä¸ª &lt;code&gt;notice_board&lt;/code&gt; è®¡åˆ†æ¿åœ¨å‰ç«¯æ˜¾ç¤ºå‡ºæ¥&lt;/p&gt;
&lt;p&gt;å®ç°çš„é€»è¾‘å°±æ˜¯ï¼šæ¸¸æˆåˆå§‹æ—¶ä¸º &lt;code&gt;waiting&lt;/code&gt; çŠ¶æ€ï¼Œæˆ¿é—´å†…äººæ•°æ»¡ 3 äººæ—¶ï¼Œæ‰ä¼šè¿›å…¥ &lt;code&gt;fighting&lt;/code&gt;ï¼Œè§’è‰²æ­»äº¡æ—¶ä¸º &lt;code&gt;over&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸”å‘å°„ç«çƒï¼Œç§»åŠ¨ç­‰è¡Œä¸ºï¼Œå½“ä¸”ä»…å½“ç©å®¶çŠ¶æ€ä¸º &lt;code&gt;fighting&lt;/code&gt; æ—¶ï¼Œæ‰å¯ä»¥åš&lt;/p&gt;
&lt;p&gt;ç„¶åè®¾å®šç«çƒæŠ€èƒ½çš„ cd ä¸º 3 ç§’ï¼Œä¸”åœ¨æ¸¸æˆè¿›å…¥ &lt;code&gt;fighting&lt;/code&gt; æ—¶ï¼Œå…ˆè‡ªåŠ¨è¿›å…¥ cd çŠ¶æ€&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±å®ç°äº†åˆå§‹ 3 ç§’å†…ï¼Œä»»ä½•ç©å®¶ä¸å¯æ”»å‡»&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/notice_board/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class NoticeBoard extends AcGameObject {
    constructor(playground) {
        super();

        this.playground = playground;
        this.ctx = this.playground.game_map.ctx;
        this.text = &amp;#34;å·²å°±ç»ªï¼š0äºº&amp;#34;;
    }
    start() {
    }

    write(text) {
        this.text = text;
    }

    update() {
        this.render();
    }

    render() {
        this.ctx.font = &amp;#34;20px serif&amp;#34;;
        this.ctx.fillStyle = &amp;#34;white&amp;#34;;
        this.ctx.textAlign = &amp;#34;center&amp;#34;;
        this.ctx.fillText(this.text, this.playground.width / 2, 20);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;js/src/playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    ...
    show(mode) {
        ...
        this.state = &amp;#34;waiting&amp;#34;;     // waiting -&amp;gt; fighting -&amp;gt; over
        this.notice_board = new NoticeBoard(this);
        this.player_count = 0;
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            if (outer.playground.state !== &amp;#34;fighting&amp;#34;)
                return false;
            ...
        }
        $(window).keydown(function(e) {
            if (outer.playground.state !== &amp;#34;fighting&amp;#34;)
                return false;
            ...
        });
    }
    start() {
        this.playground.player_count ++ ;
        this.playground.notice_board.write(&amp;#34;å·²å°±ç»ªï¼š&amp;#34; + this.playground.player_count + &amp;#34;äºº&amp;#34;);
        if (this.playground.player_count &amp;gt;= 3) {
            this.playground.state = &amp;#34;fighting&amp;#34;;
            this.playground.notice_board.write(&amp;#34;Fighting&amp;#34;);
        }
        ...
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æŠ€èƒ½cd&#34;&gt;æŠ€èƒ½CD&lt;/h3&gt;
&lt;p&gt;ç»™ç«çƒæŠ€èƒ½è®¾ç½® 3s çš„ cdï¼Œå®ç°é€»è¾‘å¾ˆç®€å•ï¼Œè®¾å®šä¸€ä¸ª cool_time å˜é‡ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™å‡å»ä¸Šæ¬¡æ¸²æŸ“çš„æ—¶é—´é—´éš”&lt;/p&gt;
&lt;p&gt;ç„¶å cool_time ä¸º 0 æ—¶ï¼ŒæŠ€èƒ½æ‰å¯ä»¥æˆåŠŸé‡Šæ”¾&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¿®æ”¹å†·å´æ—¶é—´ï¼Œåªç”¨ä¿®æ”¹è‡ªå·±çš„å³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    constructor(...) {
        ...
        if (this.character === &amp;#34;me&amp;#34;) {
            this.fireball_coldtime = 3; // å•ä½ï¼šs
        }
    }
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            ...
            else if (e.which === 1) {
                ...
                if (outer.cur_skill === &amp;#34;fireball&amp;#34;) {
                    ...
                    if (outer.playground.mode === &amp;#34;multi mode&amp;#34;) {
                        outer.playground.mps.send_shoot_fireball(tx, ty, fireball.uuid);
                    }
                    outer.fireball_coldtime = 3;
                }
            }
            ...
        });
        $(window).keydown(function(e) {
            ...
            if (outer.fireball_coldtime &amp;gt;= outer.eps)
                return false;
            ...
        });
    }
    update() {
        ...
        if (this.character === &amp;#34;me&amp;#34; &amp;amp;&amp;amp; this.playground.state === &amp;#34;fighting&amp;#34;) {
            this.update_coldtime();
        }
        ...
    }
    update_coldtime() {
        this.fireball_coldtime -= this.timedelta / 1000;
        this.fireball_coldtime = Math.max(0, this.fireball_coldtime);
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç”¨å›¾ç‰‡æ¥æ¸²æŸ“æŠ€èƒ½cd&#34;&gt;ç”¨å›¾ç‰‡æ¥æ¸²æŸ“æŠ€èƒ½CD&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    constructor(...) {
        ...
        if (this.character === &amp;#34;me&amp;#34;) {
            this.fireball_coldtime = 3; // å•ä½ï¼šs
            this.fireball_img = new Image();
            this.fireball_img.src = &amp;#34;https://cdn.acwing.com/media/article/image/2021/12/02/1_9340c86053-fireball.png&amp;#34;;
        }
    }
    ...
    render() {
        ...
        if (this.character === &amp;#34;me&amp;#34; &amp;amp;&amp;amp; this.playground.state === &amp;#34;fighting&amp;#34;) {
            this.render_skill_coldtime();
        }
    }
     render_skill_coldtime() {
        let scale = this.playground.scale;
        let x = 1.5, y = 0.9, r = 0.04;

        // æ¸²æŸ“æŠ€èƒ½å›¾æ ‡
        this.ctx.save();
        this.ctx.beginPath();
        this.ctx.arc(x * scale, y * scale, r * scale, 0, Math.PI * 2, false);
        this.ctx.stroke();
        this.ctx.clip();
        this.ctx.drawImage(this.fireball_img, (x - r) * scale, (y - r) * scale, r * 2 * scale, r * 2 * scale);
        this.ctx.restore();

        // æ¸²æŸ“å†·å´æŒ‡ç¤º
        if (this.fireball_coldtime &amp;gt;= this.eps){
            this.ctx.beginPath();
            this.ctx.moveTo(x * scale, y * scale);
            this.ctx.arc(x * scale, y * scale, r * scale, 0 - Math.PI / 2, Math.PI * 2 * (1 - this.fireball_coldtime / 3) - Math.PI / 2, true);
            this.ctx.lineTo(x * scale, y * scale);
            this.ctx.fillStyle = &amp;#34;rgba(0, 0, 255, 0.6)&amp;#34;;
            this.ctx.fill();
        }
    }
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ·»åŠ ä¸€ä¸ªé—ªç°æŠ€èƒ½&#34;&gt;æ·»åŠ ä¸€ä¸ªé—ªç°æŠ€èƒ½&lt;/h3&gt;
&lt;h4 id=&#34;å•æœºéƒ¨åˆ†&#34;&gt;å•æœºéƒ¨åˆ†&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;js/src/playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    constructor(...) {
        ...
        if (this.character === &amp;#34;me&amp;#34;) {
            ...
            this.blink_coldtime = 5;
            this.blink_img = new Image();
            this.blink_img.src = &amp;#34;https://cdn.acwing.com/media/article/image/2021/12/02/1_daccabdc53-blink.png&amp;#34;;
        }
    }
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            ...
            else if (e.which === 1) {
                ...
                else if (outer.cur_skill === &amp;#34;blink&amp;#34;) {
                    outer.blink(tx, ty);
                    // åŒæ­¥å‡½æ•°
                    if (outer.playground.mode === &amp;#34;multi mode&amp;#34;) {
                        outer.playground.mps.send_blink(tx, ty);
                    }
                    outer.blink_coldtime = 5;
                }
            }
            outer.cur_skill = null; // æ¸…ç©ºå½“å‰æŠ€èƒ½
        });
        $(window).keydown(function(e) {
            ...
            else if (e.which === 70) {    // fé”®
                if (outer.blink_coldtime &amp;gt;= outer.eps) return true;
                outer.cur_skill = &amp;#34;blink&amp;#34;;
                return false;
            }
        });
    }
    ...
    blink(tx, ty) {
        let d = this.get_dist(this.x, this.y, tx, ty);
        d = Math.min(d, 0.5);
        let angle = Math.atan2(ty - this.y, tx - this.x);
        this.x += d * Math.cos(angle);
        this.y += d * Math.sin(angle);

        this.move_length = 0;   // é—ªç°å®Œåœä¸‹æ¥
    }
    ...
    render_skill_coldtime() {
        ...
        x = 1.62, y = 0.9, r = 0.04;
        // é—ªç°æŠ€èƒ½
        // æ¸²æŸ“æŠ€èƒ½å›¾æ ‡
        this.ctx.save();
        this.ctx.beginPath();
        this.ctx.arc(x * scale, y * scale, r * scale, 0, Math.PI * 2, false);
        this.ctx.stroke();
        this.ctx.clip();
        this.ctx.drawImage(this.blink_img, (x - r) * scale, (y - r) * scale, r * 2 * scale, r * 2 * scale);
        this.ctx.restore();

        // æ¸²æŸ“å†·å´æŒ‡ç¤º
        if (this.blink_coldtime &amp;gt;= this.eps){
            this.ctx.beginPath();
            this.ctx.moveTo(x * scale, y * scale);
            this.ctx.arc(x * scale, y * scale, r * scale, 0 - Math.PI / 2, Math.PI * 2 * (1 - this.blink_coldtime / 5) - Math.PI / 2, true);
            this.ctx.lineTo(x * scale, y * scale);
            this.ctx.fillStyle = &amp;#34;rgba(0, 0, 255, 0.6)&amp;#34;;
            this.ctx.fill();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;è”æœºéƒ¨åˆ†&#34;&gt;è”æœºéƒ¨åˆ†&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;game/static/js/src/playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    ...
    send_blink(tx, ty) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &amp;#39;event&amp;#39;: &amp;#34;blink&amp;#34;,
            &amp;#39;uuid&amp;#39;: outer.uuid,
            &amp;#39;tx&amp;#39;: tx,
            &amp;#39;ty&amp;#39;: ty,
        }));
    }
    receive_blink(uuid, tx, ty) {
        let player = this.get_player(uuid);
        if (player) {
            player.blink(tx, ty);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def blink(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &amp;#39;type&amp;#39;: &amp;#34;group_send_event&amp;#34;,
                &amp;#39;event&amp;#39;: &amp;#34;blink&amp;#34;,
                &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
                &amp;#39;tx&amp;#39;: data[&amp;#39;tx&amp;#39;],
                &amp;#39;ty&amp;#39;: data[&amp;#39;ty&amp;#39;],
            }
        )
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;å®ç°èŠå¤©ç³»ç»Ÿà®&#34;&gt;å®ç°èŠå¤©ç³»ç»Ÿà®&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/solution/content/89508/&#34;&gt;8.1 ä¸Šè¯¾ç¬”è®° | å¤§èœç‹—&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ä¼˜åŒ–é”®ç›˜ç»‘å®šäº‹ä»¶&#34;&gt;ä¼˜åŒ–é”®ç›˜ç»‘å®šäº‹ä»¶&lt;/h2&gt;
&lt;p&gt;è¿™éƒ¨åˆ†ç®—æ˜¯ä¹‹å‰çš„é—ç•™é—®é¢˜ï¼Œå…ˆå‰çš„ &lt;code&gt;keydown&lt;/code&gt; ç›‘å¬äº‹ä»¶ç»‘å®šåœ¨äº† &lt;code&gt;window&lt;/code&gt; ä¸Šä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨ä¸€ä¸ªæµè§ˆå™¨å†…æ‰“å¼€å¤šä¸ª &lt;code&gt;ACAPP&lt;/code&gt;ï¼Œæ­¤æ—¶æŒ‰ä¸‹é”®ä½è§¦å‘ &lt;code&gt;keydown&lt;/code&gt; äº‹ä»¶ï¼Œä¼šè¢«æµè§ˆå™¨å†…æ‰€æœ‰çš„ &lt;code&gt;ACAPP&lt;/code&gt; éƒ½æ•è·åˆ°&lt;/p&gt;
&lt;p&gt;ä¹‹å‰å½±å“ä¸å¤§ï¼Œä½†å¯¹æ­¤æ¬¡è¦å®ç°çš„èŠå¤©ç³»ç»Ÿå°±æœ‰ç€è‡´å‘½çš„å½±å“ï¼Œå³æ‰“å¼€ä¸€ä¸ª &lt;code&gt;ACAPP&lt;/code&gt; çš„èŠå¤©æ ï¼Œå…¶ä»–éƒ½ä¼šè¢«æ‰“å¼€&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰æˆ‘ä»¬è¦å°† &lt;code&gt;keydown&lt;/code&gt; ç›‘å¬äº‹ä»¶ç»‘å®šåˆ° &lt;code&gt;canvas&lt;/code&gt; ä¸Š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.keydown(function(e) {
            if (outer.playground.state !== &amp;#34;fighting&amp;#34;)
                return true;
            if (e.which === 81) {           // é”®ç›˜æŒ‰ä¸‹qäº‹ä»¶
                if (outer.fireball_coldtime &amp;gt;= outer.eps) return true;
                outer.cur_skill = &amp;#34;fireball&amp;#34;;
                return false;
            } else if (e.which === 70) {    // fé”®
                if (outer.blink_coldtime &amp;gt;= outer.eps) return true;
                outer.cur_skill = &amp;#34;blink&amp;#34;;
                return false;
            }
        });
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/game-map/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class GameMap extends AcGameObject {
    constructor(playground) {
        ...
        this.$canvas = $(`&amp;lt;canvas tabindex=0&amp;gt;&amp;lt;/canvas&amp;gt;`);
        ...
    }
    start() {
        this.$canvas.focus();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æœ¬åœ°å‰ç«¯&#34;&gt;æœ¬åœ°å‰ç«¯&lt;/h2&gt;
&lt;p&gt;è¦å®ç°ä¸¤ä¸ªéƒ¨åˆ†ï¼š 1. æ–‡æœ¬è¾“å…¥æ¡†ï¼ˆè®©ç”¨æˆ·è¾“å…¥è¦å‘é€çš„ä¿¡æ¯ï¼‰ 2. å†å²è®°å½•æ˜¾ç¤ºæ¡†ï¼ˆä¹‹å‰ç”¨æˆ·å‘é€çš„ä¿¡æ¯çš„æ˜¾ç¤ºæ¡†ï¼‰&lt;/p&gt;
&lt;p&gt;æ¬²å®ç°é€»è¾‘ï¼šç”¨æˆ·æŒ‰ä¸‹ &lt;code&gt;&amp;lt;Enter&amp;gt;&lt;/code&gt; åï¼Œæ¸¸æˆç•Œé¢å¼¹å‡ºæ–‡æœ¬è¾“å…¥æ¡†ï¼Œç„¶åèšç„¦äºæ–‡æœ¬è¾“å…¥æ¡†ï¼Œä¸”åŒæ—¶å¼¹å‡ºå†å²è®°å½•æ˜¾ç¤ºæ¡† 3 ç§’&lt;/p&gt;
&lt;p&gt;ç„¶åç”¨æˆ·è¾“å…¥ä¿¡æ¯åï¼ŒæŒ‰ä¸‹ &lt;code&gt;&amp;lt;Enter&amp;gt;&lt;/code&gt; åå‘å‡ºä¿¡æ¯ï¼Œæ¥ç€ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨å†å²è®°å½•æ˜¾ç¤ºæ¡†æœ€ä¸‹æ–¹ï¼Œå¹¶å¼¹å‡ºå†å²è®°å½•æ˜¾ç¤ºæ¡† 3 ç§’&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/chat_field/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chat field&lt;/code&gt; è´Ÿè´£ç®¡ç† æ–‡æœ¬è¾“å…¥æ¡† å’Œ å†å²è®°å½•æ˜¾ç¤ºæ¡†&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class ChatField {
    constructor(playground) {
        this.playground = playground;

        this.$history = $(`&amp;lt;div class=&amp;#34;ac-game-chat-field-history&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;`);
        this.$input = $(`&amp;lt;input type=&amp;#34;text&amp;#34; class=&amp;#34;ac-game-chat-field-input&amp;#34;&amp;gt;`);

        this.$history.hide();
        this.$input.hide();

        this.func_id = null;

        this.playground.$playground.append(this.$history);
        this.playground.$playground.append(this.$input);

        this.start();
    }

    start() {
        this.add_listening_events();
    }
    add_listening_events() {
        let outer = this;
        this.$input.keydown(function(e) {
            if (e.which === 27) {   //ESC
                outer.hide_input();
                return false;
            } else if (e.which === 13) {
                let username = outer.playground.root.settings.username;
                let text = outer.$input.val();
                if (text) {
                    outer.$input.val(&amp;#34;&amp;#34;);
                    outer.add_message(username, text);
                }
                return false;
            }
        });
    }
    show_history() {
        let outer = this;
        this.$history.fadeIn();
        if (this.func_id) clearTimeout(this.func_id);
        this.func_id = setTimeout(function() {
            outer.$history.fadeOut();
            outer.func_id = null;
        }, 3000);
    }
    render_message(message) {
        return $(`&amp;lt;div&amp;gt;${message}&amp;lt;/div&amp;gt;`);
    }
    add_message(username, text) {
        this.show_history();
        let message = `[${username}] ${text}`;
        this.$history.append(this.render_message(message));
        this.$history.scrollTop(this.$history[0].scrollHeight);
    }
    show_input() {
        this.show_history();
        this.$input.show();
        this.$input.focus();    // è¾“å…¥æ—¶ï¼Œèšç„¦äºè¾“å…¥æ¡†
    }
    hide_input() {
        this.$input.hide();
        this.playground.game_map.$canvas.focus();   // é€€å‡ºæ—¶ï¼Œèšç„¦å›æ¸¸æˆç•Œé¢
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æŠŠå®ƒåˆ›å»ºå‡ºæ¥&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    ...
    show(mode) {    //æ‰“å¼€ playground ç•Œé¢
        ...
        else if (mode === &amp;#34;multi mode&amp;#34;) {
            this.chat_field = new ChatField(this);
            ...
        }

    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ·»åŠ ç›‘å¬äº‹ä»¶&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.keydown(function(e) {
            if (e.which === 13) {   // enter (æ˜¾ç¤ºå¯¹è¯æ¡†)
                if (outer.playground.mode === &amp;#34;multi mode&amp;#34;) {
                    outer.playground.chat_field.show_input();
                    return false;
                }
            } else if (e.which === 27) {    // escï¼ˆå…³é—­å¯¹è¯æ¡†ï¼‰
                if (outer.playground.mode === &amp;#34;multi mode&amp;#34;) {
                    outer.playground.char_field.hide_input();
                    return false;
                }
            }
            ...
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;game.css&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
.ac-game-chat-field-history {
    position: absolute;
    top: 66%;
    left: 20%;
    transform: translate(-50%, -50%);
    width: 20%;
    height: 32%;
    color: white;
    font-size: 2vh;
    padding: 5px;
    overflow: auto;
}

.ac-game-chat-field-history::-webkit-scrollbar {
    width: 0;
}

.ac-game-chat-field-input {
    position: absolute;
    top: 86%;
    left: 20%;
    transform: translate(-50%, -50%);
    width: 20%;
    height: 3vh;
    color: white;
    font-size: 2vh;
    background-color: rgba(222,225,230, 0.2);
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;è”æœºèŠå¤©çª—&#34;&gt;è”æœºèŠå¤©çª—&lt;/h2&gt;
&lt;h3 id=&#34;å‰ç«¯-4&#34;&gt;å‰ç«¯&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;playground/chat_field/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class ChatField {
    ...
    add_listening_events() {
        ...
        this.$input.keydown(function(e) {
            ...
            else if (e.which === 13) {
                ...
                if (text) {
                    ...
                    outer.playground.mps.send_message(text);
                }
                ...
            }
        });
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;js/src/playground/socket/multiplayer/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class MultiPlayerSocket {
    ...
    send_message(text) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &amp;#39;event&amp;#39;: &amp;#34;message&amp;#34;,
            &amp;#39;uuid&amp;#39;: outer.uuid,
            &amp;#39;username&amp;#39;: outer.playground.root.settings.username,
            &amp;#39;text&amp;#39;: text,
        }));
    }
    receive_message(username, text) {
        this.playground.chat_field.add_message(username, text);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åç«¯-4&#34;&gt;åç«¯&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def message(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &amp;#39;type&amp;#39;: &amp;#34;group_send_event&amp;#34;,
                &amp;#39;event&amp;#39;: &amp;#34;message&amp;#34;,
                &amp;#39;uuid&amp;#39;: data[&amp;#39;uuid&amp;#39;],
                &amp;#39;username&amp;#39;: data[&amp;#39;username&amp;#39;],
                &amp;#39;text&amp;#39;: data[&amp;#39;text&amp;#39;],
            }
        )
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;å®ç°åŒ¹é…ç³»ç»Ÿà®&#34;&gt;å®ç°åŒ¹é…ç³»ç»Ÿà®&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/file_system/file/content/whole/index/content/3435229/&#34;&gt;9. å®ç°åŒ¹é…ç³»ç»Ÿ | è®²ä¹‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.acwing.com/activity/content/code/content/2360556/&#34;&gt;9.1 ä¸Šè¯¾ç¬”è®° | ä¸€åªé‡ç”Ÿå½©è‰²é“…ç¬”&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;æœ¬ç« èŠ‚å†…å®¹æ˜¯åˆ©ç”¨ &lt;code&gt;thrift&lt;/code&gt; åˆ›å»ºå®¢æˆ·ç«¯-æœåŠ¡ç«¯äº¤äº’çš„æ¥å£&lt;/p&gt;
&lt;p&gt;ç„¶ååˆ©ç”¨è¯¥æ¥å£å®Œæˆä¸€ä¸ªåŒ¹é…ç³»ç»Ÿ&lt;/p&gt;
&lt;p&gt;åŒ¹é…ç³»ç»Ÿç”±ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ— + ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ + åŒ¹é…æ±  å®Œæˆ&lt;/p&gt;
&lt;p&gt;åŸºæœ¬ä¸ LinuxåŸºç¡€è¯¾ é‡Œçš„éƒ¨åˆ†å®Œå…¨ä¸€è‡´&lt;/p&gt;
&lt;p&gt;å½“æ—¶æˆ‘ä»¬æ˜¯æ‹¿ cpp æ¥å†™çš„ï¼Œå†™äº†å·®ä¸å¤š 200 è¡Œ&lt;/p&gt;
&lt;p&gt;æœ¬èŠ‚ä¼šæ‹¿ py æ¥å®ç°ï¼Œå·®ä¸å¤š 140 è¡Œå³å¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thrift&lt;/code&gt; æ¥å£æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;namespace py match_service

service Match {
    i32 add_player(1: i32 score, 2: string uuid, 3: string username, 4: string photo, 5: string channel_name),
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åç”¨è¯¥æºæ–‡ä»¶ç”Ÿæˆæ¥å£æ–‡ä»¶&lt;/p&gt;
&lt;h2 id=&#34;æœåŠ¡ç«¯&#34;&gt;æœåŠ¡ç«¯&lt;/h2&gt;
&lt;p&gt;é…ç½® &lt;code&gt;asgi.py&lt;/code&gt; è®©æœåŠ¡ç«¯è¿›ç¨‹å¯ä»¥è°ƒç”¨å®¢æˆ·ç«¯è¿›ç¨‹é‡Œçš„å‡½æ•°&lt;/p&gt;
&lt;p&gt;&lt;code&gt;acapp/acapp/asgi.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;import os

import django
os.environ.setdefault(&amp;#39;DJANGO_SETTINGS_MODULE&amp;#39;, &amp;#39;acapp.settings&amp;#39;)
django.setup()
...
from channels.layers import get_channel_layer
channel_layer = get_channel_layer()
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;acapp/match_system/src/main.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#! /usr/bin/env python3

import glob
import sys
sys.path.insert(0, glob.glob(&amp;#39;../../&amp;#39;)[0])

from match_server.match_service import Match

from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol
from thrift.server import TServer

from queue import Queue
from time import sleep
from threading import Thread

from acapp.asgi import channel_layer
from asgiref.sync import async_to_sync
from django.core.cache import cache

queue = Queue()  # æ¶ˆæ¯é˜Ÿåˆ—

class Player:
    def __init__(self, score, uuid, username, photo, channel_name):
        self.score = score
        self.uuid = uuid
        self.username = username
        self.photo = photo
        self.channel_name = channel_name
        self.waiting_time = 0  # ç­‰å¾…æ—¶é—´


class Pool:
    def __init__(self):
        self.players = []

    def add_player(self, player):
        self.players.append(player)

    def check_match(self, a, b):
        dt = abs(a.score - b.score)
        a_max_dif = a.waiting_time * 50
        b_max_dif = b.waiting_time * 50
        return dt &amp;lt;= a_max_dif and dt &amp;lt;= b_max_dif

    def match_success(self, ps):
        print(&amp;#34;Match Success: %s %s %s&amp;#34; % (ps[0].username, ps[1].username, ps[2].username))
        room_name = &amp;#34;room-%s-%s-%s&amp;#34; % (ps[0].uuid, ps[1].uuid, ps[2].uuid)
        players = []
        for p in ps:
            async_to_sync(channel_layer.group_add)(room_name, p.channel_name)
            players.append({
                &amp;#39;uuid&amp;#39;: p.uuid,
                &amp;#39;username&amp;#39;: p.username,
                &amp;#39;photo&amp;#39;: p.photo,
                &amp;#39;hp&amp;#39;: 100,
            })
        cache.set(room_name, players, 3600)  # æœ‰æ•ˆæ—¶é—´ï¼š1å°æ—¶
        for p in ps:
            async_to_sync(channel_layer.group_send)(
                room_name,
                {
                    &amp;#39;type&amp;#39;: &amp;#34;group_send_event&amp;#34;,
                    &amp;#39;event&amp;#39;: &amp;#34;create_player&amp;#34;,
                    &amp;#39;uuid&amp;#39;: p.uuid,
                    &amp;#39;username&amp;#39;: p.username,
                    &amp;#39;photo&amp;#39;: p.photo,
                }
            )

    def increase_waiting_time(self):
        for player in self.players:
            player.waiting_time += 1

    def match(self):
        while len(self.players) &amp;gt;= 3:
            self.players = sorted(self.players, key=lambda p: p.score)
            flag = False
            for i in range(len(self.players) - 2):
                a, b, c = self.players[i], self.players[i + 1], self.players[i + 2]
                if self.check_match(a, b) and self.check_match(a, c) and self.check_match(b, c):
                    self.match_success([a, b, c])
                    self.players = self.players[:i] + self.players[i + 3:]
                    flag = True
                    break
            if not flag:
                break

        self.increase_waiting_time()



class MatchHandler:
    def add_player(self, score, uuid, username, photo, channel_name):
        print(&amp;#34;Add Player: %s %d&amp;#34; % (username, score))
        player = Player(score, uuid, username, photo, channel_name)
        queue.put(player)
        return 0


def get_player_from_queue():
    try:
        return queue.get_nowait()
    except:
        return None


def worker():
    pool = Pool()
    while True:
        player = get_player_from_queue()
        if player:
            pool.add_player(player)
        else:
            pool.match()
            sleep(1)



if __name__ == &amp;#39;__main__&amp;#39;:
    handler = MatchHandler()
    processor = Match.Processor(handler)
    transport = TSocket.TServerSocket(host=&amp;#39;127.0.0.1&amp;#39;, port=9090)
    tfactory = TTransport.TBufferedTransportFactory()
    pfactory = TBinaryProtocol.TBinaryProtocolFactory()

    server = TServer.TThreadedServer(
        processor, transport, tfactory, pfactory)

    Thread(target=worker, daemon=True).start()

    print(&amp;#39;Starting the server...&amp;#39;)
    server.serve()
    print(&amp;#39;done.&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;å®¢æˆ·ç«¯&#34;&gt;å®¢æˆ·ç«¯&lt;/h2&gt;
&lt;p&gt;æ‰©å±•æ•°æ®åº“è¡¨ï¼Œè®©å…¶å¯ä»¥å­˜æ”¾ rankåˆ† çš„ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;code&gt;game/models/player/player.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class Player(models.Model):
    ...
    score = models.IntegerField(default=1500)
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;from channels.generic.websocket import AsyncWebsocketConsumer
import json
from django.conf import settings
from django.core.cache import cache

from thrift import Thrift
from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol

from match_system.src.match_server.match_service import Match
from game.models.player.player import Player
from channels.db import database_sync_to_async

class MultiPlayer(AsyncWebsocketConsumer):
    async def connect(self):
        await self.accept()

    async def disconnect(self, close_code):
        if self.room_name:
            await self.channel_layer.group_discard(self.room_name, self.channel_name)

    async def create_player(self, data):
        self.room_name = None
        self.uuid = data[&amp;#39;uuid&amp;#39;]
        # Make socket
        transport = TSocket.TSocket(&amp;#39;127.0.0.1&amp;#39;, 9090)
        # Buffering is critical. Raw sockets are very slow
        transport = TTransport.TBufferedTransport(transport)

        # Wrap in a protocol
        protocol = TBinaryProtocol.TBinaryProtocol(transport)

        # Create a client to use the protocol encoder
        client = Match.Client(protocol)

        def db_get_player():
            return Player.objects.get(user__username=data[&amp;#39;username&amp;#39;])

        player = await database_sync_to_async(db_get_player)()

        # Connect!
        transport.open()

        client.add_player(player.score, data[&amp;#39;uuid&amp;#39;], data[&amp;#39;username&amp;#39;], data[&amp;#39;photo&amp;#39;], self.channel_name)

        # Close!
        transport.close()
    
    async def group_send_event(self, data):
        if not self.room_name:
            keys = cache.keys(&amp;#39;*%s*&amp;#39; % (self.uuid))
            if keys:
                self.room_name = keys[0]
        await self.send(text_data=json.dumps(data))
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;é¡¹ç›®æ”¶å°¾à®&#34;&gt;é¡¹ç›®æ”¶å°¾à®&lt;/h1&gt;
&lt;h2 id=&#34;åŠ å¯†å‹ç¼©jsä»£ç &#34;&gt;åŠ å¯†ã€å‹ç¼©jsä»£ç &lt;/h2&gt;
&lt;p&gt;å®‰è£… &lt;code&gt;terser&lt;/code&gt; :&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo apt-get update
sudo apt-get install npm
sudo npm install terser -g
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;terser&lt;/code&gt; ä¸ä»…æ”¯æŒæ–‡ä»¶è¾“å…¥ï¼Œä¹Ÿæ”¯æŒæ ‡å‡†è¾“å…¥ã€‚ç»“æœä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;terser xxx.js -c -m
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å°†æ•´åˆ &lt;code&gt;js&lt;/code&gt; æ–‡ä»¶çš„è„šæœ¬ä¿®æ”¹ä¸€ä¸‹å³å¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;scripts/compress_game_js.sh&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#! /bin/bash

JS_PATH=/home/acs/acapp/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find $JS_PATH_SRC -type f -name &amp;#39;*.js&amp;#39; | sort | xargs cat | terser -c -m &amp;gt; ${JS_PATH_DIST}game.js

echo &amp;#34;yes&amp;#34; | python3 manage.py collectstatic
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ¸…ç†ç›‘å¬å‡½æ•°&#34;&gt;æ¸…ç†ç›‘å¬å‡½æ•°&lt;/h2&gt;
&lt;p&gt;åœ¨AcAPPå…³é—­ä¹‹å‰è§¦å‘çš„äº‹ä»¶å¯ä»¥é€šè¿‡å¦‚ä¸‹apiæ·»åŠ ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;AcWingOS.api.window.on_close(func);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒä¸€ä¸ªé¡µé¢ä¸­ï¼Œå¤šä¸ª &lt;code&gt;acapp&lt;/code&gt; å¼•å…¥çš„ &lt;code&gt;js&lt;/code&gt; ä»£ç åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œå› æ­¤ &lt;code&gt;AC_GAME_OBJECTS&lt;/code&gt; ç­‰å…¨å±€å˜é‡æ˜¯åŒä¸€ä¸ªé¡µé¢ã€åŒä¸€ä¸ª &lt;code&gt;acapp&lt;/code&gt; çš„æ‰€æœ‰çª—å£å…±ç”¨çš„&lt;/li&gt;
&lt;li&gt;å„è‡ªåˆ›å»ºçš„å±€éƒ¨å˜é‡æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯”å¦‚ &lt;code&gt;new AcGame()&lt;/code&gt; åˆ›å»ºå‡ºçš„å¯¹è±¡å„ä¸ªçª—å£æ˜¯ç‹¬ç«‹çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬ç»™æ¯ä¸€ä¸ªçª—å£åˆ›å»ºä¸€ä¸ª &lt;code&gt;uid&lt;/code&gt; ç„¶åæ ¹æ®ä¸åŒçš„ &lt;code&gt;uid&lt;/code&gt; è¿›è¡Œäº‹ä»¶è§£ç»‘&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    ...
    create_uuid() {
        let res = &amp;#34;&amp;#34;;
        for (let i = 0; i &amp;lt; 8; i ++ ) {
            let x = parseInt(Math.floor(Math.random() * 10));   //[0, 10)
            res += x;
        }
        return res;
    }
    start() {
        let outer = this;
        let uuid = this.create_uuid();
        $(window).on(`resize.${uuid}`, function() {
            outer.resize();
        });

        if (this.root.AcWingOS) {
            outer.root.AcWingOS.api.window.on_close(function() {
                $(window).off(`resize.${uuid}`);
            });
        }
    }
    ...
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ç¼–å†™æ¯å±€æ¸¸æˆçš„ç»“æŸç•Œé¢&#34;&gt;ç¼–å†™æ¯å±€æ¸¸æˆçš„ç»“æŸç•Œé¢&lt;/h2&gt;
&lt;p&gt;å•ç‹¬åˆ›å»ºä¸€ä¸ªç»“æŸç•Œé¢ï¼Œç„¶åæ¸¸æˆç»“æŸçš„æ—¶å€™æ¸²æŸ“å‡ºè¯¥ç»“æŸç•Œé¢å³å¯&lt;/p&gt;
&lt;p&gt;å› ä¸ºç»“æŸç•Œé¢è¦è¦†ç›–åœ¨æ¸¸æˆç•Œé¢ä¹‹ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆä¿®æ”¹ä¸€ä¸‹æ¸¸æˆå¼•æ“ï¼Œæ·»åŠ ä¸€ä¸ª &lt;code&gt;late_update&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ¯ä¸€å¸§æ¸²æŸ“çš„å†…å®¹æœ€åå†æ¸²æŸ“ï¼Œä»è€Œå®ç°ç»“æŸç•Œé¢å åŠ åœ¨æ¸¸æˆç•Œé¢ä¹‹ä¸Šçš„æ•ˆæœ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ac_game_object/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class AcGameObject {
    ...
    late_update() { // æ¯ä¸€å¸§å‡ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åœ¨æ‰€æœ‰ update æ‰§è¡Œå®Œåæ‰æ‰§è¡Œ

    }
    ...
}
...
let AC_GAME_ANIMATION = function(timestamp) {
    ...
    for (let i = 0; i &amp;lt; AC_GAME_OBJECTS.length; i ++ ) {
        let obj = AC_GAME_OBJECTS[i];
        obj.late_update();
    }
    ...
}
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬åšä¸€ä¸ªæ¸²æŸ“å‡ºç»“æŸç•Œé¢çš„ç±»&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/score_board/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class ScoreBoard extends AcGameObject {
    constructor(playground) {
        super();
        this.playground = playground;
        this.ctx = this.playground.game_map.ctx;

        this.state = null;  // win-èƒœåˆ©ï¼›lose-å¤±è´¥

        this.win_img = new Image();
        this.win_img.src = &amp;#34;https://cdn.acwing.com/media/article/image/2021/12/17/1_8f58341a5e-win.png&amp;#34;;

        this.lose_img = new Image();
        this.lose_img.src = &amp;#34;https://cdn.acwing.com/media/article/image/2021/12/17/1_9254b5f95e-lose.png&amp;#34;;
    }
    start() {
    }

    add_listening_events() {    // ç‚¹å‡»åï¼Œè¿”å›ä¸»é¡µé¢
        let outer = this;
        let $canvas = this.playground.game_map.$canvas;

        $canvas.on(&amp;#39;click&amp;#39;, function() {
            outer.playground.hide();
            outer.playground.root.menu.show();
        });
    }

    win() {
        this.state = &amp;#34;win&amp;#34;;
        let outer = this;
        setTimeout(function() {
            outer.add_listening_events();
        }, 1000);   // 1ç§’åç›‘å¬ç‚¹å‡»äº‹ä»¶
    }

    lose() {
        this.state = &amp;#34;lose&amp;#34;;
        let outer = this;
        setTimeout(function() {
            outer.add_listening_events();
        }, 1000);   // 1ç§’åç›‘å¬ç‚¹å‡»äº‹ä»¶
    }

    late_update() {
        this.render();  // æ¸²æŸ“åœ¨å›¾å±‚æœ€ä¸Šæ–¹
    }
    render() {
        let len = this.playground.height / 2;
        if (this.state === &amp;#34;win&amp;#34;) {
            this.ctx.drawImage(this.win_img, this.playground.width / 2 - len / 2, this.playground.height / 2 - len / 2, len, len);
        } else if (this.state === &amp;#34;lose&amp;#34;) {
            this.ctx.drawImage(this.lose_img, this.playground.width / 2 - len / 2, this.playground.height / 2 - len / 2, len, len);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€šè¿‡æ¸¸æˆç»“æŸçš„é€»è¾‘åˆ¤æ–­ï¼Œæ¸²æŸ“ç»“æŸç•Œé¢ï¼ŒåŒæ—¶åœ¨ç»“æŸå¹¶è¿”å›ä¸»èœå•çš„æ—¶å€™ï¼Œé‡ç½®æ¸¸æˆå…ƒç´ &lt;/p&gt;
&lt;p&gt;æ¸¸æˆå…ƒç´ é‡ç½®&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class AcGamePlayground {
    ...
    show(mode) {    // æ‰“å¼€ playground ç•Œé¢
        ...
        this.score_board = new ScoreBoard(this);
        ...
    }
    ...
    hide() {
        // æ¸…ç©ºæ‰€æœ‰æ¸¸æˆå…ƒç´ 
        while (this.players &amp;amp;&amp;amp; this.players.length &amp;gt; 0) {
            this.players[0].destroy();
        }
        if (this.game_map) {
            this.game_map.destroy();
            this.game_map = null;
        }
        if (this.notice_board) {
            this.notice_board.destroy();
            this.notice_board = null;
        }
        if (this.score_board) {
            this.score_board.destroy();
            this.score_board = null;
        }
        this.$playground.empty();   // æ¸…ç©ºæ‰€æœ‰htmlæ ‡ç­¾
        this.$playground.hide();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¸¸æˆç»“æŸçš„é€»è¾‘åˆ¤æ–­&lt;/p&gt;
&lt;p&gt;&lt;code&gt;playground/player/zbase.js&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class Player extends AcGameObject {
    ...
    update() {
        ...
        this.update_win();
        ...
    }
    update_win() {
        // ç«èµ›çŠ¶æ€ï¼Œä¸”åªæœ‰ä¸€åç©å®¶ï¼Œä¸”æ”¹åç©å®¶å°±æ˜¯æˆ‘ï¼Œåˆ™èƒœåˆ©
        if (this.playground.state === &amp;#34;fighting&amp;#34; &amp;amp;&amp;amp; this.character === &amp;#34;me&amp;#34; &amp;amp;&amp;amp; this.playground.players.length === 1) {
            this.playground.state = &amp;#34;over&amp;#34;;
            this.playground.score_board.win();
        }
    }
    ...
    on_destroy() {
        // æˆ‘æ­»äº¡ï¼Œä¸”æ¸¸æˆå¤„äºç«èµ›çŠ¶æ€ï¼Œåˆ™å¤±è´¥
        if (this.character === &amp;#34;me&amp;#34; &amp;amp;&amp;amp; this.playground.state === &amp;#34;fighting&amp;#34;) {
            this.playground.state = &amp;#34;over&amp;#34;
            this.playground.score_board.lose();
        }
        ...
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ›´æ–°æˆ˜ç»©&#34;&gt;æ›´æ–°æˆ˜ç»©&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å®Œå…¨äº¤ç»™åç«¯æ¥åˆ¤æ–­&lt;/p&gt;
&lt;p&gt;åœ¨å¤„ç†å¹¿æ’­çš„ &lt;code&gt;attack&lt;/code&gt; ä¿¡æ¯çš„æ—¶å€™ï¼Œå…ˆå‰æˆ‘ä»¬é¢å¤–ç•™äº†ä¸€ä¸ªå‚æ•° &lt;code&gt;hp&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å›´ç»•è¯¥ &lt;code&gt;hp&lt;/code&gt; è¿›è¡Œç»­å†™ï¼Œè‹¥å½“å‰æˆ¿é—´å†… &lt;code&gt;hp&lt;/code&gt; å¤§äº 0 çš„ç©å®¶å°‘äºç­‰äº 1 ä¸ª&lt;/p&gt;
&lt;p&gt;åˆ™å¯¹äºæ‰€æœ‰ &lt;code&gt;hp&lt;/code&gt; ä¸º 0 çš„ç©å®¶å‡ &lt;code&gt;rank&lt;/code&gt; åˆ†ï¼Œå¤§äº 0 çš„ç©å®¶åŠ  &lt;code&gt;rank&lt;/code&gt; åˆ†&lt;/p&gt;
&lt;p&gt;&lt;code&gt;consumers/multiplayer/index.py&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def attack(self, data):
        if not self.room_name:
            return
        players = cache.get(self.room_name)

        if not players:
            return

        for player in players:
            if player[&amp;#39;uuid&amp;#39;] == data[&amp;#39;attackee_uuid&amp;#39;]:
                player[&amp;#39;hp&amp;#39;] -= 25

        remain_cnt = 0
        for player in players:
            if player[&amp;#39;hp&amp;#39;] &amp;gt; 0:
                remain_cnt += 1

        if remain_cnt &amp;gt; 1:  # ç»§ç»­è¿›è¡Œæ¸¸æˆ
            if self.room_name:
                cache.set(self.room_name, players, 3600)
        else:   # ç»“ç®— 
            def db_update_player_score(username, score):
                player = Player.objects.get(user__username=username)
                player.score += score
                player.save()
            for player in players:
                if player[&amp;#39;hp&amp;#39;] &amp;lt;= 0:
                    await database_sync_to_async(db_update_player_score)(player[&amp;#39;username&amp;#39;], -5)
                else:
                    await database_sync_to_async(db_update_player_score)(player[&amp;#39;username&amp;#39;], 10)
        ...
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æ·»åŠ faviconico&#34;&gt;æ·»åŠ favicon.ico&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¿®æ­£ä¸€ä¸ªå° BUGï¼Œä¹‹å‰ web ç«¯ä¸€ç›´æ²¡æœ‰ç½‘é¡µæ˜¾ç¤ºå›¾æ ‡ï¼Œè¿™é‡Œç»™ä»–åŠ ä¸Šå»&lt;/p&gt;
&lt;p&gt;&lt;code&gt;game/templates/multiends/web.html&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
&amp;lt;head&amp;gt;
    ...
    &amp;lt;link rel=&amp;#34;icon&amp;#34; href=&amp;#34;https://cdn.acwing.com/media/article/image/2021/12/17/1_be4c11ce5f-acapp.png&amp;#34;&amp;gt;
&amp;lt;/head&amp;gt;
...
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;å„ç§ç¯å¢ƒå‘½ä»¤&#34;&gt;å„ç§ç¯å¢ƒå‘½ä»¤&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;å¯åŠ¨&lt;code&gt;django&lt;/code&gt;é¡¹ç›®ï¼Œåœ¨&lt;code&gt;~/acapp&lt;/code&gt;ç›®å½•ä¸‹æ‰§è¡Œï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;python3 manage.py runserver 0.0.0.0:8000
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;æ¯æ¬¡ä¿®æ”¹å¥½Â &lt;code&gt;game/static&lt;/code&gt;  ä¸‹çš„æ–‡ä»¶åï¼Œéœ€è¦åœ¨&lt;code&gt;~/acapp&lt;/code&gt;ç›®å½•ä¸‹è¿è¡Œæ‰“åŒ…æ–‡ä»¶ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;./scripts/compress_game_js.sh
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;åœ¨å®šä¹‰å®Œä¸€ä¸ªæ•°æ®è¡¨ä¹‹åï¼Œéœ€è¦å°†åˆ›å»ºçš„æ•°æ®è¡¨æ›´æ–°åˆ° &lt;code&gt;django&lt;/code&gt; çš„æ•°æ®åº“ä¸­å»ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;$&lt;/span&gt; python3 manage.py makemigrations
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Migrations &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;game&amp;#39;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;   game/migrations/&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0001&lt;/span&gt;_initial.py
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;     - Create model Player
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;$&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00&#34;&gt;$&lt;/span&gt; python3 manage.py migrate
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Operations to perform:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;   Apply &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;all&lt;/span&gt; migrations: admin, auth, contenttypes, game, sessions
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; Running migrations:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;   Applying game&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;.0001&lt;/span&gt;_initial... OK
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;å¯åŠ¨&lt;code&gt;nginx&lt;/code&gt;æœåŠ¡ï¼Œç”¨äºåŸŸåè®¿é—®ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo /etc/init.d/nginx start
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;å¯åŠ¨&lt;code&gt;uwsgi&lt;/code&gt;æœåŠ¡ï¼Œç”¨äºåŸŸåè®¿é—®ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;uwsgi --ini scripts/uwsgi.ini
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;å…³é—­&lt;code&gt;uwsgi&lt;/code&gt;æœåŠ¡ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo pkill -f uwsgi -9
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;å¯åŠ¨ &lt;code&gt;redis-server&lt;/code&gt;ï¼Œç”¨äºä¸€é”®ç™»å½•ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo redis-server /etc/redis/redis.conf
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;å¯åŠ¨ &lt;code&gt;Django_channels&lt;/code&gt;ï¼Œç”¨äºè”æœºå¯¹æˆ˜ï¼Œåœ¨&lt;code&gt;~/acapp&lt;/code&gt;ç›®å½•ä¸‹æ‰§è¡Œï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;daphne -b 0.0.0.0 -p 5015 acapp.asgi:application
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;å¯åŠ¨&lt;code&gt;thrift&lt;/code&gt;æœåŠ¡ï¼Œç”¨äºåŒ¹é…ç³»ç»Ÿï¼Œåœ¨&lt;code&gt;~/acapp/match_system/src/&lt;/code&gt;ç›®å½•ä¸‹æ‰§è¡Œï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;./main.py
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;10&#34;&gt;
&lt;li&gt;ç‰ˆæœ¬æ›´æ–°ï¼Œåœ¨&lt;a href=&#34;https://www.acwing.com/user/myspace/application/update/2433/&#34;&gt;æœ¯å£«ä¹‹æˆ˜&lt;/a&gt;ä¸­å°† &lt;code&gt;jsåœ°å€&lt;/code&gt; ä¸€æ æ›´æ–°ä¸ºï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// æœ¬åœ°æ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„æ–‡ä»¶ä¹Ÿéœ€è¦æ›´æ”¹åå­—
https://app2433.acapp.acwing.com.cn/static/js/dist/game-ç‰ˆæœ¬å·.js
&lt;/code&gt;&lt;/pre&gt;</description>
      <content:encoded><![CDATA[<ul>
<li><a href="https://www.colopen-blog.com/Engineer/acw_django/">AcWing Django æ¡†æ¶è¯¾ | Colopen&rsquo;s blog</a></li>
<li><a href="https://www.acwing.com/activity/content/punch_the_clock/72/">AcWing Django æ¡†æ¶è¯¾</a></li>
</ul>
<hr>
<h2 id="warofwarlockhttpsgithubcomxancodingwarofwarlock"><a href="https://github.com/Xancoding/WarOfWarlock">WarOfWarlock</a></h2>
<h3 id="æ­å»ºå·¥å…·">æ­å»ºå·¥å…·</h3>
<ul>
<li><code>HTML &amp; CSS &amp; JavaScript &amp; Django</code></li>
</ul>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://www.colopen-blog.com/Engineer/acw_django/">AcWing Django æ¡†æ¶è¯¾ | Colopen&rsquo;s blog</a></li>
<li><a href="https://www.acwing.com/activity/content/punch_the_clock/72/">AcWing Djangoæ¡†æ¶è¯¾</a></li>
</ul>
<h1 id="django-é¡¹ç›®åˆ›å»º">Django é¡¹ç›®åˆ›å»º</h1>
<ul>
<li><a href="https://www.acwing.com/solution/content/72577/">2.1ä¸Šè¯¾ç¬”è®° | æ </a></li>
<li><a href="https://www.acwing.com/solution/content/73097/">2.1ä¸Šè¯¾ç¬”è®° | Andrew1729</a></li>
</ul>
<hr>
<h2 id="å¯åŠ¨åˆå§‹é¡¹ç›®">å¯åŠ¨åˆå§‹é¡¹ç›®</h2>
<ol>
<li><code>django-admin startproject acapp</code>ï¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºåä¸º<code>acapp</code>çš„<code>django</code>é¡¹ç›®</li>
<li><code>python3 manage.py runserver 0.0.0.0:8000</code>ï¼šå¯åŠ¨é¡¹ç›®
<ol>
<li>æ‰“å¼€<code>settings.py</code>ï¼Œæ‰¾åˆ°<code>ALLOWED_HOSTS=[]</code>ï¼Œä¿®æ”¹æˆ<code>ALLOWED_HOSTS=[&quot;è‡ªå·±çš„æœåŠ¡å™¨çš„å…¬ç½‘IP&quot;]</code></li>
<li>é€šè¿‡<code>è‡ªå·±çš„æœåŠ¡å™¨å…¬ç½‘IP:8000</code> æ‰“å¼€Djangoé¡µé¢</li>
</ol>
</li>
</ol>
<h2 id="åˆ›å»ºç®¡ç†å‘˜ç™»å½•é¡µé¢">åˆ›å»ºç®¡ç†å‘˜ç™»å½•é¡µé¢</h2>
<ol>
<li>åœ¨ä¸€çº§<code>acapp</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œ<code>python3 manage.py startapp XXX</code>ï¼Œ<code>XXX</code>æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„appåï¼Œè¿™é‡Œç”¨<code>game</code>ç¤ºä¾‹ï¼Œè¿™æ—¶å€™ä¼šå¤šä¸€ä¸ªæ–‡ä»¶å¤¹<code>game</code>ï¼Œæ ‘å½¢ç»“æ„å¦‚å›¾ï¼š</li>
</ol>
<pre tabindex="0"><code>|-- game
|   |-- __init__.py
|   |-- admin.py          # ç®¡ç†å‘˜é¡µé¢
|   |-- apps.py           # ç”¨çš„ä¸å¤š
|   |-- migrations        # å­˜å‚¨æ•°æ®åº“
|   |   `-- __init__.py
|   |-- models.py         # å®šä¹‰ç½‘ç«™é‡Œçš„æ•°æ®åº“è¡¨
|   |-- tests.py
|   `-- views.py          # è§†å›¾ï¼Œå³å‡½æ•°
</code></pre><ol start="2">
<li><code>python3 manage.py migrate</code>ï¼šå°†æ‰€æœ‰ä¿®æ”¹æ›´æ–°è¿›æ•°æ®åº“</li>
<li>åˆ›å»ºä¸€ä¸ª <strong>ç®¡ç†å‘˜ç”¨æˆ·</strong>ï¼š</li>
</ol>
<pre tabindex="0"><code>$ python3 manage.py createsuperuser
&gt; Username (leave blank to use &#39;acs&#39;): admin
&gt; Email address: 
&gt; Password: 123456
&gt; Password (again): 123456
&gt; Superuser created successfully.
</code></pre><p>ç„¶ååˆ©ç”¨è¯¥ <strong>ç®¡ç†å‘˜ç”¨æˆ·</strong> ç™»å½• <code>admin</code> é¡µé¢ï¼Œå³å¯æˆåŠŸç™»é™†</p>
<h2 id="åˆ›å»ºç”¨æˆ·ç™»å½•é¡µé¢">åˆ›å»ºç”¨æˆ·ç™»å½•é¡µé¢</h2>
<h3 id="game-ä¸‹çš„å„ä¸ªæ–‡ä»¶ä½œç”¨"><code>game</code> ä¸‹çš„å„ä¸ªæ–‡ä»¶ä½œç”¨</h3>
<ol>
<li><code>templates</code>ç›®å½•ï¼šç®¡ç† <code>html</code>  æ–‡ä»¶</li>
<li><code>urls</code>ç›®å½•ï¼šç®¡ç†è·¯ç”±ï¼Œå³é“¾æ¥ä¸å‡½æ•°çš„å¯¹åº”å…³ç³» (æ¥æ”¶é“¾æ¥ï¼Œè°ƒç”¨ç›¸å¯¹åº”çš„å‡½æ•°)</li>
<li><code>views</code>ç›®å½•ï¼šç®¡ç† <code>http</code> å‡½æ•°ï¼ˆæ¥æ”¶æµè§ˆå™¨è¯·æ±‚ï¼Œè¿”å›å­—ç¬¦ä¸²è‡³æµè§ˆå™¨ï¼‰</li>
<li><code>models</code>ç›®å½•ï¼šç®¡ç†æ•°æ®åº“æ•°æ®</li>
<li><code>static</code>ç›®å½•ï¼šç®¡ç†é™æ€æ–‡ä»¶</li>
<li><code>consumers</code>ç›®å½•ï¼šç®¡ç†<code>websocket</code>å‡½æ•°</li>
</ol>
<h3 id="å®ç°ä¸€ä¸ªè·¯ç”±é‡å®šå‘">å®ç°ä¸€ä¸ªè·¯ç”±é‡å®šå‘</h3>
<ul>
<li><code>url</code> è¾“å…¥ç½‘å€ -&gt; <code>acapp.urls</code> -&gt; <code>game.urls</code> -&gt; <code>game.views.index</code> -&gt; å±•ç¤ºé¡µé¢</li>
</ul>
<p><strong>game.views</strong></p>
<p>è¿™å…¶ä¸­ï¼Œ<code>HttpResponse()</code>å†…éƒ¨ä½¿ç”¨<code>html</code>çš„è¯­æ³•ï¼Œè¿”å›çš„å“åº”å°±ç›´æ¥ç”¨è¿™ä¸ªå­—ç¬¦ä¸²ä½œä¸ºé¡µé¢ï¼Œè½¬æ¢æˆ<code>html</code></p>
<pre tabindex="0"><code>from django.http import HttpResponse

def index(request):
    line1 = &#39;&lt;h1 style=&#34;text-align: center&#34;&gt; ç¬¬ä¸€ä¸ªç½‘é¡µ &lt;/h1&gt;&#39;
    return HttpResponse(line1)
</code></pre><p><strong>game.urls</strong></p>
<p>è¿™å…¶ä¸­ï¼Œ<code>path('PATH', function, name)</code>çš„å«ä¹‰æ˜¯ï¼Œåœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯<code>ç½‘ç«™/game/PATH</code>ï¼Œå°±ä¼šè°ƒç”¨<code>function</code>ï¼Œåå­—ä¸º<code>name</code>ï¼Œè¿™æ˜¯åœ¨<code>/game/</code>ç›®å½•ä¸‹çš„è°ƒç”¨ï¼Œæ‰€ä»¥è¿™ä¸ª<code>PATH</code>æ˜¯åœ¨<code>/game/</code>çš„åŸºç¡€ä¸Šçš„<strong>ç›¸å¯¹è·¯å¾„</strong>ï¼Œæ‰€ä»¥ä»–çš„<strong>ç»å¯¹è·¯å¾„</strong>æ˜¯<code>ç½‘ç«™/game/PATH</code></p>
<pre tabindex="0"><code>from django.urls import path
from game.views import index

urlpatterns = [ 
    path(&#34;&#34;, index, name=&#34;index&#34;),
]
</code></pre><p><strong>acapp.urls</strong></p>
<p>è¿™å…¶ä¸­ï¼Œ<code>path('PATH', include('game.urls'))</code>çš„å«ä¹‰æ˜¯ï¼šåœ¨ç”¨æˆ·è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯<code>ç½‘ç«™/PATH</code>ï¼Œå°±ä¼šèµ°åˆ°<code>/game/urls</code>ï¼Œå¹¶æ ¹æ®<code>/game/urls.py</code>æ¥è·‘è·¯ç”±ï¼Œå°±æ˜¯è¯´ï¼Œç”¨æˆ·åœ¨è®¿é—®<code>ç½‘ç«™/</code>çš„æ—¶å€™ï¼Œç”±äºæ­¤æ—¶è°ƒç”¨çš„å‡½æ•°æ˜¯<code>include('game.urls')</code>ï¼Œæ‰€ä»¥è®¿é—®<code>ç½‘ç«™/</code>ç›¸å½“äºæ ¹æ®<code>game/urls</code>è®¿é—®</p>
<pre tabindex="0"><code>from django.contrib import admin
from django.urls import path, include

urlpatterns = [ 
    path(&#39;&#39;, include(&#39;game.urls&#39;)),
    path(&#39;admin/&#39;, admin.site.urls),
] 
</code></pre><p>ç„¶åç›´æ¥æ‰“å¼€ <code>ip:socket</code> å¯ä»¥ç›´æ¥æ˜¾ç¤º <code>index</code> è¿”å›çš„ç½‘é¡µ</p>
<h1 id="åˆ›å»ºèœå•ç•Œé¢">åˆ›å»ºèœå•ç•Œé¢</h1>
<ul>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/3199626/">3. åˆ›å»ºèœå•ç•Œé¢ | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/solution/content/73121/">3.1 ä¸Šè¯¾ç¬”è®° | å¤§å®¶å¥½ä»Šå¤©æ˜¯</a></li>
<li><a href="https://www.acwing.com/solution/content/73707/">3.1 ä¸Šè¯¾ç¬”è®° | æ </a></li>
</ul>
<hr>
<h2 id="æ„å»ºé¡¹ç›®æ¡†æ¶">æ„å»ºé¡¹ç›®æ¡†æ¶</h2>
<h3 id="é¡¹ç›®ç³»ç»Ÿè®¾è®¡">é¡¹ç›®ç³»ç»Ÿè®¾è®¡</h3>
<ul>
<li><code>menu</code>ï¼šèœå•é¡µé¢</li>
<li><code>playground</code>ï¼šæ¸¸æˆç•Œé¢</li>
<li><code>settings</code>ï¼šè®¾ç½®ç•Œé¢</li>
</ul>
<h3 id="é¡¹ç›®æ–‡ä»¶ç»“æ„">é¡¹ç›®æ–‡ä»¶ç»“æ„</h3>
<pre tabindex="0"><code>.
|-- README.md
|-- acapp
|   |-- __init__.py    # æ–‡ä»¶å¤¹åœ¨åŠ ä¸ŠÂ __init__.pyÂ æ–‡ä»¶åï¼Œpython ä¾¿å¯ä»¥é€šè¿‡ import æ¥å¼•ç”¨è¯¥æ–‡ä»¶å¤¹
|   |-- asgi.py
|   |-- settings.py
|   |-- urls.py
|   `-- wsgi.py
|-- db.sqlite3
|-- game
|   |-- __init__.py
|   |-- admin.py
|   |-- apps.py
|   |-- migrations
|   |   `-- __init__.py
|   |-- models
|   |   `-- __init__.py
|   |-- static
|   |   |-- css
|   |   |   `-- game.css    # ä¸€èˆ¬ä¸€ä¸ªå·¥ç¨‹ï¼Œåªæœ‰ä¸€ä¸ª css æ–‡ä»¶å°±è¶³å¤Ÿäº†
|   |   |-- image
|   |   |   `-- menu
|   |   |       `-- background.gif
|   |   `-- js
|   |       |-- dist
|   |       |   `-- game.js
|   |       `-- src
|   |           `-- zbase.js    # æ€»çš„ js æ–‡ä»¶ï¼Œå‘½åä»¥ z å¼€å¤´ä¼šè‡ªåŠ¨åœ¨å­—å…¸åºæœ€å
|   |-- templates
|   |   `-- multiends
|   |       `-- web.html
|   |-- tests.py
|   |-- urls
|   |   |-- __init__.py
|   |   |-- index.py
|   |   |-- menu
|   |   |   |-- __init__.py
|   |   |   `-- index.py
|   |   |-- playground
|   |   |   |-- __init__.py
|   |   |   `-- index.py
|   |   `-- settings
|   |       |-- __init__.py
|   |       `-- index.py
|   `-- views
|       |-- __init__.py
|       |-- index.py
|       |-- menu
|       |   `-- __init__.py
|       |-- playground
|       |   `-- __init__.py
|       `-- settings
|           `-- __init__.py
|-- manage.py
`-- scripts
    `-- compress_game_js.sh
</code></pre><h4 id="js-æ–‡ä»¶ç®¡ç†"><code>js</code> æ–‡ä»¶ç®¡ç†</h4>
<p>ä¸€èˆ¬ä¸€ä¸ªå·¥ç¨‹ä¼šæœ‰å¾ˆå¤šä¸ª <code>.js</code> æºæ–‡ä»¶ï¼Œä¸ºäº†åŠ å¿«ç½‘ç»œçš„ä¼ è¾“ï¼Œä¹Ÿä¸ºäº†æ¯æ¬¡å†™æ–°çš„ <code>.js</code> æ–‡ä»¶ä¸ç”¨æ¯ä¸ª <code>html</code> éƒ½é¢å¤–å¼•å…¥ä¸€æ¬¡</p>
<p>è€ƒè™‘ç”¨ä¸€ä¸ª <code>src</code> æºæ–‡ä»¶å¤¹æ¥å­˜å‚¨æ‰€æœ‰çš„ <code>.js</code> æºæ–‡ä»¶</p>
<p>ç„¶åç”¨ <code>dist</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç”± <code>src</code> ä¸‹æ‰€æœ‰æºæ–‡ä»¶æ•´åˆç”Ÿæˆçš„ä¸€ä¸ªç›®æ ‡ <code>.js</code> æ–‡ä»¶</p>
<p>è¿™æ ·æ—¢å®ç°äº†å¿«é€Ÿä¼ è¾“çš„å¥½å¤„ï¼Œä¹Ÿæ–¹ä¾¿äº†åç»­ç¼–å†™ <code>html</code> æ–‡ä»¶æ—¶ï¼Œå¼•å…¥ <code>.js</code> çš„ä¾¿åˆ©</p>
<p>åˆ›å»ºä¸€ä¸ªè„šæœ¬å®ç°ä¸Šè¿° <strong>æ•´åˆ</strong> çš„åŠŸèƒ½
<code>~/acapp/scripts/compress_game_js.sh</code></p>
<pre tabindex="0"><code>#! /bin/bash

JS_PATH=/home/acs/acapp/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find $JS_PATH_SRC -type f -name &#39;*.js&#39; | sort | xargs cat &gt; ${JS_PATH_DIST}game.js
</code></pre><h4 id="html-æ–‡ä»¶ç®¡ç†"><code>html</code> æ–‡ä»¶ç®¡ç†</h4>
<p>åœ¨ <code>templates</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>menu</code>ã€<code>playground</code>ã€<code>settings</code>ã€<code>multiends</code> å››ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨ä¸‰ä¸ªæ¨¡å—å’Œç»ˆç«¯çš„ <code>html</code> æ–‡ä»¶</p>
<p>åœ¨ <code>multiends</code> ä¸‹åˆ›å»º <code>web.html</code> æ–‡ä»¶</p>
<pre tabindex="0"><code>{% load static %}
&lt;!-- Django ä¸­å¼•å…¥å…¨å±€settingé‡Œçš„å˜é‡ static çš„è¯­æ³•--&gt;
&lt;head&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdn.acwing.com/static/jquery-ui-dist/jquery-ui.min.css&#34;&gt;
    &lt;script src=&#34;https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js&#34;&gt;&lt;/script&gt;
    &lt;!-- ä¸Šè¿°ä¸¤å¥å¼•å…¥ jQuery åº“ --&gt;
    &lt;!-- ä½¿ç”¨å¼•å…¥çš„å˜é‡ static çš„è¯­æ³•å¦‚ä¸‹ --&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;{% static &#39;css/game.css&#39; %}&#34;&gt;
    &lt;script src=&#34;{% static &#39;js/dist/game.js&#39; %}&#34;&gt;&lt;/script&gt;
    &lt;!-- åˆ†åˆ«å¼•å…¥ css æ–‡ä»¶å’Œæ€»çš„ js æ–‡ä»¶ --&gt;
&lt;/head&gt;

&lt;body style=&#34;margin: 0&#34;&gt;
    &lt;div id=&#34;ac_game_12345678&#34;&gt;&lt;/div&gt;
    &lt;script&gt;
        $(document).ready(function(){
            let ac_game = new AcGame(&#34;ac_game_12345678&#34;)
        })
    &lt;/script&gt;
&lt;/body&gt;
</code></pre><h4 id="views-è§†å›¾ç®¡ç†"><code>views</code> è§†å›¾ç®¡ç†</h4>
<p>åœ¨ <code>views</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸‰ä¸ªæ¨¡å—çš„è§†å›¾æ–‡ä»¶å¤¹</p>
<p>å†™ä¸€ä¸ª <code>index.py</code> æ–‡ä»¶ï¼Œç›®çš„æ˜¯åœ¨ <code>web</code> ç«¯è¢«è®¿é—®æ—¶ï¼Œè¿”å›ä¸Šé¢å†™çš„ <code>web.html</code> æ–‡ä»¶</p>
<pre tabindex="0"><code>from django.shortcuts import render

def index(request):
  return render(request, &#34;multiends/web.html&#34;)
</code></pre><h4 id="urls-è·¯ç”±ç®¡ç†"><code>urls</code> è·¯ç”±ç®¡ç†</h4>
<pre tabindex="0"><code>                                     /-- &#34;&#34; -- index
                                    / -- &#34;menu/&#34; -- menu.index
             / &#34;&#34; --&gt; &#34;game.url&#34; --&gt; 
            /                       \ -- &#34;playground/&#34; -- playground.index
id:scoket -&gt;                         \-- &#34;settings/&#34; -- settings.index
            \
             \ &#34;/admin&#34; -- åˆ°è¾¾ç®¡ç†å‘˜é¡µé¢
</code></pre><p><code>~/acapp/acapp/urls.py</code></p>
<pre tabindex="0"><code>from django.contrib import admin
from django.urls import path, include

urlpatterns = [
  path(&#39;&#39;, include(&#39;game.urls.index&#39;)),
  path(&#39;admin/&#39;, admin.site.urls),
]
</code></pre><p><code>~/acapp/game/urls/index.py</code></p>
<pre tabindex="0"><code>from django.urls import path, include
from game.views.index import index

urlpatterns = [ 
    path(&#34;&#34;, index, name=&#34;index&#34;),
    path(&#34;menu/&#34;, include(&#34;game.urls.menu.index&#34;)),
    path(&#34;playground/&#34;, include(&#34;game.urls.playground.index&#34;)),
    path(&#34;settings/&#34;, include(&#34;game.urls.settings.index&#34;))
]
</code></pre><h4 id="ç½‘é¡µæ¸²æŸ“æµç¨‹">ç½‘é¡µæ¸²æŸ“æµç¨‹</h4>
<p>æ ¹æ®ç”¨æˆ·çš„é“¾æ¥ï¼Œé¦–å…ˆè¿›å…¥<code>acapp/urls.py</code>ï¼Œæ ¹æ®<code>path</code>å†è¿›å…¥<code>game/urls/index.py</code>ï¼Œå†æ ¹æ®<code>path</code>è¿›å…¥ä¸‹ä¸€å±‚<code>url</code>æˆ–è°ƒç”¨ç›¸å¯¹åº”çš„<code>views</code>ä¸­çš„<code>index.py</code>å‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶å‚æ•°ï¼Œåœ¨ç½‘é¡µç«¯æ¸²æŸ“<code>templates/multiends</code>ä¸‹çš„<code>web.html</code>ï¼Œ<code>html</code>ä¸­æœ‰<code>JS</code>æ‰§è¡Œ</p>
<p>æ³¨æ„ï¼šæœ¬é¡¹ç›®ä¸ºå‰åç«¯åˆ†ç¦»ï¼Œå³é€šè¿‡<code>JS</code>åœ¨<code>client</code>ä¸­æ¸²æŸ“é¡¹ç›®(åŠ¨æ€ç”Ÿæˆé¡µé¢)ï¼Œè€Œä¸æ˜¯åœ¨<code>server</code>æ¸²æŸ“é¡¹ç›®</p>
<h3 id="ä¿®æ”¹å…¨å±€é…ç½®">ä¿®æ”¹å…¨å±€é…ç½®</h3>
<h4 id="è®¾ç½®æ—¶åŒº">è®¾ç½®æ—¶åŒº</h4>
<p>ä¿®æ”¹é¡¹ç›®çš„ <strong>UTC</strong> æ—¶é—´ä¸º <strong>CN</strong> æ—¶é—´</p>
<pre tabindex="0"><code>$ vim /acapp/settings.py

******
TIME_ZONE = &#39;Asia/Shanghai&#39; # åŸæ¥é»˜è®¤æ˜¯ UTC
******
</code></pre><h4 id="æ·»åŠ é…ç½®æ–‡ä»¶">æ·»åŠ é…ç½®æ–‡ä»¶</h4>
<p>å°†æ–°åˆ›å»ºçš„ <code>game</code> ä¸‹çš„ <code>apps.py</code> ä¸­çš„ <code>GameConfig</code> åŠ åˆ° <code>settings.py</code> ä¸‹</p>
<pre tabindex="0"><code>$ vim /acapp/settings.py

******
INSTALLED_APPS = [
  &#39;game.apps.GameConfig&#39;,
  ......
]
******
</code></pre><p>å£°æ˜å°†é™æ€æ–‡ä»¶è·¯å¾„ <code>STATIC_ROOT</code> å’Œ <code>MEDIA_ROOT</code></p>
<pre tabindex="0"><code>$ vim /acapp/settings.py

******
import os

......

STATIC_ROOT = os.path.join(BASE_DIR, &#39;static&#39;)
STATIC_URL = &#39;/static/&#39;

MEDIA_ROOT = os.path.join(BASE_DIR, &#39;media&#39;)
MEDIA_URL = &#39;/media/&#39;
******
</code></pre><h2 id="åˆ›å»ºèœå•-menu-ç•Œé¢">åˆ›å»ºèœå• <code>menu</code> ç•Œé¢</h2>
<h3 id="æ­å»ºèœå•-menu-ç•Œé¢çš„æ¡†æ¶">æ­å»ºèœå• <code>menu</code> ç•Œé¢çš„æ¡†æ¶</h3>
<p>æˆ‘ä»¬é‡‡ç”¨çš„ <strong>å‰åç«¯åˆ†ç¦»å¼</strong> å¼€å‘ï¼Œæ‰€æœ‰çš„ <strong>html</strong> æ¸²æŸ“éƒ½è¦æ±‚åœ¨å‰ç«¯å®Œæˆ</p>
<p>å¼€å‘æµç¨‹å°±æ˜¯ï¼Œå…ˆåœ¨ <strong>html</strong> é‡Œåˆ›å»ºå¥½ä¸€ä¸ªæœ‰ <strong>id</strong> çš„ <strong>div</strong></p>
<p>ç„¶ååˆ©ç”¨ <strong>js</strong> æ–‡ä»¶ï¼Œæ•è·åˆ°è¯¥ <strong>div</strong>ï¼Œå¹¶è¿›è¡Œ <strong>æ¸²æŸ“</strong></p>
<p><code>/templates/multiends/web.html</code></p>
<pre tabindex="0"><code>...
    &lt;div id=&#34;ac_game_12345678&#34;&gt;&lt;/div&gt;
    &lt;script&gt;
        $(document).ready(function(){
            let ac_game = new AcGame(&#34;ac_game_12345678&#34;)
        })
    &lt;/script&gt;
...
</code></pre><p><code>js/src/zbase.js</code></p>
<pre tabindex="0"><code>class AcGame {
    constructor(id) {
        this.id = id; 
        this.$ac_game = $(&#39;#&#39; + id);
        this.menu = new AcGameMenu(this);
    }   
}
</code></pre><p><code>js/src/menu/zbase.js</code></p>
<pre tabindex="0"><code>class AcGameMenu {
    constructor(root) {
        this.root = root;
        this.$menu = $(` 
&lt;div class=&#34;ac-game-menu&#34;&gt;
&lt;/div&gt;
`);
        this.root.$ac_game.append(this.$menu); 
}
</code></pre><p><code>css/game.css</code></p>
<pre tabindex="0"><code>.ac-game-menu {
    width: 100%;
    height: 100%;
    background-image: url(&#39;/static/image/menu/background.gif&#39;);
    background-size: 100% 100%;
    user-select: none;
}
</code></pre><p>è¿™é‡Œçš„ <strong>ä»£ç é€»è¾‘</strong> å¦‚ä¸‹ï¼š</p>
<ol>
<li><code>html</code> é¡µé¢æ‰§è¡Œåˆ° <code>js</code> ä»£ç ï¼Œåˆ©ç”¨ <code>AcGameç±»</code> åˆ›å»ºå¯¹è±¡ <code>ac_game</code> åŒæ—¶ä¼ é€’å‚æ•° <code>div</code> çš„ <code>id</code></li>
<li><code>AcGame</code> å¼€å§‹æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ•è· <code>html</code> æ ‡ç­¾ï¼Œå¹¶åˆ©ç”¨ <code>AcGameMenuç±»</code> åˆ›å»ºå¯¹è±¡ <code>menu</code>ï¼Œå¹¶å°†æ•´ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ä¸‹ä¼ </li>
<li><code>AcGameMenu</code> å¼€å§‹æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œç„¶ååˆ›å»º <code>html</code> ä»£ç ï¼ŒåŠ åˆ°æ•è·åˆ°çš„ <code>html</code> ä»£ç ä¸‹</li>
<li>æœ€ç»ˆæˆåŠŸæ¸²æŸ“å‡ºèƒŒæ™¯å›¾ç‰‡</li>
</ol>
<h3 id="è®¾ç½®èœå•-menu-é¡µé¢çš„å†…å®¹">è®¾ç½®èœå• <code>menu</code> é¡µé¢çš„å†…å®¹</h3>
<p>ä¸»è¦å†…å®¹å°±æ˜¯åœ¨ä¸»é¡µé¢ä¸­ï¼Œæ˜¾ç¤ºï¼šå•äººæ¨¡å¼ã€å¤šäººæ¨¡å¼ã€è®¾ç½®ï¼Œä¸‰ä¸ªæŒ‰é’®çš„é€‰é¡¹
<code>js/src/menu/zbase.js</code></p>
<pre tabindex="0"><code>class AcGameMenu {
    constructor(root) {
        this.root = root;
        this.$menu = $(`
&lt;div class=&#34;ac-game-menu&#34;&gt;
    &lt;div class=&#34;ac-game-menu-field&#34;&gt;
        &lt;div class=&#34;ac-game-menu-field-item ac-game-menu-field-item-single-mode&#34;&gt;
            å•äººæ¨¡å¼
        &lt;/div&gt;
        &lt;div class=&#34;ac-game-menu-field-item ac-game-menu-field-item-multi-mode&#34;&gt;
            å¤šäººæ¨¡å¼
        &lt;/div&gt;
        &lt;div class=&#34;ac-game-menu-field-item ac-game-menu-field-item-settings-mode&#34;&gt;
            è®¾ç½®
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
`);
        this.root.$ac_game.append(this.$menu);
        this.$single_mode = this.$menu.find(&#39;.ac-game-menu-field-item-single-mode&#39;);
        this.$multi_mode = this.$menu.find(&#39;.ac-game-menu-field-item-multi-mode&#39;);
        this.$settings_mode = this.$menu.find(&#39;.ac-game-menu-field-item-settings-mode&#39;);
    }
}
</code></pre><p><code>css/game.css</code></p>
<pre tabindex="0"><code>.ac-game-menu {
    width: 100%;
    height: 100%;
    background-image: url(&#39;/static/image/menu/background.gif&#39;);
    background-size: 100% 100%;
    user-select: none;
}
.ac-game-menu-field {
    width: 20vw;
    position: relative;
    top: 40vh;
    left: 19vh;
}
.ac-game-menu-field-item {
    height: 7vh;
    width: 18vw;
    color: white;
    font-size: 6vh;
    font-style: italic;
    padding: 2vh;
    margin: 1vh 0;
    cursor: pointer;
    text-align: center;
    background-color: rgba(39, 21, 28, 0.6);
    border-radius: 10px;
    letter-spacing: 0.5vw;
}
.ac-game-menu-field-item:hover {
    transform: scale(1.2);
    transition: 100ms;
}
</code></pre><h3 id="æ·»åŠ -å•äººæ¨¡å¼-ç›‘å¬å‡½æ•°--æ‰“å¼€æ¸¸æˆç•Œé¢-åŠŸèƒ½">æ·»åŠ  &lsquo;å•äººæ¨¡å¼&rsquo; ç›‘å¬å‡½æ•° â€”â€” æ‰“å¼€æ¸¸æˆç•Œé¢ åŠŸèƒ½</h3>
<p>è¿™é‡Œè¦å®ç°çš„ <strong>é€»è¾‘</strong>ï¼š</p>
<ol>
<li>ç‚¹å‡» &lsquo;å•äººæ¨¡å¼&rsquo; æŒ‰é’®è§¦å‘ <code>click</code> äº‹ä»¶ï¼Œéšå³è§¦å‘ç›‘å¬å‡½æ•°ï¼Œå¼€å§‹æ‰§è¡Œ</li>
<li>å…³é—­ <code>menu</code> é¡µé¢</li>
<li>æ‰“å¼€ <code>playground</code> é¡µé¢</li>
</ol>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å…ˆç®€æ˜“çš„å®ç°ä¸€ä¸ª <code>playground</code> é¡µé¢ï¼Œæ–¹ä¾¿è°ƒè¯•è¯¥åŠŸèƒ½
<code>js/src/playground/zbase.js</code></p>
<pre tabindex="0"><code>class AcGamePlayground {
    constructor(root) {
        this.root = root;
        this.$playground = $(`&lt;div&gt;æ¸¸æˆç•Œé¢&lt;/div&gt;`);

        this.hide();
        this.root.$ac_game.append(this.$playground);

        this.start();
    }
    start() {

    }
    show() {    //æ‰“å¼€ playground ç•Œé¢
        this.$playground.show();
    }
    hide() {    //å…³é—­ playground ç•Œé¢
        this.$playground.hide();
    }

}
</code></pre><p>åœ¨å®ç°ç›‘å¬å‡½æ•°åŠŸèƒ½ä¹‹å‰ï¼Œå…ˆåœ¨ <code>/src/zbase.js</code> å³ä¸» <code>js</code> æ–‡ä»¶ä¸‹ï¼Œåˆ©ç”¨ <code>AcGamePlayground</code> ç±»åˆ›å»ºå¥½ <code>playground</code> å¯¹è±¡</p>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨å‰ç«¯ï¼Œæ¸²æŸ“å‡ºä¸¤ä¸ªç•Œé¢äº†ï¼Œåˆ†åˆ«æ˜¯ï¼š<code>menu</code> å’Œ <code>playground</code></p>
<p><code>js/src/zbase.js</code></p>
<pre tabindex="0"><code>class AcGame {
    constructor(id) {
        this.id = id;
        this.$ac_game = $(&#39;#&#39; + id);
        this.menu = new AcGameMenu(this);
        // æŠŠ playground å¯¹è±¡ä¹Ÿå»ºå¥½ï¼Œè¿™æ ·æˆ‘ä»¬å°±åŒæ—¶æœ‰ä¸¤ä¸ªç•Œé¢äº†
        this.playground = new AcGamePlayground(this);

        this.start();
    }                    
    start() {

    }
}
</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å¼€å§‹å®ç° <code>ac-game-menu-field-item-single-mode</code> æ ‡ç­¾çš„ <code>click</code> äº‹ä»¶çš„ç›‘å¬å‡½æ•°</p>
<p>å…¶åŠŸèƒ½ä¹‹å‰è®²è¿‡äº†ï¼Œå°±æ˜¯å…³é—­ <code>menu</code> é¡µé¢ï¼Œæ‰“å¼€ <code>playground</code> é¡µé¢</p>
<p><code>js/src/menu/zbase.js</code></p>
<pre tabindex="0"><code>class AcGameMenu {
    constructor(root) {
        this.root = root;
        this.$menu = $(`
&lt;div class=&#34;ac-game-menu&#34;&gt;
    &lt;div class=&#34;ac-game-menu-field&#34;&gt;
        &lt;div class=&#34;ac-game-menu-field-item ac-game-menu-field-item-single-mode&#34;&gt;
            å•äººæ¨¡å¼
        &lt;/div&gt;
        &lt;div class=&#34;ac-game-menu-field-item ac-game-menu-field-item-multi-mode&#34;&gt;
            å¤šäººæ¨¡å¼
        &lt;/div&gt;
        &lt;div class=&#34;ac-game-menu-field-item ac-game-menu-field-item-settings-mode&#34;&gt;
            è®¾ç½®
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
`);
        this.root.$ac_game.append(this.$menu);
        this.$single_mode = this.$menu.find(&#39;.ac-game-menu-field-item-single-mode&#39;);
        this.$multi_mode = this.$menu.find(&#39;.ac-game-menu-field-item-multi-mode&#39;);
        this.$settings_mode = this.$menu.find(&#39;.ac-game-menu-field-item-settings-mode&#39;);

        this.start();
    }
    start() {
        this.add_listening_events();
    }
    add_listening_events() {
        let outer = this;
        this.$single_mode.click(function(){
            outer.hide();   // å…³é—­ä¸»é¡µé¢
            outer.root.playground.show();   // æ‰“å¼€æ¸¸æˆç•Œé¢
        });
    }

    show() {    //æ˜¾ç¤ºmenuç•Œé¢
        this.$menu.show();
    }
    hide() {    //éšè—menuç•Œé¢
        this.$menu.hide();
    }
}
</code></pre><h1 id="åˆ›å»ºæ¸¸æˆç•Œé¢">åˆ›å»ºæ¸¸æˆç•Œé¢</h1>
<ul>
<li><a href="https://www.acwing.com/solution/content/79181/">4.1 ä¸Šè¯¾ç¬”è®° | Andrew1729</a></li>
</ul>
<hr>
<blockquote>
<p><strong>è‹¥ä¿®æ”¹<code>staticæ–‡ä»¶å¤¹</code>ä¸‹çš„ç›¸å…³æ–‡ä»¶ï¼Œéœ€åœ¨<code>~/acapp</code>ä¸‹æ‰§è¡Œ<code>./scripts/compress_game_js.sh</code>æ¥æ‰“åŒ…æ–‡ä»¶</strong></p>
</blockquote>
<h2 id="å‰ç«¯çš„æ¨¡å—åŒ–å¼•å…¥">å‰ç«¯çš„æ¨¡å—åŒ–å¼•å…¥</h2>
<p>ç”±äºåœ¨ <code>html</code> ä»£ç éƒ¨åˆ†ï¼Œæ˜¯å°†æ•´ä¸ª <code>game.js</code> æ–‡ä»¶å¼•å…¥</p>
<p>è¿™æ ·ä¼šå¯¼è‡´åœ¨ <code>game.js</code> ä¸­å®šä¹‰çš„å˜é‡ï¼Œä¼šå˜æˆæ•´ä¸ªç½‘é¡µçš„ <strong>å…¨å±€å˜é‡</strong>ï¼ˆä¹‹åå¯èƒ½ä¼šå¼•èµ·å˜é‡é‡åçš„è¯¸å¤šé—®é¢˜ï¼‰</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ <strong>æ¨¡å—åŒ–å¼•å…¥</strong> çš„åŠŸèƒ½ï¼Œè®©ç½‘é¡µåªå¼•å…¥åœ¨ <code>html</code> ä¸­éœ€è¦çš„éƒ¨åˆ†</p>
<p>ä¿®æ”¹ <code>web.html</code></p>
<pre tabindex="0"><code>&lt;!-- é¦–å…ˆï¼Œå…ˆåˆ æ‰ä¸Šé¢æ•´ä¸ªå¼•å…¥ game.js çš„éƒ¨åˆ† --&gt;
&lt;!-- ç„¶åï¼Œä¸‹æ–¹åˆ›å»ºå¯¹è±¡çš„éƒ¨åˆ†ï¼Œå…ˆä½¿ç”¨æ¨¡å—åŒ–å¼•å…¥ --&gt;
......
    &lt;script type=&#34;module&#34;&gt;
        import {AcGame} from &#34;{% static &#39;js/dist/game.js&#39; %}&#34;
        $(document).ready(function(){
            let ac_game = new AcGame(&#34;ac_game_12345678&#34;)
        })
    &lt;/script&gt;
......
</code></pre><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¿®æ”¹å¼•å…¥çš„ç±»ï¼Œåœ¨å‰é¢åŠ ä¸Š <code>export</code>ï¼Œå¦‚ä¸‹ä¿®æ”¹ <code>js/src/zbase.js</code></p>
<pre tabindex="0"><code>export class AcGame {
    ......
}
</code></pre><p>è¿™æ ·ï¼Œåœ¨å…¨å±€ä¸­ï¼Œåªä¼šå‡ºç°å¼•å…¥çš„æ¨¡å—ï¼Œå…¶ä»–çš„ <code>.js</code> ä»£ç ä¸ä¼šå‡ºç°åœ¨å…¨å±€ä¸­</p>
<h2 id="æ„å»ºæ¸¸æˆç•Œé¢æ¡†æ¶">æ„å»ºæ¸¸æˆç•Œé¢æ¡†æ¶</h2>
<p><code>static/js/src/playground/zbase.js</code></p>
<pre tabindex="0"><code>......
    this.$playground = $(`&lt;div class=&#34;ac-game-playground&#34;&gt;&lt;/div&gt;`);
......
</code></pre><p><code>game.css</code></p>
<pre tabindex="0"><code>......
.ac-game-playground {
    height: 100%;
    width: 100%;
    user-select: none;  // ç¦ç”¨å³é”®å¼¹èœå•
} 
</code></pre><h2 id="å®ç°æ¸¸æˆå¼•æ“æ¡†æ¶">å®ç°æ¸¸æˆå¼•æ“æ¡†æ¶</h2>
<p>æ¸¸æˆä¸­ï¼Œç‰©ä½“åœ¨ç§»åŠ¨ï¼Œå…¶å®ç°åŸç†æ˜¯ï¼šæ¯ä¸€ä¸ªåŠ¨ä½œéƒ½ä¼šæ¸²æŸ“å¤šå¼ å›¾ç‰‡å‡ºæ¥ï¼Œç„¶åå›¾ç‰‡å¿«é€Ÿçš„åˆ‡æ¢ï¼Œä»è€Œå®ç°åŠ¨çš„è¿‡ç¨‹</p>
<p>å› æ­¤ï¼Œéœ€è¦å…ˆå®ç°ä¸€ä¸ªæ¸¸æˆå¼•æ“çš„åŸºç±» <code>AcGameObject</code> ï¼Œä½¿å¾—æ¯å¸§èƒ½æ¸²æŸ“ä¸€å¼ å›¾ç‰‡å‡ºæ¥</p>
<p>è¯¥åŸºç±»éœ€è¦å…·å¤‡çš„åŠŸèƒ½æœ‰ï¼š</p>
<ol>
<li><code>start()</code> åœ¨æ¸¸æˆå¼€å§‹çš„ç¬¬ä¸€å¸§æ—¶éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä¸€èˆ¬æ˜¯åˆ›å»ºå¯¹è±¡ï¼‰</li>
<li><code>update()</code> åœ¨æ¸¸æˆå¼€å§‹åçš„æ¯ä¸€å¸§å‡ä¼šæ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä¸€èˆ¬æ˜¯æ¸²æŸ“å½“å‰å¯¹è±¡çš„å„ç§çŠ¶æ€ï¼‰</li>
<li><code>on_destroy()</code> åˆ æ‰è¯¥ç‰©ä½“å‰éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä¸€èˆ¬æ˜¯åˆ æ‰åŠ¨ç”»ï¼Œæˆ–è€…ç»™å¯¹æ‰‹åŠ åˆ†ï¼‰</li>
<li><code>destroy()</code> åˆ æ‰è¯¥ç‰©ä½“</li>
</ol>
<p>æ ¹æ®ä¸Šè¿°é€»è¾‘ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºæœ¬æ­å»ºå‡ºæ¥ä¸€ä¸ªæ¸¸æˆå¼•æ“çš„åŸºç±»äº†ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
<code>/static/js/playground/ac_game_object/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> AC_GAME_OBJECTS = [];   <span style="color:#007f7f">// ç”¨äºè®°å½•å½“å‰ç”»å¸ƒä¸­ï¼Œéœ€è¦æ¸²æŸ“çš„å¯¹è±¡æœ‰å“ªäº›
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor() {
</span></span><span style="display:flex;"><span>        AC_GAME_OBJECTS.push(<span style="color:#fff;font-weight:bold">this</span>);  <span style="color:#007f7f">// å°†å½“å‰æ–°å»ºçš„å¯¹è±¡ï¼ŒåŠ å…¥åˆ°å…¨å±€çš„ç”»å¸ƒä¸­å»ï¼Œå‚ä¸æ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.has_called_start = <span style="color:#fff;font-weight:bold">false</span>;  <span style="color:#007f7f">// æ˜¯å¦æ‰§è¡Œè¿‡ start å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.timedelta = <span style="color:#ff0;font-weight:bold">0</span>;             <span style="color:#007f7f">// å½“å‰å¸§è·ç¦»ä¸Šä¸€å¸§çš„æ—¶é—´é—´éš”
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">// è¯¥æ•°æ®è®°å½•æ˜¯ä¸ºäº†åç»­è®¡ç®—é€Ÿåº¦ç­‰å‚æ•°çš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>    start() {   <span style="color:#007f7f">// åªä¼šåœ¨ç¬¬ä¸€å¸§æ‰§è¡Œä¸€æ¬¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    update() {  <span style="color:#007f7f">// æ¯ä¸€å¸§å‡ä¼šæ‰§è¡Œä¸€æ¬¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    on_destroy() {  <span style="color:#007f7f">// åœ¨è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    destroy() { <span style="color:#007f7f">// åˆ æ‰è¯¥ç‰©ä½“
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.on_destroy();  <span style="color:#007f7f">//åˆ æ‰è¯¥ç‰©ä½“å‰ï¼Œæ‰§è¡Œåˆ å‰çš„æ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åœ¨å…¨å±€æ¸²æŸ“ç‰©ä½“ä¸­ï¼Œæ‰¾åˆ°è¯¥ç‰©ä½“ï¼Œå¹¶å°†å…¶åˆ æ‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; AC_GAME_OBJECTS.length; i ++ ) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (AC_GAME_OBJECTS[i] === <span style="color:#fff;font-weight:bold">this</span>) {  <span style="color:#007f7f">// ä¸‰ç­‰å·ï¼Œåœ¨jsé‡Œé¢å¤–åŠ äº†ä¸€å±‚ç±»å‹ç›¸ç­‰çº¦æŸ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                AC_GAME_OBJECTS.splice(i, <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> last_timestamp;
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">let</span> AC_GAME_ANIMATION = <span style="color:#fff;font-weight:bold">function</span>(timestamp) {  <span style="color:#007f7f">// å›è°ƒå‡½æ•°ï¼Œå®ç°ï¼šæ¯ä¸€å¸§é‡ç»˜æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€é
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; AC_GAME_OBJECTS.length; i ++ ) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> obj = AC_GAME_OBJECTS[i];
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!obj.has_called_start) { <span style="color:#007f7f">// å¦‚æœè¿˜æœªæ‰§è¡Œåˆå§‹å¸§åŠ¨ä½œï¼Œå°±å…ˆæ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            obj.start();
</span></span><span style="display:flex;"><span>            obj.has_called_start = <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">else</span> {  <span style="color:#007f7f">// æ‰§è¡Œè¿‡åˆå§‹å¸§ï¼Œå°±æ‰§è¡Œæ¯ä¸€å¸§çš„ä»»åŠ¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            obj.timedelta = timestamp - last_timestamp;
</span></span><span style="display:flex;"><span>            obj.update();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    last_timestamp = timestamp; <span style="color:#007f7f">// æ›´æ–°æœ€åä¸€æ¬¡æ—¶é—´æˆ³
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    requestAnimationFrame(AC_GAME_ANIMATION);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>requestAnimationFrame(AC_GAME_ANIMATION);   <span style="color:#007f7f">// JSçš„APIï¼Œå¯ä»¥è°ƒç”¨1å¸§é‡Œé¢çš„å‡½æ•°ã€‚(æœ‰äº›æµè§ˆå™¨çš„ä¸€ç§’å¸§æ•°ä¸ä¸€å®šç›¸ç­‰)
</span></span></span></code></pre></div><blockquote>
<p><strong>æ¥ä¸‹æ¥æ‰€æœ‰çš„ä¸€åˆ‡æ¸¸æˆï¼Œéƒ½æ˜¯åŸºäºè¿™ä¸ªå¼•æ“çš„åŸºç±»å®Œæˆçš„</strong></p>
</blockquote>
<h2 id="å®ç°æ¸¸æˆåœ°å›¾åŠŸèƒ½">å®ç°æ¸¸æˆåœ°å›¾åŠŸèƒ½</h2>
<p>ç›®æ ‡ï¼šå®ç°ä¸€ä¸ªæ¯ä¸€ç§’éƒ½åœ¨æ¸²æŸ“çš„çº¯é»‘èƒŒæ™¯</p>
<p>è™½ç„¶ç°é˜¶æ®µè¦å®ç°çš„åœ°å›¾è¾ƒä¸ºç®€å•ï¼Œä½†ä¸ºäº†åæœŸçš„æ‹“å±•æ€§ï¼Œæ•…è¿˜æ˜¯è€ƒè™‘æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹æ¥å®Œæˆ</p>
<p>ç„¶ååœ¨ <code>js</code> ä¸­ï¼Œå·²ç»å°è£…å¥½äº†ä¸€ä¸ª <code>canvas</code> çš„ <code>api</code> æ¥å¸®åŠ©å®ç°èƒŒæ™¯ç”»å¸ƒï¼Œç›´æ¥è°ƒç”¨å³å¯</p>
<p>å…ˆé“ºå¼€ç”»å¸ƒï¼Œç„¶åè®¾ç½®ä¸ºé»‘è‰²</p>
<p><code>static/js/playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGamePlayground {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ......
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// $(&#39;.playground&#39;)å¯¹è±¡å·²ç»åœ¨ css æ–‡ä»¶é‡Œæ¸²æŸ“å‡ºé«˜å®½äº†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">// ç°åœ¨æŠŠä»–çš„é«˜å®½å­˜ä¸‹æ¥ï¼Œå¾€ä¸‹ä¼ é€’
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.width = <span style="color:#fff;font-weight:bold">this</span>.$playground.width();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.height = <span style="color:#fff;font-weight:bold">this</span>.$playground.height();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.game_map = <span style="color:#fff;font-weight:bold">new</span> GameMap(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        ......
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .....
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>static/js/playground/game-map/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> GameMap <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {    <span style="color:#007f7f">// ç»§æ‰¿è‡ªæ¸¸æˆå¼•æ“åŸºç±»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    constructor(playground) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>();    <span style="color:#007f7f">// è‡ªå‡½æ•°åŠŸèƒ½ï¼šè°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.playground = playground;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$canvas = $(<span style="color:#0ff;font-weight:bold">`&lt;canvas&gt;&lt;/canvas&gt;`</span>); <span style="color:#007f7f">// åˆ›å»ºä¸€ä¸ªcanvasçš„jQueryå¯¹è±¡ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å®ç°çš„ç”»å¸ƒ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.ctx = <span style="color:#fff;font-weight:bold">this</span>.$canvas[<span style="color:#ff0;font-weight:bold">0</span>].getContext(<span style="color:#0ff;font-weight:bold">&#39;2d&#39;</span>); <span style="color:#007f7f">// jQueryå¯¹è±¡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯htmlå¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">// è®¾ç½®ç”»å¸ƒçš„å®½é«˜
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.width = <span style="color:#fff;font-weight:bold">this</span>.playground.width;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.height = <span style="color:#fff;font-weight:bold">this</span>.playground.height;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.playground.$playground.append(<span style="color:#fff;font-weight:bold">this</span>.$canvas);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    update() {  <span style="color:#007f7f">// æ¸¸æˆåœ°å›¾æ¯å¸§éƒ½è¦æ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#0ff;font-weight:bold">&#34;rgba(0, 0, 0, 0.2)&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillRect(<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.width, <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.height);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><h2 id="å®ç°ç©å®¶æ˜¾ç¤ºåŠŸèƒ½">å®ç°ç©å®¶æ˜¾ç¤ºåŠŸèƒ½</h2>
<p>æ¯›å¯ç‰ˆç©å®¶æ˜¾ç¤ºï¼Œæ¯ä¸ªç©å®¶å®šä¹‰æˆä¸€ä¸ªåœ†ï¼Œç„¶åæ¸²æŸ“åœ¨å‰ç«¯</p>
<p>éœ€è¦å¯¹äºç©å®¶ç±»å®šä¹‰å¤šä¸ªå‚æ•°ï¼Œä»¥æ–¹ä¾¿æ—¥åæ‹“å±•ï¼š</p>
<ol>
<li><code>x</code> å½“å‰ä½ç½®çš„æ¨ªåæ ‡</li>
<li><code>y</code> å½“å‰ä½ç½®çš„çºµåæ ‡</li>
<li><code>radius</code> å½“å‰çš„åŠå¾„</li>
<li><code>speed</code> å½“å‰çš„é€Ÿåº¦</li>
<li><code>is_me</code> è¯¥å¯¹è±¡æ˜¯å¦æ˜¯å½“å‰ç©å®¶æ“æ§çš„å¯¹è±¡ï¼ˆä¸€æ˜¯åŒºåˆ«äº botï¼ŒäºŒæ˜¯åŒºåˆ«äº æ—¥åè”æœºçš„å…¶ä»–ç©å®¶ï¼‰</li>
</ol>
<p><code>static/js/playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGamePlayground {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ......
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.players = [];  <span style="color:#007f7f">// å­˜æ”¾å½“å‰æ¸¸æˆä¸­çš„æ‰€æœ‰ç©å®¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">// å°†ç©å®¶åŠ å…¥æ¸¸æˆä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#0ff;font-weight:bold">&#34;white&#34;</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">true</span>));
</span></span><span style="display:flex;"><span>        ......
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .....
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>static/js/playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Player <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor(playground, x, y, radius, color, speed, is_me) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// æŠŠä¿¡æ¯éƒ½å­˜ä¸‹æ¥
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.playground = playground;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx = <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.ctx;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x = x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.color = color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.speed = speed;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.radius = radius;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.is_me = is_me;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç”¨äºæµ®ç‚¹æ•°è¿ç®—
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.eps = <span style="color:#ff0;font-weight:bold">0.1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    update() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    render() {  <span style="color:#007f7f">// æ¸²æŸ“ä¸€ä¸ªåœ†
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, <span style="color:#fff;font-weight:bold">this</span>.radius, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fill();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    on_destroy() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="å®ç°ç©å®¶ç§»åŠ¨åŠŸèƒ½">å®ç°ç©å®¶ç§»åŠ¨åŠŸèƒ½</h2>
<p>ç§»åŠ¨çš„å®ç°é€»è¾‘å¾ˆç®€å•ï¼Œå°±æ˜¯è®©æ¯å¸§æ¸²æŸ“çš„åœ†çš„ä½ç½®å‘ç”Ÿç§»åŠ¨å³å¯</p>
<p>ä¸Šè¿°ç®€å•é€»è¾‘çš„å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Player <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor(....)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vx = <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vy = <span style="color:#ff0;font-weight:bold">1</span>;
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    update() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x += x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y += y;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå‘é¼ æ ‡ç‚¹å‡»ä½ç½®ç§»åŠ¨çš„åŠŸèƒ½</p>
<p>è¿™å°±éœ€è¦è®¾ç½®ä¸€ä¸ª <code>click</code> äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œåˆ†åˆ«ä¼ é€’ï¼š</p>
<ol>
<li>é¼ æ ‡ç‚¹å‡»äº‹ä»¶</li>
<li>é¼ æ ‡ç‚¹å‡»ä½ç½®çš„æ¨ªåæ ‡</li>
<li>é¼ æ ‡ç‚¹å‡»ä½ç½®çš„çºµåæ ‡</li>
</ol>
<p>ç„¶åå¼€å§‹è®©åœ†çš„ä½ç½®é€æ­¥å‘é¼ æ ‡ç‚¹å‡»ä½ç½®è¿›è¡Œç§»åŠ¨</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>start() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.is_me) {   <span style="color:#007f7f">// å¯¹äºç”¨æˆ·ç©å®¶ï¼ŒåŠ ä¸Šç›‘å¬å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.add_listening_events();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>add_listening_events() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æŠŠé¼ æ ‡å³é”®è°ƒå‡ºèœå•æ çš„åŠŸèƒ½å…³æ‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.$canvas.on(<span style="color:#0ff;font-weight:bold">&#34;contextmenu&#34;</span>, <span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æŠŠå³é”®æ§åˆ¶ç§»åŠ¨åŠŸèƒ½åŠ ä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.$canvas.mousedown(<span style="color:#fff;font-weight:bold">function</span>(e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å·¦é”®:1 ä¸­é”®:2 å³é”®:3
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">3</span>) {
</span></span><span style="display:flex;"><span>            outer.move_to(e.clientX, e.clientY);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åï¼Œæˆ‘ä»¬æ¥å®ç°ç§»åŠ¨åŠŸèƒ½çš„å‡½æ•° <code>move_to(tx, ty)</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>constructor(...){
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.vx = <span style="color:#ff0;font-weight:bold">0</span>;    <span style="color:#007f7f">// xæ–¹å‘ä¸Šçš„ç§»åŠ¨é€Ÿåº¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.vy = <span style="color:#ff0;font-weight:bold">0</span>;    <span style="color:#007f7f">// yæ–¹å‘ä¸Šçš„ç§»åŠ¨é€Ÿåº¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.move_length = <span style="color:#ff0;font-weight:bold">0</span>;   <span style="color:#007f7f">// å‰©ä½™ç§»åŠ¨è·ç¦»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    ...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>get_dist (x1, y1, x2, y2) { <span style="color:#007f7f">// æ±‚ä¸¤ç‚¹çš„æ¬§å‡ é‡Œå¾—è·ç¦»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> dx = x2 - x1;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> dy = y2 - y1;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">Math</span>.sqrt(dx * dx + dy * dy);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>move_to(tx, ty) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è®¡ç®—ç§»åŠ¨è·ç¦»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.move_length = <span style="color:#fff;font-weight:bold">this</span>.get_dist(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, tx, ty);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// è®¡ç®—ç§»åŠ¨è§’åº¦ï¼Œapiæ¥å£ï¼šatan2(dy, dx)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> angle = <span style="color:#fff;font-weight:bold">Math</span>.atan2(ty - <span style="color:#fff;font-weight:bold">this</span>.y, tx - <span style="color:#fff;font-weight:bold">this</span>.x);
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ä½ç§» 1 ä¸ªå•ä½é•¿åº¦ï¼ˆå‘ç€çŸ¢é‡æ–¹å‘ç§»åŠ¨åˆ°å•ä½åœ†ä¸Šï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.vx = <span style="color:#fff;font-weight:bold">Math</span>.cos(angle);  <span style="color:#007f7f">// æç›´äº’åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.vy = <span style="color:#fff;font-weight:bold">Math</span>.sin(angle);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>update() {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// æµ®ç‚¹æ•°ç²¾åº¦è¿ç®—
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.move_length &lt; <span style="color:#fff;font-weight:bold">this</span>.eps) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.move_length = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vx = <span style="color:#fff;font-weight:bold">this</span>.vy = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è®¡ç®—å•ä½å¸§é‡Œçš„ç§»åŠ¨è·ç¦»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">let</span> moved = <span style="color:#fff;font-weight:bold">Math</span>.min(<span style="color:#fff;font-weight:bold">this</span>.move_length, <span style="color:#fff;font-weight:bold">this</span>.speed * <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x += <span style="color:#fff;font-weight:bold">this</span>.vx * moved;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y += <span style="color:#fff;font-weight:bold">this</span>.vy * moved;
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// è¿˜è¦å‡æ‰ç§»åŠ¨çš„è·ç¦»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.move_length -= moved;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>è¿™æ ·å°±å®ç°äº†ç©å®¶çš„ç§»åŠ¨åŠŸèƒ½äº†ï¼Œå¯ä»¥ç™»å½• <code>id:socket</code> è°ƒè¯•è¯¥åŠŸèƒ½</p>
<h2 id="å®ç°ç«çƒæŠ€èƒ½çš„åŠŸèƒ½">å®ç°ç«çƒæŠ€èƒ½çš„åŠŸèƒ½</h2>
<p>ç«çƒå¯¹è±¡çš„å»ºç«‹ä¸ç©å®¶åŸºæœ¬ä¸€è‡´ï¼Œç›´æ¥ç…§æ¬ï¼Œåœ¨ä»ç»†èŠ‚ä¸Šæ”¹æ”¹å³å¯</p>
<p><code>js/src/playground/skill/fireball/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> FireBall <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor(playground, player, x, y, radius, vx, vy, color, speed, move_length, damage) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.playground = playground;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx = <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.ctx;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.player = player;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x = x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vx = vx;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vy = vy;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.radius = radius;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.color = color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.speed = speed;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.move_length = move.length;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.damage = damage;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.eps = <span style="color:#ff0;font-weight:bold">0.1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    update() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.move_length &lt; <span style="color:#fff;font-weight:bold">this</span>.eps) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.destroy();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">let</span> moved = <span style="color:#fff;font-weight:bold">Math</span>.min(<span style="color:#fff;font-weight:bold">this</span>.move_length, <span style="color:#fff;font-weight:bold">this</span>.speed * <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.x += <span style="color:#fff;font-weight:bold">this</span>.vx * moved;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.y += <span style="color:#fff;font-weight:bold">this</span>.vy * moved;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.move_length -= moved;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, <span style="color:#fff;font-weight:bold">this</span>.radius, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span> * Pi, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fill();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div><p>ç„¶ååœ¨ç©å®¶èº«ä¸Šå®ç°å‘ç«çƒçš„åŠŸèƒ½</p>
<p>åŸºæœ¬å®ç°é€»è¾‘ï¼šå½“å‰é€‰ä¸­äº†ç«çƒæŠ€èƒ½ï¼Œé¼ æ ‡å·¦é”®ç‚¹å‡»ä¸€å¤„ï¼Œå‘è¯¥å¤„å‘å°„ä¸€ä¸ªç«çƒ</p>
<p>å› æ­¤ï¼Œä¸ºäº†çŸ¥é“ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†æŠ€èƒ½ï¼Œéœ€è¦åŠ ä¸€ä¸ªé”®ç›˜è§¦å‘äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œç„¶ååŠ ä¸€ä¸ªé¼ æ ‡å·¦é”®è§¦å‘äº‹ä»¶ç›‘å¬å‡½æ•°</p>
<p>ç„¶åå‘å°„ä¸€ä¸ªç«çƒå³å¯</p>
<p><code>js/src/playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>constructor(...) {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.cur_skill = <span style="color:#fff;font-weight:bold">null</span>;  <span style="color:#007f7f">// è®°å½•å½“å‰é€‰æ‹©çš„æŠ€èƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    ...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>add_listening_events() {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.$canvas.mousedown(<span style="color:#fff;font-weight:bold">function</span>(e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å·¦é”®:1 ä¸­é”®:2 å³é”®:3
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">3</span>) {
</span></span><span style="display:flex;"><span>            outer.move_to(e.clientX, e.clientY);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">1</span>) {     <span style="color:#007f7f">// é¼ æ ‡å·¦é”®äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">if</span> (outer.cur_skill === <span style="color:#0ff;font-weight:bold">&#34;fireball&#34;</span>) {   <span style="color:#007f7f">// å½“å‰å·²ç»é€‰ä¸­ç«çƒæŠ€èƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                outer.shoot_fireball(e.clientX, e.clientY);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        outer.cur_skill = <span style="color:#fff;font-weight:bold">null</span>; <span style="color:#007f7f">// æ¸…ç©ºå½“å‰æŠ€èƒ½
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    });
</span></span><span style="display:flex;"><span>    $(<span style="color:#fff;font-weight:bold">window</span>).keydown(<span style="color:#fff;font-weight:bold">function</span>(e) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">81</span>) {       <span style="color:#007f7f">// é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            outer.cur_skill = <span style="color:#0ff;font-weight:bold">&#34;fireball&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>shoot_fireball(tx, ty) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ç¡®å®šç«çƒçš„å‚æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> x = <span style="color:#fff;font-weight:bold">this</span>.x, y = <span style="color:#fff;font-weight:bold">this</span>.y; <span style="color:#007f7f">// ç«çƒå‘å°„ç‚¹å°±æ˜¯å½“å‰ç©å®¶çš„ä½ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> radius = <span style="color:#fff;font-weight:bold">this</span>.playground.height * <span style="color:#ff0;font-weight:bold">0.01</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> angle = <span style="color:#fff;font-weight:bold">Math</span>.atan2(ty - <span style="color:#fff;font-weight:bold">this</span>.y, tx - <span style="color:#fff;font-weight:bold">this</span>.x);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> vx = <span style="color:#fff;font-weight:bold">Math</span>.cos(angle), vy = <span style="color:#fff;font-weight:bold">Math</span>.sin(angle);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> color = <span style="color:#0ff;font-weight:bold">&#34;orange&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> speed = <span style="color:#fff;font-weight:bold">this</span>.playground.height * <span style="color:#ff0;font-weight:bold">0.5</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> move_length = <span style="color:#fff;font-weight:bold">this</span>.playground.height * <span style="color:#ff0;font-weight:bold">1.0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> damage = <span style="color:#fff;font-weight:bold">this</span>.playground.height * <span style="color:#ff0;font-weight:bold">0.01</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">new</span> FireBall(<span style="color:#fff;font-weight:bold">this</span>.playground, <span style="color:#fff;font-weight:bold">this</span>, x, y, radius, vx, vy, color, speed, move_length, damage);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿™æ ·å°±æˆåŠŸå®ç°äº†ç©å®¶å‘å°„ç«çƒçš„åŠŸèƒ½äº†</p>
<h2 id="å®ç°å•äººæ¨¡å¼ä¸‹çš„äººæœºåŠŸèƒ½">å®ç°å•äººæ¨¡å¼ä¸‹çš„äººæœºåŠŸèƒ½</h2>
<p>å…ˆåˆ›å»ºå¥½ 5 ä¸ªäººæœº
<code>playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#007f7f">//åˆ›å»ºå¥½ 5 ä¸ªäººæœº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span><span style="color:#fff;font-weight:bold">for</span> (len i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">5</span>; i ++ ) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#0ff;font-weight:bold">&#34;blue&#34;</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">false</span>));
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>è¿™æ ·åˆ›å»ºå‡ºæ¥çš„ 5 ä¸ªäººæœºæ˜¯ä¸ä¼šè¡ŒåŠ¨çš„</p>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªç®€æ˜“çš„ AI ç¨‹åºï¼Œè®©ä»–ä»¬ä¹Ÿä¼šç§»åŠ¨</p>
<p>è¿™é‡Œå®ç°çš„é€»è¾‘æ˜¯ï¼šæ¯æ¬¡éšæœºä¸€ä¸ªç›®çš„åœ°ï¼Œå‘ç›®çš„åœ°ç§»åŠ¨ï¼Œç„¶åå†éšæœºä¸€ä¸ªç›®çš„åœ°ï¼Œå¾ªç¯ä¸‹å»</p>
<p>æ ¹æ®è¯¥é€»è¾‘ï¼Œä¿®æ”¹ä¸¤ä¸ªå‡½æ•°å³å¯</p>
<p><code>playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>start() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.is_me) {   <span style="color:#007f7f">// å¯¹äºç”¨æˆ·ç©å®¶ï¼ŒåŠ ä¸Šç›‘å¬å‡½æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.add_listening_events();
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> tx = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.width;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> ty = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.height;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.move_to(tx, ty);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span> update() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.move_length &lt; <span style="color:#fff;font-weight:bold">this</span>.eps) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.move_length = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vx = <span style="color:#fff;font-weight:bold">this</span>.vy = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.is_me) {   <span style="color:#007f7f">// å¦‚æœæ˜¯äººæœºï¼Œåœä¸‹æ¥æ—¶å†éšæœºä¸€ä¸ªæ–¹å‘å‰è¿›
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            <span style="color:#fff;font-weight:bold">let</span> tx = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.width;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">let</span> ty = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.height;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.move_to(tx, ty);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>on_destroy() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#fff;font-weight:bold">this</span>.playground.players.length; i ++ ) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.playground.players[i] === <span style="color:#fff;font-weight:bold">this</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.playground.players.splice(i, <span style="color:#ff0;font-weight:bold">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="å®ç°æŠ€èƒ½å‘½ä¸­æ•ˆæœç¢°æ’æ£€æµ‹åŠŸèƒ½">å®ç°æŠ€èƒ½å‘½ä¸­æ•ˆæœï¼ˆç¢°æ’æ£€æµ‹åŠŸèƒ½ï¼‰</h2>
<p>å®ç°é€»è¾‘ï¼šæ£€æµ‹ä¸¤ä¸ªåœ†çš„ä¸­å¿ƒè·ç¦»æ˜¯å¦å°äºä¸¤ä¸ªåœ†çš„åŠå¾„ä¹‹å’Œ</p>
<p>å°äºç­‰äºæ—¶ï¼Œä»£è¡¨å‘ç”Ÿç¢°æ’ï¼Œå¼€å§‹æ‰§è¡Œå‘½ä¸­æ•ˆæœï¼š</p>
<ol>
<li>è¢«å‡»ä¸­ç”¨æˆ·æ‰è¡€</li>
<li>è¢«å‡»ä¸­ç”¨æˆ·æ”¶åˆ°å‘åå‡»é€€æ•ˆæœ</li>
</ol>
<p>ç¢°æ’æ£€æµ‹å†™åœ¨ç«çƒç±»é‡Œï¼Œå‡»é€€æ•ˆæœå†™åœ¨ç©å®¶ç±»é‡Œ</p>
<p><code>fireball/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>update() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (...) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// ç¢°æ’æ£€æµ‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#fff;font-weight:bold">this</span>.playground.players.length; i ++ ) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">let</span> player = <span style="color:#fff;font-weight:bold">this</span>.playground.players[i];
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.player !== player &amp;&amp; <span style="color:#fff;font-weight:bold">this</span>.is_collision(player)) {  <span style="color:#007f7f">// ç¢°æ’å‘ç”Ÿä¸€å®šæ˜¯åœ¨éæ–½æ³•è€…èº«ä¸Š
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                <span style="color:#fff;font-weight:bold">this</span>.attack(player);    <span style="color:#007f7f">// ç«çƒå‘½ä¸­ï¼Œç›®æ ‡ç©å®¶æ‰§è¡Œå‡»é€€æ•ˆæœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>get_dist(x1, y1, x2, y2) {  <span style="color:#007f7f">// è·å¾—ä¸¤ç‚¹çš„æ¬§å‡ é‡Œå¾—è·ç¦»
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">let</span> dx = x2 - x1;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> dy = y2 - y1;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">Math</span>.sqrt(dx * dx + dy * dy);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>is_collision(player) {  <span style="color:#007f7f">// æ£€æµ‹ä¸¤ä¸ªåœ†çš„ä¸­å¿ƒè·ç¦»æ˜¯å¦å°äºä¸¤ä¸ªåœ†çš„åŠå¾„ä¹‹å’Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> distance = <span style="color:#fff;font-weight:bold">this</span>.get_dist(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, player.x, player.y);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (distance &lt; (<span style="color:#fff;font-weight:bold">this</span>.radius + player.radius))
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>attack(player) {    <span style="color:#007f7f">// ç«çƒå‘½ä¸­ï¼Œç›®æ ‡ç©å®¶æ‰§è¡Œå‡»é€€æ•ˆæœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> angle = <span style="color:#fff;font-weight:bold">Math</span>.atan2(player.y - <span style="color:#fff;font-weight:bold">this</span>.y, player.x - <span style="color:#fff;font-weight:bold">this</span>.x);   <span style="color:#007f7f">// è®¡ç®—è§’åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    player.is_attacked(angle, <span style="color:#fff;font-weight:bold">this</span>.damage); <span style="color:#007f7f">// ç«çƒå‘½ä¸­ï¼Œç›®æ ‡ç©å®¶æ‰§è¡Œå‡»é€€æ•ˆæœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.destroy(); <span style="color:#007f7f">// ç«çƒå‘½ä¸­åï¼Œè‡ªç„¶æ¶ˆå¤±
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></div><p><strong>è¢«å‡»é€€çš„æ—¶å€™ï¼ŒåŸæ¥çš„ç§»åŠ¨é€Ÿåº¦åº”è¯¥ç½®ä¸º 0ï¼Œå½“å‰çš„ç§»åŠ¨åº”è¯¥è½¬ä¸ºå‘è¢«å‡»ä¸­æ–¹å‘ä¸Šçš„ç§»åŠ¨</strong>
<code>player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>is_attacked(angle, damage) {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.radius -= damage;  <span style="color:#007f7f">// å—ä¼¤ï¼ŒåŠå¾„å‡å°‘
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.radius &lt; <span style="color:#ff0;font-weight:bold">10</span>) { <span style="color:#007f7f">// å½“åŠå¾„å°äº10åƒç´ æ—¶ï¼Œä»£è¡¨æ­»äº¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.destroy();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// å¼€å§‹æ‰§è¡Œå‡»é€€æ•ˆæœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">this</span>.damage_vx = <span style="color:#fff;font-weight:bold">Math</span>.cos(angle);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.damage_vy = <span style="color:#fff;font-weight:bold">Math</span>.sin(angle);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.damage_speed = damage * <span style="color:#ff0;font-weight:bold">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.speed *= <span style="color:#ff0;font-weight:bold">0.5</span>;  <span style="color:#007f7f">// è¢«å‡»ä¸­ä»¥åç§»åŠ¨é€Ÿåº¦å‡åŠ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span><span style="display:flex;"><span>update() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.damage_speed &gt; <span style="color:#fff;font-weight:bold">this</span>.eps) {   <span style="color:#007f7f">// å½“å‰ä»å¤„äºå‡»é€€æ•ˆæœä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.vx = <span style="color:#fff;font-weight:bold">this</span>.vy = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.move_length = <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x += <span style="color:#fff;font-weight:bold">this</span>.damage_vx * <span style="color:#fff;font-weight:bold">this</span>.damage_speed * <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y += <span style="color:#fff;font-weight:bold">this</span>.damage_vy * <span style="color:#fff;font-weight:bold">this</span>.damage_speed * <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.damage_speed *= <span style="color:#fff;font-weight:bold">this</span>.friction; <span style="color:#007f7f">// å‡»é€€é€Ÿåº¦ä¹˜ä»¥æ‘©æ“¦ç³»æ•°ï¼Œå·²è¾¾åˆ°å‰Šå‡çš„ç›®çš„
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="è¢«å‡»ä¸­ä»¥åçš„ç²’å­æ•ˆæœç‰¹æ•ˆ">è¢«å‡»ä¸­ä»¥åçš„ç²’å­æ•ˆæœç‰¹æ•ˆ</h2>
<p>å®ç°é€»è¾‘ï¼šè¢«å‡»ä¸­ä»¥åï¼Œåœ¨ç©å®¶é™„è¿‘éšæœºç”Ÿæˆä¸€äº›ç²’å­å°çƒ</p>
<p>å› æ­¤æˆ‘ä»¬è¦å…ˆå®ç° ç²’å­å°çƒ å¯¹è±¡</p>
<p><code>static/js/src/playground/particle/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Particle <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor(playground, x, y, radius, vx, vy, color, speed) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">super</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.playground = playground;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx = <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.ctx;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x = x;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y = y;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.radius = radius;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vx = vx;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.vy = vy;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.color = color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.speed = speed;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.friction = <span style="color:#ff0;font-weight:bold">0.9</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    update() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.speed &lt; <span style="color:#fff;font-weight:bold">this</span>.eps) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.destroy;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.x += <span style="color:#fff;font-weight:bold">this</span>.vx * <span style="color:#fff;font-weight:bold">this</span>.speed * <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.y += <span style="color:#fff;font-weight:bold">this</span>.vy * <span style="color:#fff;font-weight:bold">this</span>.speed * <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.speed *= <span style="color:#fff;font-weight:bold">this</span>.friction;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, <span style="color:#fff;font-weight:bold">this</span>.radius, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fill();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>} 
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬åœ¨è¢«å‡»é€€åŠŸèƒ½æ¨¡å—ï¼Œå®ç°ç”Ÿæˆç²’å­å°çƒçš„æ•ˆæœ</p>
<ul>
<li>ç²’å­å°çƒé‡Šæ”¾å¼§åº¦ä¸º $[0,2Ï€)$ çš„éšæœºæ•°
<ul>
<li>ç²’å­å°çƒçš„ x, y åˆ†é‡æ¯”ç‡æ ¹æ®å¼§åº¦æ¥è®¾å®š</li>
</ul>
</li>
<li>ç²’å­å°çƒçš„èµ·å§‹åæ ‡åº”ä¸ç©å®¶çš„åæ ‡ç›¸åŒ</li>
<li>ç²’å­å°çƒçš„é¢œè‰²ä¸ç©å®¶é¢œè‰²ç›¸åŒ</li>
<li>ç²’å­å°çƒçš„é€Ÿåº¦ä¸ºç©å®¶ç§»åŠ¨é€Ÿåº¦çš„ $10$ å€</li>
</ul>
<p><code>js/src/playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>is_attacked(angle, damage) {
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// ç²’å­å°çƒæ•ˆæœ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">10</span> + <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#ff0;font-weight:bold">5</span>; i ++ ) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> x = <span style="color:#fff;font-weight:bold">this</span>.x, y = <span style="color:#fff;font-weight:bold">this</span>.y;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> radius = <span style="color:#fff;font-weight:bold">this</span>.radius * <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#ff0;font-weight:bold">0.1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> angle = <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI * <span style="color:#fff;font-weight:bold">Math</span>.random();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> vx = <span style="color:#fff;font-weight:bold">Math</span>.cos(angle), vy = <span style="color:#fff;font-weight:bold">Math</span>.sin(angle);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> color = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> speed = <span style="color:#fff;font-weight:bold">this</span>.speed * <span style="color:#ff0;font-weight:bold">10</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> Particle(<span style="color:#fff;font-weight:bold">this</span>.playground, x, y, radius, vx, vy, color, speed);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="ä¸€äº›å°ä¼˜åŒ–">ä¸€äº›å°ä¼˜åŒ–</h2>
<h3 id="äººæœºéšæœºé¢œè‰²">äººæœºéšæœºé¢œè‰²</h3>
<p><code>js/src/playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>constructor(root) {
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åˆ›å»ºå¥½ 5 ä¸ªäººæœº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">5</span>; i ++ ) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#fff;font-weight:bold">this</span>.get_random_color(), <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">false</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>get_random_color() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> colors = [<span style="color:#0ff;font-weight:bold">&#34;blue&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;red&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;pink&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;grey&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;green&#34;</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> colors[<span style="color:#fff;font-weight:bold">Math</span>.floor(<span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#ff0;font-weight:bold">5</span>)];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="äººæœºaiéšæœºæ”»å‡»æ“ä½œ">äººæœºAIéšæœºæ”»å‡»æ“ä½œ</h3>
<p><code>js/src/playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>constructor (...) {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.spent_time = <span style="color:#ff0;font-weight:bold">0</span>;    <span style="color:#007f7f">// åˆå§‹äººæœºå†·å´æ”»å‡»æ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>update() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.spent_time += <span style="color:#fff;font-weight:bold">this</span>.timedelta / <span style="color:#ff0;font-weight:bold">1000</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.is_me &amp;&amp; <span style="color:#fff;font-weight:bold">this</span>.spent_time &gt; <span style="color:#ff0;font-weight:bold">4</span> &amp;&amp; <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#ff0;font-weight:bold">180</span> &lt; <span style="color:#ff0;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> player = <span style="color:#fff;font-weight:bold">this</span>.playground.players[<span style="color:#fff;font-weight:bold">Math</span>.floor(<span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.players.length)];
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.shoot_fireball(player.x, player.y);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="éƒ¨ç½²nginxä¸å¯¹æ¥acappà®">éƒ¨ç½²nginxä¸å¯¹æ¥acappà®</h1>
<ul>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/3257028/">5. éƒ¨ç½²nginxä¸å¯¹æ¥acapp | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/solution/content/79244/">5.1 ä¸Šè¯¾ç¬”è®° | Andrew1729</a></li>
<li><a href="https://www.acwing.com/solution/content/78903/">5.1. ä¸Šè¯¾ç¬”è®° | èŠèŠ±</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/364622127">Ngnix ä»‹ç»</a></li>
<li><a href="https://www.jianshu.com/p/36187963b553">nginx å’Œuwsgiçš„åŒºåˆ«ä¸ä½œç”¨</a></li>
</ul>
<hr>
<h2 id="nginxæ˜¯ä»€ä¹ˆ">Nginxæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<blockquote>
<p><strong>Nginxæ˜¯ä¸€æ¬¾è‡ªç”±çš„ã€å¼€æºçš„ã€é«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨</strong></p>
<p><strong>Nginxå¯ä»¥ä½œä¸ºä¸€ä¸ªHTTPæœåŠ¡å™¨è¿›è¡Œç½‘ç«™çš„å‘å¸ƒå¤„ç†ï¼Œå¦å¤–Nginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†è¿›è¡Œè´Ÿè½½å‡è¡¡çš„å®ç°</strong></p>
<p><strong>Nginxä¸­HttpUwsgiModuleçš„ä½œç”¨æ˜¯ä¸uWSGIæœåŠ¡å™¨è¿›è¡Œäº¤æ¢</strong></p>
</blockquote>
<h2 id="uwsgiæ˜¯ä»€ä¹ˆ">uWSGIæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<blockquote>
<p><strong>uWSGIæ˜¯ä¸€ä¸ªå…¨åŠŸèƒ½çš„HTTPæœåŠ¡å™¨ï¼Œå®ç°äº†WSGIã€uwsgiã€httpç­‰åè®®</strong></p>
<p><strong>å®ƒè¦åšçš„å°±æ˜¯æŠŠHTTPåè®®è½¬åŒ–æˆè¯­è¨€æ”¯æŒçš„ç½‘ç»œåè®®ã€‚æ¯”å¦‚æŠŠHTTPåè®®è½¬åŒ–æˆWSGIåè®®ï¼Œè®©Pythonå¯ä»¥ç›´æ¥ä½¿ç”¨</strong></p>
<p><strong>WSGIåè®®æ˜¯Python è¯­è¨€å®šä¹‰çš„ Web æœåŠ¡å™¨å’Œ Web åº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä¹‹é—´çš„ä¸€ç§ç®€å•è€Œé€šç”¨çš„æ¥å£</strong></p>
<p><strong>ç®€å•æ¥è¯´uWSGIå°±æ˜¯ç”¨æ¥æ²Ÿé€šnginxå’Œdjangoçš„ä¸€åº§æ¡¥æ¢</strong></p>
</blockquote>
<h2 id="nginxuwsgidiango-å·¥ä½œæµç¨‹">Nginx+uWSGI+Diango å·¥ä½œæµç¨‹</h2>
<blockquote>
<p><strong><code>nginx</code> æ˜¯å¯¹å¤–çš„æœåŠ¡æ¥å£ï¼Œå¤–éƒ¨æµè§ˆå™¨é€šè¿‡<code>url</code>è®¿é—®<code>nginx</code></strong></p>
<p><strong><code>nginx</code> æ¥æ”¶åˆ°æµè§ˆå™¨å‘é€è¿‡æ¥çš„<code>http</code>è¯·æ±‚ï¼Œå°†åŒ…è¿›è¡Œè§£æ</strong></p>
<p><strong>åˆ†æ<code>url</code>ï¼Œå¦‚æœæ˜¯é™æ€æ–‡ä»¶è¯·æ±‚å°±ç›´æ¥è®¿é—®ç”¨æˆ·ç»™<code>nginx</code>é…ç½®çš„é™æ€æ–‡ä»¶ç›®å½•ï¼Œç›´æ¥è¿”å›ç”¨æˆ·è¯·æ±‚çš„é™æ€æ–‡ä»¶</strong></p>
<p><strong>å¦‚æœä¸æ˜¯é™æ€æ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¯·æ±‚ï¼Œé‚£ä¹ˆ<code>nginx</code>å°±å°†è¯·æ±‚è½¬å‘ç»™<code>uwsgi</code>ï¼Œ<code>uwsgi</code> æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åå°†åŒ…è¿›è¡Œå¤„ç†ï¼Œå¤„ç†æˆ<code>wsgi</code>å¯ä»¥æ¥å—çš„æ ¼å¼ï¼Œå¹¶å‘ç»™<code>wsgi</code>ï¼Œ<code>wsgi</code> æ ¹æ®è¯·æ±‚è°ƒç”¨åº”ç”¨ç¨‹åºçš„æŸä¸ªæ–‡ä»¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„æŸä¸ªå‡½æ•°ï¼Œæœ€åå¤„ç†å®Œå°†è¿”å›å€¼å†æ¬¡äº¤ç»™<code>wsgi</code>ï¼Œ<code>wsgi</code>å°†è¿”å›å€¼è¿›è¡Œæ‰“åŒ…ï¼Œæ‰“åŒ…æˆ<code>uwsgi</code>èƒ½å¤Ÿæ¥æ”¶çš„æ ¼å¼ï¼Œ<code>uwsgi</code>æ¥æ”¶<code>wsgi</code> å‘é€çš„è¯·æ±‚ï¼Œå¹¶è½¬å‘ç»™<code>nginx</code>, <code>nginx</code>æœ€ç»ˆå°†è¿”å›å€¼è¿”å›ç»™æµè§ˆå™¨</strong></p>
</blockquote>
<h2 id="uwsgiæœåŠ¡çš„å¼€å¯å…³é—­">uwsgiæœåŠ¡çš„å¼€å¯&amp;&amp;å…³é—­</h2>
<ul>
<li>åœ¨<code>~/acapp</code>å¯åŠ¨uwsgiæœåŠ¡ï¼š<strong><code>uwsgi --ini scripts/uwsgi.ini</code></strong></li>
<li>å…³é—­uwsgiæœåŠ¡ï¼š<code>sudo pkillÂ -f uwsgiÂ -9</code></li>
</ul>
<h2 id="é’ˆå¯¹-acapp-çš„ä¼˜åŒ–">é’ˆå¯¹ acapp çš„ä¼˜åŒ–</h2>
<h3 id="æ‰“åŒ…è„šæœ¬ä¼˜åŒ–">æ‰“åŒ…è„šæœ¬ä¼˜åŒ–</h3>
<p>ç”±äºç°åœ¨ <strong>å‘å¸ƒç‰ˆæœ¬çš„è„šæœ¬æ–‡ä»¶</strong> ç”¨çš„æ˜¯æ‰“åŒ…åœ¨æ ¹ç›®å½•é‡Œçš„ <strong>static</strong> æ–‡ä»¶å¤¹</p>
<p>æ¯æ¬¡ä¿®æ”¹å¥½ <strong>static</strong> æ–‡ä»¶å¤¹åï¼Œä¸ä»…éœ€è¦å¯¹ <strong>js</strong> æ–‡ä»¶æ‰“åŒ…ï¼Œè¿˜éœ€è¦å¯¹ <strong>static</strong> æ–‡ä»¶å¤¹æ‰“åŒ…</p>
<p>ä¸æ”¾æŠŠ &ldquo;å°†staticæ–‡ä»¶å¤¹æ‰“åŒ…&rdquo; çš„ <strong>shell</strong> ä»£ç ä¸€èµ·åŠ å…¥ <strong>js</strong> æ‰“åŒ…è„šæœ¬ä¸­ï¼Œä»è€Œå®ç°ä¸€é”®æ‰“åŒ…</p>
<p><code>scripts/compress_game_js.sh</code></p>
<pre tabindex="0"><code>#! /bin/bash

JS_PATH=/home/acs/acapp/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find $JS_PATH_SRC -type f -name &#39;*.js&#39; | sort | xargs cat &gt; ${JS_PATH_DIST}game.js

echo &#34;yes&#34; | python3 manage.py collectstatic
</code></pre><h3 id="é¼ æ ‡ç‚¹å‡»äº‹ä»¶çš„ç›¸å¯¹åç§»">é¼ æ ‡ç‚¹å‡»äº‹ä»¶çš„ç›¸å¯¹åç§»</h3>
<p>ç”±äºå†™æ¸¸æˆç•Œé¢çš„æ—¶å€™ï¼Œç©å®¶ç§»åŠ¨æ˜¯æŒ‰ç…§é¼ æ ‡ç›¸å¯¹äºå½“å‰æ•´ä¸ªæµè§ˆå™¨å–çš„ä½ç½®å‚æ•° <code>e.clientX</code></p>
<p>è€Œ <code>acapp</code> é‡Œï¼Œæ¯ä¸ªåº”ç”¨æ˜¯ä¸€ä¸ªå°çª—å£ï¼Œé¼ æ ‡ç‚¹å‡»ä½ç½®çš„å‚æ•°åº”å½“æ˜¯ <strong>ç›¸å¯¹äºæ•´ä¸ªæ¸¸æˆçª—å£çš„ä½ç½®å‚æ•°</strong></p>
<p>æ‰€æœ‰ä¼šå¯¼è‡´å‡ºç°ï¼Œç‚¹å‡»çš„ä½ç½®ä¸ç§»åŠ¨çš„ä½ç½®ä¸åŒï¼Œè¿™é‡Œéœ€è¦åšå‡ºå°ä¼˜åŒ–</p>
<p>ä¼˜åŒ–çš„é€»è¾‘ :</p>
<ol>
<li>$clientXâˆ’çª—å£å·¦ä¾§åˆ°æµè§ˆå™¨å·¦ä¾§çš„è·ç¦»=ç©å®¶çš„ç›®æ ‡X$</li>
<li>$clientYâˆ’çª—å£ä¸Šä¾§åˆ°æµè§ˆå™¨ä¸Šä¾§çš„è·ç¦»=ç©å®¶çš„ç›®æ ‡Y$
è¿™å°±è¦ç”¨åˆ°ä¸€ä¸ª <code>js</code> çš„ <code>API</code> äº† : <code>getBoundingClientRect()</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>rectObject = object.getBoundingClientRect();
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>rectObject.top : å…ƒç´ ä¸Šè¾¹åˆ°è§†çª—ä¸Šè¾¹çš„è·ç¦»;
</span></span><span style="display:flex;"><span>rectObject.right : å…ƒç´ å³è¾¹åˆ°è§†çª—å·¦è¾¹çš„è·ç¦»;
</span></span><span style="display:flex;"><span>rectObject.bottom : å…ƒç´ ä¸‹è¾¹åˆ°è§†çª—ä¸Šè¾¹çš„è·ç¦»;
</span></span><span style="display:flex;"><span>rectObject.left : å…ƒç´ å·¦è¾¹åˆ°è§†çª—å·¦è¾¹çš„è·ç¦»;
</span></span><span style="display:flex;"><span>rectObject.width : æ˜¯å…ƒç´ è‡ªèº«çš„å®½
</span></span><span style="display:flex;"><span>rectObject.height : æ˜¯å…ƒç´ è‡ªèº«çš„é«˜
</span></span></code></pre></div><p><code>player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span> add_listening_events() {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.$canvas.mousedown(<span style="color:#fff;font-weight:bold">function</span>(e) {
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ›å»º rect å¯¹è±¡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">const</span> rect = outer.ctx.canvas.getBoundingClientRect();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">3</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#007f7f">// è°ƒæ•´åç§»é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            outer.move_to(e.clientX - rect.left, e.clientY - rect.top);
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (outer.cur_skill === <span style="color:#0ff;font-weight:bold">&#34;fireball&#34;</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#007f7f">// è°ƒæ•´åç§»é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                outer.shoot_fireball(e.clientX - rect.left, e.clientY - rect.top);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h3 id="å°†èœå•ç•Œé¢é‡æ–°è®¾ä¸ºä¸»ç•Œé¢">å°†èœå•ç•Œé¢é‡æ–°è®¾ä¸ºä¸»ç•Œé¢</h3>
<p><code>js/zbase.js</code> çš„æ³¨é‡Šå–æ¶ˆï¼Œä½¿ä¹‹åˆ›å»ºå‡º <strong>menu</strong> å¯¹è±¡</p>
<p><code>js/playground/zbase.js</code> çš„æ³¨é‡Šå–æ¶ˆï¼Œå¹¶è®¾ç½®é€»è¾‘ï¼Œè®© <strong>playground</strong> æ‰“å¼€åï¼Œæ‰è¿›è¡Œæ¸¸æˆç•Œé¢åˆå§‹åŒ–</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGamePlayground {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.root = root;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$playground = $(<span style="color:#0ff;font-weight:bold">`&lt;div class=&#34;ac-game-playground&#34;&gt;&lt;/div&gt;`</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.hide();    <span style="color:#007f7f">// åˆå§‹æ—¶éšè—
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">// æ¸¸æˆç•Œé¢ç”Ÿæˆä»£ç åœ¨ä¸‹é¢å±•ç¤º playground æ—¶æ‰§è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.start();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    show() {    <span style="color:#007f7f">// æ‰“å¼€ playground ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.$playground.show();
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// å¼€å§‹ç”Ÿæˆæ¸¸æˆç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.root.$ac_game.append(<span style="color:#fff;font-weight:bold">this</span>.$playground);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.width = <span style="color:#fff;font-weight:bold">this</span>.$playground.width();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.height = <span style="color:#fff;font-weight:bold">this</span>.$playground.height();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.game_map = <span style="color:#fff;font-weight:bold">new</span> GameMap(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.players = [];  <span style="color:#007f7f">// å­˜æ”¾å½“å‰æ¸¸æˆä¸­çš„æ‰€æœ‰ç©å®¶
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#007f7f">// å°†ç©å®¶åŠ å…¥æ¸¸æˆä¸­
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#0ff;font-weight:bold">&#34;white&#34;</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">true</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#007f7f">// åˆ›å»ºå¥½ 5 ä¸ªäººæœº
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">5</span>; i ++ ) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height / <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#fff;font-weight:bold">this</span>.get_random_color(), <span style="color:#fff;font-weight:bold">this</span>.height * <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">false</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="è°ƒæ•´-css-æ–‡ä»¶é€‚åº”çª—å£">è°ƒæ•´ css æ–‡ä»¶ï¼Œé€‚åº”çª—å£</h3>
<p>åœ¨è®¾ç½® <code>web</code> ç½‘é¡µçš„æ—¶å€™ï¼Œæœ‰äº›è®¾ç½®äº†ç»å¯¹å€¼ï¼Œå¯èƒ½å¯¹äºçª—å£åŒ–çš„ <code>acapp</code> æ˜¾ç¤ºæ•ˆæœå·®</p>
<p>å°†ä»–ä»¬ä¿®æ”¹æˆç›¸å¯¹æ•°å€¼</p>
<p><code>game.css</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>.ac-game-menu-field {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    top: <span style="color:#ff0;font-weight:bold">40</span>%;
</span></span><span style="display:flex;"><span>    left: <span style="color:#ff0;font-weight:bold">20</span>%;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.ac-game-menu-field-item {
</span></span><span style="display:flex;"><span>    height: <span style="color:#ff0;font-weight:bold">6</span>vh;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    font-size: <span style="color:#ff0;font-weight:bold">4</span>vh;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h1 id="åˆ›å»ºè´¦å·ç³»ç»Ÿ">åˆ›å»ºè´¦å·ç³»ç»Ÿ</h1>
<p><a href="https://www.acwing.com/file_system/file/content/whole/index/content/3294700/">6. åˆ›å»ºè´¦å·ç³»ç»Ÿ | è®²ä¹‰</a></p>
<hr>
<h2 id="ç”¨æˆ·åå¯†ç ç™»å½•">ç”¨æˆ·åå¯†ç ç™»å½•</h2>
<ul>
<li><a href="https://www.acwing.com/blog/content/12373/">6.1 ç”¨æˆ·åå¯†ç ç™»å½• | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/solution/content/79314/">6.1 ä¸Šè¯¾ç¬”è®° | Andrew1729</a></li>
<li><a href="https://www.acwing.com/solution/content/75831/">6.1 ä¸Šè¯¾ç¬”è®° | åƒé¥±å–è¶³ä¸å­¦ä¹ </a></li>
</ul>
<hr>
<h3 id="å®¢æˆ·ç«¯è¯·æ±‚ä¸djangoå“åº”æµç¨‹">å®¢æˆ·ç«¯è¯·æ±‚ä¸Djangoå“åº”æµç¨‹</h3>
<blockquote>
<p><strong>ç”¨æˆ·åœ¨å®¢æˆ·ç«¯é€šè¿‡<code>$.ajax</code>å‘é€è¯·æ±‚ï¼Œæ ¹æ®<code>urls</code>è·¯ç”±åˆ°å¯¹åº”çš„<code>views</code>ä¸­çš„å‡½æ•°ï¼Œå¤„ç†<code>request</code>åè¿”å›<code>JsonResponse</code> è‡³å®¢æˆ·ç«¯</strong></p>
</blockquote>
<h3 id="å‰æœŸå‡†å¤‡å·¥ä½œ">å‰æœŸå‡†å¤‡å·¥ä½œ</h3>
<p>åšå¼€å‘ï¼Œå…ˆå¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå¦‚æœä¸å¼€å¯ï¼ŒæœåŠ¡å™¨ä¸€æ—¦è¿è¡Œé”™è¯¯ï¼Œå°±åªè¿”å› <code>Error</code> æŠ¥é”™
<code>settings.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>DEBUG = <span style="color:#fff;font-weight:bold">True</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>ä¸è¿‡ <code>django</code> è‡ªå¸¦çš„ <code>User</code> è¡¨å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±é¢å¤–å»ºè¡¨</p>
<h3 id="åˆ›å»ºç”¨æˆ·è¡¨">åˆ›å»ºç”¨æˆ·è¡¨</h3>
<p>æ‰€æœ‰çš„æ•°æ®è¡¨éƒ½å­˜åœ¨ <code>models</code> é‡Œ</p>
<p>æˆ‘ä»¬åœ¨ <code>models</code> é‡Œåˆ›å»ºä¸€ä¸ª <code>player</code> æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰çš„ <code>player</code> ç›¸å…³çš„è¡¨</p>
<p>ç„¶åå¯¹æ–‡ä»¶å¤¹åˆå§‹åŒ– <code>__init__.py</code>ï¼Œæ¥ç€æ‰©å……æˆä¸€ä¸ªæˆ‘ä»¬éœ€è¦çš„æ•°æ®è¡¨</p>
<p><code>game/models/player/player.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.db <span style="color:#fff;font-weight:bold">import</span> models
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.contrib.auth.models <span style="color:#fff;font-weight:bold">import</span> User
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Player(models.Model): <span style="color:#007f7f"># Player ç±»ç»§æ‰¿è‡ª Model ç±»</span>
</span></span><span style="display:flex;"><span>    user = models.OneToOneField(User, on_delete=models.CASCADE)
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f"># è¯´æ˜Playeræ˜¯ä»Userè¡¨æ‰©å……è¿‡æ¥çš„ï¼Œæ¯ä¸€ä¸ªplayeréƒ½ä¸ä¸€ä¸ªuseræ˜¯ä¸€ä¸€å¯¹åº”å…³è”å…³ç³»</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f"># åä¸€ä¸ªå‚æ•°æ˜¯æŒ‡ï¼Œå½“userè¢«åˆ é™¤åï¼Œå¯¹åº”çš„playerä¹Ÿè¦è¢«åˆ é™¤</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f"># ï¼ˆæ„Ÿè§‰å°±æ˜¯å¤–é”®çš„æ„æ€ï¼‰</span>
</span></span><span style="display:flex;"><span>    photo = models.URLField(max_length=<span style="color:#ff0;font-weight:bold">256</span>, blank=<span style="color:#fff;font-weight:bold">True</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f"># ç”¨äºå­˜å‚¨ç”¨æˆ·çš„å¤´åƒçš„url</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f"># æŒ‡å®šæ¯ä¸ªplayeræ•°æ®å±•ç¤ºåœ¨å‰å°çš„æ•°æ®</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">def</span> __str__(self):
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> <span style="color:#fff;font-weight:bold">str</span>(self.user)    <span style="color:#007f7f"># å±•ç¤ºç”¨æˆ·çš„ç”¨æˆ·å</span>
</span></span></code></pre></div><p>å°†å®šä¹‰çš„è¡¨ï¼Œæ³¨å†Œåˆ°åå° <code>admin</code> é¡µé¢ä¸­</p>
<p><code>game/admin.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.models.player.player <span style="color:#fff;font-weight:bold">import</span> Player
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>admin.site.register(Player)
</span></span></code></pre></div><p>ç„¶åå°†åˆ›å»ºçš„æ•°æ®è¡¨æ›´æ–°åˆ° <code>django</code> çš„æ•°æ®åº“ä¸­å»</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f00">$</span> python3 manage.py makemigrations
</span></span><span style="display:flex;"><span>&gt; Migrations <span style="color:#fff;font-weight:bold">for</span> <span style="color:#0ff;font-weight:bold">&#39;game&#39;</span>:
</span></span><span style="display:flex;"><span>&gt;   game/migrations/<span style="color:#ff0;font-weight:bold">0001</span>_initial.py
</span></span><span style="display:flex;"><span>&gt;     - Create model Player
</span></span><span style="display:flex;"><span><span style="color:#f00">$</span> 
</span></span><span style="display:flex;"><span><span style="color:#f00">$</span> python3 manage.py migrate
</span></span><span style="display:flex;"><span>&gt; Operations to perform:
</span></span><span style="display:flex;"><span>&gt;   Apply <span style="color:#fff;font-weight:bold">all</span> migrations: admin, auth, contenttypes, game, sessions
</span></span><span style="display:flex;"><span>&gt; Running migrations:
</span></span><span style="display:flex;"><span>&gt;   Applying game<span style="color:#ff0;font-weight:bold">.0001</span>_initial... OK
</span></span></code></pre></div><p>ç„¶åé‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œå°±å¯ä»¥åœ¨ç®¡ç†å‘˜é¡µé¢çœ‹åˆ°æ–°å»ºçš„æ•°æ®åº“äº†</p>
<h3 id="å®ç°å®¢æˆ·ç«¯çš„ç±»å‹åˆ¤åˆ«acapp-or-web">å®ç°å®¢æˆ·ç«¯çš„ç±»å‹åˆ¤åˆ«ï¼ˆACAPP or WEBï¼‰</h3>
<p>ç”±äºæˆ‘ä»¬å®ç°çš„é¡¹ç›®æ˜¯å‰åç«¯åˆ†ç¦»ç±»å‹ï¼Œå› æ­¤å¯¹äºä¸åŒçš„å®¢æˆ·ç«¯ï¼Œå‰ç«¯è¦æ§åˆ¶ç”Ÿæˆä¸åŒçš„é¡µé¢</p>
<p>ä¸ºäº†å¢å¼ºæ‰©å±•æ€§ï¼Œæ•…è¿™é‡Œè¦å®ç°å®¢æˆ·ç«¯ç±»å‹çš„åˆ¤åˆ«</p>
<p><strong>yæ€»</strong> å·²ç»æå‰å†™å¥½äº† <strong>ACAPP</strong> çš„æ¥å£ï¼Œå¦‚æœç”¨æˆ·ç”¨çš„æ˜¯ <strong>ACAPP</strong> è®¿é—®ï¼Œåˆ™åœ¨æ–°å»ºå¯¹è±¡ <strong>ac_game</strong> æ—¶ï¼Œä¼šé¢å¤–ä¼ é€’ä¸€ä¸ªå‚æ•°</p>
<p>æˆ‘ä»¬åªéœ€æŒ‰ç…§è¿™ä¸ªæ¥å£å»å®Œæˆæ‰©å……å³å¯</p>
<blockquote>
<p><strong>ä¹‹åå†™å°ç¨‹åºä¹‹ç±»çš„åŒç†ï¼Œé¢å¤–ä¼ ä¸€ä¸ªæ¥å£</strong></p>
</blockquote>
<p><code>js/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">export</span> <span style="color:#fff;font-weight:bold">class</span> AcGame {
</span></span><span style="display:flex;"><span>    constructor(id, AcWingOS) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.id = id;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$ac_game = $(<span style="color:#0ff;font-weight:bold">&#39;#&#39;</span> + id);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.AcWingOS = AcWingOS;   <span style="color:#007f7f">//å¦‚æœæ˜¯acappç«¯ï¼Œè¯¥å˜é‡å°±ä¼šå¸¦ç€ä¸€ç³»åˆ—yæ€»æä¾›çš„æ¥å£
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.menu = <span style="color:#fff;font-weight:bold">new</span> AcGameMenu(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.playground = <span style="color:#fff;font-weight:bold">new</span> AcGamePlayground(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.start();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="æ„å»ºç™»å½•åŠŸèƒ½æ¡†æ¶">æ„å»ºç™»å½•åŠŸèƒ½æ¡†æ¶</h3>
<p>åŸºæœ¬é€»è¾‘ : ç”¨æˆ·è®¿é—®é¡µé¢ -&gt; è¿›å…¥ç™»å½•é¡µé¢ -&gt; æäº¤ç™»å½•ä¿¡æ¯ -&gt; æ ¸å¯¹ç™»å½•ä¿¡æ¯ -&gt; è¿”å›ç™»é™†ç»“æœå’Œå…¶ä»–ä¿¡æ¯</p>
<p>æ¯å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°±éœ€è¦å®ç°ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><code>views</code> : å®ç°å…·ä½“çš„è°ƒç”¨æ•°æ®åº“çš„é€»è¾‘</li>
<li><code>urls</code> : å®ç°ä¸€ä¸ªè·¯ç”±</li>
<li><code>js</code> : å‰ç«¯å®ç°GETä¸Šè¿°æ¥å£çš„è¿‡ç¨‹</li>
</ol>
<p>æ¬²å®ç°æµç¨‹ :</p>
<ol>
<li>ç”¨æˆ·è®¿é—®ç½‘ç«™ï¼Œé€šè¿‡å…ˆå‰å®Œæˆçš„è·¯ç”±ï¼Œè®¿é—®åˆ° <code>web.html </code></li>
<li><code>web.html</code> ä¸­çš„ <code>js</code> éƒ¨åˆ†åˆ›å»ºäº†ä¸€ä¸ª <code>AcGame</code> å¯¹è±¡</li>
<li><code>AcGame</code> å¯¹è±¡åˆ›å»ºçš„è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆäº† <code>Settings</code> å¯¹è±¡</li>
<li><code>Settings</code> å¯¹è±¡åˆ›å»ºå®Œæˆåï¼Œè°ƒç”¨ <code>Settings.start()</code> å‡½æ•°</li>
<li><code>Settings.start()</code> å‡½æ•°è°ƒç”¨äº† <code>Settings.getinfo()</code> å‡½æ•°</li>
<li><code>Settings.getinfo()</code> å‡½æ•°ä¸­æ‰§è¡Œäº† <code>ajax</code> å‘ <code>getinfo</code> æ¥å£å‘èµ·ä¸€ä¸ªå«å‚æ•° <code>platform</code> çš„ <code>GET</code> è¯·æ±‚</li>
<li>é€šè¿‡ <code>urls</code> è·¯ç”±çš„å®ç°ï¼Œæœ€ç»ˆå®šä½åˆ° <code>views/settings/getinfo.py</code> æ–‡ä»¶çš„ <code>getinfo(request)</code> å‡½æ•°</li>
<li>æ ¹æ®ä¼ é€’è¿‡æ¥çš„ <code>platform</code> å‡½æ•°ï¼Œå®ç°ä¸åŒçš„ <code>JsonResponse</code> è¿”å›</li>
<li><code>Settings.getinfo()</code> æ¥å—åˆ°äº† <code>response</code> å®Œæˆä¸Šè¿°åŸºæœ¬é€»è¾‘</li>
</ol>
<h4 id="views">views</h4>
<p><code>views/settings/getinfo.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.http <span style="color:#fff;font-weight:bold">import</span> JsonResponse
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.models.player.player <span style="color:#fff;font-weight:bold">import</span> Player
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> getinfo_acapp(request):
</span></span><span style="display:flex;"><span>    player = Player.objects.all()[<span style="color:#ff0;font-weight:bold">0</span>]    <span style="color:#007f7f"># å–å‡ºæ•°æ®åº“ä¸­ç¬¬ä¸€ä¸ªç”¨æˆ·(è°ƒè¯•è¯¥åŠŸèƒ½)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;username&#39;</span>: player.user.username,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;photo&#39;</span>: player.photo,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> getinfo_web(request):
</span></span><span style="display:flex;"><span>    player = Player.objects.all()[<span style="color:#ff0;font-weight:bold">0</span>]    <span style="color:#007f7f"># å–å‡ºæ•°æ®åº“ä¸­ç¬¬ä¸€ä¸ªç”¨æˆ·(è°ƒè¯•è¯¥åŠŸèƒ½)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;username&#39;</span>: player.user.username,
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;photo&#39;</span>: player.photo,
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> getinfo(request):   <span style="color:#007f7f"># å¤„ç†è¯·æ±‚</span>
</span></span><span style="display:flex;"><span>    platform = request.GET.get(<span style="color:#0ff;font-weight:bold">&#39;platform&#39;</span>)  <span style="color:#007f7f"># æ ¹æ®è¯·æ±‚çš„å¹³å°ä¸åŒï¼Œè¿›è¡Œä¸åŒè¿”å›å¤„ç†</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> platform == <span style="color:#0ff;font-weight:bold">&#34;ACAPP&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> getinfo_acapp(request)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">elif</span> platform == <span style="color:#0ff;font-weight:bold">&#34;WEB&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> getinfo_web(request)
</span></span></code></pre></div><h4 id="urls">urls</h4>
<p><code>urls/settings/index.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.urls <span style="color:#fff;font-weight:bold">import</span> path
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.views.settings.getinfo <span style="color:#fff;font-weight:bold">import</span> getinfo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>urlpatterns = [
</span></span><span style="display:flex;"><span>    path(<span style="color:#0ff;font-weight:bold">&#34;getinfo/&#34;</span>, getinfo, name=<span style="color:#0ff;font-weight:bold">&#34;settings_getinfo&#34;</span>),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>è·¯ç”±å»ºç«‹å¥½ä»¥åï¼Œè®¿é—® <code>xxxx/settings/getinfo</code>ï¼Œå¯ä»¥çœ‹åˆ° <code>getinfo.py</code> è¿”å›çš„ <code>JSON</code> ç±»å‹çš„ <code>JSONResponse</code></p>
<h4 id="js">js</h4>
<p>ç½‘é¡µåˆšè®¿é—®æ—¶ï¼Œåº”å…ˆå°† <code>menu</code> å…³é—­ï¼Œç„¶åæ‰“å¼€ç™»å½•ç•Œé¢ï¼Œéšæ„å…ˆä¿®æ”¹ä¸€ä¸ªè®© <code>menu</code> åˆå§‹å…³é—­</p>
<p><code>static/js/src/menu/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGameMenu {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$menu.hide();
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span></code></pre></div><p><code>static/js/src/settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Settings {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.root = root;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.platform = <span style="color:#0ff;font-weight:bold">&#34;WEB&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.root.AcWingOS) <span style="color:#fff;font-weight:bold">this</span>.platform = <span style="color:#0ff;font-weight:bold">&#34;ACAPP&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.start();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.getinfo();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    register() {    <span style="color:#007f7f">// æ‰“å¼€æ³¨å†Œç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>    login() {       <span style="color:#007f7f">// æ‰“å¼€ç™»å½•ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>    getinfo() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        $.ajax({
</span></span><span style="display:flex;"><span>            url: <span style="color:#0ff;font-weight:bold">&#34;https://app1117.acapp.acwing.com.cn/settings/getinfo/&#34;</span>,
</span></span><span style="display:flex;"><span>            type: <span style="color:#0ff;font-weight:bold">&#34;GET&#34;</span>,
</span></span><span style="display:flex;"><span>            data: {
</span></span><span style="display:flex;"><span>                platform: outer.platform,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            success: <span style="color:#fff;font-weight:bold">function</span>(resp) {
</span></span><span style="display:flex;"><span>                console.log(resp);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (resp.result === <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>) {    <span style="color:#007f7f">// ç™»å½•æˆåŠŸï¼Œå…³é—­ç™»å½•ç•Œé¢ï¼Œæ‰“å¼€ä¸»èœå•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>                    outer.hide();
</span></span><span style="display:flex;"><span>                    outer.root.menu.show();
</span></span><span style="display:flex;"><span>                } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    outer.login();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    hide() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    show() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åä¸è¦å¿˜è®°åœ¨ <code>æ ¹js</code> ä¸‹åˆ›å»ºå¯¹è±¡</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">export</span> <span style="color:#fff;font-weight:bold">class</span> AcGame {
</span></span><span style="display:flex;"><span>    constructor(id, AcWingOS) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.settings = <span style="color:#fff;font-weight:bold">new</span> Settings(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿™æ ·åŸºæœ¬æ¡†æ¶å°±å®Œæˆäº†</p>
<h4 id="å®Œå–„-http-è¯·æ±‚çš„å‡½æ•°">å®Œå–„ HTTP è¯·æ±‚çš„å‡½æ•°</h4>
<p>å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œè¿”å›ä¿¡æ¯ &ldquo;not login&rdquo;</p>
<p>å¦‚æœç”¨æˆ·ç™»å½•ï¼Œè¿”å›ä¿¡æ¯ &ldquo;success&rdquo; ä»¥åŠç”¨æˆ·åå’Œå¤´åƒ</p>
<p><code>views/setting/getinfo.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> getinfo_web(request):
</span></span><span style="display:flex;"><span>    user = request.user
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> not user.is_authenticated:   <span style="color:#007f7f"># æœªç™»å½•</span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;not login&#34;</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">else</span>:                           <span style="color:#007f7f"># å·²ç™»å½•</span>
</span></span><span style="display:flex;"><span>        player = Player.objects.get(user=user)
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;username&#39;</span>: player.user.username,
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;photo&#39;</span>: player.photo,
</span></span><span style="display:flex;"><span>        })
</span></span></code></pre></div><p>æ³¨æ„å‰åå°æ˜¯ä¸€ä¸ªç™»å½•ç³»ç»Ÿï¼Œå› æ­¤è¦å…ˆé€€æ‰åå°ï¼Œå†æµ‹è¯•</p>
<h3 id="å°†ç”¨æˆ·å¤´åƒæ¸²æŸ“åˆ°ç©å®¶ä¸Š">å°†ç”¨æˆ·å¤´åƒæ¸²æŸ“åˆ°ç©å®¶ä¸Š</h3>
<p>å°†è¿”å›çš„ <code>JsonResponse</code> å­˜åˆ° <code>Settings</code> ç±»çš„å˜é‡ä¸­
<code>settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Settings {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.username = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.photo = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    getinfo() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        $.ajax({
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>            success: <span style="color:#fff;font-weight:bold">function</span>(resp) {
</span></span><span style="display:flex;"><span>                ...
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (resp.result === <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>) {
</span></span><span style="display:flex;"><span>                    outer.username = resp.username;
</span></span><span style="display:flex;"><span>                    outer.photo = resp.photo;
</span></span><span style="display:flex;"><span>                    ...
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                ..
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶ååœ¨ <code>Player</code> é‡ŒæŠŠç”¨æˆ·çš„å¤´åƒæ¸²æŸ“åˆ°å¯¹åº”çš„ç©å®¶ä¸Š</p>
<p><code>playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Player {
</span></span><span style="display:flex;"><span>    constructor(...) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.img = <span style="color:#fff;font-weight:bold">new</span> Image();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.img.src = <span style="color:#fff;font-weight:bold">this</span>.playground.root.settings.photo;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.is_me) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.save();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, <span style="color:#fff;font-weight:bold">this</span>.radius, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#fff;font-weight:bold">Math</span>.PI * <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.stroke();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.clip();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.drawImage(<span style="color:#fff;font-weight:bold">this</span>.img, <span style="color:#fff;font-weight:bold">this</span>.x - <span style="color:#fff;font-weight:bold">this</span>.radius, <span style="color:#fff;font-weight:bold">this</span>.y - <span style="color:#fff;font-weight:bold">this</span>.radius, 
</span></span><span style="display:flex;"><span>                               <span style="color:#fff;font-weight:bold">this</span>.radius * <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">this</span>.radius * <span style="color:#ff0;font-weight:bold">2</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.restore();
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x, <span style="color:#fff;font-weight:bold">this</span>.y, <span style="color:#fff;font-weight:bold">this</span>.radius, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.fill();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å®ç°ç™»å½•ç•Œé¢çš„å‰ç«¯">å®ç°ç™»å½•ç•Œé¢çš„å‰ç«¯</h3>
<p>å…ˆå®Œæˆç™»å½•ç•Œé¢æ˜¾ç¤ºçš„é€»è¾‘</p>
<p><code>settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Settings {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    register() {  <span style="color:#007f7f">// æ‰“å¼€æ³¨å†Œç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.$login.hide();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register.show();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    login() {  <span style="color:#007f7f">// æ‰“å¼€ç™»å½•ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.$register.hide();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login.show();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    hide() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$settings.hide();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    show() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$settings.show();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="å®ç°å‰ç«¯çš„åŸºç¡€æ¡†æ¶">å®ç°å‰ç«¯çš„åŸºç¡€æ¡†æ¶</h4>
<p><code>settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Settings {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$settings = $(<span style="color:#0ff;font-weight:bold">`
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&lt;div class=&#34;ac-game-settings&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    &lt;div class=&#34;ac-game-settings-login&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-title&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            ç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-username&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;input type=&#34;text&#34; placeholder=&#34;ç”¨æˆ·å&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-password&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;input type=&#34;password&#34; placeholder=&#34;å¯†ç &#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-submit&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;button&gt;ç™»å½•&lt;/button&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-error-message&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-option&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            æ³¨å†Œ
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;br&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-acwing&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;img width=&#34;30&#34; src=&#34;https://app165.acapp.acwing.com.cn/static/image/settings/acwing_logo.png&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;br&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                AcWingä¸€é”®ç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    &lt;div class=&#34;ac-game-settings-register&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-title&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            æ³¨å†Œ
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-username&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;input type=&#34;text&#34; placeholder=&#34;ç”¨æˆ·å&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-password ac-game-settings-password-first&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;input type=&#34;password&#34; placeholder=&#34;å¯†ç &#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-password ac-game-settings-password-second&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;input type=&#34;password&#34; placeholder=&#34;ç¡®è®¤å¯†ç &#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-submit&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div class=&#34;ac-game-settings-item&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                &lt;button&gt;æ³¨å†Œ&lt;/button&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-error-message&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-option&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            ç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;br&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;div class=&#34;ac-game-settings-acwing&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;img width=&#34;30&#34; src=&#34;https://app165.acapp.acwing.com.cn/static/image/settings/acwing_logo.png&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;br&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">                AcWingä¸€é”®ç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">            &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">        &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">    &lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&lt;/div&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">`</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login = <span style="color:#fff;font-weight:bold">this</span>.$settings.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-login&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_username = <span style="color:#fff;font-weight:bold">this</span>.$login.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-username input&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_password = <span style="color:#fff;font-weight:bold">this</span>.$login.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-password input&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_submit = <span style="color:#fff;font-weight:bold">this</span>.$login.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-submit button&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_error_message = <span style="color:#fff;font-weight:bold">this</span>.$login.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-error-message&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_register = <span style="color:#fff;font-weight:bold">this</span>.$login.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-option&#34;</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login.hide();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register = <span style="color:#fff;font-weight:bold">this</span>.$settings.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-register&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_username = <span style="color:#fff;font-weight:bold">this</span>.$register.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-username input&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_password = <span style="color:#fff;font-weight:bold">this</span>.$register.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-password-first input&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_password_confirm = <span style="color:#fff;font-weight:bold">this</span>.$register.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-password-second input&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_submit = <span style="color:#fff;font-weight:bold">this</span>.$register.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-submit button&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_error_message = <span style="color:#fff;font-weight:bold">this</span>.$register.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-error-message&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_login = <span style="color:#fff;font-weight:bold">this</span>.$register.find(<span style="color:#0ff;font-weight:bold">&#34;.ac-game-settings-option&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register.hide();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.root.$ac_game.append(<span style="color:#fff;font-weight:bold">this</span>.$settings);
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å¯¹åº”çš„ <code>css</code> æ–‡ä»¶éƒ¨åˆ†ï¼š</p>
<p><code>css/game.css</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>.ac-game-settings {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">background-image</span>: <span style="color:#fff;font-weight:bold">url</span>(<span style="color:#0ff;font-weight:bold">&#34;/static/image/menu/background.gif&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">background-size</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span> <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">user-select</span>: <span style="color:#fff;font-weight:bold">none</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-login {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">41</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">20</span><span style="color:#fff;font-weight:bold">vw</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">relative</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">transform</span>: <span style="color:#fff;font-weight:bold">translate</span>(<span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>, <span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">background-color</span>: <span style="color:#fff;font-weight:bold">rgba</span>(<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0.7</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">border-radius</span>: <span style="color:#ff0;font-weight:bold">5</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-title {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#fff;font-weight:bold">white</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">font-size</span>: <span style="color:#ff0;font-weight:bold">3</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">text-align</span>: <span style="color:#fff;font-weight:bold">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">padding-top</span>: <span style="color:#ff0;font-weight:bold">2</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">margin-bottom</span>: <span style="color:#ff0;font-weight:bold">2</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-username {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">7</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-password {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">7</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-submit {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">7</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-acwing {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">7</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-item {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">100</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-item &gt; <span style="font-weight:bold">input</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">90</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">line-height</span>: <span style="color:#ff0;font-weight:bold">3</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">relative</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">transform</span>: <span style="color:#fff;font-weight:bold">translate</span>(<span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>, <span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-item &gt; <span style="font-weight:bold">button</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#fff;font-weight:bold">white</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">90</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">line-height</span>: <span style="color:#ff0;font-weight:bold">3</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">relative</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">transform</span>: <span style="color:#fff;font-weight:bold">translate</span>(<span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>, <span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">background-color</span>: <span style="color:#ff0;font-weight:bold">#4CAF50</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">border-radius</span>: <span style="color:#ff0;font-weight:bold">5</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-error-message {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#fff;font-weight:bold">red</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">font-size</span>: <span style="color:#ff0;font-weight:bold">0.8</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">inline</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">float</span>: <span style="color:#fff;font-weight:bold">left</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">padding-left</span>: <span style="color:#ff0;font-weight:bold">1</span><span style="color:#fff;font-weight:bold">vw</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-option {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#fff;font-weight:bold">white</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">font-size</span>: <span style="color:#ff0;font-weight:bold">2</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">inline</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">float</span>: <span style="color:#fff;font-weight:bold">right</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">padding-right</span>: <span style="color:#ff0;font-weight:bold">1</span><span style="color:#fff;font-weight:bold">vw</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">cursor</span>: <span style="color:#fff;font-weight:bold">pointer</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-acwing &gt; <span style="font-weight:bold">img</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">relative</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">transform</span>: <span style="color:#fff;font-weight:bold">translate</span>(<span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>, <span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">cursor</span>: <span style="color:#fff;font-weight:bold">pointer</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-acwing &gt; <span style="font-weight:bold">div</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">color</span>: <span style="color:#fff;font-weight:bold">white</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">font-size</span>: <span style="color:#ff0;font-weight:bold">1.5</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">text-align</span>: <span style="color:#fff;font-weight:bold">center</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">display</span>: <span style="color:#fff;font-weight:bold">block</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.ac-game-settings-register {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">height</span>: <span style="color:#ff0;font-weight:bold">49</span><span style="color:#fff;font-weight:bold">vh</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">width</span>: <span style="color:#ff0;font-weight:bold">20</span><span style="color:#fff;font-weight:bold">vw</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">relative</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">transform</span>: <span style="color:#fff;font-weight:bold">translate</span>(<span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>, <span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">background-color</span>: <span style="color:#fff;font-weight:bold">rgba</span>(<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0.7</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">border-radius</span>: <span style="color:#ff0;font-weight:bold">5</span><span style="color:#fff;font-weight:bold">px</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="å®ç°ç™»å½•æ³¨å†Œçš„ç›¸äº’åˆ‡æ¢">å®ç°ç™»å½•/æ³¨å†Œçš„ç›¸äº’åˆ‡æ¢</h4>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Settings {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.getinfo();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.add_listening_events();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    add_listening_events() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.add_listening_events_login();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.add_listening_events_register();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    add_listening_events_login() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_register.click(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>            outer.register();   <span style="color:#007f7f">// è·³åˆ°æ³¨å†Œç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    add_listening_events_register() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$register_login.click(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>            outer.login();      <span style="color:#007f7f">// è·³åˆ°ç™»å½•ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        })
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å®ç°ç™»å½•åŠŸèƒ½">å®ç°ç™»å½•åŠŸèƒ½</h3>
<p><code>views/settings/login.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.http <span style="color:#fff;font-weight:bold">import</span> JsonResponse
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.contrib.auth <span style="color:#fff;font-weight:bold">import</span> authenticate, login
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> signin(request):
</span></span><span style="display:flex;"><span>    data = request.GET
</span></span><span style="display:flex;"><span>    username = data.get(<span style="color:#0ff;font-weight:bold">&#39;username&#39;</span>)
</span></span><span style="display:flex;"><span>    password = data.get(<span style="color:#0ff;font-weight:bold">&#39;password&#39;</span>)
</span></span><span style="display:flex;"><span>    user = authenticate(username=username, password=password)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> not user:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®&#34;</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    login(request, user)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>
</span></span><span style="display:flex;"><span>    })
</span></span></code></pre></div><p><code>urls/settings/index.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.urls <span style="color:#fff;font-weight:bold">import</span> path
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.views.settings.getinfo <span style="color:#fff;font-weight:bold">import</span> getinfo
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.views.settings.login <span style="color:#fff;font-weight:bold">import</span> signin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>urlpatterns = [
</span></span><span style="display:flex;"><span>    path(<span style="color:#0ff;font-weight:bold">&#34;getinfo/&#34;</span>, getinfo, name=<span style="color:#0ff;font-weight:bold">&#34;settings_getinfo&#34;</span>),
</span></span><span style="display:flex;"><span>    path(<span style="color:#0ff;font-weight:bold">&#34;login/&#34;</span>, signin, name=<span style="color:#0ff;font-weight:bold">&#34;settings_login&#34;</span>),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><code>settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Settings{
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    add_listening_events_login() {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_submit.click(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>            outer.login_on_remote();
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    login_on_remote() {     <span style="color:#007f7f">// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> username = <span style="color:#fff;font-weight:bold">this</span>.$login_username.val();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> password = <span style="color:#fff;font-weight:bold">this</span>.$login_password.val();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$login_error_message.empty();
</span></span><span style="display:flex;"><span>        $.ajax({
</span></span><span style="display:flex;"><span>            url: <span style="color:#0ff;font-weight:bold">&#34;https://app1117.acapp.acwing.com.cn/settings/login/&#34;</span>,
</span></span><span style="display:flex;"><span>            type: <span style="color:#0ff;font-weight:bold">&#34;GET&#34;</span>,
</span></span><span style="display:flex;"><span>            data: {
</span></span><span style="display:flex;"><span>                username: username,
</span></span><span style="display:flex;"><span>                password: password,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>            success: <span style="color:#fff;font-weight:bold">function</span>(resp) {
</span></span><span style="display:flex;"><span>                console.log(resp);
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (resp.result === <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>) {
</span></span><span style="display:flex;"><span>                    location.reload();
</span></span><span style="display:flex;"><span>                } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    outer.$login_error_message.html(resp.result);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å®ç°ç™»å‡ºåŠŸèƒ½">å®ç°ç™»å‡ºåŠŸèƒ½</h3>
<p><code>views/settings/logout.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.http <span style="color:#fff;font-weight:bold">import</span> JsonResponse
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.contrib.auth <span style="color:#fff;font-weight:bold">import</span> logout
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> signout(request):
</span></span><span style="display:flex;"><span>    user = request.user
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> not user.is_authenticated:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    logout(request)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span></code></pre></div><p><code>urls/settings/index.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.views.settings.logout <span style="color:#fff;font-weight:bold">import</span> signout
</span></span><span style="display:flex;"><span>urlpatterns = [
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    path(<span style="color:#0ff;font-weight:bold">&#34;logout/&#34;</span>, signout, name=<span style="color:#0ff;font-weight:bold">&#34;settings_logout&#34;</span>),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><code>settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>login_on_remote() {     <span style="color:#007f7f">// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šç™»å½•
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> username = <span style="color:#fff;font-weight:bold">this</span>.$login_username.val();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> password = <span style="color:#fff;font-weight:bold">this</span>.$login_password.val();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.$login_error_message.empty();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    $.ajax({
</span></span><span style="display:flex;"><span>        url: <span style="color:#0ff;font-weight:bold">&#34;https://app1117.acapp.acwing.com.cn/settings/login/&#34;</span>,
</span></span><span style="display:flex;"><span>        type: <span style="color:#0ff;font-weight:bold">&#34;GET&#34;</span>,
</span></span><span style="display:flex;"><span>        data: {
</span></span><span style="display:flex;"><span>            username: username,
</span></span><span style="display:flex;"><span>            password: password,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        success: <span style="color:#fff;font-weight:bold">function</span>(resp) {
</span></span><span style="display:flex;"><span>            console.log(resp);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (resp.result === <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>) {
</span></span><span style="display:flex;"><span>                location.reload();
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                outer.$login_error_message.html(resp.result);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>å†é¡ºä¾¿å°† <code>menu</code> èœå•é¡µé¢é‡Œçš„ <code>è®¾ç½®</code> æŒ‰é’®ä¹Ÿç»‘å®šä¸Šç™»å‡ºåŠŸèƒ½</p>
<p><code>menu/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>add_listening_events() {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.$settings_mode.click(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        outer.root.settings.logout_on_remote();
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å®ç°æ³¨å†ŒåŠŸèƒ½">å®ç°æ³¨å†ŒåŠŸèƒ½</h3>
<p><code>views/settings/register.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.http <span style="color:#fff;font-weight:bold">import</span> JsonResponse
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.contrib.auth <span style="color:#fff;font-weight:bold">import</span> login
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> django.contrib.auth.models <span style="color:#fff;font-weight:bold">import</span> User
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.models.player.player <span style="color:#fff;font-weight:bold">import</span> Player
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">def</span> register(request):
</span></span><span style="display:flex;"><span>    data = request.GET
</span></span><span style="display:flex;"><span>    username = data.get(<span style="color:#0ff;font-weight:bold">&#34;username&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>).strip()
</span></span><span style="display:flex;"><span>    password = data.get(<span style="color:#0ff;font-weight:bold">&#34;password&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>).strip()
</span></span><span style="display:flex;"><span>    password_confirm = data.get(<span style="color:#0ff;font-weight:bold">&#34;password_confirm&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>).strip()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> not username or not password:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;ç”¨æˆ·åæˆ–å¯†ç ä¸èƒ½ä¸ºç©º&#34;</span>,
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> password != password_confirm:
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;ä¸¤ä¸ªå¯†ç ä¸ä¸€è‡´&#34;</span>,
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">if</span> User.objects.filter(username=username).exists():
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;ç”¨æˆ·åå·²å­˜åœ¨&#34;</span>,
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    user = User(username=username)
</span></span><span style="display:flex;"><span>    user.set_password(password)
</span></span><span style="display:flex;"><span>    user.save()
</span></span><span style="display:flex;"><span>    Player.objects.create(user=user, photo=<span style="color:#0ff;font-weight:bold">&#34;https://cdn.acwing.com/media/user/profile/photo/42832_lg_f999efc3c8.png&#34;</span>)
</span></span><span style="display:flex;"><span>    login(request, user)
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> JsonResponse({
</span></span><span style="display:flex;"><span>        <span style="color:#0ff;font-weight:bold">&#39;result&#39;</span>: <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>,
</span></span><span style="display:flex;"><span>    })
</span></span></code></pre></div><p><code>urls/settings/index.py</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">from</span> game.views.settings.register <span style="color:#fff;font-weight:bold">import</span> register
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>urlpatterns = [
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    path(<span style="color:#0ff;font-weight:bold">&#34;register/&#34;</span>, register, name=<span style="color:#0ff;font-weight:bold">&#34;settings_register&#34;</span>),
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p><code>settings/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>add_listening_events_register() {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.$register_submit.click(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>        outer.register_on_remote();
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>register_on_remote() {  <span style="color:#007f7f">// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ³¨å†Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> username = <span style="color:#fff;font-weight:bold">this</span>.$register_username.val();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> password = <span style="color:#fff;font-weight:bold">this</span>.$register_password.val();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">let</span> password_confirm = <span style="color:#fff;font-weight:bold">this</span>.$register_password_confirm.val();
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">this</span>.$register_error_message.empty();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    $.ajax({
</span></span><span style="display:flex;"><span>        url: <span style="color:#0ff;font-weight:bold">&#34;https://app1117.acapp.acwing.com.cn/settings/register/&#34;</span>,
</span></span><span style="display:flex;"><span>        type: <span style="color:#0ff;font-weight:bold">&#34;GET&#34;</span>,
</span></span><span style="display:flex;"><span>        data: {
</span></span><span style="display:flex;"><span>            username: username,
</span></span><span style="display:flex;"><span>            password: password,
</span></span><span style="display:flex;"><span>            password_confirm: password_confirm,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        success: <span style="color:#fff;font-weight:bold">function</span>(resp) {
</span></span><span style="display:flex;"><span>            console.log(resp);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (resp.result === <span style="color:#0ff;font-weight:bold">&#34;success&#34;</span>) {
</span></span><span style="display:flex;"><span>                location.reload();
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                outer.$register_error_message.html(resp.result);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h2 id="redisà®">Redisà®</h2>
<h3 id="redisæ˜¯ä»€ä¹ˆ">Redisæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<blockquote>
<p><strong><code>Redis</code> æ˜¯ä¸€æ¬¾å†…å­˜é«˜é€Ÿç¼“å­˜æ•°æ®åº“</strong></p>
</blockquote>
<h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨redis">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Redis?</h3>
<blockquote>
<p><strong>æˆ‘ä»¬ç›®å‰ç”¨çš„æ˜¯<code>Django</code>è‡ªå¸¦çš„æ•°æ®åº“<code>Sqlite</code>ã€‚<code>Django</code>æ˜¯å¾ˆå®¹æ˜“å°†æ•°æ®åº“è¿ç§»åˆ°<code>mySQL</code>çš„ã€‚ä½†æ˜¯å­˜å‚¨æ•ˆç‡ä¸å¦‚<code>redis</code>ï¼Œå› ä¸º<code>redis</code>æ˜¯å†…å­˜æ•°æ®åº“ï¼Œæ‰€ä»¥è°ƒç”¨ä¸œè¥¿éƒ½éå¸¸å¿«ï¼Œå­˜çš„æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„<code>&lt;key, value&gt;</code>ï¼Œè€Œä¸”æ˜¯å•çº¿ç¨‹çš„</strong></p>
</blockquote>
<h3 id="åœ¨djangoä¸­é›†æˆredis">åœ¨Djangoä¸­é›†æˆRedis</h3>
<ol>
<li>å®‰è£… <code>django_redis</code></li>
</ol>
<pre tabindex="0"><code>pip install django_redis
</code></pre><ol start="2">
<li>é…ç½® <code>settings.py</code></li>
</ol>
<pre tabindex="0"><code>CACHES = { 
    &#39;default&#39;: {
        &#39;BACKEND&#39;: &#39;django_redis.cache.RedisCache&#39;,
        &#39;LOCATION&#39;: &#39;redis://127.0.0.1:6379/1&#39;,
        &#34;OPTIONS&#34;: {
            &#34;CLIENT_CLASS&#34;: &#34;django_redis.client.DefaultClient&#34;,
        },  
    },  
}
USER_AGENTS_CACHE = &#39;default&#39;
</code></pre><ol start="3">
<li>å¯åŠ¨ <code>redis-server</code></li>
</ol>
<pre tabindex="0"><code>sudo redis-server /etc/redis/redis.conf
</code></pre><h3 id="åœ¨-django-åå°é‡Œæ“çºµ-redis">åœ¨ Django åå°é‡Œæ“çºµ Redis</h3>
<pre tabindex="0"><code>$ python3 manage.py shell&#39;

In [1]: from django.core.cache import cache # å¼•å…¥redis

In [2]: cache.keys(&#39;*&#39;)                     # æŸ¥è¯¢redisé‡Œæ‰€æœ‰çš„å…³é”®å­—
Out[2]: []

In [3]: cache.set(&#39;yxc&#39;, 1, 5)              # æ’å…¥ä¸€ä¸ªkey-valï¼Œå­˜åœ¨ 5 s
Out[3]: True

In [4]: cache.keys(&#39;*&#39;)                     # æŸ¥è¯¢redisé‡Œæ‰€æœ‰çš„å…³é”®å­—
Out[4]: [&#39;yxc&#39;]

In [5]: cache.set(&#39;yxc&#39;, 2, None)           # æ’å…¥ä¸€ä¸ªkey-valï¼Œä¸ä¼šè¿‡æœŸ
Out[5]: True

In [6]: cache.set(&#39;abc&#39;, 3, None)
Out[6]: True

In [7]: cache.keys(&#39;y*&#39;)
Out[7]: [&#39;yxc&#39;]

In [8]: cache.has_key(&#39;abc&#39;)
Out[8]: True

In [9]: cache.has_key(&#39;abcd&#39;)
Out[9]: False

In [10]: cache.get(&#39;yxc&#39;)
Out[10]: 2

In [11]: cache.delete(&#39;yxc&#39;)
Out[11]: True

In [12]: cache.keys(&#39;*&#39;)
Out[12]: [&#39;abc&#39;]

In [13]:
</code></pre><h2 id="webç«¯acwingä¸€é”®ç™»å½•à®">Webç«¯AcWingä¸€é”®ç™»å½•à®</h2>
<ul>
<li><a href="https://www.acwing.com/blog/content/12466/">6.2 Webç«¯AcWingä¸€é”®ç™»å½• | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/solution/content/79354/">6.2 ä¸Šè¯¾ç¬”è®° | Andrew1729</a></li>
<li><a href="https://www.acwing.com/video/3565/">6.2 Webç«¯AcWingä¸€é”®ç™»å½• | Vedio</a>
<ol>
<li><strong>Oauth2ä¸€é”®æˆæƒç™»å½•çš„åŸºæœ¬åŸç†</strong>ï¼š$17m30sâ€”â€”29m15sâ€”â€”32m51s$</li>
<li>æ•°æ®è¡¨æ·»åŠ <code>openid</code>ä¿¡æ¯ï¼š$33m20sâ€”â€”34m47s$</li>
<li><strong>Oauth2ä¸€é”®æˆæƒç™»å½•çš„ä»£ç å®ç°</strong>ï¼š$35m20sâ€”â€”1h25sâ€”â€”1h27m20s$</li>
</ol>
</li>
</ul>
<hr>
<blockquote>
<p><strong>ç”¨æˆ·ç‚¹å‡»<code>AcWingä¸€é”®ç™»å½•</code>ï¼Œé€šè¿‡<code>urls &amp; views</code>è°ƒç”¨<code>apply_code</code>å‡½æ•°ï¼Œå°†<code>state</code>æ”¾åˆ°<code>redis</code>ä¸­ï¼Œå°†<code>appid &amp; redirect_uri &amp; scope &amp; state</code> ä¼ å…¥<code>apply_code_url</code>é“¾æ¥ï¼Œè¿”å›å¹¶é‡å®šå‘è‡³<code>apply_code_url</code>å‘ç”¨æˆ·è¯¢é—®æ˜¯å¦æˆæƒ</strong></p>
<p><strong>ç”¨æˆ·ç‚¹å‡»<code>åŒæ„</code>åï¼Œé‡å®šå‘è‡³<code>redirect_uri</code>é“¾æ¥ï¼Œè¿”å›å‚æ•°ä¸º<code>code</code>å’Œ<code>state</code>ï¼Œé€šè¿‡<code>urls &amp; views</code>è°ƒç”¨<code>receive_code</code>å‡½æ•°</strong></p>
<p><strong>è‹¥éªŒè¯<code>state</code>å¤±è´¥ï¼Œç›´æ¥é‡å®šå‘è‡³åˆå§‹ç•Œé¢</strong></p>
<p><strong>è‹¥éªŒè¯<code>state</code>æˆåŠŸï¼Œå°†<code>appid &amp; code &amp; secret</code>å‘é€è‡³<code>AcWingæœåŠ¡å™¨</code>ï¼Œç”³è¯·æˆæƒä»¤ç‰Œ<code>access_token</code>å’Œç”¨æˆ·çš„<code>openid</code></strong></p>
<p><strong>è‹¥ç”³è¯·ä»¤ç‰ŒæˆåŠŸï¼Œå°†<code>access_token &amp; openid</code>å‘é€è‡³<code>AcWingæœåŠ¡å™¨</code>ï¼Œå¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ›å»ºå¹¶ç™»å½•ç”¨æˆ·ï¼Œæœ€åé‡å®šå‘è‡³åˆå§‹ç•Œé¢</strong></p>
</blockquote>
<h2 id="acappç«¯acwingä¸€é”®ç™»å½•à®">AcAppç«¯AcWingä¸€é”®ç™»å½•à®</h2>
<ul>
<li><a href="https://www.acwing.com/blog/content/12467/">6.3 AcAppç«¯AcWingä¸€é”®ç™»å½• | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/solution/content/79365/">6.3 ä¸Šè¯¾ç¬”è®° | Andrew1729</a></li>
<li><a href="https://www.acwing.com/video/3566/">6.3 Acappç«¯AcWingä¸€é”®ç™»å½• | Vedio</a>
<ol>
<li><strong>Oauth2ä¸€é”®æˆæƒç™»å½•çš„åŸºæœ¬åŸç†</strong>ï¼š$10mâ€”â€”12m20sâ€”â€”16m35sâ€”â€”18m$</li>
<li><strong>Oauth2ä¸€é”®æˆæƒç™»å½•çš„ä»£ç å®ç°</strong>ï¼š$19m25sâ€”â€”21mâ€”â€”23m25sâ€”â€”34m29sâ€”â€”42m10s$</li>
</ol>
</li>
</ul>
<hr>
<h1 id="å®ç°è”æœºå¯¹æˆ˜à®">å®ç°è”æœºå¯¹æˆ˜à®</h1>
<ul>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/3357332/">7. å®ç°è”æœºå¯¹æˆ˜ | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/solution/content/89506/">7.1 ä¸Šè¯¾ç¬”è®° | å¤§èœç‹—</a></li>
<li><a href="https://www.acwing.com/solution/content/88801/">7.2 ä¸Šè¯¾ç¬”è®° | èŠèŠ±</a></li>
</ul>
<hr>
<h2 id="ç»Ÿä¸€é•¿åº¦å•ä½">ç»Ÿä¸€é•¿åº¦å•ä½</h2>
<p>ç”±äºè”æœºå¯¹æˆ˜çš„æ—¶å€™ï¼Œæ¯ä¸ªç”¨æˆ·çš„å®¢æˆ·ç«¯é•¿å®½ä¸ä¸€æ ·</p>
<p>åœ¨ä¹‹å‰å®Œæˆçš„æ¸¸æˆç•Œé¢é‡Œï¼Œæˆ‘ä»¬ä¼šæ ¹æ®å½“å‰å®¢æˆ·ç«¯çš„å¤§å°ï¼Œè¿›è¡Œæ¸²æŸ“</p>
<p>ä½†æ˜¯åœ¨è”æœºå¯¹æˆ˜çš„æ—¶å€™ï¼Œåº”å½“è®©æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ä¿æŒåŒæ­¥æ‰å¯ä»¥</p>
<p>æ‰€æœ‰ï¼Œå°±å¼•å…¥äº† <strong>ç»Ÿä¸€é•¿åº¦å•ä½</strong> çš„ç›®æ ‡</p>
<h3 id="åœ°å›¾æ¸²æŸ“">åœ°å›¾æ¸²æŸ“</h3>
<h4 id="åœ°å›¾-169-ç­‰æ¯”ä¾‹ç¼©æ”¾">åœ°å›¾ 16:9 ç­‰æ¯”ä¾‹ç¼©æ”¾</h4>
<p>å®ç°é€»è¾‘ï¼šæ ¹æ®å½“å‰ç”¨æˆ·çš„å®¢æˆ·ç«¯å¤§å°ï¼Œç»Ÿä¸€æ¸²æŸ“æˆ <strong>16:9</strong> çš„æ¸¸æˆç•Œé¢ï¼Œä¸”éšç€ç”¨æˆ·è°ƒæ•´çª—å£å¤§å°ï¼Œä¹ŸåŠ¨æ€è°ƒæ•´</p>
<p><code>js/src/playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGamePlayground {
</span></span><span style="display:flex;"><span>    constructor(root) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.root.$ac_game.append(<span style="color:#fff;font-weight:bold">this</span>.$playground);<span style="color:#007f7f">// æœªæ¥å¯èƒ½ä¼šå¤šæ¬¡ show å› æ­¤æŠŠåˆ›å»ºåœºæ™¯æŒªåˆ°è¿™é‡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        $(<span style="color:#fff;font-weight:bold">window</span>).resize(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>            outer.resize();
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    resize() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.width = <span style="color:#fff;font-weight:bold">this</span>.$playground.width();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.height = <span style="color:#fff;font-weight:bold">this</span>.$playground.height();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> unit = <span style="color:#fff;font-weight:bold">Math</span>.min(<span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">16</span>, <span style="color:#fff;font-weight:bold">this</span>.height / <span style="color:#ff0;font-weight:bold">9</span>);  <span style="color:#007f7f">// ä»¥æœ€å°çš„ä½œä¸ºåŸºå‡†ï¼Œæ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.width = unit * <span style="color:#ff0;font-weight:bold">16</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.height = unit * <span style="color:#ff0;font-weight:bold">9</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.resize();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.scale = <span style="color:#fff;font-weight:bold">this</span>.height;   <span style="color:#007f7f">// resizeæ—¶ï¼Œå…¶ä»–å…ƒç´ çš„æ¸²æŸ“å¤§å°éƒ½ä»¥å½“å‰æ¸²æŸ“çš„é«˜åº¦ä¸ºåŸºå‡†ï¼Œå­˜ä¸º scale å˜é‡
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.game_map) <span style="color:#fff;font-weight:bold">this</span>.game_map.resize();  <span style="color:#007f7f">//å¦‚æœæ­¤æ—¶åœ°å›¾å·²åˆ›å»ºï¼Œåˆ™resizeä¸€ä¸‹
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>    }
</span></span><span style="display:flex;"><span>    show() {    <span style="color:#007f7f">// æ‰“å¼€ playground ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.$playground.show();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.resize();
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>js/src/playground/game_map/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> GameMap <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    resize() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.width = <span style="color:#fff;font-weight:bold">this</span>.playground.width;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.height = <span style="color:#fff;font-weight:bold">this</span>.playground.height;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="åœ°å›¾å±…ä¸­">åœ°å›¾å±…ä¸­</h4>
<p>ç›´æ¥æŠŠ <code>canvas</code> å…ƒç´ ï¼Œç”¨ç›¸å¯¹ä½ç½®å±…ä¸­å³å¯</p>
<p><code>css/game.css</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>.ac-game-playground {
</span></span><span style="display:flex;"><span>    <span style="color:#f00">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">background-color</span>: <span style="color:#fff;font-weight:bold">grey</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.ac-game-playground &gt; <span style="font-weight:bold">canvas</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">position</span>: <span style="color:#fff;font-weight:bold">relative</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">top</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">left</span>: <span style="color:#ff0;font-weight:bold">50</span><span style="color:#fff;font-weight:bold">%</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">transform</span>: <span style="color:#fff;font-weight:bold">translate</span>(<span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>, <span style="color:#ff0;font-weight:bold">-50</span><span style="color:#fff;font-weight:bold">%</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="è§£å†³åœ°å›¾-resize-æ—¶ä¼šå‡ºç°æ¸å˜æˆé»‘è‰²çš„æƒ…å†µ">è§£å†³åœ°å›¾ resize æ—¶ï¼Œä¼šå‡ºç°æ¸å˜æˆé»‘è‰²çš„æƒ…å†µ</h4>
<p>åŸç”±æ˜¯å› ä¸ºæˆ‘ä»¬çš„å®ç°é€»è¾‘æ˜¯ï¼šæ¯å¸§ä¼šæ¸²æŸ“ä¸€å±‚åŠé€æ˜çš„é»‘è‰²èƒŒæ™¯</p>
<p>ä¹Ÿå°±é€ å°±äº†ä¸€å¼€å§‹ä¼šå‡ºç°ç°å±çš„æƒ…å†µï¼Œè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œç›´æ¥ resize å®Œï¼Œå¼ºåˆ¶æ¶‚ä¸€å±‚ä¸é€æ˜çš„é»‘è‰²å³å¯</p>
<p><code>js/src/playground/game_map/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> GameMap <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    resize() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.width = <span style="color:#fff;font-weight:bold">this</span>.playground.width;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.height = <span style="color:#fff;font-weight:bold">this</span>.playground.height;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#0ff;font-weight:bold">&#34;rgba(0, 0, 0, 1)&#34;</span>;    <span style="color:#007f7f">// resize å®Œï¼Œæ¶‚ä¸€å±‚ä¸é€æ˜çš„å³å¯
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillRect(<span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.width, <span style="color:#fff;font-weight:bold">this</span>.ctx.canvas.height);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å…ƒç´ æ¸²æŸ“">å…ƒç´ æ¸²æŸ“</h3>
<p>åœ°å›¾éšç€å°ºå¯¸ç­‰æ¯”ä¾‹æ”¾å¤§ç¼©å°çš„åŒæ—¶ï¼Œåœ°å›¾å†…çš„å…¶ä»–å…ƒç´ ä¹Ÿåº”ä¸èƒŒæ™¯ä¸€åŒç­‰æ¯”ä¾‹æ”¾å¤§ç¼©å°</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€æŠŠå…ƒç´ å…¨éƒ¨è®¾ä¸ºç›¸å¯¹å¤§å°å³å¯ï¼Œç”¨æˆ‘ä»¬å…ˆå‰è®¾ç½®çš„ playground.scale å€¼å³å¯</p>
<h4 id="ç©å®¶-player">ç©å®¶ Player</h4>
<p>åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè½¬ä¸ºä¼ é€’ <strong>scale</strong> çš„æ¯”ä¾‹å€¼</p>
<p><code>js/src/playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGamePlayground {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    show() {    <span style="color:#007f7f">// æ‰“å¼€ playground ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span> / <span style="color:#fff;font-weight:bold">this</span>.scale, <span style="color:#ff0;font-weight:bold">0.5</span>, <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#0ff;font-weight:bold">&#34;white&#34;</span>, <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">true</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">5</span>; i ++ ) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span> / <span style="color:#fff;font-weight:bold">this</span>.scale, <span style="color:#ff0;font-weight:bold">0.5</span>, <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#fff;font-weight:bold">this</span>.get_random_color(), <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#fff;font-weight:bold">false</span>));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>js/src/playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Player {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    start() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.is_me) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">let</span> tx = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.width / <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">let</span> ty = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.height / <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    add_listening_events() {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.playground.game_map.$canvas.mousedown(<span style="color:#fff;font-weight:bold">function</span>(e) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">3</span>) {
</span></span><span style="display:flex;"><span>                outer.move_to((e.clientX - rect.left) / outer.playground.scale, (e.clientY - rect.top) / outer.playground.scale);
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (e.which === <span style="color:#ff0;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (outer.cur_skill === <span style="color:#0ff;font-weight:bold">&#34;fireball&#34;</span>) {
</span></span><span style="display:flex;"><span>                    outer.shoot_fireball((e.clientX - rect.left) / outer.playground.scale, (e.clientY - rect.top) / outer.playground.scale);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    shoot_fireball(tx, ty) {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> x = <span style="color:#fff;font-weight:bold">this</span>.x, y = <span style="color:#fff;font-weight:bold">this</span>.y;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> radius = <span style="color:#ff0;font-weight:bold">0.01</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> angle = <span style="color:#fff;font-weight:bold">Math</span>.atan2(ty - <span style="color:#fff;font-weight:bold">this</span>.y, tx - <span style="color:#fff;font-weight:bold">this</span>.x);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> vx = <span style="color:#fff;font-weight:bold">Math</span>.cos(angle), vy = <span style="color:#fff;font-weight:bold">Math</span>.sin(angle);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> color = <span style="color:#0ff;font-weight:bold">&#34;orange&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> speed = <span style="color:#ff0;font-weight:bold">0.5</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> move_length = <span style="color:#ff0;font-weight:bold">1.0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> damage = <span style="color:#ff0;font-weight:bold">0.01</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">new</span> FireBall(<span style="color:#fff;font-weight:bold">this</span>.playground, <span style="color:#fff;font-weight:bold">this</span>, x, y, radius, vx, vy, color, speed, move_length, damage);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    update() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.update_move();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.render();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    update_move() { <span style="color:#007f7f">// æ›´æ–°ç©å®¶ç§»åŠ¨
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.is_me &amp;&amp; <span style="color:#fff;font-weight:bold">this</span>.spent_time &gt; <span style="color:#ff0;font-weight:bold">4</span> &amp;&amp; <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#ff0;font-weight:bold">180</span> &lt; <span style="color:#ff0;font-weight:bold">1</span>) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.damage_speed &gt; <span style="color:#fff;font-weight:bold">this</span>.eps) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.move_length &lt; <span style="color:#fff;font-weight:bold">this</span>.eps) {
</span></span><span style="display:flex;"><span>                ...
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">if</span> (!<span style="color:#fff;font-weight:bold">this</span>.is_me) {
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">let</span> tx = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.width / <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>                    <span style="color:#fff;font-weight:bold">let</span> ty = <span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#fff;font-weight:bold">this</span>.playground.height / <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>                    ...
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                ...
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> scale = <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.is_me) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x * scale, <span style="color:#fff;font-weight:bold">this</span>.y * scale, <span style="color:#fff;font-weight:bold">this</span>.radius * scale, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#fff;font-weight:bold">Math</span>.PI * <span style="color:#ff0;font-weight:bold">2</span>, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.drawImage(<span style="color:#fff;font-weight:bold">this</span>.img, (<span style="color:#fff;font-weight:bold">this</span>.x - <span style="color:#fff;font-weight:bold">this</span>.radius) * scale, (<span style="color:#fff;font-weight:bold">this</span>.y - <span style="color:#fff;font-weight:bold">this</span>.radius) * scale, <span style="color:#fff;font-weight:bold">this</span>.radius * <span style="color:#ff0;font-weight:bold">2</span> * scale, <span style="color:#fff;font-weight:bold">this</span>.radius * <span style="color:#ff0;font-weight:bold">2</span> * scale);
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x * scale, <span style="color:#fff;font-weight:bold">this</span>.y * scale, <span style="color:#fff;font-weight:bold">this</span>.radius * scale, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="ç«çƒ-fireball">ç«çƒ Fireball</h4>
<p><code>js/src/playground/skill/fireball/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Fireball {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> scale = <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x * scale, <span style="color:#fff;font-weight:bold">this</span>.y * scale, <span style="color:#fff;font-weight:bold">this</span>.radius * scale, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fill();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="ç²’å­-particle">ç²’å­ Particle</h4>
<p><code>js/src/playground/particle/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Particle {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> scale = <span style="color:#fff;font-weight:bold">this</span>.playground.scale;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.beginPath();
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.arc(<span style="color:#fff;font-weight:bold">this</span>.x * scale, <span style="color:#fff;font-weight:bold">this</span>.y * scale, <span style="color:#fff;font-weight:bold">this</span>.radius * scale, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">2</span> * <span style="color:#fff;font-weight:bold">Math</span>.PI, <span style="color:#fff;font-weight:bold">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fillStyle = <span style="color:#fff;font-weight:bold">this</span>.color;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ctx.fill();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="å¢åŠ è”æœºå¯¹æˆ˜æ¨¡å¼">å¢åŠ â€œè”æœºå¯¹æˆ˜â€æ¨¡å¼</h2>
<p>ä¸ºäº†åŒºåˆ†ï¼šç”¨æˆ·è‡ªå·±ï¼Œæœºå™¨äººï¼Œè”æœºç©å®¶</p>
<p>éœ€è¦æŠŠ <code>is_me</code> æ”¹æˆå­—ç¬¦ä¸²ï¼Œç”¨ä»¥è¡¨ç¤ºä¸åŒ <strong>Player</strong></p>
<p><code>menu/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGameMenu{
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    add_listening_events() {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$single_mode.click(<span style="color:#fff;font-weight:bold">function</span>(){
</span></span><span style="display:flex;"><span>            outer.hide();
</span></span><span style="display:flex;"><span>            outer.root.playground.show(<span style="color:#0ff;font-weight:bold">&#34;single mode&#34;</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.$multi_mode.click(<span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>            outer.hide();
</span></span><span style="display:flex;"><span>            outer.root.playground.show(<span style="color:#0ff;font-weight:bold">&#34;multi mode&#34;</span>);
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Playground {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    show(mode) {    <span style="color:#007f7f">// æ‰“å¼€ playground ç•Œé¢
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span> / <span style="color:#fff;font-weight:bold">this</span>.scale, <span style="color:#ff0;font-weight:bold">0.5</span>, <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#0ff;font-weight:bold">&#34;white&#34;</span>, <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#0ff;font-weight:bold">&#34;me&#34;</span>, <span style="color:#fff;font-weight:bold">this</span>.root.settings.username, <span style="color:#fff;font-weight:bold">this</span>.root.settings.photo)));
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (mode === <span style="color:#0ff;font-weight:bold">&#34;single mode&#34;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">5</span>; i ++ ) {
</span></span><span style="display:flex;"><span>                <span style="color:#fff;font-weight:bold">this</span>.players.push(<span style="color:#fff;font-weight:bold">new</span> Player(<span style="color:#fff;font-weight:bold">this</span>, <span style="color:#fff;font-weight:bold">this</span>.width / <span style="color:#ff0;font-weight:bold">2</span> / <span style="color:#fff;font-weight:bold">this</span>.scale, <span style="color:#ff0;font-weight:bold">0.5</span>, <span style="color:#ff0;font-weight:bold">0.05</span>, <span style="color:#fff;font-weight:bold">this</span>.get_random_color(), <span style="color:#ff0;font-weight:bold">0.15</span>, <span style="color:#0ff;font-weight:bold">&#34;robot&#34;</span>));
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (mode === <span style="color:#0ff;font-weight:bold">&#34;multi mode&#34;</span>) {
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>playground/player/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> Player <span style="color:#fff;font-weight:bold">extends</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor(playground, x, y, radius, color, speed, character, username, photo) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.character = character;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.username = username;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.photo = photo;
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (<span style="color:#fff;font-weight:bold">this</span>.character !== <span style="color:#0ff;font-weight:bold">&#34;robot&#34;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.img = <span style="color:#fff;font-weight:bold">new</span> Image();
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.img.src = <span style="color:#fff;font-weight:bold">this</span>.photo;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#007f7f">// åŒç†ï¼Œæ ¹æ®å¯¹åº”çš„é€»è¾‘ï¼Œä¿®æ”¹åé¢æ‰€æœ‰çš„ is_me ä¸º character
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>}
</span></span></code></pre></div><h2 id="django_channels">Django_channels</h2>
<ul>
<li><a href="https://www.jianshu.com/p/bcefda55bce4">è°ˆè°ˆWebsocket </a></li>
<li><a href="https://www.cnblogs.com/dreamroute/p/6247726.html">HTTP/TCP</a></li>
</ul>
<hr>
<h3 id="django_channelsæ˜¯ä»€ä¹ˆ">Django_channelsæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<blockquote>
<p><strong>Django_Channels æ˜¯ä¸€ä¸ªä¸ºDjango æä¾›å¼‚æ­¥æ‰©å±•çš„åº“ï¼Œé€šå¸¸ä¸»è¦ç”¨æ¥æä¾›WebSocket æ”¯æŒå’Œåå°ä»»åŠ¡</strong></p>
<p><strong><code>WSS</code> æ˜¯ <code>Web Socket</code> åè®®çš„å®‰å…¨æ¨¡å¼ï¼Œæ”¯æŒ <code>C/S</code> ä¸‹çš„åŒå‘é€šä¿¡ï¼ˆHTTPåè®®åªæ”¯æŒå•å‘é€šä¿¡ï¼‰</strong></p>
</blockquote>
<h3 id="é…ç½®django_channels">é…ç½®Django_channels</h3>
<ol>
<li>å®‰è£… <code>channels_redis</code></li>
</ol>
<pre tabindex="0"><code>pip install channels_redis
</code></pre><ol start="2">
<li>é…ç½® <code>acapp/asgi.py</code></li>
</ol>
<pre tabindex="0"><code>import os

from channels.auth import AuthMiddlewareStack
from channels.routing import ProtocolTypeRouter, URLRouter
from django.core.asgi import get_asgi_application
from game.routing import websocket_urlpatterns

os.environ.setdefault(&#39;DJANGO_SETTINGS_MODULE&#39;, &#39;acapp.settings&#39;)

application = ProtocolTypeRouter({
    &#34;http&#34;: get_asgi_application(),
    &#34;websocket&#34;: AuthMiddlewareStack(URLRouter(websocket_urlpatterns))
})
</code></pre><ol start="3">
<li>é…ç½® <code>acapp/settings.py</code></li>
</ol>
<p>åœ¨ <code>INSTALLED_APPS</code> ä¸­æ·»åŠ  <code>channels</code> ï¼Œæ·»åŠ åå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre tabindex="0"><code>INSTALLED_APPS = [ 
    &#39;channels&#39;,
    &#39;game.apps.GameConfig&#39;,
    &#39;django.contrib.admin&#39;,
    &#39;django.contrib.auth&#39;,
    &#39;django.contrib.contenttypes&#39;,
    &#39;django.contrib.sessions&#39;,
    &#39;django.contrib.messages&#39;,
    &#39;django.contrib.staticfiles&#39;,
]
</code></pre><p>ç„¶ååœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š</p>
<pre tabindex="0"><code>ASGI_APPLICATION = &#39;acapp.asgi.application&#39;
CHANNEL_LAYERS = {
    &#34;default&#34;: {
        &#34;BACKEND&#34;: &#34;channels_redis.core.RedisChannelLayer&#34;,
        &#34;CONFIG&#34;: {
            &#34;hosts&#34;: [(&#34;127.0.0.1&#34;, 6379)],
        },
    },
}
</code></pre><ol start="4">
<li>é…ç½® <code>game/routing.py</code>
è¿™ä¸€éƒ¨åˆ†çš„ä½œç”¨ç›¸å½“äº <code>http</code> çš„ <code>urls</code></li>
</ol>
<p>å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre tabindex="0"><code>from django.urls import path

websocket_urlpatterns = [
]
</code></pre><ol start="5">
<li>ç¼–å†™ <code>game/consumers</code>
è¿™ä¸€éƒ¨åˆ†çš„ä½œç”¨ç›¸å½“äº <code>http</code> çš„ <code>views</code></li>
</ol>
<p>å‚è€ƒç¤ºä¾‹ï¼š</p>
<p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>from channels.generic.websocket import AsyncWebsocketConsumer
import json

class MultiPlayer(AsyncWebsocketConsumer):
    async def connect(self):
        await self.accept()
        print(&#39;accept&#39;)

        self.room_name = &#34;room&#34;
        await self.channel_layer.group_add(self.room_name, self.channel_name)

    async def disconnect(self, close_code):
        print(&#39;disconnect&#39;)
        await self.channel_layer.group_discard(self.room_name, self.channel_name);


    async def receive(self, text_data):
        data = json.loads(text_data)
        print(data)
</code></pre><ol start="6">
<li>å¯åŠ¨ <code>django_channels</code></li>
</ol>
<p>åœ¨ <code>~/acapp</code> ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre tabindex="0"><code>daphne -b 0.0.0.0 -p 5015 acapp.asgi:application
</code></pre><ol start="7">
<li>å»ºç«‹ <strong>WSS</strong> è¿æ¥</li>
</ol>
<p><code>game/routing.py</code></p>
<pre tabindex="0"><code>from django.urls import path
from game.consumers.multiplayer.index import MultiPlayer

websocket_urlpatterns = [
    path(&#34;wss/multiplayer/&#34;, MultiPlayer.as_asgi(), name=&#34;wss_multiplayer&#34;),
]
</code></pre><p><code>playground/zbase.js</code></p>
<pre tabindex="0"><code>class AcGamePlayground {
    ...
    show(mode) {    // æ‰“å¼€ playground ç•Œé¢
        ...
        if (mode === &#34;single mode&#34;) {
            ...
        } else if (mode === &#34;multi mode&#34;) {
            this.mps = new MultiPlayerSocket(this);
            this.mps.ws.onopen = function() {
                outer.mps.send_create_player();
            };
        }

    }
}
</code></pre><p><code>playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    constructor(playground) {
        this.playground = playground;
        this.ws = new WebSocket(&#34;wss://app1117.acapp.acwing.com.cn/wss/multiplayer/&#34;);
        this.start();
    }
    start() {
    }
    send_create_player() {
        this.ws.send(JSON.stringify({
            &#39;message&#39;: &#39;hello acapp server&#39;,
        }));
    }
    receive_create_player() {
    }
}
</code></pre><h2 id="ç¼–å†™åŒæ­¥å‡½æ•°">ç¼–å†™åŒæ­¥å‡½æ•°</h2>
<p>ä¸€å…±éœ€è¦å®Œæˆå››ä¸ªé€šä¿¡ï¼š</p>
<p>ï¼ˆé€šä¿¡çš„é€»è¾‘åŸºæœ¬éƒ½æ˜¯å…ˆåœ¨æœ¬åœ°å®Œæˆï¼Œç„¶åå°†ç»“æœè¿”å›ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å†åˆ†å‘ç»™å…¶ä»–å®¢æˆ·ç«¯ï¼Œè¾¾æˆåŒæ­¥ï¼‰</p>
<ol>
<li><strong>create-player</strong> : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œåˆ›å»ºä¸€ä¸ªæ–°åŠ å…¥çš„ç©å®¶</li>
<li><strong>move-to</strong> : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œå°†ä¸€ä¸ªè§’è‰²ç§»åŠ¨åˆ°ä¸€ä¸ªä½ç½®</li>
<li><strong>shoot-fireball</strong> : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œè®©ä¸€ä¸ªè§’è‰²å‘å°„ä¸€ä¸ªç«çƒ</li>
<li><strong>attack</strong> : åœ¨æ‰€æœ‰ç©å®¶çš„æ¸¸æˆç•Œé¢ï¼Œè®©ä¸€ä¸ªè§’è‰²è¢«æ”»å‡»</li>
</ol>
<p>ä¸€åœºæ¸¸æˆé‡Œï¼Œæ‰€æœ‰çš„å…ƒç´ ï¼ˆç©å®¶ï¼Œç«çƒç­‰ï¼‰éƒ½éœ€è¦å”¯ä¸€çš„æ ‡è¯†ï¼Œæ¥æ–¹ä¾¿åŒæ­¥</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹ä¸€ä¸‹æ¸¸æˆå¼•æ“ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ éƒ½åˆ›å»ºæˆ‘ä»¬éœ€è¦çš„å”¯ä¸€æ ‡è¯†</p>
<p><code>playground/ac-game-object/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGameObject {
</span></span><span style="display:flex;"><span>    constructor() {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.uuid = <span style="color:#fff;font-weight:bold">this</span>.create_uuid();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    create_uuid() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> res = <span style="color:#0ff;font-weight:bold">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">for</span> (<span style="color:#fff;font-weight:bold">let</span> i = <span style="color:#ff0;font-weight:bold">0</span>; i &lt; <span style="color:#ff0;font-weight:bold">8</span>; i ++ ) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">let</span> x = <span style="color:#fff;font-weight:bold">parseInt</span>(<span style="color:#fff;font-weight:bold">Math</span>.floor(<span style="color:#fff;font-weight:bold">Math</span>.random() * <span style="color:#ff0;font-weight:bold">10</span>));   <span style="color:#007f7f">// [0, 10)
</span></span></span><span style="display:flex;"><span><span style="color:#007f7f"></span>            res += x;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>playground/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> AcGamePlayground {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    show(mode) {
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">if</span> (mode === <span style="color:#0ff;font-weight:bold">&#34;single mode&#34;</span>) {
</span></span><span style="display:flex;"><span>            ...
</span></span><span style="display:flex;"><span>        } <span style="color:#fff;font-weight:bold">else</span> <span style="color:#fff;font-weight:bold">if</span> (mode === <span style="color:#0ff;font-weight:bold">&#34;multi mode&#34;</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.mps = <span style="color:#fff;font-weight:bold">new</span> MultiPlayerSocket(<span style="color:#fff;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.mps.uuid = <span style="color:#fff;font-weight:bold">this</span>.players[<span style="color:#ff0;font-weight:bold">0</span>].uuid;
</span></span><span style="display:flex;"><span>            <span style="color:#fff;font-weight:bold">this</span>.mps.ws.onopen = <span style="color:#fff;font-weight:bold">function</span>() {
</span></span><span style="display:flex;"><span>                outer.mps.send_create_player();
</span></span><span style="display:flex;"><span>            };
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>playground/socket/multiplayer/zbase.js</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">class</span> MultiPlayerSocket {
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    send_create_player() {
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">let</span> outer = <span style="color:#fff;font-weight:bold">this</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#fff;font-weight:bold">this</span>.ws.send(JSON.stringify({
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;event&#39;</span>: <span style="color:#0ff;font-weight:bold">&#39;create_player&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#0ff;font-weight:bold">&#39;uuid&#39;</span>: outer.uuid,
</span></span><span style="display:flex;"><span>        }));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ç€ï¼Œåˆ©ç”¨é€šä¿¡çš„æ–¹å¼ï¼Œä½¿å¾—æ¯ä¸ªçª—å£å†…ï¼Œé€»è¾‘ä¸Šç›¸åŒçš„å…ƒç´ ï¼Œå…¶ <code>uid</code> ä¹Ÿç›¸åŒå³å¯</p>
<p>åŸåˆ™æ˜¯ï¼šå“ªä¸ªçª—å£åˆ›å»ºçš„å…ƒç´ ï¼Œå°±ç”¨ä»–åˆ›å»ºæ—¶çš„ <code>uid</code> ä½œä¸ºæ•´ä¸ªé¡¹ç›®è¿è¡Œæ—¶çš„ <code>uid</code></p>
<p>ç„¶åï¼Œæˆ‘ä»¬æ‰“ç®—ç”¨ <strong>redis</strong> æ¥å®ç°å­˜å‚¨æ¯ä¸ªæ¸¸æˆæˆ¿é—´ï¼Œä»¥åŠå…ƒç´ ï¼Œå¹¶åˆå§‹é»˜è®¤è®¾å®šæ¯ä¸ªæˆ¿é—´ä¸Šé™ 3 äºº</p>
<h3 id="create-player">create-player</h3>
<h4 id="å‰ç«¯">å‰ç«¯</h4>
<p><code>game/static/js/src/playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    constructor(playground) {
        this.playground = playground;

        this.ws = new WebSocket(&#34;wss://app1117.acapp.acwing.com.cn/wss/multiplayer/&#34;);

        this.start();
    }
    start() {
        this.receive();
    }
    receive() {
        let outer = this;
        this.ws.onmessage = function(e) {
            let data = JSON.parse(e.data);
            let uuid = data.uuid;
            if (uuid === outer.uuid) return false;

            let event = data.event;
            if (event === &#34;create_player&#34;) {
                outer.receive_create_player(uuid, data.username, data.photo);
            }
        };
    }
    send_create_player(username, photo) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &#39;event&#39;: &#39;create_player&#39;,
            &#39;uuid&#39;: outer.uuid,
            &#39;username&#39;: username,
            &#39;photo&#39;: photo,
        }));
    }
    receive_create_player(uuid, username, photo) {
        let player = new Player(
            this.playground,
            this.playground.width / 2 / this.playground.scale,
            0.5,
            0.05,
            &#34;white&#34;,
            0.15,
            &#34;enemy&#34;,
            username,
            photo,
        );
        player.uuid = uuid;
        this.playground.players.push(player);
    }
}
</code></pre><h4 id="åç«¯">åç«¯</h4>
<p><code>settings.py</code></p>
<pre tabindex="0"><code>...
ROOM_CAPACITY = 3
</code></pre><p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>from channels.generic.websocket import AsyncWebsocketConsumer
import json
from django.conf import settings
from django.core.cache import cache

class MultiPlayer(AsyncWebsocketConsumer):
    async def connect(self):
        self.room_name = None
        for i in range(1000):   # ä¸Šé™ 1k ä¸ªæˆ¿é—´
            name = &#34;room-%d&#34; % (i)
            # å½“å‰æˆ¿é—´ä¸ºç©ºï¼Œæˆ–æˆ¿é—´å†…ç©å®¶äººæ•°ä¸åˆ° ROOM_CAPACITY
            if not cache.has_key(name) or len(cache.get(name)) &lt; settings.ROOM_CAPACITY:
                self.room_name = name
                break
        if not self.room_name:
            return

        await self.accept()

        if not cache.has_key(self.room_name):   # å¦‚æœæˆ¿é—´ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºæˆ¿é—´
            cache.set(self.room_name, [], 3600) # æœ‰æ•ˆæœŸ 1 å°æ—¶

        for player in cache.get(self.room_name):    # å¯¹è¯¥æˆ¿é—´å·²å­˜åœ¨çš„ç”¨æˆ·ï¼Œåˆ›å»ºåˆ°æ–°åŠ å…¥çš„ç”¨æˆ·çš„æ¸¸æˆç•Œé¢ä¸­
            await self.send(text_data=json.dumps({
                &#39;event&#39;: &#34;create_player&#34;,
                &#39;uuid&#39;: player[&#39;uuid&#39;],
                &#39;username&#39;: player[&#39;username&#39;],
                &#39;photo&#39;: player[&#39;photo&#39;],
            }))
        await self.channel_layer.group_add(self.room_name, self.channel_name)

    async def disconnect(self, close_code):
        print(&#39;disconnect&#39;)
        await self.channel_layer.group_discard(self.room_name, self.channel_name);

    async def create_player(self, data):
        players = cache.get(self.room_name)
        players.append({
            &#39;uuid&#39;: data[&#39;uuid&#39;],
            &#39;username&#39;: data[&#39;username&#39;],
            &#39;photo&#39;: data[&#39;photo&#39;],
        })
        cache.set(self.room_name, players, 3600) # æ›´æ–°æˆ¿é—´å­˜åœ¨æ—¶é—´ä¸º 1 å°æ—¶ï¼ˆæœ€åä¸€æ¬¡åŠ å…¥ä¸€åç©å®¶æ—¶ï¼‰
        # ç¾¤å‘æ¶ˆæ¯æ›´æ–°
        await self.channel_layer.group_send(
            self.room_name,
            {
                &#39;type&#39;: &#34;group_create_player&#34;,  # ç¾¤å‘è¯¥æ¶ˆæ¯åï¼Œä½œä¸ºå®¢æˆ·ç«¯æ¥å—è€…ï¼Œæ‰€æ¥å—ç”¨çš„å‡½æ•°å
                &#39;event&#39;: &#34;create_player&#34;,
                &#39;uuid&#39;: data[&#39;uuid&#39;],
                &#39;username&#39;: data[&#39;username&#39;],
                &#39;photo&#39;: data[&#39;photo&#39;],
            }
        )
    async def group_create_player(self, data):
        await self.send(text_data=json.dumps(data))

    async def receive(self, text_data):
        data = json.loads(text_data)
        event = data[&#39;event&#39;]
        if event == &#34;create_player&#34;:
            await self.create_player(data)
</code></pre><h4 id="redis-è°ƒè¯•è¯­å¥">redis è°ƒè¯•è¯­å¥</h4>
<p>æ‰“å¼€ shell äº¤äº’</p>
<pre tabindex="0"><code>python3 manage.py shell
</code></pre><p>ç„¶åç”¨ py3 äº¤äº’è¿›è¡Œ cache è°ƒè¯•</p>
<pre tabindex="0"><code>from django.core.cache import cache

def clear():
    for key in cache.keys(&#39;*&#39;):
        cache.delete(key)

cache.keys(&#39;*&#39;) # æŸ¥è¯¢å½“å‰ redis ä¸­æ‰€æœ‰ key

cache.get(&#39;room-1&#39;) # æŸ¥è¯¢å½“å‰ redis ä¸­ key ä¸º room-1 çš„å€¼
</code></pre><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¾¿å¯ä»¥åœ¨ä¸åŒçš„çª—å£æ¸²æŸ“åŒä¸€æ‰¹ç©å®¶äº†</p>
<h3 id="move-to">move-to</h3>
<h4 id="å‰ç«¯-1">å‰ç«¯</h4>
<p>å®¢æˆ·ç«¯çš„é€šä¿¡çš„å‘å‡ºå’Œæ¥å—å‡½æ•°</p>
<p><code>game/static/js/src/playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    ...
    receive() {
        let outer = this;
        this.ws.onmessage = function(e) {
            ...
            else if (event === &#34;move_to&#34;) {
                outer.receive_move_to(uuid, data.tx, data.ty);
            }
        };
    }
    send_move_to(tx, ty) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &#39;event&#39;: &#39;move_to&#39;,
            &#39;uuid&#39;: outer.uuid,
            &#39;tx&#39;: tx,
            &#39;ty&#39;: ty,
        }));
    }
    get_player(uuid) {
        let players = this.playground.players;
        for (let i = 0; i &lt; players.length; i ++ ) {
            let player = players[i];
            if (player.uuid === uuid) {
                return player;
            }
        }
        return null;
    }
    receive_move_to(uuid, tx, ty) {
        let player = this.get_player(uuid);
        if (player) {
            player.move_to(tx, ty);
        }
    }
}
</code></pre><p>ä¸ºäº†è®©æ¸¸æˆç•Œé¢ä¸­å¯¹äºè¦ç§»åŠ¨çš„å…ƒç´ åšå‡ºç§»åŠ¨åŠ¨ä½œï¼Œéœ€è¦å¯¹ <code>move_to</code> å‡½æ•°åšå‡ºä¸€äº›ä¿®æ”¹</p>
<p>é¦–å…ˆè¦æ ‡è¯†å‡ºå½“å‰ä¸ºå¤šäººæ¨¡å¼ï¼Œç„¶åæ¨¡å¼ä¸ºå¤šäººæ¨¡å¼æ—¶ï¼Œæ¯æ¬¡ç§»åŠ¨éƒ½ä¼šè§¦å‘ä¸€æ¬¡é€šä¿¡</p>
<p><code>playground/zbase.js</code></p>
<pre tabindex="0"><code>class AcGamePlayground {
    ...
    show(mode) {
        ...
        this.mode = mode;
    }
}
</code></pre><p><code>playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    ...
    add_listening_events() {
      ...
       this.playground.game_map.$canvas.mousedown(function(e) {
           ...
           if (e.which === 3) {
               let tx = (e.clientX - rect.left) / outer.playground.scale;
               let ty = (e.clientY - rect.top) / outer.playground.scale;
               outer.move_to(tx, ty);
               if (outer.playground.mode === &#34;multi mode&#34;) {
                   outer.playground.mps.send_move_to(tx, ty);
               }
           }
           ...
   }
   ...
}
</code></pre><h4 id="åç«¯-1">åç«¯</h4>
<p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>async def move_to(self, data):
    await self.channel_layer.group_send(
        self.room_name,
        {
            &#39;type&#39;: &#34;group_send_event&#34;,
            &#39;event&#39;: &#34;move_to&#34;,
            &#39;uuid&#39;: data[&#39;uuid&#39;],
            &#39;tx&#39;: data[&#39;tx&#39;],
            &#39;ty&#39;: data[&#39;ty&#39;],
        }
    )

async def group_send_event(self, data):
    await self.send(text_data=json.dumps(data))

async def receive(self, text_data):
    data = json.loads(text_data)
    event = data[&#39;event&#39;]
    if event == &#34;create_player&#34;:
        await self.create_player(data)
    elif event == &#34;move_to&#34;:
        await self.move_to(data)
</code></pre><h3 id="shoot-fireball">shoot-fireball</h3>
<h4 id="å‰ç«¯-2">å‰ç«¯</h4>
<p>ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜ä¸€ä¸ªç©å®¶å‘å°„çš„æ‰€æœ‰ç«çƒï¼Œä»¥ä¾¿äºå­å¼¹æ¶ˆå¤±æ—¶ï¼Œå°†ä»–ä»¬æ‰¾å‡ºå¹¶å¯¹åº”åˆ æ‰</p>
<p><code>playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    constructor(playground, x, y, radius, color, speed, character, username, photo) {
        ...
        this.fireballs = [];    // å­˜è¯¥ç”¨æˆ·å‘å°„çš„æ‰€æœ‰ç«çƒ
    }
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            ...
            else if (e.which === 1) {
                let tx = (e.clientX - rect.left) / outer.playground.scale;
                let ty = (e.clientY - rect.top) / outer.playground.scale;
                if (outer.cur_skill === &#34;fireball&#34;) {
                    let fireball = outer.shoot_fireball(tx, ty);
                    if (outer.playground.mode === &#34;multi mode&#34;) {
                        outer.playground.mps.send_shoot_fireball(tx, ty, fireball.uuid);
                    }
                }
            }
            ...
        });
        $(window).keydown(function(e) {
            if (e.which === 81) {           // é”®ç›˜æŒ‰ä¸‹qäº‹ä»¶
                outer.cur_skill = &#34;fireball&#34;;
                return false;
            }
        });
    }
    ...
    shoot_fireball(tx, ty) {
        ...

        let fireball = new FireBall(this.playground, this, x, y, radius, vx, vy, color, speed, move_length, damage);
        this.fireballs.push(fireball);
        return fireball;
    }
    destroy_fireball(uuid) {
        for (let i = 0; i &lt; this.fireballs.length; i ++ ) {
            let fireball = this.fireballs[i];
            if (fireball.uuid == uuid) {
                fireball.destroy();
                break;
            }
        }
    }
    ...
</code></pre><p><code>playground/skill/fireball/zbase.js</code></p>
<pre tabindex="0"><code>class FireBall extends AcGameObject {
    ...
    on_destory() {
        let fireballs = this.player.fireballs;
        for (let i = 0; i &lt; fireballs.length; i ++ ) {
            if (fireballs[i] === this) {
                fireballs.splice(i, 1);
                break;
            }
        }
    }
}
</code></pre><p><code>game/static/js/src/playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    ...
    send_shoot_fireball(tx, ty, ball_uuid) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &#39;event&#39;: &#39;move_to&#39;,
            &#39;uuid&#39;: outer.uuid,
            &#39;tx&#39;: tx,
            &#39;ty&#39;: ty,
            &#39;ball_uuid&#39;: ball_uuid;
        }));
    }
    receive_shoot_fireball(uuid, tx, ty, ball_uuid) {
        let player = this.get_player(uuid);
        if (player) {
            let fireball = player.shoot_fireball(tx, ty);
            fireball.uuid = ball_uuid;
        }
    }
}
</code></pre><h4 id="åç«¯-2">åç«¯</h4>
<p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def shoot_fireball(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &#39;type&#39;: &#34;group_send_event&#34;,
                &#39;event&#39;: &#34;shoot_fireball&#34;,
                &#39;uuid&#39;: data[&#39;uuid&#39;],
                &#39;tx&#39;: data[&#39;tx&#39;],
                &#39;ty&#39;: data[&#39;ty&#39;],
                &#39;ball_uuid&#39;: data[&#39;ball_uuid&#39;],
            }
        )
    async def receive(self, text_data):
        ...
        elif event == &#34;shoot_fireball&#34;:
            await self.shoot_fireball(data)
</code></pre><h3 id="attack">attack</h3>
<p>ä¸ºäº†åªè®©ä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œæ”»å‡»å‘½ä¸­çš„åˆ¤æ–­ï¼Œå› æ­¤åªæœ‰å‘å‡ºæ–¹çš„ç«çƒæ‰åšç¢°æ’æ£€æµ‹</p>
<p>å…¶ä»–å®¢æˆ·ç«¯å¯¹äºè¯¥ç«çƒåªæœ‰åŠ¨ç”»æ•ˆæœ</p>
<p>åˆç”±äºç¢°æ’æ£€æµ‹æ˜¯åœ¨ä¸€å°å®¢æˆ·ç«¯ä¸Šè¿›è¡Œçš„ï¼Œå› æ­¤å¤šç«¯ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨åŒæ­¥ä¸Šçš„å»¶è¿Ÿ</p>
<p>ä¸ºæ­¤çš„è§£å†³æ–¹æ³•æ˜¯ï¼šç¢°æ’æ£€æµ‹æˆåŠŸæ—¶ï¼Œå¼ºåˆ¶æŠŠè¢«å‡»ä¸­ç©å®¶ç§»åŠ¨åˆ°å‘èµ·æ–¹å®¢æˆ·ç«¯ä¸­çš„ä½ç½®ï¼Œä»¥é¿å…å‡»ä¸­å»¶è¿Ÿä¸Šå‘ç”Ÿçš„äº‹æƒ…</p>
<h4 id="å‰ç«¯-3">å‰ç«¯</h4>
<p><code>playground/skill/fireball/zbase.js</code></p>
<pre tabindex="0"><code>class FireBall extends AcGameObject {
    update() {
        if (this.move_length &lt; this.eps) {
            this.destroy();
            return false;
        }
        this.update_move();

        if (this.player.character !== &#34;enemy&#34;) {
            this.update_attack();
        }
        this.render();
    }
    attack(player) {
        ...
        if (this.playground.mode === &#34;multi mode&#34;) {
            this.playground.mps.send_attack(player.uuid, player.x, player.y, angle, this.damage, this.uuid);
        }
        ...
    }
    ...
}
</code></pre><p><code>playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    ...
    receive_attack(x, y, angle, damage, ball_uuid, attacker) {
        attacker.destroy_fireball(ball_uuid);
        this.x = x;
        this.y = y;
        this.is_attacked(angle, damage);
    }
    ...
}
</code></pre><p><code>game/static/js/src/playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    ...
    send_attack(attackee_uuid, x, y, angle, damage, ball_uuid) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &#39;event&#39;: &#34;attack&#34;,
            &#39;uuid&#39;: outer.uuid,
            &#39;attackee_uuid&#39;: attackee_uuid,
            &#39;x&#39;: x,
            &#39;y&#39;: y,
            &#39;angle&#39;: angle,
            &#39;damage&#39;: damage,
            &#39;ball_uuid&#39;: ball_uuid,
        }));
    }
    receive_attack(uuid, attackee_uuid, x, y, angle, damage, ball_uuid) {
        let attacker = this.get_player(uuid);
        let attackee = this.get_player(attackee_uuid);
        if (attacker &amp;&amp; attackee) {
            attackee.receive_attack(x, y, angle, damage, ball_uuid, attacker);
        }
    }
}
</code></pre><h4 id="åç«¯-3">åç«¯</h4>
<p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def attack(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &#39;type&#39;: &#34;group_send_event&#34;,
                &#39;event&#39;: &#34;attack&#34;,
                &#39;uuid&#39;: data[&#39;uuid&#39;],
                &#39;x&#39;: data[&#39;x&#39;],
                &#39;y&#39;: data[&#39;y&#39;],
                &#39;angle&#39;: data[&#39;angle&#39;],
                &#39;damage&#39;: data[&#39;damage&#39;],
                &#39;ball_uuid&#39;: data[&#39;ball_uuid&#39;],
            }
        )
    ...
</code></pre><h2 id="æ¸¸æˆçš„å°ä¼˜åŒ–">æ¸¸æˆçš„å°ä¼˜åŒ–</h2>
<h3 id="å¤šäººæ¨¡å¼ä¸‹æ¸¸æˆæ²¡æœ‰å¼€å§‹å‰ç©å®¶ä¸å¯ä»¥ç§»åŠ¨">å¤šäººæ¨¡å¼ä¸‹æ¸¸æˆæ²¡æœ‰å¼€å§‹å‰ï¼Œç©å®¶ä¸å¯ä»¥ç§»åŠ¨</h3>
<p>ä¸ºæ­¤æˆ‘ä»¬å…ˆå¼•å…¥ä¸€ä¸ªçŠ¶æ€æœºï¼š<code>'waiting' -&gt; 'fighting' -&gt; 'over'</code> æ¥æ ‡è¯†å½“å‰æ¸¸æˆè¿›è¡Œçš„çŠ¶æ€</p>
<p>ç„¶åç”¨ä¸€ä¸ª <code>notice_board</code> è®¡åˆ†æ¿åœ¨å‰ç«¯æ˜¾ç¤ºå‡ºæ¥</p>
<p>å®ç°çš„é€»è¾‘å°±æ˜¯ï¼šæ¸¸æˆåˆå§‹æ—¶ä¸º <code>waiting</code> çŠ¶æ€ï¼Œæˆ¿é—´å†…äººæ•°æ»¡ 3 äººæ—¶ï¼Œæ‰ä¼šè¿›å…¥ <code>fighting</code>ï¼Œè§’è‰²æ­»äº¡æ—¶ä¸º <code>over</code></p>
<p>ä¸”å‘å°„ç«çƒï¼Œç§»åŠ¨ç­‰è¡Œä¸ºï¼Œå½“ä¸”ä»…å½“ç©å®¶çŠ¶æ€ä¸º <code>fighting</code> æ—¶ï¼Œæ‰å¯ä»¥åš</p>
<p>ç„¶åè®¾å®šç«çƒæŠ€èƒ½çš„ cd ä¸º 3 ç§’ï¼Œä¸”åœ¨æ¸¸æˆè¿›å…¥ <code>fighting</code> æ—¶ï¼Œå…ˆè‡ªåŠ¨è¿›å…¥ cd çŠ¶æ€</p>
<p>è¿™æ ·å°±å®ç°äº†åˆå§‹ 3 ç§’å†…ï¼Œä»»ä½•ç©å®¶ä¸å¯æ”»å‡»</p>
<p><code>js/src/playground/notice_board/zbase.js</code></p>
<pre tabindex="0"><code>class NoticeBoard extends AcGameObject {
    constructor(playground) {
        super();

        this.playground = playground;
        this.ctx = this.playground.game_map.ctx;
        this.text = &#34;å·²å°±ç»ªï¼š0äºº&#34;;
    }
    start() {
    }

    write(text) {
        this.text = text;
    }

    update() {
        this.render();
    }

    render() {
        this.ctx.font = &#34;20px serif&#34;;
        this.ctx.fillStyle = &#34;white&#34;;
        this.ctx.textAlign = &#34;center&#34;;
        this.ctx.fillText(this.text, this.playground.width / 2, 20);
    }
}
</code></pre><p><code>js/src/playground/zbase.js</code></p>
<pre tabindex="0"><code>class AcGamePlayground {
    ...
    show(mode) {
        ...
        this.state = &#34;waiting&#34;;     // waiting -&gt; fighting -&gt; over
        this.notice_board = new NoticeBoard(this);
        this.player_count = 0;
        ...
    }
}
</code></pre><p><code>js/src/playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            if (outer.playground.state !== &#34;fighting&#34;)
                return false;
            ...
        }
        $(window).keydown(function(e) {
            if (outer.playground.state !== &#34;fighting&#34;)
                return false;
            ...
        });
    }
    start() {
        this.playground.player_count ++ ;
        this.playground.notice_board.write(&#34;å·²å°±ç»ªï¼š&#34; + this.playground.player_count + &#34;äºº&#34;);
        if (this.playground.player_count &gt;= 3) {
            this.playground.state = &#34;fighting&#34;;
            this.playground.notice_board.write(&#34;Fighting&#34;);
        }
        ...
    }
    ...
}
</code></pre><h3 id="æŠ€èƒ½cd">æŠ€èƒ½CD</h3>
<p>ç»™ç«çƒæŠ€èƒ½è®¾ç½® 3s çš„ cdï¼Œå®ç°é€»è¾‘å¾ˆç®€å•ï¼Œè®¾å®šä¸€ä¸ª cool_time å˜é‡ï¼Œæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™å‡å»ä¸Šæ¬¡æ¸²æŸ“çš„æ—¶é—´é—´éš”</p>
<p>ç„¶å cool_time ä¸º 0 æ—¶ï¼ŒæŠ€èƒ½æ‰å¯ä»¥æˆåŠŸé‡Šæ”¾</p>
<p>å¦å¤–ä¿®æ”¹å†·å´æ—¶é—´ï¼Œåªç”¨ä¿®æ”¹è‡ªå·±çš„å³å¯</p>
<p><code>js/src/playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    constructor(...) {
        ...
        if (this.character === &#34;me&#34;) {
            this.fireball_coldtime = 3; // å•ä½ï¼šs
        }
    }
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            ...
            else if (e.which === 1) {
                ...
                if (outer.cur_skill === &#34;fireball&#34;) {
                    ...
                    if (outer.playground.mode === &#34;multi mode&#34;) {
                        outer.playground.mps.send_shoot_fireball(tx, ty, fireball.uuid);
                    }
                    outer.fireball_coldtime = 3;
                }
            }
            ...
        });
        $(window).keydown(function(e) {
            ...
            if (outer.fireball_coldtime &gt;= outer.eps)
                return false;
            ...
        });
    }
    update() {
        ...
        if (this.character === &#34;me&#34; &amp;&amp; this.playground.state === &#34;fighting&#34;) {
            this.update_coldtime();
        }
        ...
    }
    update_coldtime() {
        this.fireball_coldtime -= this.timedelta / 1000;
        this.fireball_coldtime = Math.max(0, this.fireball_coldtime);
    }
    ...
}
</code></pre><h3 id="ç”¨å›¾ç‰‡æ¥æ¸²æŸ“æŠ€èƒ½cd">ç”¨å›¾ç‰‡æ¥æ¸²æŸ“æŠ€èƒ½CD</h3>
<p><code>js/src/playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    constructor(...) {
        ...
        if (this.character === &#34;me&#34;) {
            this.fireball_coldtime = 3; // å•ä½ï¼šs
            this.fireball_img = new Image();
            this.fireball_img.src = &#34;https://cdn.acwing.com/media/article/image/2021/12/02/1_9340c86053-fireball.png&#34;;
        }
    }
    ...
    render() {
        ...
        if (this.character === &#34;me&#34; &amp;&amp; this.playground.state === &#34;fighting&#34;) {
            this.render_skill_coldtime();
        }
    }
     render_skill_coldtime() {
        let scale = this.playground.scale;
        let x = 1.5, y = 0.9, r = 0.04;

        // æ¸²æŸ“æŠ€èƒ½å›¾æ ‡
        this.ctx.save();
        this.ctx.beginPath();
        this.ctx.arc(x * scale, y * scale, r * scale, 0, Math.PI * 2, false);
        this.ctx.stroke();
        this.ctx.clip();
        this.ctx.drawImage(this.fireball_img, (x - r) * scale, (y - r) * scale, r * 2 * scale, r * 2 * scale);
        this.ctx.restore();

        // æ¸²æŸ“å†·å´æŒ‡ç¤º
        if (this.fireball_coldtime &gt;= this.eps){
            this.ctx.beginPath();
            this.ctx.moveTo(x * scale, y * scale);
            this.ctx.arc(x * scale, y * scale, r * scale, 0 - Math.PI / 2, Math.PI * 2 * (1 - this.fireball_coldtime / 3) - Math.PI / 2, true);
            this.ctx.lineTo(x * scale, y * scale);
            this.ctx.fillStyle = &#34;rgba(0, 0, 255, 0.6)&#34;;
            this.ctx.fill();
        }
    }
    ...
</code></pre><h3 id="æ·»åŠ ä¸€ä¸ªé—ªç°æŠ€èƒ½">æ·»åŠ ä¸€ä¸ªé—ªç°æŠ€èƒ½</h3>
<h4 id="å•æœºéƒ¨åˆ†">å•æœºéƒ¨åˆ†</h4>
<p><code>js/src/playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    constructor(...) {
        ...
        if (this.character === &#34;me&#34;) {
            ...
            this.blink_coldtime = 5;
            this.blink_img = new Image();
            this.blink_img.src = &#34;https://cdn.acwing.com/media/article/image/2021/12/02/1_daccabdc53-blink.png&#34;;
        }
    }
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.mousedown(function(e) {
            ...
            else if (e.which === 1) {
                ...
                else if (outer.cur_skill === &#34;blink&#34;) {
                    outer.blink(tx, ty);
                    // åŒæ­¥å‡½æ•°
                    if (outer.playground.mode === &#34;multi mode&#34;) {
                        outer.playground.mps.send_blink(tx, ty);
                    }
                    outer.blink_coldtime = 5;
                }
            }
            outer.cur_skill = null; // æ¸…ç©ºå½“å‰æŠ€èƒ½
        });
        $(window).keydown(function(e) {
            ...
            else if (e.which === 70) {    // fé”®
                if (outer.blink_coldtime &gt;= outer.eps) return true;
                outer.cur_skill = &#34;blink&#34;;
                return false;
            }
        });
    }
    ...
    blink(tx, ty) {
        let d = this.get_dist(this.x, this.y, tx, ty);
        d = Math.min(d, 0.5);
        let angle = Math.atan2(ty - this.y, tx - this.x);
        this.x += d * Math.cos(angle);
        this.y += d * Math.sin(angle);

        this.move_length = 0;   // é—ªç°å®Œåœä¸‹æ¥
    }
    ...
    render_skill_coldtime() {
        ...
        x = 1.62, y = 0.9, r = 0.04;
        // é—ªç°æŠ€èƒ½
        // æ¸²æŸ“æŠ€èƒ½å›¾æ ‡
        this.ctx.save();
        this.ctx.beginPath();
        this.ctx.arc(x * scale, y * scale, r * scale, 0, Math.PI * 2, false);
        this.ctx.stroke();
        this.ctx.clip();
        this.ctx.drawImage(this.blink_img, (x - r) * scale, (y - r) * scale, r * 2 * scale, r * 2 * scale);
        this.ctx.restore();

        // æ¸²æŸ“å†·å´æŒ‡ç¤º
        if (this.blink_coldtime &gt;= this.eps){
            this.ctx.beginPath();
            this.ctx.moveTo(x * scale, y * scale);
            this.ctx.arc(x * scale, y * scale, r * scale, 0 - Math.PI / 2, Math.PI * 2 * (1 - this.blink_coldtime / 5) - Math.PI / 2, true);
            this.ctx.lineTo(x * scale, y * scale);
            this.ctx.fillStyle = &#34;rgba(0, 0, 255, 0.6)&#34;;
            this.ctx.fill();
        }
    }
}
</code></pre><h4 id="è”æœºéƒ¨åˆ†">è”æœºéƒ¨åˆ†</h4>
<p><code>game/static/js/src/playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    ...
    send_blink(tx, ty) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &#39;event&#39;: &#34;blink&#34;,
            &#39;uuid&#39;: outer.uuid,
            &#39;tx&#39;: tx,
            &#39;ty&#39;: ty,
        }));
    }
    receive_blink(uuid, tx, ty) {
        let player = this.get_player(uuid);
        if (player) {
            player.blink(tx, ty);
        }
    }
}
</code></pre><p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def blink(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &#39;type&#39;: &#34;group_send_event&#34;,
                &#39;event&#39;: &#34;blink&#34;,
                &#39;uuid&#39;: data[&#39;uuid&#39;],
                &#39;tx&#39;: data[&#39;tx&#39;],
                &#39;ty&#39;: data[&#39;ty&#39;],
            }
        )
</code></pre><h1 id="å®ç°èŠå¤©ç³»ç»Ÿà®">å®ç°èŠå¤©ç³»ç»Ÿà®</h1>
<ul>
<li><a href="https://www.acwing.com/solution/content/89508/">8.1 ä¸Šè¯¾ç¬”è®° | å¤§èœç‹—</a></li>
</ul>
<hr>
<h2 id="ä¼˜åŒ–é”®ç›˜ç»‘å®šäº‹ä»¶">ä¼˜åŒ–é”®ç›˜ç»‘å®šäº‹ä»¶</h2>
<p>è¿™éƒ¨åˆ†ç®—æ˜¯ä¹‹å‰çš„é—ç•™é—®é¢˜ï¼Œå…ˆå‰çš„ <code>keydown</code> ç›‘å¬äº‹ä»¶ç»‘å®šåœ¨äº† <code>window</code> ä¸Šä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜</p>
<p>å¦‚æœåœ¨ä¸€ä¸ªæµè§ˆå™¨å†…æ‰“å¼€å¤šä¸ª <code>ACAPP</code>ï¼Œæ­¤æ—¶æŒ‰ä¸‹é”®ä½è§¦å‘ <code>keydown</code> äº‹ä»¶ï¼Œä¼šè¢«æµè§ˆå™¨å†…æ‰€æœ‰çš„ <code>ACAPP</code> éƒ½æ•è·åˆ°</p>
<p>ä¹‹å‰å½±å“ä¸å¤§ï¼Œä½†å¯¹æ­¤æ¬¡è¦å®ç°çš„èŠå¤©ç³»ç»Ÿå°±æœ‰ç€è‡´å‘½çš„å½±å“ï¼Œå³æ‰“å¼€ä¸€ä¸ª <code>ACAPP</code> çš„èŠå¤©æ ï¼Œå…¶ä»–éƒ½ä¼šè¢«æ‰“å¼€</p>
<p>æ‰€æœ‰æˆ‘ä»¬è¦å°† <code>keydown</code> ç›‘å¬äº‹ä»¶ç»‘å®šåˆ° <code>canvas</code> ä¸Š</p>
<p><code>playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.keydown(function(e) {
            if (outer.playground.state !== &#34;fighting&#34;)
                return true;
            if (e.which === 81) {           // é”®ç›˜æŒ‰ä¸‹qäº‹ä»¶
                if (outer.fireball_coldtime &gt;= outer.eps) return true;
                outer.cur_skill = &#34;fireball&#34;;
                return false;
            } else if (e.which === 70) {    // fé”®
                if (outer.blink_coldtime &gt;= outer.eps) return true;
                outer.cur_skill = &#34;blink&#34;;
                return false;
            }
        });
    }
}
</code></pre><p><code>playground/game-map/zbase.js</code></p>
<pre tabindex="0"><code>class GameMap extends AcGameObject {
    constructor(playground) {
        ...
        this.$canvas = $(`&lt;canvas tabindex=0&gt;&lt;/canvas&gt;`);
        ...
    }
    start() {
        this.$canvas.focus();
    }
}
</code></pre><h2 id="æœ¬åœ°å‰ç«¯">æœ¬åœ°å‰ç«¯</h2>
<p>è¦å®ç°ä¸¤ä¸ªéƒ¨åˆ†ï¼š 1. æ–‡æœ¬è¾“å…¥æ¡†ï¼ˆè®©ç”¨æˆ·è¾“å…¥è¦å‘é€çš„ä¿¡æ¯ï¼‰ 2. å†å²è®°å½•æ˜¾ç¤ºæ¡†ï¼ˆä¹‹å‰ç”¨æˆ·å‘é€çš„ä¿¡æ¯çš„æ˜¾ç¤ºæ¡†ï¼‰</p>
<p>æ¬²å®ç°é€»è¾‘ï¼šç”¨æˆ·æŒ‰ä¸‹ <code>&lt;Enter&gt;</code> åï¼Œæ¸¸æˆç•Œé¢å¼¹å‡ºæ–‡æœ¬è¾“å…¥æ¡†ï¼Œç„¶åèšç„¦äºæ–‡æœ¬è¾“å…¥æ¡†ï¼Œä¸”åŒæ—¶å¼¹å‡ºå†å²è®°å½•æ˜¾ç¤ºæ¡† 3 ç§’</p>
<p>ç„¶åç”¨æˆ·è¾“å…¥ä¿¡æ¯åï¼ŒæŒ‰ä¸‹ <code>&lt;Enter&gt;</code> åå‘å‡ºä¿¡æ¯ï¼Œæ¥ç€ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨å†å²è®°å½•æ˜¾ç¤ºæ¡†æœ€ä¸‹æ–¹ï¼Œå¹¶å¼¹å‡ºå†å²è®°å½•æ˜¾ç¤ºæ¡† 3 ç§’</p>
<p><code>playground/chat_field/zbase.js</code></p>
<p><code>chat field</code> è´Ÿè´£ç®¡ç† æ–‡æœ¬è¾“å…¥æ¡† å’Œ å†å²è®°å½•æ˜¾ç¤ºæ¡†</p>
<pre tabindex="0"><code>class ChatField {
    constructor(playground) {
        this.playground = playground;

        this.$history = $(`&lt;div class=&#34;ac-game-chat-field-history&#34;&gt;&lt;/div&gt;`);
        this.$input = $(`&lt;input type=&#34;text&#34; class=&#34;ac-game-chat-field-input&#34;&gt;`);

        this.$history.hide();
        this.$input.hide();

        this.func_id = null;

        this.playground.$playground.append(this.$history);
        this.playground.$playground.append(this.$input);

        this.start();
    }

    start() {
        this.add_listening_events();
    }
    add_listening_events() {
        let outer = this;
        this.$input.keydown(function(e) {
            if (e.which === 27) {   //ESC
                outer.hide_input();
                return false;
            } else if (e.which === 13) {
                let username = outer.playground.root.settings.username;
                let text = outer.$input.val();
                if (text) {
                    outer.$input.val(&#34;&#34;);
                    outer.add_message(username, text);
                }
                return false;
            }
        });
    }
    show_history() {
        let outer = this;
        this.$history.fadeIn();
        if (this.func_id) clearTimeout(this.func_id);
        this.func_id = setTimeout(function() {
            outer.$history.fadeOut();
            outer.func_id = null;
        }, 3000);
    }
    render_message(message) {
        return $(`&lt;div&gt;${message}&lt;/div&gt;`);
    }
    add_message(username, text) {
        this.show_history();
        let message = `[${username}] ${text}`;
        this.$history.append(this.render_message(message));
        this.$history.scrollTop(this.$history[0].scrollHeight);
    }
    show_input() {
        this.show_history();
        this.$input.show();
        this.$input.focus();    // è¾“å…¥æ—¶ï¼Œèšç„¦äºè¾“å…¥æ¡†
    }
    hide_input() {
        this.$input.hide();
        this.playground.game_map.$canvas.focus();   // é€€å‡ºæ—¶ï¼Œèšç„¦å›æ¸¸æˆç•Œé¢
    }
}
</code></pre><p><code>playground/zbase.js</code></p>
<p>æŠŠå®ƒåˆ›å»ºå‡ºæ¥</p>
<pre tabindex="0"><code>class AcGamePlayground {
    ...
    show(mode) {    //æ‰“å¼€ playground ç•Œé¢
        ...
        else if (mode === &#34;multi mode&#34;) {
            this.chat_field = new ChatField(this);
            ...
        }

    }
}
</code></pre><p><code>playground/player/zbase.js</code></p>
<p>æ·»åŠ ç›‘å¬äº‹ä»¶</p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    ...
    add_listening_events() {
        ...
        this.playground.game_map.$canvas.keydown(function(e) {
            if (e.which === 13) {   // enter (æ˜¾ç¤ºå¯¹è¯æ¡†)
                if (outer.playground.mode === &#34;multi mode&#34;) {
                    outer.playground.chat_field.show_input();
                    return false;
                }
            } else if (e.which === 27) {    // escï¼ˆå…³é—­å¯¹è¯æ¡†ï¼‰
                if (outer.playground.mode === &#34;multi mode&#34;) {
                    outer.playground.char_field.hide_input();
                    return false;
                }
            }
            ...
        }
    }
}
</code></pre><p><code>game.css</code></p>
<pre tabindex="0"><code>...
.ac-game-chat-field-history {
    position: absolute;
    top: 66%;
    left: 20%;
    transform: translate(-50%, -50%);
    width: 20%;
    height: 32%;
    color: white;
    font-size: 2vh;
    padding: 5px;
    overflow: auto;
}

.ac-game-chat-field-history::-webkit-scrollbar {
    width: 0;
}

.ac-game-chat-field-input {
    position: absolute;
    top: 86%;
    left: 20%;
    transform: translate(-50%, -50%);
    width: 20%;
    height: 3vh;
    color: white;
    font-size: 2vh;
    background-color: rgba(222,225,230, 0.2);
}
</code></pre><h2 id="è”æœºèŠå¤©çª—">è”æœºèŠå¤©çª—</h2>
<h3 id="å‰ç«¯-4">å‰ç«¯</h3>
<p><code>playground/chat_field/zbase.js</code></p>
<pre tabindex="0"><code>class ChatField {
    ...
    add_listening_events() {
        ...
        this.$input.keydown(function(e) {
            ...
            else if (e.which === 13) {
                ...
                if (text) {
                    ...
                    outer.playground.mps.send_message(text);
                }
                ...
            }
        });
    }
    ...
}
</code></pre><p><code>js/src/playground/socket/multiplayer/zbase.js</code></p>
<pre tabindex="0"><code>class MultiPlayerSocket {
    ...
    send_message(text) {
        let outer = this;
        this.ws.send(JSON.stringify({
            &#39;event&#39;: &#34;message&#34;,
            &#39;uuid&#39;: outer.uuid,
            &#39;username&#39;: outer.playground.root.settings.username,
            &#39;text&#39;: text,
        }));
    }
    receive_message(username, text) {
        this.playground.chat_field.add_message(username, text);
    }
}
</code></pre><h3 id="åç«¯-4">åç«¯</h3>
<p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def message(self, data):
        await self.channel_layer.group_send(
            self.room_name,
            {
                &#39;type&#39;: &#34;group_send_event&#34;,
                &#39;event&#39;: &#34;message&#34;,
                &#39;uuid&#39;: data[&#39;uuid&#39;],
                &#39;username&#39;: data[&#39;username&#39;],
                &#39;text&#39;: data[&#39;text&#39;],
            }
        )
</code></pre><h1 id="å®ç°åŒ¹é…ç³»ç»Ÿà®">å®ç°åŒ¹é…ç³»ç»Ÿà®</h1>
<ul>
<li><a href="https://www.acwing.com/file_system/file/content/whole/index/content/3435229/">9. å®ç°åŒ¹é…ç³»ç»Ÿ | è®²ä¹‰</a></li>
<li><a href="https://www.acwing.com/activity/content/code/content/2360556/">9.1 ä¸Šè¯¾ç¬”è®° | ä¸€åªé‡ç”Ÿå½©è‰²é“…ç¬”</a></li>
</ul>
<hr>
<p>æœ¬ç« èŠ‚å†…å®¹æ˜¯åˆ©ç”¨ <code>thrift</code> åˆ›å»ºå®¢æˆ·ç«¯-æœåŠ¡ç«¯äº¤äº’çš„æ¥å£</p>
<p>ç„¶ååˆ©ç”¨è¯¥æ¥å£å®Œæˆä¸€ä¸ªåŒ¹é…ç³»ç»Ÿ</p>
<p>åŒ¹é…ç³»ç»Ÿç”±ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ— + ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ + åŒ¹é…æ±  å®Œæˆ</p>
<p>åŸºæœ¬ä¸ LinuxåŸºç¡€è¯¾ é‡Œçš„éƒ¨åˆ†å®Œå…¨ä¸€è‡´</p>
<p>å½“æ—¶æˆ‘ä»¬æ˜¯æ‹¿ cpp æ¥å†™çš„ï¼Œå†™äº†å·®ä¸å¤š 200 è¡Œ</p>
<p>æœ¬èŠ‚ä¼šæ‹¿ py æ¥å®ç°ï¼Œå·®ä¸å¤š 140 è¡Œå³å¯</p>
<p><code>thrift</code> æ¥å£æ–‡ä»¶</p>
<pre tabindex="0"><code>namespace py match_service

service Match {
    i32 add_player(1: i32 score, 2: string uuid, 3: string username, 4: string photo, 5: string channel_name),
}
</code></pre><p>ç„¶åç”¨è¯¥æºæ–‡ä»¶ç”Ÿæˆæ¥å£æ–‡ä»¶</p>
<h2 id="æœåŠ¡ç«¯">æœåŠ¡ç«¯</h2>
<p>é…ç½® <code>asgi.py</code> è®©æœåŠ¡ç«¯è¿›ç¨‹å¯ä»¥è°ƒç”¨å®¢æˆ·ç«¯è¿›ç¨‹é‡Œçš„å‡½æ•°</p>
<p><code>acapp/acapp/asgi.py</code></p>
<pre tabindex="0"><code>import os

import django
os.environ.setdefault(&#39;DJANGO_SETTINGS_MODULE&#39;, &#39;acapp.settings&#39;)
django.setup()
...
from channels.layers import get_channel_layer
channel_layer = get_channel_layer()
...
</code></pre><p><code>acapp/match_system/src/main.py</code></p>
<pre tabindex="0"><code>#! /usr/bin/env python3

import glob
import sys
sys.path.insert(0, glob.glob(&#39;../../&#39;)[0])

from match_server.match_service import Match

from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol
from thrift.server import TServer

from queue import Queue
from time import sleep
from threading import Thread

from acapp.asgi import channel_layer
from asgiref.sync import async_to_sync
from django.core.cache import cache

queue = Queue()  # æ¶ˆæ¯é˜Ÿåˆ—

class Player:
    def __init__(self, score, uuid, username, photo, channel_name):
        self.score = score
        self.uuid = uuid
        self.username = username
        self.photo = photo
        self.channel_name = channel_name
        self.waiting_time = 0  # ç­‰å¾…æ—¶é—´


class Pool:
    def __init__(self):
        self.players = []

    def add_player(self, player):
        self.players.append(player)

    def check_match(self, a, b):
        dt = abs(a.score - b.score)
        a_max_dif = a.waiting_time * 50
        b_max_dif = b.waiting_time * 50
        return dt &lt;= a_max_dif and dt &lt;= b_max_dif

    def match_success(self, ps):
        print(&#34;Match Success: %s %s %s&#34; % (ps[0].username, ps[1].username, ps[2].username))
        room_name = &#34;room-%s-%s-%s&#34; % (ps[0].uuid, ps[1].uuid, ps[2].uuid)
        players = []
        for p in ps:
            async_to_sync(channel_layer.group_add)(room_name, p.channel_name)
            players.append({
                &#39;uuid&#39;: p.uuid,
                &#39;username&#39;: p.username,
                &#39;photo&#39;: p.photo,
                &#39;hp&#39;: 100,
            })
        cache.set(room_name, players, 3600)  # æœ‰æ•ˆæ—¶é—´ï¼š1å°æ—¶
        for p in ps:
            async_to_sync(channel_layer.group_send)(
                room_name,
                {
                    &#39;type&#39;: &#34;group_send_event&#34;,
                    &#39;event&#39;: &#34;create_player&#34;,
                    &#39;uuid&#39;: p.uuid,
                    &#39;username&#39;: p.username,
                    &#39;photo&#39;: p.photo,
                }
            )

    def increase_waiting_time(self):
        for player in self.players:
            player.waiting_time += 1

    def match(self):
        while len(self.players) &gt;= 3:
            self.players = sorted(self.players, key=lambda p: p.score)
            flag = False
            for i in range(len(self.players) - 2):
                a, b, c = self.players[i], self.players[i + 1], self.players[i + 2]
                if self.check_match(a, b) and self.check_match(a, c) and self.check_match(b, c):
                    self.match_success([a, b, c])
                    self.players = self.players[:i] + self.players[i + 3:]
                    flag = True
                    break
            if not flag:
                break

        self.increase_waiting_time()



class MatchHandler:
    def add_player(self, score, uuid, username, photo, channel_name):
        print(&#34;Add Player: %s %d&#34; % (username, score))
        player = Player(score, uuid, username, photo, channel_name)
        queue.put(player)
        return 0


def get_player_from_queue():
    try:
        return queue.get_nowait()
    except:
        return None


def worker():
    pool = Pool()
    while True:
        player = get_player_from_queue()
        if player:
            pool.add_player(player)
        else:
            pool.match()
            sleep(1)



if __name__ == &#39;__main__&#39;:
    handler = MatchHandler()
    processor = Match.Processor(handler)
    transport = TSocket.TServerSocket(host=&#39;127.0.0.1&#39;, port=9090)
    tfactory = TTransport.TBufferedTransportFactory()
    pfactory = TBinaryProtocol.TBinaryProtocolFactory()

    server = TServer.TThreadedServer(
        processor, transport, tfactory, pfactory)

    Thread(target=worker, daemon=True).start()

    print(&#39;Starting the server...&#39;)
    server.serve()
    print(&#39;done.&#39;)
</code></pre><h2 id="å®¢æˆ·ç«¯">å®¢æˆ·ç«¯</h2>
<p>æ‰©å±•æ•°æ®åº“è¡¨ï¼Œè®©å…¶å¯ä»¥å­˜æ”¾ rankåˆ† çš„ä¿¡æ¯</p>
<p><code>game/models/player/player.py</code></p>
<pre tabindex="0"><code>...
class Player(models.Model):
    ...
    score = models.IntegerField(default=1500)
    ...
</code></pre><p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>from channels.generic.websocket import AsyncWebsocketConsumer
import json
from django.conf import settings
from django.core.cache import cache

from thrift import Thrift
from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol

from match_system.src.match_server.match_service import Match
from game.models.player.player import Player
from channels.db import database_sync_to_async

class MultiPlayer(AsyncWebsocketConsumer):
    async def connect(self):
        await self.accept()

    async def disconnect(self, close_code):
        if self.room_name:
            await self.channel_layer.group_discard(self.room_name, self.channel_name)

    async def create_player(self, data):
        self.room_name = None
        self.uuid = data[&#39;uuid&#39;]
        # Make socket
        transport = TSocket.TSocket(&#39;127.0.0.1&#39;, 9090)
        # Buffering is critical. Raw sockets are very slow
        transport = TTransport.TBufferedTransport(transport)

        # Wrap in a protocol
        protocol = TBinaryProtocol.TBinaryProtocol(transport)

        # Create a client to use the protocol encoder
        client = Match.Client(protocol)

        def db_get_player():
            return Player.objects.get(user__username=data[&#39;username&#39;])

        player = await database_sync_to_async(db_get_player)()

        # Connect!
        transport.open()

        client.add_player(player.score, data[&#39;uuid&#39;], data[&#39;username&#39;], data[&#39;photo&#39;], self.channel_name)

        # Close!
        transport.close()
    
    async def group_send_event(self, data):
        if not self.room_name:
            keys = cache.keys(&#39;*%s*&#39; % (self.uuid))
            if keys:
                self.room_name = keys[0]
        await self.send(text_data=json.dumps(data))
    ...
</code></pre><h1 id="é¡¹ç›®æ”¶å°¾à®">é¡¹ç›®æ”¶å°¾à®</h1>
<h2 id="åŠ å¯†å‹ç¼©jsä»£ç ">åŠ å¯†ã€å‹ç¼©jsä»£ç </h2>
<p>å®‰è£… <code>terser</code> :</p>
<pre tabindex="0"><code>sudo apt-get update
sudo apt-get install npm
sudo npm install terser -g
</code></pre><p><code>terser</code> ä¸ä»…æ”¯æŒæ–‡ä»¶è¾“å…¥ï¼Œä¹Ÿæ”¯æŒæ ‡å‡†è¾“å…¥ã€‚ç»“æœä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚</p>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre tabindex="0"><code>terser xxx.js -c -m
</code></pre><p>æˆ‘ä»¬å°†æ•´åˆ <code>js</code> æ–‡ä»¶çš„è„šæœ¬ä¿®æ”¹ä¸€ä¸‹å³å¯ï¼š</p>
<p><code>scripts/compress_game_js.sh</code></p>
<pre tabindex="0"><code>#! /bin/bash

JS_PATH=/home/acs/acapp/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find $JS_PATH_SRC -type f -name &#39;*.js&#39; | sort | xargs cat | terser -c -m &gt; ${JS_PATH_DIST}game.js

echo &#34;yes&#34; | python3 manage.py collectstatic
</code></pre><h2 id="æ¸…ç†ç›‘å¬å‡½æ•°">æ¸…ç†ç›‘å¬å‡½æ•°</h2>
<p>åœ¨AcAPPå…³é—­ä¹‹å‰è§¦å‘çš„äº‹ä»¶å¯ä»¥é€šè¿‡å¦‚ä¸‹apiæ·»åŠ ï¼š</p>
<pre tabindex="0"><code>AcWingOS.api.window.on_close(func);
</code></pre><p>æ³¨æ„ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªé¡µé¢ä¸­ï¼Œå¤šä¸ª <code>acapp</code> å¼•å…¥çš„ <code>js</code> ä»£ç åªä¼šåŠ è½½ä¸€æ¬¡ï¼Œå› æ­¤ <code>AC_GAME_OBJECTS</code> ç­‰å…¨å±€å˜é‡æ˜¯åŒä¸€ä¸ªé¡µé¢ã€åŒä¸€ä¸ª <code>acapp</code> çš„æ‰€æœ‰çª—å£å…±ç”¨çš„</li>
<li>å„è‡ªåˆ›å»ºçš„å±€éƒ¨å˜é‡æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯”å¦‚ <code>new AcGame()</code> åˆ›å»ºå‡ºçš„å¯¹è±¡å„ä¸ªçª—å£æ˜¯ç‹¬ç«‹çš„</li>
</ul>
<p>æˆ‘ä»¬ç»™æ¯ä¸€ä¸ªçª—å£åˆ›å»ºä¸€ä¸ª <code>uid</code> ç„¶åæ ¹æ®ä¸åŒçš„ <code>uid</code> è¿›è¡Œäº‹ä»¶è§£ç»‘</p>
<p><code>playground/zbase.js</code></p>
<pre tabindex="0"><code>class AcGamePlayground {
    ...
    create_uuid() {
        let res = &#34;&#34;;
        for (let i = 0; i &lt; 8; i ++ ) {
            let x = parseInt(Math.floor(Math.random() * 10));   //[0, 10)
            res += x;
        }
        return res;
    }
    start() {
        let outer = this;
        let uuid = this.create_uuid();
        $(window).on(`resize.${uuid}`, function() {
            outer.resize();
        });

        if (this.root.AcWingOS) {
            outer.root.AcWingOS.api.window.on_close(function() {
                $(window).off(`resize.${uuid}`);
            });
        }
    }
    ...
}
</code></pre><h2 id="ç¼–å†™æ¯å±€æ¸¸æˆçš„ç»“æŸç•Œé¢">ç¼–å†™æ¯å±€æ¸¸æˆçš„ç»“æŸç•Œé¢</h2>
<p>å•ç‹¬åˆ›å»ºä¸€ä¸ªç»“æŸç•Œé¢ï¼Œç„¶åæ¸¸æˆç»“æŸçš„æ—¶å€™æ¸²æŸ“å‡ºè¯¥ç»“æŸç•Œé¢å³å¯</p>
<p>å› ä¸ºç»“æŸç•Œé¢è¦è¦†ç›–åœ¨æ¸¸æˆç•Œé¢ä¹‹ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆä¿®æ”¹ä¸€ä¸‹æ¸¸æˆå¼•æ“ï¼Œæ·»åŠ ä¸€ä¸ª <code>late_update</code></p>
<p>åœ¨æ¯ä¸€å¸§æ¸²æŸ“çš„å†…å®¹æœ€åå†æ¸²æŸ“ï¼Œä»è€Œå®ç°ç»“æŸç•Œé¢å åŠ åœ¨æ¸¸æˆç•Œé¢ä¹‹ä¸Šçš„æ•ˆæœ</p>
<p><code>ac_game_object/zbase.js</code></p>
<pre tabindex="0"><code>...
class AcGameObject {
    ...
    late_update() { // æ¯ä¸€å¸§å‡ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¸”åœ¨æ‰€æœ‰ update æ‰§è¡Œå®Œåæ‰æ‰§è¡Œ

    }
    ...
}
...
let AC_GAME_ANIMATION = function(timestamp) {
    ...
    for (let i = 0; i &lt; AC_GAME_OBJECTS.length; i ++ ) {
        let obj = AC_GAME_OBJECTS[i];
        obj.late_update();
    }
    ...
}
...
</code></pre><p>ç„¶åæˆ‘ä»¬åšä¸€ä¸ªæ¸²æŸ“å‡ºç»“æŸç•Œé¢çš„ç±»</p>
<p><code>playground/score_board/zbase.js</code></p>
<pre tabindex="0"><code>class ScoreBoard extends AcGameObject {
    constructor(playground) {
        super();
        this.playground = playground;
        this.ctx = this.playground.game_map.ctx;

        this.state = null;  // win-èƒœåˆ©ï¼›lose-å¤±è´¥

        this.win_img = new Image();
        this.win_img.src = &#34;https://cdn.acwing.com/media/article/image/2021/12/17/1_8f58341a5e-win.png&#34;;

        this.lose_img = new Image();
        this.lose_img.src = &#34;https://cdn.acwing.com/media/article/image/2021/12/17/1_9254b5f95e-lose.png&#34;;
    }
    start() {
    }

    add_listening_events() {    // ç‚¹å‡»åï¼Œè¿”å›ä¸»é¡µé¢
        let outer = this;
        let $canvas = this.playground.game_map.$canvas;

        $canvas.on(&#39;click&#39;, function() {
            outer.playground.hide();
            outer.playground.root.menu.show();
        });
    }

    win() {
        this.state = &#34;win&#34;;
        let outer = this;
        setTimeout(function() {
            outer.add_listening_events();
        }, 1000);   // 1ç§’åç›‘å¬ç‚¹å‡»äº‹ä»¶
    }

    lose() {
        this.state = &#34;lose&#34;;
        let outer = this;
        setTimeout(function() {
            outer.add_listening_events();
        }, 1000);   // 1ç§’åç›‘å¬ç‚¹å‡»äº‹ä»¶
    }

    late_update() {
        this.render();  // æ¸²æŸ“åœ¨å›¾å±‚æœ€ä¸Šæ–¹
    }
    render() {
        let len = this.playground.height / 2;
        if (this.state === &#34;win&#34;) {
            this.ctx.drawImage(this.win_img, this.playground.width / 2 - len / 2, this.playground.height / 2 - len / 2, len, len);
        } else if (this.state === &#34;lose&#34;) {
            this.ctx.drawImage(this.lose_img, this.playground.width / 2 - len / 2, this.playground.height / 2 - len / 2, len, len);
        }
    }
}
</code></pre><p>é€šè¿‡æ¸¸æˆç»“æŸçš„é€»è¾‘åˆ¤æ–­ï¼Œæ¸²æŸ“ç»“æŸç•Œé¢ï¼ŒåŒæ—¶åœ¨ç»“æŸå¹¶è¿”å›ä¸»èœå•çš„æ—¶å€™ï¼Œé‡ç½®æ¸¸æˆå…ƒç´ </p>
<p>æ¸¸æˆå…ƒç´ é‡ç½®</p>
<p><code>playground/zbase.js</code></p>
<pre tabindex="0"><code>class AcGamePlayground {
    ...
    show(mode) {    // æ‰“å¼€ playground ç•Œé¢
        ...
        this.score_board = new ScoreBoard(this);
        ...
    }
    ...
    hide() {
        // æ¸…ç©ºæ‰€æœ‰æ¸¸æˆå…ƒç´ 
        while (this.players &amp;&amp; this.players.length &gt; 0) {
            this.players[0].destroy();
        }
        if (this.game_map) {
            this.game_map.destroy();
            this.game_map = null;
        }
        if (this.notice_board) {
            this.notice_board.destroy();
            this.notice_board = null;
        }
        if (this.score_board) {
            this.score_board.destroy();
            this.score_board = null;
        }
        this.$playground.empty();   // æ¸…ç©ºæ‰€æœ‰htmlæ ‡ç­¾
        this.$playground.hide();
    }
}
</code></pre><p>æ¸¸æˆç»“æŸçš„é€»è¾‘åˆ¤æ–­</p>
<p><code>playground/player/zbase.js</code></p>
<pre tabindex="0"><code>class Player extends AcGameObject {
    ...
    update() {
        ...
        this.update_win();
        ...
    }
    update_win() {
        // ç«èµ›çŠ¶æ€ï¼Œä¸”åªæœ‰ä¸€åç©å®¶ï¼Œä¸”æ”¹åç©å®¶å°±æ˜¯æˆ‘ï¼Œåˆ™èƒœåˆ©
        if (this.playground.state === &#34;fighting&#34; &amp;&amp; this.character === &#34;me&#34; &amp;&amp; this.playground.players.length === 1) {
            this.playground.state = &#34;over&#34;;
            this.playground.score_board.win();
        }
    }
    ...
    on_destroy() {
        // æˆ‘æ­»äº¡ï¼Œä¸”æ¸¸æˆå¤„äºç«èµ›çŠ¶æ€ï¼Œåˆ™å¤±è´¥
        if (this.character === &#34;me&#34; &amp;&amp; this.playground.state === &#34;fighting&#34;) {
            this.playground.state = &#34;over&#34;
            this.playground.score_board.lose();
        }
        ...
    }
}
</code></pre><h2 id="æ›´æ–°æˆ˜ç»©">æ›´æ–°æˆ˜ç»©</h2>
<p>è¿™é‡Œæˆ‘ä»¬å®Œå…¨äº¤ç»™åç«¯æ¥åˆ¤æ–­</p>
<p>åœ¨å¤„ç†å¹¿æ’­çš„ <code>attack</code> ä¿¡æ¯çš„æ—¶å€™ï¼Œå…ˆå‰æˆ‘ä»¬é¢å¤–ç•™äº†ä¸€ä¸ªå‚æ•° <code>hp</code></p>
<p>å›´ç»•è¯¥ <code>hp</code> è¿›è¡Œç»­å†™ï¼Œè‹¥å½“å‰æˆ¿é—´å†… <code>hp</code> å¤§äº 0 çš„ç©å®¶å°‘äºç­‰äº 1 ä¸ª</p>
<p>åˆ™å¯¹äºæ‰€æœ‰ <code>hp</code> ä¸º 0 çš„ç©å®¶å‡ <code>rank</code> åˆ†ï¼Œå¤§äº 0 çš„ç©å®¶åŠ  <code>rank</code> åˆ†</p>
<p><code>consumers/multiplayer/index.py</code></p>
<pre tabindex="0"><code>...
class MultiPlayer(AsyncWebsocketConsumer):
    ...
    async def attack(self, data):
        if not self.room_name:
            return
        players = cache.get(self.room_name)

        if not players:
            return

        for player in players:
            if player[&#39;uuid&#39;] == data[&#39;attackee_uuid&#39;]:
                player[&#39;hp&#39;] -= 25

        remain_cnt = 0
        for player in players:
            if player[&#39;hp&#39;] &gt; 0:
                remain_cnt += 1

        if remain_cnt &gt; 1:  # ç»§ç»­è¿›è¡Œæ¸¸æˆ
            if self.room_name:
                cache.set(self.room_name, players, 3600)
        else:   # ç»“ç®— 
            def db_update_player_score(username, score):
                player = Player.objects.get(user__username=username)
                player.score += score
                player.save()
            for player in players:
                if player[&#39;hp&#39;] &lt;= 0:
                    await database_sync_to_async(db_update_player_score)(player[&#39;username&#39;], -5)
                else:
                    await database_sync_to_async(db_update_player_score)(player[&#39;username&#39;], 10)
        ...
    ...
</code></pre><h2 id="æ·»åŠ faviconico">æ·»åŠ favicon.ico</h2>
<p>è¿™æ˜¯ä¿®æ­£ä¸€ä¸ªå° BUGï¼Œä¹‹å‰ web ç«¯ä¸€ç›´æ²¡æœ‰ç½‘é¡µæ˜¾ç¤ºå›¾æ ‡ï¼Œè¿™é‡Œç»™ä»–åŠ ä¸Šå»</p>
<p><code>game/templates/multiends/web.html</code></p>
<pre tabindex="0"><code>...
&lt;head&gt;
    ...
    &lt;link rel=&#34;icon&#34; href=&#34;https://cdn.acwing.com/media/article/image/2021/12/17/1_be4c11ce5f-acapp.png&#34;&gt;
&lt;/head&gt;
...
</code></pre><h1 id="å„ç§ç¯å¢ƒå‘½ä»¤">å„ç§ç¯å¢ƒå‘½ä»¤</h1>
<ol>
<li>å¯åŠ¨<code>django</code>é¡¹ç›®ï¼Œåœ¨<code>~/acapp</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</li>
</ol>
<pre tabindex="0"><code>python3 manage.py runserver 0.0.0.0:8000
</code></pre><ol start="2">
<li>æ¯æ¬¡ä¿®æ”¹å¥½Â <code>game/static</code>  ä¸‹çš„æ–‡ä»¶åï¼Œéœ€è¦åœ¨<code>~/acapp</code>ç›®å½•ä¸‹è¿è¡Œæ‰“åŒ…æ–‡ä»¶ï¼š</li>
</ol>
<pre tabindex="0"><code>./scripts/compress_game_js.sh
</code></pre><ol start="3">
<li>åœ¨å®šä¹‰å®Œä¸€ä¸ªæ•°æ®è¡¨ä¹‹åï¼Œéœ€è¦å°†åˆ›å»ºçš„æ•°æ®è¡¨æ›´æ–°åˆ° <code>django</code> çš„æ•°æ®åº“ä¸­å»ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f00">$</span> python3 manage.py makemigrations
</span></span><span style="display:flex;"><span>&gt; Migrations <span style="color:#fff;font-weight:bold">for</span> <span style="color:#0ff;font-weight:bold">&#39;game&#39;</span>:
</span></span><span style="display:flex;"><span>&gt;   game/migrations/<span style="color:#ff0;font-weight:bold">0001</span>_initial.py
</span></span><span style="display:flex;"><span>&gt;     - Create model Player
</span></span><span style="display:flex;"><span><span style="color:#f00">$</span> 
</span></span><span style="display:flex;"><span><span style="color:#f00">$</span> python3 manage.py migrate
</span></span><span style="display:flex;"><span>&gt; Operations to perform:
</span></span><span style="display:flex;"><span>&gt;   Apply <span style="color:#fff;font-weight:bold">all</span> migrations: admin, auth, contenttypes, game, sessions
</span></span><span style="display:flex;"><span>&gt; Running migrations:
</span></span><span style="display:flex;"><span>&gt;   Applying game<span style="color:#ff0;font-weight:bold">.0001</span>_initial... OK
</span></span></code></pre></div><ol start="4">
<li>å¯åŠ¨<code>nginx</code>æœåŠ¡ï¼Œç”¨äºåŸŸåè®¿é—®ï¼š</li>
</ol>
<pre tabindex="0"><code>sudo /etc/init.d/nginx start
</code></pre><ol start="5">
<li>å¯åŠ¨<code>uwsgi</code>æœåŠ¡ï¼Œç”¨äºåŸŸåè®¿é—®ï¼š</li>
</ol>
<pre tabindex="0"><code>uwsgi --ini scripts/uwsgi.ini
</code></pre><ol start="6">
<li>å…³é—­<code>uwsgi</code>æœåŠ¡ï¼š</li>
</ol>
<pre tabindex="0"><code>sudo pkill -f uwsgi -9
</code></pre><ol start="7">
<li>å¯åŠ¨ <code>redis-server</code>ï¼Œç”¨äºä¸€é”®ç™»å½•ï¼š</li>
</ol>
<pre tabindex="0"><code>sudo redis-server /etc/redis/redis.conf
</code></pre><ol start="8">
<li>å¯åŠ¨ <code>Django_channels</code>ï¼Œç”¨äºè”æœºå¯¹æˆ˜ï¼Œåœ¨<code>~/acapp</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</li>
</ol>
<pre tabindex="0"><code>daphne -b 0.0.0.0 -p 5015 acapp.asgi:application
</code></pre><ol start="9">
<li>å¯åŠ¨<code>thrift</code>æœåŠ¡ï¼Œç”¨äºåŒ¹é…ç³»ç»Ÿï¼Œåœ¨<code>~/acapp/match_system/src/</code>ç›®å½•ä¸‹æ‰§è¡Œï¼š</li>
</ol>
<pre tabindex="0"><code>./main.py
</code></pre><ol start="10">
<li>ç‰ˆæœ¬æ›´æ–°ï¼Œåœ¨<a href="https://www.acwing.com/user/myspace/application/update/2433/">æœ¯å£«ä¹‹æˆ˜</a>ä¸­å°† <code>jsåœ°å€</code> ä¸€æ æ›´æ–°ä¸ºï¼š</li>
</ol>
<pre tabindex="0"><code>// æœ¬åœ°æ–‡ä»¶å¤¹ä¸­å¯¹åº”çš„æ–‡ä»¶ä¹Ÿéœ€è¦æ›´æ”¹åå­—
https://app2433.acapp.acwing.com.cn/static/js/dist/game-ç‰ˆæœ¬å·.js
</code></pre>]]></content:encoded>
    </item>
    
    <item>
      <title>Hello World</title>
      <link>https://xancoding.cn/posts/2022-10-12-07-27-58/</link>
      <pubDate>Wed, 12 Oct 2022 07:27:58 +0800</pubDate>
      
      <guid>https://xancoding.cn/posts/2022-10-12-07-27-58/</guid>
      <description>&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;int&lt;/span&gt; main() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    printf(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;Hello, World&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt;(&lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;int&lt;/span&gt; main() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    std::cout &amp;lt;&amp;lt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;Hello World&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#ff0;font-weight:bold&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;class&lt;/span&gt; Main {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;void&lt;/span&gt; main(String[] args) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        System.&lt;span style=&#34;color:#007f7f&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#007f7f&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;Hello, World!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;Hello, World&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Hello, World
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-JavaScript&#34; data-lang=&#34;JavaScript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;document&lt;/span&gt;.write(&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#39;Hello, World&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fff;font-weight:bold&#34;&gt;print&lt;/span&gt; (&lt;span style=&#34;color:#0ff;font-weight:bold&#34;&gt;&amp;#34;Hello, World&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> main() {
</span></span><span style="display:flex;"><span>    printf(<span style="color:#0ff;font-weight:bold">&#34;Hello, World&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span>(<span style="color:#ff0;font-weight:bold">0</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">int</span> main() {
</span></span><span style="display:flex;"><span>    std::cout &lt;&lt; <span style="color:#0ff;font-weight:bold">&#34;Hello World&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">return</span> <span style="color:#ff0;font-weight:bold">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">class</span> Main {
</span></span><span style="display:flex;"><span>    <span style="color:#fff;font-weight:bold">public</span> <span style="color:#fff;font-weight:bold">static</span> <span style="color:#fff;font-weight:bold">void</span> main(String[] args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#007f7f">out</span>.<span style="color:#007f7f">println</span>(<span style="color:#0ff;font-weight:bold">&#34;Hello, World!&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">echo</span> <span style="color:#0ff;font-weight:bold">&#34;Hello, World&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>Hello, World
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-JavaScript" data-lang="JavaScript"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">document</span>.write(<span style="color:#0ff;font-weight:bold">&#39;Hello, World&#39;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">print</span> (<span style="color:#0ff;font-weight:bold">&#34;Hello, World&#34;</span>)
</span></span></code></pre></div>]]></content:encoded>
    </item>
    
  </channel>
</rss>
